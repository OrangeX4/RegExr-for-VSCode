{"version":3,"file":"regexr.js","sources":["../dev/lib/codemirror.js","../dev/lib/clipboard.js","../dev/lib/native.js","../dev/src/events/Event.js","../dev/src/events/EventDispatcher.js","../dev/src/utils/DOMUtils.js","../dev/src/utils/Utils.js","../dev/src/controls/Tooltip.js","../dev/src/net/Server.js","../dev/src/utils/CMUtils.js","../dev/src/utils/Track.js","../dev/src/controls/List.js","../dev/src/ExpressionLexer.js","../dev/src/views/ExpressionHighlighter.js","../dev/src/views/ExpressionHover.js","../dev/src/profiles/core.js","../dev/src/profiles/pcre.js","../dev/src/profiles/javascript.js","../dev/src/profiles/profiles.js","../dev/src/views/Expression.js","../dev/src/utils/UID.js","../dev/src/views/TextHighlighter.js","../dev/src/views/TextHover.js","../dev/src/views/Text.js","../dev/src/views/tools/Explain.js","../dev/src/views/tools/Details.js","../dev/src/views/tools/Replace.js","../dev/src/SubstLexer.js","../dev/src/views/Tools.js","../dev/src/docs/sidebar_content.js","../dev/src/controls/LinkRow.js","../dev/src/views/Example.js","../dev/src/views/Community.js","../dev/src/controls/Status.js","../dev/src/views/Account.js","../dev/src/views/Share.js","../dev/src/views/Sidebar.js","../dev/src/views/Theme.js","../dev/src/docs/Reference.js","../dev/src/docs/reference_content.js","../dev/src/helpers/BrowserSolver.js","../dev/src/helpers/ServerSolver.js","../dev/src/Flavor.js","../dev/src/RefCoverage.js","../dev/src/helpers/Prefs.js","../dev/src/RegExr.js","../dev/src/app.js"],"sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// This is CodeMirror (http://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n// Kludges for bugs and behavior differences that can't be feature\n// detected are enabled based on userAgent etc sniffing.\nvar userAgent = navigator.userAgent\nvar platform = navigator.platform\n\nvar gecko = /gecko\\/\\d/i.test(userAgent)\nvar ie_upto10 = /MSIE \\d/.test(userAgent)\nvar ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent)\nvar edge = /Edge\\/(\\d+)/.exec(userAgent)\nvar ie = ie_upto10 || ie_11up || edge\nvar ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1])\nvar webkit = !edge && /WebKit\\//.test(userAgent)\nvar qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent)\nvar chrome = !edge && /Chrome\\//.test(userAgent)\nvar presto = /Opera\\//.test(userAgent)\nvar safari = /Apple Computer/.test(navigator.vendor)\nvar mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent)\nvar phantom = /PhantomJS/.test(userAgent)\n\nvar ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent)\nvar android = /Android/.test(userAgent)\n// This is woefully incomplete. Suggestions for alternative methods welcome.\nvar mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent)\nvar mac = ios || /Mac/.test(platform)\nvar chromeOS = /\\bCrOS\\b/.test(userAgent)\nvar windows = /win/i.test(platform)\n\nvar presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/)\nif (presto_version) { presto_version = Number(presto_version[1]) }\nif (presto_version && presto_version >= 15) { presto = false; webkit = true }\n// Some browsers use the wrong event properties to signal cmd/ctrl on OS X\nvar flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11))\nvar captureRightClick = gecko || (ie && ie_version >= 9)\n\nfunction classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\nvar rmClass = function(node, cls) {\n  var current = node.className\n  var match = classTest(cls).exec(current)\n  if (match) {\n    var after = current.slice(match.index + match[0].length)\n    node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\")\n  }\n}\n\nfunction removeChildren(e) {\n  for (var count = e.childNodes.length; count > 0; --count)\n    { e.removeChild(e.firstChild) }\n  return e\n}\n\nfunction removeChildrenAndAdd(parent, e) {\n  return removeChildren(parent).appendChild(e)\n}\n\nfunction elt(tag, content, className, style) {\n  var e = document.createElement(tag)\n  if (className) { e.className = className }\n  if (style) { e.style.cssText = style }\n  if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)) }\n  else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]) } }\n  return e\n}\n// wrapper for elt, which removes the elt from the accessibility tree\nfunction eltP(tag, content, className, style) {\n  var e = elt(tag, content, className, style)\n  e.setAttribute(\"role\", \"presentation\")\n  return e\n}\n\nvar range\nif (document.createRange) { range = function(node, start, end, endNode) {\n  var r = document.createRange()\n  r.setEnd(endNode || node, end)\n  r.setStart(node, start)\n  return r\n} }\nelse { range = function(node, start, end) {\n  var r = document.body.createTextRange()\n  try { r.moveToElementText(node.parentNode) }\n  catch(e) { return r }\n  r.collapse(true)\n  r.moveEnd(\"character\", end)\n  r.moveStart(\"character\", start)\n  return r\n} }\n\nfunction contains(parent, child) {\n  if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n    { child = child.parentNode }\n  if (parent.contains)\n    { return parent.contains(child) }\n  do {\n    if (child.nodeType == 11) { child = child.host }\n    if (child == parent) { return true }\n  } while (child = child.parentNode)\n}\n\nfunction activeElt() {\n  // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n  // IE < 10 will throw when accessed while the page is loading or in an iframe.\n  // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n  var activeElement\n  try {\n    activeElement = document.activeElement\n  } catch(e) {\n    activeElement = document.body || null\n  }\n  while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n    { activeElement = activeElement.shadowRoot.activeElement }\n  return activeElement\n}\n\nfunction addClass(node, cls) {\n  var current = node.className\n  if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls }\n}\nfunction joinClasses(a, b) {\n  var as = a.split(\" \")\n  for (var i = 0; i < as.length; i++)\n    { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i] } }\n  return b\n}\n\nvar selectInput = function(node) { node.select() }\nif (ios) // Mobile Safari apparently has a bug where select() is broken.\n  { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length } }\nelse if (ie) // Suppress mysterious IE10 errors\n  { selectInput = function(node) { try { node.select() } catch(_e) {} } }\n\nfunction bind(f) {\n  var args = Array.prototype.slice.call(arguments, 1)\n  return function(){return f.apply(null, args)}\n}\n\nfunction copyObj(obj, target, overwrite) {\n  if (!target) { target = {} }\n  for (var prop in obj)\n    { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n      { target[prop] = obj[prop] } }\n  return target\n}\n\n// Counts the column offset in a string, taking tabs into account.\n// Used mostly to find indentation.\nfunction countColumn(string, end, tabSize, startIndex, startValue) {\n  if (end == null) {\n    end = string.search(/[^\\s\\u00a0]/)\n    if (end == -1) { end = string.length }\n  }\n  for (var i = startIndex || 0, n = startValue || 0;;) {\n    var nextTab = string.indexOf(\"\\t\", i)\n    if (nextTab < 0 || nextTab >= end)\n      { return n + (end - i) }\n    n += nextTab - i\n    n += tabSize - (n % tabSize)\n    i = nextTab + 1\n  }\n}\n\nvar Delayed = function() {this.id = null};\nDelayed.prototype.set = function (ms, f) {\n  clearTimeout(this.id)\n  this.id = setTimeout(f, ms)\n};\n\nfunction indexOf(array, elt) {\n  for (var i = 0; i < array.length; ++i)\n    { if (array[i] == elt) { return i } }\n  return -1\n}\n\n// Number of pixels added to scroller and sizer to hide scrollbar\nvar scrollerGap = 30\n\n// Returned or thrown by various protocols to signal 'I'm not\n// handling this'.\nvar Pass = {toString: function(){return \"CodeMirror.Pass\"}}\n\n// Reused option objects for setSelection & friends\nvar sel_dontScroll = {scroll: false};\nvar sel_mouse = {origin: \"*mouse\"};\nvar sel_move = {origin: \"+move\"};\n// The inverse of countColumn -- find the offset that corresponds to\n// a particular column.\nfunction findColumn(string, goal, tabSize) {\n  for (var pos = 0, col = 0;;) {\n    var nextTab = string.indexOf(\"\\t\", pos)\n    if (nextTab == -1) { nextTab = string.length }\n    var skipped = nextTab - pos\n    if (nextTab == string.length || col + skipped >= goal)\n      { return pos + Math.min(skipped, goal - col) }\n    col += nextTab - pos\n    col += tabSize - (col % tabSize)\n    pos = nextTab + 1\n    if (col >= goal) { return pos }\n  }\n}\n\nvar spaceStrs = [\"\"]\nfunction spaceStr(n) {\n  while (spaceStrs.length <= n)\n    { spaceStrs.push(lst(spaceStrs) + \" \") }\n  return spaceStrs[n]\n}\n\nfunction lst(arr) { return arr[arr.length-1] }\n\nfunction map(array, f) {\n  var out = []\n  for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i) }\n  return out\n}\n\nfunction insertSorted(array, value, score) {\n  var pos = 0, priority = score(value)\n  while (pos < array.length && score(array[pos]) <= priority) { pos++ }\n  array.splice(pos, 0, value)\n}\n\nfunction nothing() {}\n\nfunction createObj(base, props) {\n  var inst\n  if (Object.create) {\n    inst = Object.create(base)\n  } else {\n    nothing.prototype = base\n    inst = new nothing()\n  }\n  if (props) { copyObj(props, inst) }\n  return inst\n}\n\nvar nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/\nfunction isWordCharBasic(ch) {\n  return /\\w/.test(ch) || ch > \"\\x80\" &&\n    (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n}\nfunction isWordChar(ch, helper) {\n  if (!helper) { return isWordCharBasic(ch) }\n  if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n  return helper.test(ch)\n}\n\nfunction isEmpty(obj) {\n  for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n  return true\n}\n\n// Extending unicode characters. A series of a non-extending char +\n// any number of extending chars is treated as a single unit as far\n// as editing and measuring is concerned. This is not fully correct,\n// since some scripts/fonts/browsers also treat other configurations\n// of code points as a group.\nvar extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/\nfunction isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n// Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\nfunction skipExtendingChars(str, pos, dir) {\n  while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir }\n  return pos\n}\n\n// Returns the value from the range [`from`; `to`] that satisfies\n// `pred` and is closest to `from`. Assumes that at least `to` satisfies `pred`.\nfunction findFirst(pred, from, to) {\n  for (;;) {\n    if (Math.abs(from - to) <= 1) { return pred(from) ? from : to }\n    var mid = Math.floor((from + to) / 2)\n    if (pred(mid)) { to = mid }\n    else { from = mid }\n  }\n}\n\n// The display handles the DOM integration, both for input reading\n// and content drawing. It holds references to DOM nodes and\n// display-related state.\n\nfunction Display(place, doc, input) {\n  var d = this\n  this.input = input\n\n  // Covers bottom-right square when both scrollbars are present.\n  d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\")\n  d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\")\n  // Covers bottom of gutter when coverGutterNextToScrollbar is on\n  // and h scrollbar is present.\n  d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\")\n  d.gutterFiller.setAttribute(\"cm-not-content\", \"true\")\n  // Will contain the actual code, positioned to cover the viewport.\n  d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\")\n  // Elements are added to these to represent selection and cursors.\n  d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\")\n  d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\")\n  // A visibility: hidden element used to find the size of things.\n  d.measure = elt(\"div\", null, \"CodeMirror-measure\")\n  // When lines outside of the viewport are measured, they are drawn in this.\n  d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\")\n  // Wraps everything that needs to exist inside the vertically-padded coordinate system\n  d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                    null, \"position: relative; outline: none\")\n  var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\")\n  // Moved around its parent to cover visible view.\n  d.mover = elt(\"div\", [lines], null, \"position: relative\")\n  // Set to the height of the document, allowing scrolling.\n  d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\")\n  d.sizerWidth = null\n  // Behavior of elts with overflow: auto and padding is\n  // inconsistent across browsers. This is used to ensure the\n  // scrollable area is big enough.\n  d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\")\n  // Will contain the gutters, if any.\n  d.gutters = elt(\"div\", null, \"CodeMirror-gutters\")\n  d.lineGutter = null\n  // Actual scrollable element.\n  d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\")\n  d.scroller.setAttribute(\"tabIndex\", \"-1\")\n  // The element in which the editor lives.\n  d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\")\n\n  // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n  if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0 }\n  if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true }\n\n  if (place) {\n    if (place.appendChild) { place.appendChild(d.wrapper) }\n    else { place(d.wrapper) }\n  }\n\n  // Current rendered range (may be bigger than the view window).\n  d.viewFrom = d.viewTo = doc.first\n  d.reportedViewFrom = d.reportedViewTo = doc.first\n  // Information about the rendered lines.\n  d.view = []\n  d.renderedView = null\n  // Holds info about a single rendered line when it was rendered\n  // for measurement, while not in view.\n  d.externalMeasured = null\n  // Empty space (in pixels) above the view\n  d.viewOffset = 0\n  d.lastWrapHeight = d.lastWrapWidth = 0\n  d.updateLineNumbers = null\n\n  d.nativeBarWidth = d.barHeight = d.barWidth = 0\n  d.scrollbarsClipped = false\n\n  // Used to only resize the line number gutter when necessary (when\n  // the amount of lines crosses a boundary that makes its width change)\n  d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null\n  // Set to true when a non-horizontal-scrolling line widget is\n  // added. As an optimization, line widget aligning is skipped when\n  // this is false.\n  d.alignWidgets = false\n\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null\n\n  // Tracks the maximum line length so that the horizontal scrollbar\n  // can be kept static when scrolling.\n  d.maxLine = null\n  d.maxLineLength = 0\n  d.maxLineChanged = false\n\n  // Used for measuring wheel scrolling granularity\n  d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null\n\n  // True when shift is held down.\n  d.shift = false\n\n  // Used to track whether anything happened since the context menu\n  // was opened.\n  d.selForContextMenu = null\n\n  d.activeTouch = null\n\n  input.init(d)\n}\n\n// Find the line object corresponding to the given line number.\nfunction getLine(doc, n) {\n  n -= doc.first\n  if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n  var chunk = doc\n  while (!chunk.lines) {\n    for (var i = 0;; ++i) {\n      var child = chunk.children[i], sz = child.chunkSize()\n      if (n < sz) { chunk = child; break }\n      n -= sz\n    }\n  }\n  return chunk.lines[n]\n}\n\n// Get the part of a document between two positions, as an array of\n// strings.\nfunction getBetween(doc, start, end) {\n  var out = [], n = start.line\n  doc.iter(start.line, end.line + 1, function (line) {\n    var text = line.text\n    if (n == end.line) { text = text.slice(0, end.ch) }\n    if (n == start.line) { text = text.slice(start.ch) }\n    out.push(text)\n    ++n\n  })\n  return out\n}\n// Get the lines between from and to, as array of strings.\nfunction getLines(doc, from, to) {\n  var out = []\n  doc.iter(from, to, function (line) { out.push(line.text) }) // iter aborts when callback returns truthy value\n  return out\n}\n\n// Update the height of a line, propagating the height change\n// upwards to parent nodes.\nfunction updateLineHeight(line, height) {\n  var diff = height - line.height\n  if (diff) { for (var n = line; n; n = n.parent) { n.height += diff } }\n}\n\n// Given a line object, find its line number by walking up through\n// its parent links.\nfunction lineNo(line) {\n  if (line.parent == null) { return null }\n  var cur = line.parent, no = indexOf(cur.lines, line)\n  for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n    for (var i = 0;; ++i) {\n      if (chunk.children[i] == cur) { break }\n      no += chunk.children[i].chunkSize()\n    }\n  }\n  return no + cur.first\n}\n\n// Find the line at the given vertical position, using the height\n// information in the document tree.\nfunction lineAtHeight(chunk, h) {\n  var n = chunk.first\n  outer: do {\n    for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n      var child = chunk.children[i$1], ch = child.height\n      if (h < ch) { chunk = child; continue outer }\n      h -= ch\n      n += child.chunkSize()\n    }\n    return n\n  } while (!chunk.lines)\n  var i = 0\n  for (; i < chunk.lines.length; ++i) {\n    var line = chunk.lines[i], lh = line.height\n    if (h < lh) { break }\n    h -= lh\n  }\n  return n + i\n}\n\nfunction isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\nfunction lineNumberFor(options, i) {\n  return String(options.lineNumberFormatter(i + options.firstLineNumber))\n}\n\n// A Pos instance represents a position within the text.\nfunction Pos(line, ch, sticky) {\n  if ( sticky === void 0 ) sticky = null;\n\n  if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n  this.line = line\n  this.ch = ch\n  this.sticky = sticky\n}\n\n// Compare two positions, return 0 if they are the same, a negative\n// number when a is less, and a positive number otherwise.\nfunction cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\nfunction equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\nfunction copyPos(x) {return Pos(x.line, x.ch)}\nfunction maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\nfunction minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n// Most of the external API clips given positions to make sure they\n// actually exist within the document.\nfunction clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\nfunction clipPos(doc, pos) {\n  if (pos.line < doc.first) { return Pos(doc.first, 0) }\n  var last = doc.first + doc.size - 1\n  if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n  return clipToLen(pos, getLine(doc, pos.line).text.length)\n}\nfunction clipToLen(pos, linelen) {\n  var ch = pos.ch\n  if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n  else if (ch < 0) { return Pos(pos.line, 0) }\n  else { return pos }\n}\nfunction clipPosArray(doc, array) {\n  var out = []\n  for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]) }\n  return out\n}\n\n// Optimize some code when these features are not used.\nvar sawReadOnlySpans = false;\nvar sawCollapsedSpans = false;\nfunction seeReadOnlySpans() {\n  sawReadOnlySpans = true\n}\n\nfunction seeCollapsedSpans() {\n  sawCollapsedSpans = true\n}\n\n// TEXTMARKER SPANS\n\nfunction MarkedSpan(marker, from, to) {\n  this.marker = marker\n  this.from = from; this.to = to\n}\n\n// Search an array of spans for a span matching the given marker.\nfunction getMarkedSpanFor(spans, marker) {\n  if (spans) { for (var i = 0; i < spans.length; ++i) {\n    var span = spans[i]\n    if (span.marker == marker) { return span }\n  } }\n}\n// Remove a span from an array, returning undefined if no spans are\n// left (we don't store arrays for lines without spans).\nfunction removeMarkedSpan(spans, span) {\n  var r\n  for (var i = 0; i < spans.length; ++i)\n    { if (spans[i] != span) { (r || (r = [])).push(spans[i]) } }\n  return r\n}\n// Add a span to a line.\nfunction addMarkedSpan(line, span) {\n  line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span]\n  span.marker.attachLine(line)\n}\n\n// Used for the algorithm that adjusts markers for a change in the\n// document. These functions cut an array of spans at a given\n// character position, returning an array of remaining chunks (or\n// undefined if nothing remains).\nfunction markedSpansBefore(old, startCh, isInsert) {\n  var nw\n  if (old) { for (var i = 0; i < old.length; ++i) {\n    var span = old[i], marker = span.marker\n    var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh)\n    if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n      ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to))\n    }\n  } }\n  return nw\n}\nfunction markedSpansAfter(old, endCh, isInsert) {\n  var nw\n  if (old) { for (var i = 0; i < old.length; ++i) {\n    var span = old[i], marker = span.marker\n    var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh)\n    if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n      ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                            span.to == null ? null : span.to - endCh))\n    }\n  } }\n  return nw\n}\n\n// Given a change object, compute the new set of marker spans that\n// cover the line in which the change took place. Removes spans\n// entirely within the change, reconnects spans belonging to the\n// same marker that appear on both sides of the change, and cuts off\n// spans partially within the change. Returns an array of span\n// arrays with one element for each line in (after) the change.\nfunction stretchSpansOverChange(doc, change) {\n  if (change.full) { return null }\n  var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans\n  var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans\n  if (!oldFirst && !oldLast) { return null }\n\n  var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0\n  // Get the spans that 'stick out' on both sides\n  var first = markedSpansBefore(oldFirst, startCh, isInsert)\n  var last = markedSpansAfter(oldLast, endCh, isInsert)\n\n  // Next, merge those two ends\n  var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0)\n  if (first) {\n    // Fix up .to properties of first\n    for (var i = 0; i < first.length; ++i) {\n      var span = first[i]\n      if (span.to == null) {\n        var found = getMarkedSpanFor(last, span.marker)\n        if (!found) { span.to = startCh }\n        else if (sameLine) { span.to = found.to == null ? null : found.to + offset }\n      }\n    }\n  }\n  if (last) {\n    // Fix up .from in last (or move them into first in case of sameLine)\n    for (var i$1 = 0; i$1 < last.length; ++i$1) {\n      var span$1 = last[i$1]\n      if (span$1.to != null) { span$1.to += offset }\n      if (span$1.from == null) {\n        var found$1 = getMarkedSpanFor(first, span$1.marker)\n        if (!found$1) {\n          span$1.from = offset\n          if (sameLine) { (first || (first = [])).push(span$1) }\n        }\n      } else {\n        span$1.from += offset\n        if (sameLine) { (first || (first = [])).push(span$1) }\n      }\n    }\n  }\n  // Make sure we didn't create any zero-length spans\n  if (first) { first = clearEmptySpans(first) }\n  if (last && last != first) { last = clearEmptySpans(last) }\n\n  var newMarkers = [first]\n  if (!sameLine) {\n    // Fill gap with whole-line-spans\n    var gap = change.text.length - 2, gapMarkers\n    if (gap > 0 && first)\n      { for (var i$2 = 0; i$2 < first.length; ++i$2)\n        { if (first[i$2].to == null)\n          { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)) } } }\n    for (var i$3 = 0; i$3 < gap; ++i$3)\n      { newMarkers.push(gapMarkers) }\n    newMarkers.push(last)\n  }\n  return newMarkers\n}\n\n// Remove spans that are empty and don't have a clearWhenEmpty\n// option of false.\nfunction clearEmptySpans(spans) {\n  for (var i = 0; i < spans.length; ++i) {\n    var span = spans[i]\n    if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n      { spans.splice(i--, 1) }\n  }\n  if (!spans.length) { return null }\n  return spans\n}\n\n// Used to 'clip' out readOnly ranges when making a change.\nfunction removeReadOnlyRanges(doc, from, to) {\n  var markers = null\n  doc.iter(from.line, to.line + 1, function (line) {\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var mark = line.markedSpans[i].marker\n      if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n        { (markers || (markers = [])).push(mark) }\n    } }\n  })\n  if (!markers) { return null }\n  var parts = [{from: from, to: to}]\n  for (var i = 0; i < markers.length; ++i) {\n    var mk = markers[i], m = mk.find(0)\n    for (var j = 0; j < parts.length; ++j) {\n      var p = parts[j]\n      if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n      var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to)\n      if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n        { newParts.push({from: p.from, to: m.from}) }\n      if (dto > 0 || !mk.inclusiveRight && !dto)\n        { newParts.push({from: m.to, to: p.to}) }\n      parts.splice.apply(parts, newParts)\n      j += newParts.length - 3\n    }\n  }\n  return parts\n}\n\n// Connect or disconnect spans from a line.\nfunction detachMarkedSpans(line) {\n  var spans = line.markedSpans\n  if (!spans) { return }\n  for (var i = 0; i < spans.length; ++i)\n    { spans[i].marker.detachLine(line) }\n  line.markedSpans = null\n}\nfunction attachMarkedSpans(line, spans) {\n  if (!spans) { return }\n  for (var i = 0; i < spans.length; ++i)\n    { spans[i].marker.attachLine(line) }\n  line.markedSpans = spans\n}\n\n// Helpers used when computing which overlapping collapsed span\n// counts as the larger one.\nfunction extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\nfunction extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n// Returns a number indicating which of two overlapping collapsed\n// spans is larger (and thus includes the other). Falls back to\n// comparing ids when the spans cover exactly the same range.\nfunction compareCollapsedMarkers(a, b) {\n  var lenDiff = a.lines.length - b.lines.length\n  if (lenDiff != 0) { return lenDiff }\n  var aPos = a.find(), bPos = b.find()\n  var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b)\n  if (fromCmp) { return -fromCmp }\n  var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b)\n  if (toCmp) { return toCmp }\n  return b.id - a.id\n}\n\n// Find out whether a line ends or starts in a collapsed span. If\n// so, return the marker for that span.\nfunction collapsedSpanAtSide(line, start) {\n  var sps = sawCollapsedSpans && line.markedSpans, found\n  if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n    sp = sps[i]\n    if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n        (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n      { found = sp.marker }\n  } }\n  return found\n}\nfunction collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\nfunction collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n// Test whether there exists a collapsed span that partially\n// overlaps (covers the start or end, but not both) of a new span.\n// Such overlap is not allowed.\nfunction conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n  var line = getLine(doc, lineNo)\n  var sps = sawCollapsedSpans && line.markedSpans\n  if (sps) { for (var i = 0; i < sps.length; ++i) {\n    var sp = sps[i]\n    if (!sp.marker.collapsed) { continue }\n    var found = sp.marker.find(0)\n    var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker)\n    var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker)\n    if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n    if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n        fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n      { return true }\n  } }\n}\n\n// A visual line is a line as drawn on the screen. Folding, for\n// example, can cause multiple logical lines to appear on the same\n// visual line. This finds the start of the visual line that the\n// given line is part of (usually that is the line itself).\nfunction visualLine(line) {\n  var merged\n  while (merged = collapsedSpanAtStart(line))\n    { line = merged.find(-1, true).line }\n  return line\n}\n\nfunction visualLineEnd(line) {\n  var merged\n  while (merged = collapsedSpanAtEnd(line))\n    { line = merged.find(1, true).line }\n  return line\n}\n\n// Returns an array of logical lines that continue the visual line\n// started by the argument, or undefined if there are no such lines.\nfunction visualLineContinued(line) {\n  var merged, lines\n  while (merged = collapsedSpanAtEnd(line)) {\n    line = merged.find(1, true).line\n    ;(lines || (lines = [])).push(line)\n  }\n  return lines\n}\n\n// Get the line number of the start of the visual line that the\n// given line number is part of.\nfunction visualLineNo(doc, lineN) {\n  var line = getLine(doc, lineN), vis = visualLine(line)\n  if (line == vis) { return lineN }\n  return lineNo(vis)\n}\n\n// Get the line number of the start of the next visual line after\n// the given line.\nfunction visualLineEndNo(doc, lineN) {\n  if (lineN > doc.lastLine()) { return lineN }\n  var line = getLine(doc, lineN), merged\n  if (!lineIsHidden(doc, line)) { return lineN }\n  while (merged = collapsedSpanAtEnd(line))\n    { line = merged.find(1, true).line }\n  return lineNo(line) + 1\n}\n\n// Compute whether a line is hidden. Lines count as hidden when they\n// are part of a visual line that starts with another line, or when\n// they are entirely covered by collapsed, non-widget span.\nfunction lineIsHidden(doc, line) {\n  var sps = sawCollapsedSpans && line.markedSpans\n  if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n    sp = sps[i]\n    if (!sp.marker.collapsed) { continue }\n    if (sp.from == null) { return true }\n    if (sp.marker.widgetNode) { continue }\n    if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n      { return true }\n  } }\n}\nfunction lineIsHiddenInner(doc, line, span) {\n  if (span.to == null) {\n    var end = span.marker.find(1, true)\n    return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n  }\n  if (span.marker.inclusiveRight && span.to == line.text.length)\n    { return true }\n  for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n    sp = line.markedSpans[i]\n    if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n        (sp.to == null || sp.to != span.from) &&\n        (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n        lineIsHiddenInner(doc, line, sp)) { return true }\n  }\n}\n\n// Find the height above the given line.\nfunction heightAtLine(lineObj) {\n  lineObj = visualLine(lineObj)\n\n  var h = 0, chunk = lineObj.parent\n  for (var i = 0; i < chunk.lines.length; ++i) {\n    var line = chunk.lines[i]\n    if (line == lineObj) { break }\n    else { h += line.height }\n  }\n  for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n    for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n      var cur = p.children[i$1]\n      if (cur == chunk) { break }\n      else { h += cur.height }\n    }\n  }\n  return h\n}\n\n// Compute the character length of a line, taking into account\n// collapsed ranges (see markText) that might hide parts, and join\n// other lines onto it.\nfunction lineLength(line) {\n  if (line.height == 0) { return 0 }\n  var len = line.text.length, merged, cur = line\n  while (merged = collapsedSpanAtStart(cur)) {\n    var found = merged.find(0, true)\n    cur = found.from.line\n    len += found.from.ch - found.to.ch\n  }\n  cur = line\n  while (merged = collapsedSpanAtEnd(cur)) {\n    var found$1 = merged.find(0, true)\n    len -= cur.text.length - found$1.from.ch\n    cur = found$1.to.line\n    len += cur.text.length - found$1.to.ch\n  }\n  return len\n}\n\n// Find the longest line in the document.\nfunction findMaxLine(cm) {\n  var d = cm.display, doc = cm.doc\n  d.maxLine = getLine(doc, doc.first)\n  d.maxLineLength = lineLength(d.maxLine)\n  d.maxLineChanged = true\n  doc.iter(function (line) {\n    var len = lineLength(line)\n    if (len > d.maxLineLength) {\n      d.maxLineLength = len\n      d.maxLine = line\n    }\n  })\n}\n\n// BIDI HELPERS\n\nfunction iterateBidiSections(order, from, to, f) {\n  if (!order) { return f(from, to, \"ltr\") }\n  var found = false\n  for (var i = 0; i < order.length; ++i) {\n    var part = order[i]\n    if (part.from < to && part.to > from || from == to && part.to == from) {\n      f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\")\n      found = true\n    }\n  }\n  if (!found) { f(from, to, \"ltr\") }\n}\n\nvar bidiOther = null\nfunction getBidiPartAt(order, ch, sticky) {\n  var found\n  bidiOther = null\n  for (var i = 0; i < order.length; ++i) {\n    var cur = order[i]\n    if (cur.from < ch && cur.to > ch) { return i }\n    if (cur.to == ch) {\n      if (cur.from != cur.to && sticky == \"before\") { found = i }\n      else { bidiOther = i }\n    }\n    if (cur.from == ch) {\n      if (cur.from != cur.to && sticky != \"before\") { found = i }\n      else { bidiOther = i }\n    }\n  }\n  return found != null ? found : bidiOther\n}\n\n// Bidirectional ordering algorithm\n// See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n// that this (partially) implements.\n\n// One-char codes used for character types:\n// L (L):   Left-to-Right\n// R (R):   Right-to-Left\n// r (AL):  Right-to-Left Arabic\n// 1 (EN):  European Number\n// + (ES):  European Number Separator\n// % (ET):  European Number Terminator\n// n (AN):  Arabic Number\n// , (CS):  Common Number Separator\n// m (NSM): Non-Spacing Mark\n// b (BN):  Boundary Neutral\n// s (B):   Paragraph Separator\n// t (S):   Segment Separator\n// w (WS):  Whitespace\n// N (ON):  Other Neutrals\n\n// Returns null if characters are ordered as they appear\n// (left-to-right), or an array of sections ({from, to, level}\n// objects) in the order in which they occur visually.\nvar bidiOrdering = (function() {\n  // Character types for codepoints 0 to 0xff\n  var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\"\n  // Character types for codepoints 0x600 to 0x6f9\n  var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\"\n  function charType(code) {\n    if (code <= 0xf7) { return lowTypes.charAt(code) }\n    else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n    else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n    else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n    else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n    else if (code == 0x200c) { return \"b\" }\n    else { return \"L\" }\n  }\n\n  var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/\n  var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/\n\n  function BidiSpan(level, from, to) {\n    this.level = level\n    this.from = from; this.to = to\n  }\n\n  return function(str, direction) {\n    var outerType = direction == \"ltr\" ? \"L\" : \"R\"\n\n    if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n    var len = str.length, types = []\n    for (var i = 0; i < len; ++i)\n      { types.push(charType(str.charCodeAt(i))) }\n\n    // W1. Examine each non-spacing mark (NSM) in the level run, and\n    // change the type of the NSM to the type of the previous\n    // character. If the NSM is at the start of the level run, it will\n    // get the type of sor.\n    for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n      var type = types[i$1]\n      if (type == \"m\") { types[i$1] = prev }\n      else { prev = type }\n    }\n\n    // W2. Search backwards from each instance of a European number\n    // until the first strong type (R, L, AL, or sor) is found. If an\n    // AL is found, change the type of the European number to Arabic\n    // number.\n    // W3. Change all ALs to R.\n    for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n      var type$1 = types[i$2]\n      if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\" }\n      else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\" } }\n    }\n\n    // W4. A single European separator between two European numbers\n    // changes to a European number. A single common separator between\n    // two numbers of the same type changes to that type.\n    for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n      var type$2 = types[i$3]\n      if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\" }\n      else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n               (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1 }\n      prev$1 = type$2\n    }\n\n    // W5. A sequence of European terminators adjacent to European\n    // numbers changes to all European numbers.\n    // W6. Otherwise, separators and terminators change to Other\n    // Neutral.\n    for (var i$4 = 0; i$4 < len; ++i$4) {\n      var type$3 = types[i$4]\n      if (type$3 == \",\") { types[i$4] = \"N\" }\n      else if (type$3 == \"%\") {\n        var end = (void 0)\n        for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n        var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\"\n        for (var j = i$4; j < end; ++j) { types[j] = replace }\n        i$4 = end - 1\n      }\n    }\n\n    // W7. Search backwards from each instance of a European number\n    // until the first strong type (R, L, or sor) is found. If an L is\n    // found, then change the type of the European number to L.\n    for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n      var type$4 = types[i$5]\n      if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\" }\n      else if (isStrong.test(type$4)) { cur$1 = type$4 }\n    }\n\n    // N1. A sequence of neutrals takes the direction of the\n    // surrounding strong text if the text on both sides has the same\n    // direction. European and Arabic numbers act as if they were R in\n    // terms of their influence on neutrals. Start-of-level-run (sor)\n    // and end-of-level-run (eor) are used at level run boundaries.\n    // N2. Any remaining neutrals take the embedding direction.\n    for (var i$6 = 0; i$6 < len; ++i$6) {\n      if (isNeutral.test(types[i$6])) {\n        var end$1 = (void 0)\n        for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n        var before = (i$6 ? types[i$6-1] : outerType) == \"L\"\n        var after = (end$1 < len ? types[end$1] : outerType) == \"L\"\n        var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType\n        for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1 }\n        i$6 = end$1 - 1\n      }\n    }\n\n    // Here we depart from the documented algorithm, in order to avoid\n    // building up an actual levels array. Since there are only three\n    // levels (0, 1, 2) in an implementation that doesn't take\n    // explicit embedding into account, we can build up the order on\n    // the fly, without following the level-based algorithm.\n    var order = [], m\n    for (var i$7 = 0; i$7 < len;) {\n      if (countsAsLeft.test(types[i$7])) {\n        var start = i$7\n        for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n        order.push(new BidiSpan(0, start, i$7))\n      } else {\n        var pos = i$7, at = order.length\n        for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n        for (var j$2 = pos; j$2 < i$7;) {\n          if (countsAsNum.test(types[j$2])) {\n            if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)) }\n            var nstart = j$2\n            for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n            order.splice(at, 0, new BidiSpan(2, nstart, j$2))\n            pos = j$2\n          } else { ++j$2 }\n        }\n        if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)) }\n      }\n    }\n    if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n      order[0].from = m[0].length\n      order.unshift(new BidiSpan(0, 0, m[0].length))\n    }\n    if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n      lst(order).to -= m[0].length\n      order.push(new BidiSpan(0, len - m[0].length, len))\n    }\n\n    return direction == \"rtl\" ? order.reverse() : order\n  }\n})()\n\n// Get the bidi ordering for the given line (and cache it). Returns\n// false for lines that are fully left-to-right, and an array of\n// BidiSpan objects otherwise.\nfunction getOrder(line, direction) {\n  var order = line.order\n  if (order == null) { order = line.order = bidiOrdering(line.text, direction) }\n  return order\n}\n\nfunction moveCharLogically(line, ch, dir) {\n  var target = skipExtendingChars(line.text, ch + dir, dir)\n  return target < 0 || target > line.text.length ? null : target\n}\n\nfunction moveLogically(line, start, dir) {\n  var ch = moveCharLogically(line, start.ch, dir)\n  return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n}\n\nfunction endOfLine(visually, cm, lineObj, lineNo, dir) {\n  if (visually) {\n    var order = getOrder(lineObj, cm.doc.direction)\n    if (order) {\n      var part = dir < 0 ? lst(order) : order[0]\n      var moveInStorageOrder = (dir < 0) == (part.level == 1)\n      var sticky = moveInStorageOrder ? \"after\" : \"before\"\n      var ch\n      // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n      // it could be that the last bidi part is not on the last visual line,\n      // since visual lines contain content order-consecutive chunks.\n      // Thus, in rtl, we are looking for the first (content-order) character\n      // in the rtl chunk that is on the last line (that is, the same line\n      // as the last (content-order) character).\n      if (part.level > 0) {\n        var prep = prepareMeasureForLine(cm, lineObj)\n        ch = dir < 0 ? lineObj.text.length - 1 : 0\n        var targetTop = measureCharPrepared(cm, prep, ch).top\n        ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch)\n        if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1) }\n      } else { ch = dir < 0 ? part.to : part.from }\n      return new Pos(lineNo, ch, sticky)\n    }\n  }\n  return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n}\n\nfunction moveVisually(cm, line, start, dir) {\n  var bidi = getOrder(line, cm.doc.direction)\n  if (!bidi) { return moveLogically(line, start, dir) }\n  if (start.ch >= line.text.length) {\n    start.ch = line.text.length\n    start.sticky = \"before\"\n  } else if (start.ch <= 0) {\n    start.ch = 0\n    start.sticky = \"after\"\n  }\n  var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos]\n  if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n    // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n    // nothing interesting happens.\n    return moveLogically(line, start, dir)\n  }\n\n  var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); }\n  var prep\n  var getWrappedLineExtent = function (ch) {\n    if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n    prep = prep || prepareMeasureForLine(cm, line)\n    return wrappedLineExtentChar(cm, line, prep, ch)\n  }\n  var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch)\n\n  if (cm.doc.direction == \"rtl\" || part.level == 1) {\n    var moveInStorageOrder = (part.level == 1) == (dir < 0)\n    var ch = mv(start, moveInStorageOrder ? 1 : -1)\n    if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n      // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n      var sticky = moveInStorageOrder ? \"before\" : \"after\"\n      return new Pos(start.line, ch, sticky)\n    }\n  }\n\n  // Case 3: Could not move within this bidi part in this visual line, so leave\n  // the current bidi part\n\n  var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n    var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n      ? new Pos(start.line, mv(ch, 1), \"before\")\n      : new Pos(start.line, ch, \"after\"); }\n\n    for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n      var part = bidi[partPos]\n      var moveInStorageOrder = (dir > 0) == (part.level != 1)\n      var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1)\n      if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n      ch = moveInStorageOrder ? part.from : mv(part.to, -1)\n      if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n    }\n  }\n\n  // Case 3a: Look for other bidi parts on the same visual line\n  var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent)\n  if (res) { return res }\n\n  // Case 3b: Look for other bidi parts on the next visual line\n  var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1)\n  if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n    res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh))\n    if (res) { return res }\n  }\n\n  // Case 4: Nowhere to move\n  return null\n}\n\n// EVENT HANDLING\n\n// Lightweight event framework. on/off also work on DOM nodes,\n// registering native DOM handlers.\n\nvar noHandlers = []\n\nvar on = function(emitter, type, f) {\n  if (emitter.addEventListener) {\n    emitter.addEventListener(type, f, false)\n  } else if (emitter.attachEvent) {\n    emitter.attachEvent(\"on\" + type, f)\n  } else {\n    var map = emitter._handlers || (emitter._handlers = {})\n    map[type] = (map[type] || noHandlers).concat(f)\n  }\n}\n\nfunction getHandlers(emitter, type) {\n  return emitter._handlers && emitter._handlers[type] || noHandlers\n}\n\nfunction off(emitter, type, f) {\n  if (emitter.removeEventListener) {\n    emitter.removeEventListener(type, f, false)\n  } else if (emitter.detachEvent) {\n    emitter.detachEvent(\"on\" + type, f)\n  } else {\n    var map = emitter._handlers, arr = map && map[type]\n    if (arr) {\n      var index = indexOf(arr, f)\n      if (index > -1)\n        { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)) }\n    }\n  }\n}\n\nfunction signal(emitter, type /*, values...*/) {\n  var handlers = getHandlers(emitter, type)\n  if (!handlers.length) { return }\n  var args = Array.prototype.slice.call(arguments, 2)\n  for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args) }\n}\n\n// The DOM events that CodeMirror handles can be overridden by\n// registering a (non-DOM) handler on the editor for the event name,\n// and preventDefault-ing the event in that handler.\nfunction signalDOMEvent(cm, e, override) {\n  if (typeof e == \"string\")\n    { e = {type: e, preventDefault: function() { this.defaultPrevented = true }} }\n  signal(cm, override || e.type, cm, e)\n  return e_defaultPrevented(e) || e.codemirrorIgnore\n}\n\nfunction signalCursorActivity(cm) {\n  var arr = cm._handlers && cm._handlers.cursorActivity\n  if (!arr) { return }\n  var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = [])\n  for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n    { set.push(arr[i]) } }\n}\n\nfunction hasHandler(emitter, type) {\n  return getHandlers(emitter, type).length > 0\n}\n\n// Add on and off methods to a constructor's prototype, to make\n// registering events on such objects more convenient.\nfunction eventMixin(ctor) {\n  ctor.prototype.on = function(type, f) {on(this, type, f)}\n  ctor.prototype.off = function(type, f) {off(this, type, f)}\n}\n\n// Due to the fact that we still support jurassic IE versions, some\n// compatibility wrappers are needed.\n\nfunction e_preventDefault(e) {\n  if (e.preventDefault) { e.preventDefault() }\n  else { e.returnValue = false }\n}\nfunction e_stopPropagation(e) {\n  if (e.stopPropagation) { e.stopPropagation() }\n  else { e.cancelBubble = true }\n}\nfunction e_defaultPrevented(e) {\n  return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n}\nfunction e_stop(e) {e_preventDefault(e); e_stopPropagation(e)}\n\nfunction e_target(e) {return e.target || e.srcElement}\nfunction e_button(e) {\n  var b = e.which\n  if (b == null) {\n    if (e.button & 1) { b = 1 }\n    else if (e.button & 2) { b = 3 }\n    else if (e.button & 4) { b = 2 }\n  }\n  if (mac && e.ctrlKey && b == 1) { b = 3 }\n  return b\n}\n\n// Detect drag-and-drop\nvar dragAndDrop = function() {\n  // There is *some* kind of drag-and-drop support in IE6-8, but I\n  // couldn't get it to work yet.\n  if (ie && ie_version < 9) { return false }\n  var div = elt('div')\n  return \"draggable\" in div || \"dragDrop\" in div\n}()\n\nvar zwspSupported\nfunction zeroWidthElement(measure) {\n  if (zwspSupported == null) {\n    var test = elt(\"span\", \"\\u200b\")\n    removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]))\n    if (measure.firstChild.offsetHeight != 0)\n      { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8) }\n  }\n  var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n    elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\")\n  node.setAttribute(\"cm-text\", \"\")\n  return node\n}\n\n// Feature-detect IE's crummy client rect reporting for bidi text\nvar badBidiRects\nfunction hasBadBidiRects(measure) {\n  if (badBidiRects != null) { return badBidiRects }\n  var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"))\n  var r0 = range(txt, 0, 1).getBoundingClientRect()\n  var r1 = range(txt, 1, 2).getBoundingClientRect()\n  removeChildren(measure)\n  if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n  return badBidiRects = (r1.right - r0.right < 3)\n}\n\n// See if \"\".split is the broken IE version, if so, provide an\n// alternative way to split lines.\nvar splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n  var pos = 0, result = [], l = string.length\n  while (pos <= l) {\n    var nl = string.indexOf(\"\\n\", pos)\n    if (nl == -1) { nl = string.length }\n    var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl)\n    var rt = line.indexOf(\"\\r\")\n    if (rt != -1) {\n      result.push(line.slice(0, rt))\n      pos += rt + 1\n    } else {\n      result.push(line)\n      pos = nl + 1\n    }\n  }\n  return result\n} : function (string) { return string.split(/\\r\\n?|\\n/); }\n\nvar hasSelection = window.getSelection ? function (te) {\n  try { return te.selectionStart != te.selectionEnd }\n  catch(e) { return false }\n} : function (te) {\n  var range\n  try {range = te.ownerDocument.selection.createRange()}\n  catch(e) {}\n  if (!range || range.parentElement() != te) { return false }\n  return range.compareEndPoints(\"StartToEnd\", range) != 0\n}\n\nvar hasCopyEvent = (function () {\n  var e = elt(\"div\")\n  if (\"oncopy\" in e) { return true }\n  e.setAttribute(\"oncopy\", \"return;\")\n  return typeof e.oncopy == \"function\"\n})()\n\nvar badZoomedRects = null\nfunction hasBadZoomedRects(measure) {\n  if (badZoomedRects != null) { return badZoomedRects }\n  var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"))\n  var normal = node.getBoundingClientRect()\n  var fromRange = range(node, 0, 1).getBoundingClientRect()\n  return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n}\n\nvar modes = {};\nvar mimeModes = {};\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nfunction defineMode(name, mode) {\n  if (arguments.length > 2)\n    { mode.dependencies = Array.prototype.slice.call(arguments, 2) }\n  modes[name] = mode\n}\n\nfunction defineMIME(mime, spec) {\n  mimeModes[mime] = spec\n}\n\n// Given a MIME type, a {name, ...options} config object, or a name\n// string, return a mode config object.\nfunction resolveMode(spec) {\n  if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n    spec = mimeModes[spec]\n  } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n    var found = mimeModes[spec.name]\n    if (typeof found == \"string\") { found = {name: found} }\n    spec = createObj(found, spec)\n    spec.name = found.name\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n    return resolveMode(\"application/xml\")\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n    return resolveMode(\"application/json\")\n  }\n  if (typeof spec == \"string\") { return {name: spec} }\n  else { return spec || {name: \"null\"} }\n}\n\n// Given a mode spec (anything that resolveMode accepts), find and\n// initialize an actual mode object.\nfunction getMode(options, spec) {\n  spec = resolveMode(spec)\n  var mfactory = modes[spec.name]\n  if (!mfactory) { return getMode(options, \"text/plain\") }\n  var modeObj = mfactory(options, spec)\n  if (modeExtensions.hasOwnProperty(spec.name)) {\n    var exts = modeExtensions[spec.name]\n    for (var prop in exts) {\n      if (!exts.hasOwnProperty(prop)) { continue }\n      if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop] }\n      modeObj[prop] = exts[prop]\n    }\n  }\n  modeObj.name = spec.name\n  if (spec.helperType) { modeObj.helperType = spec.helperType }\n  if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n    { modeObj[prop$1] = spec.modeProps[prop$1] } }\n\n  return modeObj\n}\n\n// This can be used to attach properties to mode objects from\n// outside the actual mode definition.\nvar modeExtensions = {}\nfunction extendMode(mode, properties) {\n  var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {})\n  copyObj(properties, exts)\n}\n\nfunction copyState(mode, state) {\n  if (state === true) { return state }\n  if (mode.copyState) { return mode.copyState(state) }\n  var nstate = {}\n  for (var n in state) {\n    var val = state[n]\n    if (val instanceof Array) { val = val.concat([]) }\n    nstate[n] = val\n  }\n  return nstate\n}\n\n// Given a mode and a state (for that mode), find the inner mode and\n// state at the position that the state refers to.\nfunction innerMode(mode, state) {\n  var info\n  while (mode.innerMode) {\n    info = mode.innerMode(state)\n    if (!info || info.mode == mode) { break }\n    state = info.state\n    mode = info.mode\n  }\n  return info || {mode: mode, state: state}\n}\n\nfunction startState(mode, a1, a2) {\n  return mode.startState ? mode.startState(a1, a2) : true\n}\n\n// STRING STREAM\n\n// Fed to the mode parsers, provides helper functions to make\n// parsers more succinct.\n\nvar StringStream = function(string, tabSize, lineOracle) {\n  this.pos = this.start = 0\n  this.string = string\n  this.tabSize = tabSize || 8\n  this.lastColumnPos = this.lastColumnValue = 0\n  this.lineStart = 0\n  this.lineOracle = lineOracle\n};\n\nStringStream.prototype.eol = function () {return this.pos >= this.string.length};\nStringStream.prototype.sol = function () {return this.pos == this.lineStart};\nStringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\nStringStream.prototype.next = function () {\n  if (this.pos < this.string.length)\n    { return this.string.charAt(this.pos++) }\n};\nStringStream.prototype.eat = function (match) {\n  var ch = this.string.charAt(this.pos)\n  var ok\n  if (typeof match == \"string\") { ok = ch == match }\n  else { ok = ch && (match.test ? match.test(ch) : match(ch)) }\n  if (ok) {++this.pos; return ch}\n};\nStringStream.prototype.eatWhile = function (match) {\n  var start = this.pos\n  while (this.eat(match)){}\n  return this.pos > start\n};\nStringStream.prototype.eatSpace = function () {\n    var this$1 = this;\n\n  var start = this.pos\n  while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this$1.pos }\n  return this.pos > start\n};\nStringStream.prototype.skipToEnd = function () {this.pos = this.string.length};\nStringStream.prototype.skipTo = function (ch) {\n  var found = this.string.indexOf(ch, this.pos)\n  if (found > -1) {this.pos = found; return true}\n};\nStringStream.prototype.backUp = function (n) {this.pos -= n};\nStringStream.prototype.column = function () {\n  if (this.lastColumnPos < this.start) {\n    this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue)\n    this.lastColumnPos = this.start\n  }\n  return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n};\nStringStream.prototype.indentation = function () {\n  return countColumn(this.string, null, this.tabSize) -\n    (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n};\nStringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n  if (typeof pattern == \"string\") {\n    var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; }\n    var substr = this.string.substr(this.pos, pattern.length)\n    if (cased(substr) == cased(pattern)) {\n      if (consume !== false) { this.pos += pattern.length }\n      return true\n    }\n  } else {\n    var match = this.string.slice(this.pos).match(pattern)\n    if (match && match.index > 0) { return null }\n    if (match && consume !== false) { this.pos += match[0].length }\n    return match\n  }\n};\nStringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\nStringStream.prototype.hideFirstChars = function (n, inner) {\n  this.lineStart += n\n  try { return inner() }\n  finally { this.lineStart -= n }\n};\nStringStream.prototype.lookAhead = function (n) {\n  var oracle = this.lineOracle\n  return oracle && oracle.lookAhead(n)\n};\n\nvar SavedContext = function(state, lookAhead) {\n  this.state = state\n  this.lookAhead = lookAhead\n};\n\nvar Context = function(doc, state, line, lookAhead) {\n  this.state = state\n  this.doc = doc\n  this.line = line\n  this.maxLookAhead = lookAhead || 0\n};\n\nContext.prototype.lookAhead = function (n) {\n  var line = this.doc.getLine(this.line + n)\n  if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n }\n  return line\n};\n\nContext.prototype.nextLine = function () {\n  this.line++\n  if (this.maxLookAhead > 0) { this.maxLookAhead-- }\n};\n\nContext.fromSaved = function (doc, saved, line) {\n  if (saved instanceof SavedContext)\n    { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n  else\n    { return new Context(doc, copyState(doc.mode, saved), line) }\n};\n\nContext.prototype.save = function (copy) {\n  var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state\n  return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n};\n\n\n// Compute a style array (an array starting with a mode generation\n// -- for invalidation -- followed by pairs of end positions and\n// style strings), which is used to highlight the tokens on the\n// line.\nfunction highlightLine(cm, line, context, forceToEnd) {\n  // A styles array always starts with a number identifying the\n  // mode/overlays that it is based on (for easy invalidation).\n  var st = [cm.state.modeGen], lineClasses = {}\n  // Compute the base array of styles\n  runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n          lineClasses, forceToEnd)\n  var state = context.state\n\n  // Run overlays, adjust style array.\n  var loop = function ( o ) {\n    var overlay = cm.state.overlays[o], i = 1, at = 0\n    context.state = true\n    runMode(cm, line.text, overlay.mode, context, function (end, style) {\n      var start = i\n      // Ensure there's a token end at the current position, and that i points at it\n      while (at < end) {\n        var i_end = st[i]\n        if (i_end > end)\n          { st.splice(i, 1, end, st[i+1], i_end) }\n        i += 2\n        at = Math.min(end, i_end)\n      }\n      if (!style) { return }\n      if (overlay.opaque) {\n        st.splice(start, i - start, end, \"overlay \" + style)\n        i = start + 2\n      } else {\n        for (; start < i; start += 2) {\n          var cur = st[start+1]\n          st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style\n        }\n      }\n    }, lineClasses)\n  };\n\n  for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n  context.state = state\n\n  return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n}\n\nfunction getLineStyles(cm, line, updateFrontier) {\n  if (!line.styles || line.styles[0] != cm.state.modeGen) {\n    var context = getContextBefore(cm, lineNo(line))\n    var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state)\n    var result = highlightLine(cm, line, context)\n    if (resetState) { context.state = resetState }\n    line.stateAfter = context.save(!resetState)\n    line.styles = result.styles\n    if (result.classes) { line.styleClasses = result.classes }\n    else if (line.styleClasses) { line.styleClasses = null }\n    if (updateFrontier === cm.doc.highlightFrontier)\n      { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier) }\n  }\n  return line.styles\n}\n\nfunction getContextBefore(cm, n, precise) {\n  var doc = cm.doc, display = cm.display\n  if (!doc.mode.startState) { return new Context(doc, true, n) }\n  var start = findStartLine(cm, n, precise)\n  var saved = start > doc.first && getLine(doc, start - 1).stateAfter\n  var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start)\n\n  doc.iter(start, n, function (line) {\n    processLine(cm, line.text, context)\n    var pos = context.line\n    line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null\n    context.nextLine()\n  })\n  if (precise) { doc.modeFrontier = context.line }\n  return context\n}\n\n// Lightweight form of highlight -- proceed over this line and\n// update state, but don't save a style array. Used for lines that\n// aren't currently visible.\nfunction processLine(cm, text, context, startAt) {\n  var mode = cm.doc.mode\n  var stream = new StringStream(text, cm.options.tabSize, context)\n  stream.start = stream.pos = startAt || 0\n  if (text == \"\") { callBlankLine(mode, context.state) }\n  while (!stream.eol()) {\n    readToken(mode, stream, context.state)\n    stream.start = stream.pos\n  }\n}\n\nfunction callBlankLine(mode, state) {\n  if (mode.blankLine) { return mode.blankLine(state) }\n  if (!mode.innerMode) { return }\n  var inner = innerMode(mode, state)\n  if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n}\n\nfunction readToken(mode, stream, state, inner) {\n  for (var i = 0; i < 10; i++) {\n    if (inner) { inner[0] = innerMode(mode, state).mode }\n    var style = mode.token(stream, state)\n    if (stream.pos > stream.start) { return style }\n  }\n  throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n}\n\nvar Token = function(stream, type, state) {\n  this.start = stream.start; this.end = stream.pos\n  this.string = stream.current()\n  this.type = type || null\n  this.state = state\n};\n\n// Utility for getTokenAt and getLineTokens\nfunction takeToken(cm, pos, precise, asArray) {\n  var doc = cm.doc, mode = doc.mode, style\n  pos = clipPos(doc, pos)\n  var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise)\n  var stream = new StringStream(line.text, cm.options.tabSize, context), tokens\n  if (asArray) { tokens = [] }\n  while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n    stream.start = stream.pos\n    style = readToken(mode, stream, context.state)\n    if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))) }\n  }\n  return asArray ? tokens : new Token(stream, style, context.state)\n}\n\nfunction extractLineClasses(type, output) {\n  if (type) { for (;;) {\n    var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/)\n    if (!lineClass) { break }\n    type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length)\n    var prop = lineClass[1] ? \"bgClass\" : \"textClass\"\n    if (output[prop] == null)\n      { output[prop] = lineClass[2] }\n    else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n      { output[prop] += \" \" + lineClass[2] }\n  } }\n  return type\n}\n\n// Run the given mode's parser over a line, calling f for each token.\nfunction runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n  var flattenSpans = mode.flattenSpans\n  if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans }\n  var curStart = 0, curStyle = null\n  var stream = new StringStream(text, cm.options.tabSize, context), style\n  var inner = cm.options.addModeClass && [null]\n  if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses) }\n  while (!stream.eol()) {\n    if (stream.pos > cm.options.maxHighlightLength) {\n      flattenSpans = false\n      if (forceToEnd) { processLine(cm, text, context, stream.pos) }\n      stream.pos = text.length\n      style = null\n    } else {\n      style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses)\n    }\n    if (inner) {\n      var mName = inner[0].name\n      if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName) }\n    }\n    if (!flattenSpans || curStyle != style) {\n      while (curStart < stream.start) {\n        curStart = Math.min(stream.start, curStart + 5000)\n        f(curStart, curStyle)\n      }\n      curStyle = style\n    }\n    stream.start = stream.pos\n  }\n  while (curStart < stream.pos) {\n    // Webkit seems to refuse to render text nodes longer than 57444\n    // characters, and returns inaccurate measurements in nodes\n    // starting around 5000 chars.\n    var pos = Math.min(stream.pos, curStart + 5000)\n    f(pos, curStyle)\n    curStart = pos\n  }\n}\n\n// Finds the line to start with when starting a parse. Tries to\n// find a line with a stateAfter, so that it can start with a\n// valid state. If that fails, it returns the line with the\n// smallest indentation, which tends to need the least context to\n// parse correctly.\nfunction findStartLine(cm, n, precise) {\n  var minindent, minline, doc = cm.doc\n  var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100)\n  for (var search = n; search > lim; --search) {\n    if (search <= doc.first) { return doc.first }\n    var line = getLine(doc, search - 1), after = line.stateAfter\n    if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n      { return search }\n    var indented = countColumn(line.text, null, cm.options.tabSize)\n    if (minline == null || minindent > indented) {\n      minline = search - 1\n      minindent = indented\n    }\n  }\n  return minline\n}\n\nfunction retreatFrontier(doc, n) {\n  doc.modeFrontier = Math.min(doc.modeFrontier, n)\n  if (doc.highlightFrontier < n - 10) { return }\n  var start = doc.first\n  for (var line = n - 1; line > start; line--) {\n    var saved = getLine(doc, line).stateAfter\n    // change is on 3\n    // state on line 1 looked ahead 2 -- so saw 3\n    // test 1 + 2 < 3 should cover this\n    if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n      start = line + 1\n      break\n    }\n  }\n  doc.highlightFrontier = Math.min(doc.highlightFrontier, start)\n}\n\n// LINE DATA STRUCTURE\n\n// Line objects. These hold state related to a line, including\n// highlighting info (the styles array).\nvar Line = function(text, markedSpans, estimateHeight) {\n  this.text = text\n  attachMarkedSpans(this, markedSpans)\n  this.height = estimateHeight ? estimateHeight(this) : 1\n};\n\nLine.prototype.lineNo = function () { return lineNo(this) };\neventMixin(Line)\n\n// Change the content (text, markers) of a line. Automatically\n// invalidates cached information and tries to re-estimate the\n// line's height.\nfunction updateLine(line, text, markedSpans, estimateHeight) {\n  line.text = text\n  if (line.stateAfter) { line.stateAfter = null }\n  if (line.styles) { line.styles = null }\n  if (line.order != null) { line.order = null }\n  detachMarkedSpans(line)\n  attachMarkedSpans(line, markedSpans)\n  var estHeight = estimateHeight ? estimateHeight(line) : 1\n  if (estHeight != line.height) { updateLineHeight(line, estHeight) }\n}\n\n// Detach a line from the document tree and its markers.\nfunction cleanUpLine(line) {\n  line.parent = null\n  detachMarkedSpans(line)\n}\n\n// Convert a style as returned by a mode (either null, or a string\n// containing one or more styles) to a CSS style. This is cached,\n// and also looks for line-wide styles.\nvar styleToClassCache = {};\nvar styleToClassCacheWithMode = {};\nfunction interpretTokenStyle(style, options) {\n  if (!style || /^\\s*$/.test(style)) { return null }\n  var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache\n  return cache[style] ||\n    (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n}\n\n// Render the DOM representation of the text of a line. Also builds\n// up a 'line map', which points at the DOM nodes that represent\n// specific stretches of text, and is used by the measuring code.\n// The returned object contains the DOM node, this map, and\n// information about line-wide styles that were set by the mode.\nfunction buildLineContent(cm, lineView) {\n  // The padding-right forces the element to have a 'border', which\n  // is needed on Webkit to be able to get line-level bounding\n  // rectangles for it (in measureChar).\n  var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null)\n  var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                 col: 0, pos: 0, cm: cm,\n                 trailingSpace: false,\n                 splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\")}\n  lineView.measure = {}\n\n  // Iterate over the logical lines that make up this visual line.\n  for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n    var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0)\n    builder.pos = 0\n    builder.addToken = buildToken\n    // Optionally wire in some hacks into the token-rendering\n    // algorithm, to deal with browser quirks.\n    if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n      { builder.addToken = buildTokenBadBidi(builder.addToken, order) }\n    builder.map = []\n    var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line)\n    insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate))\n    if (line.styleClasses) {\n      if (line.styleClasses.bgClass)\n        { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\") }\n      if (line.styleClasses.textClass)\n        { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\") }\n    }\n\n    // Ensure at least a single node is present, for measuring.\n    if (builder.map.length == 0)\n      { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))) }\n\n    // Store the map and a cache object for the current logical line\n    if (i == 0) {\n      lineView.measure.map = builder.map\n      lineView.measure.cache = {}\n    } else {\n      ;(lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n      ;(lineView.measure.caches || (lineView.measure.caches = [])).push({})\n    }\n  }\n\n  // See issue #2901\n  if (webkit) {\n    var last = builder.content.lastChild\n    if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n      { builder.content.className = \"cm-tab-wrap-hack\" }\n  }\n\n  signal(cm, \"renderLine\", cm, lineView.line, builder.pre)\n  if (builder.pre.className)\n    { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\") }\n\n  return builder\n}\n\nfunction defaultSpecialCharPlaceholder(ch) {\n  var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\")\n  token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16)\n  token.setAttribute(\"aria-label\", token.title)\n  return token\n}\n\n// Build up the DOM representation for a single token, and add it to\n// the line map. Takes care to render special characters separately.\nfunction buildToken(builder, text, style, startStyle, endStyle, title, css) {\n  if (!text) { return }\n  var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text\n  var special = builder.cm.state.specialChars, mustWrap = false\n  var content\n  if (!special.test(text)) {\n    builder.col += text.length\n    content = document.createTextNode(displayText)\n    builder.map.push(builder.pos, builder.pos + text.length, content)\n    if (ie && ie_version < 9) { mustWrap = true }\n    builder.pos += text.length\n  } else {\n    content = document.createDocumentFragment()\n    var pos = 0\n    while (true) {\n      special.lastIndex = pos\n      var m = special.exec(text)\n      var skipped = m ? m.index - pos : text.length - pos\n      if (skipped) {\n        var txt = document.createTextNode(displayText.slice(pos, pos + skipped))\n        if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])) }\n        else { content.appendChild(txt) }\n        builder.map.push(builder.pos, builder.pos + skipped, txt)\n        builder.col += skipped\n        builder.pos += skipped\n      }\n      if (!m) { break }\n      pos += skipped + 1\n      var txt$1 = (void 0)\n      if (m[0] == \"\\t\") {\n        var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize\n        txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"))\n        txt$1.setAttribute(\"role\", \"presentation\")\n        txt$1.setAttribute(\"cm-text\", \"\\t\")\n        builder.col += tabWidth\n      } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n        txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"))\n        txt$1.setAttribute(\"cm-text\", m[0])\n        builder.col += 1\n      } else {\n        txt$1 = builder.cm.options.specialCharPlaceholder(m[0])\n        txt$1.setAttribute(\"cm-text\", m[0])\n        if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])) }\n        else { content.appendChild(txt$1) }\n        builder.col += 1\n      }\n      builder.map.push(builder.pos, builder.pos + 1, txt$1)\n      builder.pos++\n    }\n  }\n  builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32\n  if (style || startStyle || endStyle || mustWrap || css) {\n    var fullStyle = style || \"\"\n    if (startStyle) { fullStyle += startStyle }\n    if (endStyle) { fullStyle += endStyle }\n    var token = elt(\"span\", [content], fullStyle, css)\n    if (title) { token.title = title }\n    return builder.content.appendChild(token)\n  }\n  builder.content.appendChild(content)\n}\n\nfunction splitSpaces(text, trailingBefore) {\n  if (text.length > 1 && !/  /.test(text)) { return text }\n  var spaceBefore = trailingBefore, result = \"\"\n  for (var i = 0; i < text.length; i++) {\n    var ch = text.charAt(i)\n    if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n      { ch = \"\\u00a0\" }\n    result += ch\n    spaceBefore = ch == \" \"\n  }\n  return result\n}\n\n// Work around nonsense dimensions being reported for stretches of\n// right-to-left text.\nfunction buildTokenBadBidi(inner, order) {\n  return function (builder, text, style, startStyle, endStyle, title, css) {\n    style = style ? style + \" cm-force-border\" : \"cm-force-border\"\n    var start = builder.pos, end = start + text.length\n    for (;;) {\n      // Find the part that overlaps with the start of this text\n      var part = (void 0)\n      for (var i = 0; i < order.length; i++) {\n        part = order[i]\n        if (part.to > start && part.from <= start) { break }\n      }\n      if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, title, css) }\n      inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css)\n      startStyle = null\n      text = text.slice(part.to - start)\n      start = part.to\n    }\n  }\n}\n\nfunction buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n  var widget = !ignoreWidget && marker.widgetNode\n  if (widget) { builder.map.push(builder.pos, builder.pos + size, widget) }\n  if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n    if (!widget)\n      { widget = builder.content.appendChild(document.createElement(\"span\")) }\n    widget.setAttribute(\"cm-marker\", marker.id)\n  }\n  if (widget) {\n    builder.cm.display.input.setUneditable(widget)\n    builder.content.appendChild(widget)\n  }\n  builder.pos += size\n  builder.trailingSpace = false\n}\n\n// Outputs a number of spans to make up a line, taking highlighting\n// and marked text into account.\nfunction insertLineContent(line, builder, styles) {\n  var spans = line.markedSpans, allText = line.text, at = 0\n  if (!spans) {\n    for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n      { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)) }\n    return\n  }\n\n  var len = allText.length, pos = 0, i = 1, text = \"\", style, css\n  var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed\n  for (;;) {\n    if (nextChange == pos) { // Update current marker set\n      spanStyle = spanEndStyle = spanStartStyle = title = css = \"\"\n      collapsed = null; nextChange = Infinity\n      var foundBookmarks = [], endStyles = (void 0)\n      for (var j = 0; j < spans.length; ++j) {\n        var sp = spans[j], m = sp.marker\n        if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n          foundBookmarks.push(m)\n        } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n          if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n            nextChange = sp.to\n            spanEndStyle = \"\"\n          }\n          if (m.className) { spanStyle += \" \" + m.className }\n          if (m.css) { css = (css ? css + \";\" : \"\") + m.css }\n          if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle }\n          if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to) }\n          if (m.title && !title) { title = m.title }\n          if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n            { collapsed = sp }\n        } else if (sp.from > pos && nextChange > sp.from) {\n          nextChange = sp.from\n        }\n      }\n      if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n        { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1] } } }\n\n      if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n        { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]) } }\n      if (collapsed && (collapsed.from || 0) == pos) {\n        buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                           collapsed.marker, collapsed.from == null)\n        if (collapsed.to == null) { return }\n        if (collapsed.to == pos) { collapsed = false }\n      }\n    }\n    if (pos >= len) { break }\n\n    var upto = Math.min(len, nextChange)\n    while (true) {\n      if (text) {\n        var end = pos + text.length\n        if (!collapsed) {\n          var tokenText = end > upto ? text.slice(0, upto - pos) : text\n          builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                           spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css)\n        }\n        if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n        pos = end\n        spanStartStyle = \"\"\n      }\n      text = allText.slice(at, at = styles[i++])\n      style = interpretTokenStyle(styles[i++], builder.cm.options)\n    }\n  }\n}\n\n\n// These objects are used to represent the visible (currently drawn)\n// part of the document. A LineView may correspond to multiple\n// logical lines, if those are connected by collapsed ranges.\nfunction LineView(doc, line, lineN) {\n  // The starting line\n  this.line = line\n  // Continuing lines, if any\n  this.rest = visualLineContinued(line)\n  // Number of logical lines in this visual line\n  this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1\n  this.node = this.text = null\n  this.hidden = lineIsHidden(doc, line)\n}\n\n// Create a range of LineView objects for the given lines.\nfunction buildViewArray(cm, from, to) {\n  var array = [], nextPos\n  for (var pos = from; pos < to; pos = nextPos) {\n    var view = new LineView(cm.doc, getLine(cm.doc, pos), pos)\n    nextPos = pos + view.size\n    array.push(view)\n  }\n  return array\n}\n\nvar operationGroup = null\n\nfunction pushOperation(op) {\n  if (operationGroup) {\n    operationGroup.ops.push(op)\n  } else {\n    op.ownsGroup = operationGroup = {\n      ops: [op],\n      delayedCallbacks: []\n    }\n  }\n}\n\nfunction fireCallbacksForOps(group) {\n  // Calls delayed callbacks and cursorActivity handlers until no\n  // new ones appear\n  var callbacks = group.delayedCallbacks, i = 0\n  do {\n    for (; i < callbacks.length; i++)\n      { callbacks[i].call(null) }\n    for (var j = 0; j < group.ops.length; j++) {\n      var op = group.ops[j]\n      if (op.cursorActivityHandlers)\n        { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n          { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm) } }\n    }\n  } while (i < callbacks.length)\n}\n\nfunction finishOperation(op, endCb) {\n  var group = op.ownsGroup\n  if (!group) { return }\n\n  try { fireCallbacksForOps(group) }\n  finally {\n    operationGroup = null\n    endCb(group)\n  }\n}\n\nvar orphanDelayedCallbacks = null\n\n// Often, we want to signal events at a point where we are in the\n// middle of some work, but don't want the handler to start calling\n// other methods on the editor, which might be in an inconsistent\n// state or simply not expect any other events to happen.\n// signalLater looks whether there are any handlers, and schedules\n// them to be executed when the last operation ends, or, if no\n// operation is active, when a timeout fires.\nfunction signalLater(emitter, type /*, values...*/) {\n  var arr = getHandlers(emitter, type)\n  if (!arr.length) { return }\n  var args = Array.prototype.slice.call(arguments, 2), list\n  if (operationGroup) {\n    list = operationGroup.delayedCallbacks\n  } else if (orphanDelayedCallbacks) {\n    list = orphanDelayedCallbacks\n  } else {\n    list = orphanDelayedCallbacks = []\n    setTimeout(fireOrphanDelayed, 0)\n  }\n  var loop = function ( i ) {\n    list.push(function () { return arr[i].apply(null, args); })\n  };\n\n  for (var i = 0; i < arr.length; ++i)\n    loop( i );\n}\n\nfunction fireOrphanDelayed() {\n  var delayed = orphanDelayedCallbacks\n  orphanDelayedCallbacks = null\n  for (var i = 0; i < delayed.length; ++i) { delayed[i]() }\n}\n\n// When an aspect of a line changes, a string is added to\n// lineView.changes. This updates the relevant part of the line's\n// DOM structure.\nfunction updateLineForChanges(cm, lineView, lineN, dims) {\n  for (var j = 0; j < lineView.changes.length; j++) {\n    var type = lineView.changes[j]\n    if (type == \"text\") { updateLineText(cm, lineView) }\n    else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims) }\n    else if (type == \"class\") { updateLineClasses(cm, lineView) }\n    else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims) }\n  }\n  lineView.changes = null\n}\n\n// Lines with gutter elements, widgets or a background class need to\n// be wrapped, and have the extra elements added to the wrapper div\nfunction ensureLineWrapped(lineView) {\n  if (lineView.node == lineView.text) {\n    lineView.node = elt(\"div\", null, null, \"position: relative\")\n    if (lineView.text.parentNode)\n      { lineView.text.parentNode.replaceChild(lineView.node, lineView.text) }\n    lineView.node.appendChild(lineView.text)\n    if (ie && ie_version < 8) { lineView.node.style.zIndex = 2 }\n  }\n  return lineView.node\n}\n\nfunction updateLineBackground(cm, lineView) {\n  var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass\n  if (cls) { cls += \" CodeMirror-linebackground\" }\n  if (lineView.background) {\n    if (cls) { lineView.background.className = cls }\n    else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null }\n  } else if (cls) {\n    var wrap = ensureLineWrapped(lineView)\n    lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild)\n    cm.display.input.setUneditable(lineView.background)\n  }\n}\n\n// Wrapper around buildLineContent which will reuse the structure\n// in display.externalMeasured when possible.\nfunction getLineContent(cm, lineView) {\n  var ext = cm.display.externalMeasured\n  if (ext && ext.line == lineView.line) {\n    cm.display.externalMeasured = null\n    lineView.measure = ext.measure\n    return ext.built\n  }\n  return buildLineContent(cm, lineView)\n}\n\n// Redraw the line's text. Interacts with the background and text\n// classes because the mode may output tokens that influence these\n// classes.\nfunction updateLineText(cm, lineView) {\n  var cls = lineView.text.className\n  var built = getLineContent(cm, lineView)\n  if (lineView.text == lineView.node) { lineView.node = built.pre }\n  lineView.text.parentNode.replaceChild(built.pre, lineView.text)\n  lineView.text = built.pre\n  if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n    lineView.bgClass = built.bgClass\n    lineView.textClass = built.textClass\n    updateLineClasses(cm, lineView)\n  } else if (cls) {\n    lineView.text.className = cls\n  }\n}\n\nfunction updateLineClasses(cm, lineView) {\n  updateLineBackground(cm, lineView)\n  if (lineView.line.wrapClass)\n    { ensureLineWrapped(lineView).className = lineView.line.wrapClass }\n  else if (lineView.node != lineView.text)\n    { lineView.node.className = \"\" }\n  var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass\n  lineView.text.className = textClass || \"\"\n}\n\nfunction updateLineGutter(cm, lineView, lineN, dims) {\n  if (lineView.gutter) {\n    lineView.node.removeChild(lineView.gutter)\n    lineView.gutter = null\n  }\n  if (lineView.gutterBackground) {\n    lineView.node.removeChild(lineView.gutterBackground)\n    lineView.gutterBackground = null\n  }\n  if (lineView.line.gutterClass) {\n    var wrap = ensureLineWrapped(lineView)\n    lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                    (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"))\n    cm.display.input.setUneditable(lineView.gutterBackground)\n    wrap.insertBefore(lineView.gutterBackground, lineView.text)\n  }\n  var markers = lineView.line.gutterMarkers\n  if (cm.options.lineNumbers || markers) {\n    var wrap$1 = ensureLineWrapped(lineView)\n    var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"))\n    cm.display.input.setUneditable(gutterWrap)\n    wrap$1.insertBefore(gutterWrap, lineView.text)\n    if (lineView.line.gutterClass)\n      { gutterWrap.className += \" \" + lineView.line.gutterClass }\n    if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n      { lineView.lineNumber = gutterWrap.appendChild(\n        elt(\"div\", lineNumberFor(cm.options, lineN),\n            \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n            (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))) }\n    if (markers) { for (var k = 0; k < cm.options.gutters.length; ++k) {\n      var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id]\n      if (found)\n        { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                   (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))) }\n    } }\n  }\n}\n\nfunction updateLineWidgets(cm, lineView, dims) {\n  if (lineView.alignable) { lineView.alignable = null }\n  for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n    next = node.nextSibling\n    if (node.className == \"CodeMirror-linewidget\")\n      { lineView.node.removeChild(node) }\n  }\n  insertLineWidgets(cm, lineView, dims)\n}\n\n// Build a line's DOM representation from scratch\nfunction buildLineElement(cm, lineView, lineN, dims) {\n  var built = getLineContent(cm, lineView)\n  lineView.text = lineView.node = built.pre\n  if (built.bgClass) { lineView.bgClass = built.bgClass }\n  if (built.textClass) { lineView.textClass = built.textClass }\n\n  updateLineClasses(cm, lineView)\n  updateLineGutter(cm, lineView, lineN, dims)\n  insertLineWidgets(cm, lineView, dims)\n  return lineView.node\n}\n\n// A lineView may contain multiple logical lines (when merged by\n// collapsed spans). The widgets for all of them need to be drawn.\nfunction insertLineWidgets(cm, lineView, dims) {\n  insertLineWidgetsFor(cm, lineView.line, lineView, dims, true)\n  if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n    { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false) } }\n}\n\nfunction insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n  if (!line.widgets) { return }\n  var wrap = ensureLineWrapped(lineView)\n  for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n    var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\")\n    if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\") }\n    positionLineWidget(widget, node, lineView, dims)\n    cm.display.input.setUneditable(node)\n    if (allowAbove && widget.above)\n      { wrap.insertBefore(node, lineView.gutter || lineView.text) }\n    else\n      { wrap.appendChild(node) }\n    signalLater(widget, \"redraw\")\n  }\n}\n\nfunction positionLineWidget(widget, node, lineView, dims) {\n  if (widget.noHScroll) {\n    ;(lineView.alignable || (lineView.alignable = [])).push(node)\n    var width = dims.wrapperWidth\n    node.style.left = dims.fixedPos + \"px\"\n    if (!widget.coverGutter) {\n      width -= dims.gutterTotalWidth\n      node.style.paddingLeft = dims.gutterTotalWidth + \"px\"\n    }\n    node.style.width = width + \"px\"\n  }\n  if (widget.coverGutter) {\n    node.style.zIndex = 5\n    node.style.position = \"relative\"\n    if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\" }\n  }\n}\n\nfunction widgetHeight(widget) {\n  if (widget.height != null) { return widget.height }\n  var cm = widget.doc.cm\n  if (!cm) { return 0 }\n  if (!contains(document.body, widget.node)) {\n    var parentStyle = \"position: relative;\"\n    if (widget.coverGutter)\n      { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\" }\n    if (widget.noHScroll)\n      { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\" }\n    removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle))\n  }\n  return widget.height = widget.node.parentNode.offsetHeight\n}\n\n// Return true when the given mouse event happened in a widget\nfunction eventInWidget(display, e) {\n  for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n    if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n        (n.parentNode == display.sizer && n != display.mover))\n      { return true }\n  }\n}\n\n// POSITION MEASUREMENT\n\nfunction paddingTop(display) {return display.lineSpace.offsetTop}\nfunction paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\nfunction paddingH(display) {\n  if (display.cachedPaddingH) { return display.cachedPaddingH }\n  var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"))\n  var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle\n  var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)}\n  if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data }\n  return data\n}\n\nfunction scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\nfunction displayWidth(cm) {\n  return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n}\nfunction displayHeight(cm) {\n  return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n}\n\n// Ensure the lineView.wrapping.heights array is populated. This is\n// an array of bottom offsets for the lines that make up a drawn\n// line. When lineWrapping is on, there might be more than one\n// height.\nfunction ensureLineHeights(cm, lineView, rect) {\n  var wrapping = cm.options.lineWrapping\n  var curWidth = wrapping && displayWidth(cm)\n  if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n    var heights = lineView.measure.heights = []\n    if (wrapping) {\n      lineView.measure.width = curWidth\n      var rects = lineView.text.firstChild.getClientRects()\n      for (var i = 0; i < rects.length - 1; i++) {\n        var cur = rects[i], next = rects[i + 1]\n        if (Math.abs(cur.bottom - next.bottom) > 2)\n          { heights.push((cur.bottom + next.top) / 2 - rect.top) }\n      }\n    }\n    heights.push(rect.bottom - rect.top)\n  }\n}\n\n// Find a line map (mapping character offsets to text nodes) and a\n// measurement cache for the given line number. (A line view might\n// contain multiple lines when collapsed ranges are present.)\nfunction mapFromLineView(lineView, line, lineN) {\n  if (lineView.line == line)\n    { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n  for (var i = 0; i < lineView.rest.length; i++)\n    { if (lineView.rest[i] == line)\n      { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n  for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n    { if (lineNo(lineView.rest[i$1]) > lineN)\n      { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n}\n\n// Render a line into the hidden node display.externalMeasured. Used\n// when measurement is needed for a line that's not in the viewport.\nfunction updateExternalMeasurement(cm, line) {\n  line = visualLine(line)\n  var lineN = lineNo(line)\n  var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN)\n  view.lineN = lineN\n  var built = view.built = buildLineContent(cm, view)\n  view.text = built.pre\n  removeChildrenAndAdd(cm.display.lineMeasure, built.pre)\n  return view\n}\n\n// Get a {top, bottom, left, right} box (in line-local coordinates)\n// for a given character.\nfunction measureChar(cm, line, ch, bias) {\n  return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n}\n\n// Find a line view that corresponds to the given line number.\nfunction findViewForLine(cm, lineN) {\n  if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n    { return cm.display.view[findViewIndex(cm, lineN)] }\n  var ext = cm.display.externalMeasured\n  if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n    { return ext }\n}\n\n// Measurement can be split in two steps, the set-up work that\n// applies to the whole line, and the measurement of the actual\n// character. Functions like coordsChar, that need to do a lot of\n// measurements in a row, can thus ensure that the set-up work is\n// only done once.\nfunction prepareMeasureForLine(cm, line) {\n  var lineN = lineNo(line)\n  var view = findViewForLine(cm, lineN)\n  if (view && !view.text) {\n    view = null\n  } else if (view && view.changes) {\n    updateLineForChanges(cm, view, lineN, getDimensions(cm))\n    cm.curOp.forceUpdate = true\n  }\n  if (!view)\n    { view = updateExternalMeasurement(cm, line) }\n\n  var info = mapFromLineView(view, line, lineN)\n  return {\n    line: line, view: view, rect: null,\n    map: info.map, cache: info.cache, before: info.before,\n    hasHeights: false\n  }\n}\n\n// Given a prepared measurement object, measures the position of an\n// actual character (or fetches it from the cache).\nfunction measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n  if (prepared.before) { ch = -1 }\n  var key = ch + (bias || \"\"), found\n  if (prepared.cache.hasOwnProperty(key)) {\n    found = prepared.cache[key]\n  } else {\n    if (!prepared.rect)\n      { prepared.rect = prepared.view.text.getBoundingClientRect() }\n    if (!prepared.hasHeights) {\n      ensureLineHeights(cm, prepared.view, prepared.rect)\n      prepared.hasHeights = true\n    }\n    found = measureCharInner(cm, prepared, ch, bias)\n    if (!found.bogus) { prepared.cache[key] = found }\n  }\n  return {left: found.left, right: found.right,\n          top: varHeight ? found.rtop : found.top,\n          bottom: varHeight ? found.rbottom : found.bottom}\n}\n\nvar nullRect = {left: 0, right: 0, top: 0, bottom: 0}\n\nfunction nodeAndOffsetInLineMap(map, ch, bias) {\n  var node, start, end, collapse, mStart, mEnd\n  // First, search the line map for the text node corresponding to,\n  // or closest to, the target character.\n  for (var i = 0; i < map.length; i += 3) {\n    mStart = map[i]\n    mEnd = map[i + 1]\n    if (ch < mStart) {\n      start = 0; end = 1\n      collapse = \"left\"\n    } else if (ch < mEnd) {\n      start = ch - mStart\n      end = start + 1\n    } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n      end = mEnd - mStart\n      start = end - 1\n      if (ch >= mEnd) { collapse = \"right\" }\n    }\n    if (start != null) {\n      node = map[i + 2]\n      if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n        { collapse = bias }\n      if (bias == \"left\" && start == 0)\n        { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n          node = map[(i -= 3) + 2]\n          collapse = \"left\"\n        } }\n      if (bias == \"right\" && start == mEnd - mStart)\n        { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n          node = map[(i += 3) + 2]\n          collapse = \"right\"\n        } }\n      break\n    }\n  }\n  return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n}\n\nfunction getUsefulRect(rects, bias) {\n  var rect = nullRect\n  if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n    if ((rect = rects[i]).left != rect.right) { break }\n  } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n    if ((rect = rects[i$1]).left != rect.right) { break }\n  } }\n  return rect\n}\n\nfunction measureCharInner(cm, prepared, ch, bias) {\n  var place = nodeAndOffsetInLineMap(prepared.map, ch, bias)\n  var node = place.node, start = place.start, end = place.end, collapse = place.collapse\n\n  var rect\n  if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n    for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n      while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start }\n      while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end }\n      if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n        { rect = node.parentNode.getBoundingClientRect() }\n      else\n        { rect = getUsefulRect(range(node, start, end).getClientRects(), bias) }\n      if (rect.left || rect.right || start == 0) { break }\n      end = start\n      start = start - 1\n      collapse = \"right\"\n    }\n    if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect) }\n  } else { // If it is a widget, simply get the box for the whole widget.\n    if (start > 0) { collapse = bias = \"right\" }\n    var rects\n    if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n      { rect = rects[bias == \"right\" ? rects.length - 1 : 0] }\n    else\n      { rect = node.getBoundingClientRect() }\n  }\n  if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n    var rSpan = node.parentNode.getClientRects()[0]\n    if (rSpan)\n      { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom} }\n    else\n      { rect = nullRect }\n  }\n\n  var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top\n  var mid = (rtop + rbot) / 2\n  var heights = prepared.view.measure.heights\n  var i = 0\n  for (; i < heights.length - 1; i++)\n    { if (mid < heights[i]) { break } }\n  var top = i ? heights[i - 1] : 0, bot = heights[i]\n  var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                top: top, bottom: bot}\n  if (!rect.left && !rect.right) { result.bogus = true }\n  if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot }\n\n  return result\n}\n\n// Work around problem with bounding client rects on ranges being\n// returned incorrectly when zoomed on IE10 and below.\nfunction maybeUpdateRectForZooming(measure, rect) {\n  if (!window.screen || screen.logicalXDPI == null ||\n      screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n    { return rect }\n  var scaleX = screen.logicalXDPI / screen.deviceXDPI\n  var scaleY = screen.logicalYDPI / screen.deviceYDPI\n  return {left: rect.left * scaleX, right: rect.right * scaleX,\n          top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n}\n\nfunction clearLineMeasurementCacheFor(lineView) {\n  if (lineView.measure) {\n    lineView.measure.cache = {}\n    lineView.measure.heights = null\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { lineView.measure.caches[i] = {} } }\n  }\n}\n\nfunction clearLineMeasurementCache(cm) {\n  cm.display.externalMeasure = null\n  removeChildren(cm.display.lineMeasure)\n  for (var i = 0; i < cm.display.view.length; i++)\n    { clearLineMeasurementCacheFor(cm.display.view[i]) }\n}\n\nfunction clearCaches(cm) {\n  clearLineMeasurementCache(cm)\n  cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null\n  if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true }\n  cm.display.lineNumChars = null\n}\n\nfunction pageScrollX() {\n  // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n  // which causes page_Offset and bounding client rects to use\n  // different reference viewports and invalidate our calculations.\n  if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n  return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n}\nfunction pageScrollY() {\n  if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n  return window.pageYOffset || (document.documentElement || document.body).scrollTop\n}\n\n// Converts a {top, bottom, left, right} box from line-local\n// coordinates into another coordinate system. Context may be one of\n// \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n// or \"page\".\nfunction intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n  if (!includeWidgets && lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above) {\n    var size = widgetHeight(lineObj.widgets[i])\n    rect.top += size; rect.bottom += size\n  } } }\n  if (context == \"line\") { return rect }\n  if (!context) { context = \"local\" }\n  var yOff = heightAtLine(lineObj)\n  if (context == \"local\") { yOff += paddingTop(cm.display) }\n  else { yOff -= cm.display.viewOffset }\n  if (context == \"page\" || context == \"window\") {\n    var lOff = cm.display.lineSpace.getBoundingClientRect()\n    yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY())\n    var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX())\n    rect.left += xOff; rect.right += xOff\n  }\n  rect.top += yOff; rect.bottom += yOff\n  return rect\n}\n\n// Coverts a box from \"div\" coords to another coordinate system.\n// Context may be \"window\", \"page\", \"div\", or \"local\"./null.\nfunction fromCoordSystem(cm, coords, context) {\n  if (context == \"div\") { return coords }\n  var left = coords.left, top = coords.top\n  // First move into \"page\" coordinate system\n  if (context == \"page\") {\n    left -= pageScrollX()\n    top -= pageScrollY()\n  } else if (context == \"local\" || !context) {\n    var localBox = cm.display.sizer.getBoundingClientRect()\n    left += localBox.left\n    top += localBox.top\n  }\n\n  var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect()\n  return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n}\n\nfunction charCoords(cm, pos, context, lineObj, bias) {\n  if (!lineObj) { lineObj = getLine(cm.doc, pos.line) }\n  return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n}\n\n// Returns a box for a given cursor position, which may have an\n// 'other' property containing the position of the secondary cursor\n// on a bidi boundary.\n// A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n// and after `char - 1` in writing order of `char - 1`\n// A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n// and before `char` in writing order of `char`\n// Examples (upper-case letters are RTL, lower-case are LTR):\n//     Pos(0, 1, ...)\n//     before   after\n// ab     a|b     a|b\n// aB     a|B     aB|\n// Ab     |Ab     A|b\n// AB     B|A     B|A\n// Every position after the last character on a line is considered to stick\n// to the last character on the line.\nfunction cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n  lineObj = lineObj || getLine(cm.doc, pos.line)\n  if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj) }\n  function get(ch, right) {\n    var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight)\n    if (right) { m.left = m.right; } else { m.right = m.left }\n    return intoCoordSystem(cm, lineObj, m, context)\n  }\n  var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky\n  if (ch >= lineObj.text.length) {\n    ch = lineObj.text.length\n    sticky = \"before\"\n  } else if (ch <= 0) {\n    ch = 0\n    sticky = \"after\"\n  }\n  if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n  function getBidi(ch, partPos, invert) {\n    var part = order[partPos], right = (part.level % 2) != 0\n    return get(invert ? ch - 1 : ch, right != invert)\n  }\n  var partPos = getBidiPartAt(order, ch, sticky)\n  var other = bidiOther\n  var val = getBidi(ch, partPos, sticky == \"before\")\n  if (other != null) { val.other = getBidi(ch, other, sticky != \"before\") }\n  return val\n}\n\n// Used to cheaply estimate the coordinates for a position. Used for\n// intermediate scroll updates.\nfunction estimateCoords(cm, pos) {\n  var left = 0\n  pos = clipPos(cm.doc, pos)\n  if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch }\n  var lineObj = getLine(cm.doc, pos.line)\n  var top = heightAtLine(lineObj) + paddingTop(cm.display)\n  return {left: left, right: left, top: top, bottom: top + lineObj.height}\n}\n\n// Positions returned by coordsChar contain some extra information.\n// xRel is the relative x position of the input coordinates compared\n// to the found position (so xRel > 0 means the coordinates are to\n// the right of the character position, for example). When outside\n// is true, that means the coordinates lie outside the line's\n// vertical range.\nfunction PosWithInfo(line, ch, sticky, outside, xRel) {\n  var pos = Pos(line, ch, sticky)\n  pos.xRel = xRel\n  if (outside) { pos.outside = true }\n  return pos\n}\n\n// Compute the character position closest to the given coordinates.\n// Input must be lineSpace-local (\"div\" coordinate system).\nfunction coordsChar(cm, x, y) {\n  var doc = cm.doc\n  y += cm.display.viewOffset\n  if (y < 0) { return PosWithInfo(doc.first, 0, null, true, -1) }\n  var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1\n  if (lineN > last)\n    { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1) }\n  if (x < 0) { x = 0 }\n\n  var lineObj = getLine(doc, lineN)\n  for (;;) {\n    var found = coordsCharInner(cm, lineObj, lineN, x, y)\n    var merged = collapsedSpanAtEnd(lineObj)\n    var mergedPos = merged && merged.find(0, true)\n    if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))\n      { lineN = lineNo(lineObj = mergedPos.to.line) }\n    else\n      { return found }\n  }\n}\n\nfunction wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n  var measure = function (ch) { return intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\"); }\n  var end = lineObj.text.length\n  var begin = findFirst(function (ch) { return measure(ch - 1).bottom <= y; }, end, 0)\n  end = findFirst(function (ch) { return measure(ch).top > y; }, begin, end)\n  return {begin: begin, end: end}\n}\n\nfunction wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n  var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top\n  return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n}\n\nfunction coordsCharInner(cm, lineObj, lineNo, x, y) {\n  y -= heightAtLine(lineObj)\n  var begin = 0, end = lineObj.text.length\n  var preparedMeasure = prepareMeasureForLine(cm, lineObj)\n  var pos\n  var order = getOrder(lineObj, cm.doc.direction)\n  if (order) {\n    if (cm.options.lineWrapping) {\n      ;var assign;\n      ((assign = wrappedLineExtent(cm, lineObj, preparedMeasure, y), begin = assign.begin, end = assign.end, assign))\n    }\n    pos = new Pos(lineNo, Math.floor(begin + (end - begin) / 2))\n    var beginLeft = cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left\n    var dir = beginLeft < x ? 1 : -1\n    var prevDiff, diff = beginLeft - x, prevPos\n    var steps = Math.ceil((end - begin) / 4)\n    outer: do {\n      prevDiff = diff\n      prevPos = pos\n      var i = 0\n      for (; i < steps; ++i) {\n        var prevPos$1 = pos\n        pos = moveVisually(cm, lineObj, pos, dir)\n        if (pos == null || pos.ch < begin || end <= (pos.sticky == \"before\" ? pos.ch - 1 : pos.ch)) {\n          pos = prevPos$1\n          break outer\n        }\n      }\n      diff = cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left - x\n      if (steps > 1) {\n        var diff_change_per_step = Math.abs(diff - prevDiff) / steps\n        steps = Math.min(steps, Math.ceil(Math.abs(diff) / diff_change_per_step))\n        dir = diff < 0 ? 1 : -1\n      }\n    } while (diff != 0 && (steps > 1 || ((dir < 0) != (diff < 0) && (Math.abs(diff) <= Math.abs(prevDiff)))))\n    if (Math.abs(diff) > Math.abs(prevDiff)) {\n      if ((diff < 0) == (prevDiff < 0)) { throw new Error(\"Broke out of infinite loop in coordsCharInner\") }\n      pos = prevPos\n    }\n  } else {\n    var ch = findFirst(function (ch) {\n      var box = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\")\n      if (box.top > y) {\n        // For the cursor stickiness\n        end = Math.min(ch, end)\n        return true\n      }\n      else if (box.bottom <= y) { return false }\n      else if (box.left > x) { return true }\n      else if (box.right < x) { return false }\n      else { return (x - box.left < box.right - x) }\n    }, begin, end)\n    ch = skipExtendingChars(lineObj.text, ch, 1)\n    pos = new Pos(lineNo, ch, ch == end ? \"before\" : \"after\")\n  }\n  var coords = cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure)\n  if (y < coords.top || coords.bottom < y) { pos.outside = true }\n  pos.xRel = x < coords.left ? -1 : (x > coords.right ? 1 : 0)\n  return pos\n}\n\nvar measureText\n// Compute the default text height.\nfunction textHeight(display) {\n  if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n  if (measureText == null) {\n    measureText = elt(\"pre\")\n    // Measure a bunch of lines, for browsers that compute\n    // fractional heights.\n    for (var i = 0; i < 49; ++i) {\n      measureText.appendChild(document.createTextNode(\"x\"))\n      measureText.appendChild(elt(\"br\"))\n    }\n    measureText.appendChild(document.createTextNode(\"x\"))\n  }\n  removeChildrenAndAdd(display.measure, measureText)\n  var height = measureText.offsetHeight / 50\n  if (height > 3) { display.cachedTextHeight = height }\n  removeChildren(display.measure)\n  return height || 1\n}\n\n// Compute the default character width.\nfunction charWidth(display) {\n  if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n  var anchor = elt(\"span\", \"xxxxxxxxxx\")\n  var pre = elt(\"pre\", [anchor])\n  removeChildrenAndAdd(display.measure, pre)\n  var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10\n  if (width > 2) { display.cachedCharWidth = width }\n  return width || 10\n}\n\n// Do a bulk-read of the DOM positions and sizes needed to draw the\n// view, so that we don't interleave reading and writing to the DOM.\nfunction getDimensions(cm) {\n  var d = cm.display, left = {}, width = {}\n  var gutterLeft = d.gutters.clientLeft\n  for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n    left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft\n    width[cm.options.gutters[i]] = n.clientWidth\n  }\n  return {fixedPos: compensateForHScroll(d),\n          gutterTotalWidth: d.gutters.offsetWidth,\n          gutterLeft: left,\n          gutterWidth: width,\n          wrapperWidth: d.wrapper.clientWidth}\n}\n\n// Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n// but using getBoundingClientRect to get a sub-pixel-accurate\n// result.\nfunction compensateForHScroll(display) {\n  return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n}\n\n// Returns a function that estimates the height of a line, to use as\n// first approximation until the line becomes visible (and is thus\n// properly measurable).\nfunction estimateHeight(cm) {\n  var th = textHeight(cm.display), wrapping = cm.options.lineWrapping\n  var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3)\n  return function (line) {\n    if (lineIsHidden(cm.doc, line)) { return 0 }\n\n    var widgetsHeight = 0\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n      if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height }\n    } }\n\n    if (wrapping)\n      { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n    else\n      { return widgetsHeight + th }\n  }\n}\n\nfunction estimateLineHeights(cm) {\n  var doc = cm.doc, est = estimateHeight(cm)\n  doc.iter(function (line) {\n    var estHeight = est(line)\n    if (estHeight != line.height) { updateLineHeight(line, estHeight) }\n  })\n}\n\n// Given a mouse event, find the corresponding position. If liberal\n// is false, it checks whether a gutter or scrollbar was clicked,\n// and returns null if it was. forRect is used by rectangular\n// selections, and tries to estimate a character position even for\n// coordinates beyond the right of the text.\nfunction posFromMouse(cm, e, liberal, forRect) {\n  var display = cm.display\n  if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n  var x, y, space = display.lineSpace.getBoundingClientRect()\n  // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n  try { x = e.clientX - space.left; y = e.clientY - space.top }\n  catch (e) { return null }\n  var coords = coordsChar(cm, x, y), line\n  if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n    var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length\n    coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff))\n  }\n  return coords\n}\n\n// Find the view element corresponding to a given line. Return null\n// when the line isn't visible.\nfunction findViewIndex(cm, n) {\n  if (n >= cm.display.viewTo) { return null }\n  n -= cm.display.viewFrom\n  if (n < 0) { return null }\n  var view = cm.display.view\n  for (var i = 0; i < view.length; i++) {\n    n -= view[i].size\n    if (n < 0) { return i }\n  }\n}\n\nfunction updateSelection(cm) {\n  cm.display.input.showSelection(cm.display.input.prepareSelection())\n}\n\nfunction prepareSelection(cm, primary) {\n  var doc = cm.doc, result = {}\n  var curFragment = result.cursors = document.createDocumentFragment()\n  var selFragment = result.selection = document.createDocumentFragment()\n\n  for (var i = 0; i < doc.sel.ranges.length; i++) {\n    if (primary === false && i == doc.sel.primIndex) { continue }\n    var range = doc.sel.ranges[i]\n    if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n    var collapsed = range.empty()\n    if (collapsed || cm.options.showCursorWhenSelecting)\n      { drawSelectionCursor(cm, range.head, curFragment) }\n    if (!collapsed)\n      { drawSelectionRange(cm, range, selFragment) }\n  }\n  return result\n}\n\n// Draws a cursor for the given range\nfunction drawSelectionCursor(cm, head, output) {\n  var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine)\n\n  var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"))\n  cursor.style.left = pos.left + \"px\"\n  cursor.style.top = pos.top + \"px\"\n  cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\"\n\n  if (pos.other) {\n    // Secondary cursor, shown when on a 'jump' in bi-directional text\n    var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"))\n    otherCursor.style.display = \"\"\n    otherCursor.style.left = pos.other.left + \"px\"\n    otherCursor.style.top = pos.other.top + \"px\"\n    otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\"\n  }\n}\n\n// Draws the given range as a highlighted selection\nfunction drawSelectionRange(cm, range, output) {\n  var display = cm.display, doc = cm.doc\n  var fragment = document.createDocumentFragment()\n  var padding = paddingH(cm.display), leftSide = padding.left\n  var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right\n\n  function add(left, top, width, bottom) {\n    if (top < 0) { top = 0 }\n    top = Math.round(top)\n    bottom = Math.round(bottom)\n    fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")))\n  }\n\n  function drawForLine(line, fromArg, toArg) {\n    var lineObj = getLine(doc, line)\n    var lineLen = lineObj.text.length\n    var start, end\n    function coords(ch, bias) {\n      return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n    }\n\n    iterateBidiSections(getOrder(lineObj, doc.direction), fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir) {\n      var leftPos = coords(from, \"left\"), rightPos, left, right\n      if (from == to) {\n        rightPos = leftPos\n        left = right = leftPos.left\n      } else {\n        rightPos = coords(to - 1, \"right\")\n        if (dir == \"rtl\") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp }\n        left = leftPos.left\n        right = rightPos.right\n      }\n      if (fromArg == null && from == 0) { left = leftSide }\n      if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part\n        add(left, leftPos.top, null, leftPos.bottom)\n        left = leftSide\n        if (leftPos.bottom < rightPos.top) { add(left, leftPos.bottom, null, rightPos.top) }\n      }\n      if (toArg == null && to == lineLen) { right = rightSide }\n      if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)\n        { start = leftPos }\n      if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)\n        { end = rightPos }\n      if (left < leftSide + 1) { left = leftSide }\n      add(left, rightPos.top, right - left, rightPos.bottom)\n    })\n    return {start: start, end: end}\n  }\n\n  var sFrom = range.from(), sTo = range.to()\n  if (sFrom.line == sTo.line) {\n    drawForLine(sFrom.line, sFrom.ch, sTo.ch)\n  } else {\n    var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line)\n    var singleVLine = visualLine(fromLine) == visualLine(toLine)\n    var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end\n    var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start\n    if (singleVLine) {\n      if (leftEnd.top < rightStart.top - 2) {\n        add(leftEnd.right, leftEnd.top, null, leftEnd.bottom)\n        add(leftSide, rightStart.top, rightStart.left, rightStart.bottom)\n      } else {\n        add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom)\n      }\n    }\n    if (leftEnd.bottom < rightStart.top)\n      { add(leftSide, leftEnd.bottom, null, rightStart.top) }\n  }\n\n  output.appendChild(fragment)\n}\n\n// Cursor-blinking\nfunction restartBlink(cm) {\n  if (!cm.state.focused) { return }\n  var display = cm.display\n  clearInterval(display.blinker)\n  var on = true\n  display.cursorDiv.style.visibility = \"\"\n  if (cm.options.cursorBlinkRate > 0)\n    { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"; },\n      cm.options.cursorBlinkRate) }\n  else if (cm.options.cursorBlinkRate < 0)\n    { display.cursorDiv.style.visibility = \"hidden\" }\n}\n\nfunction ensureFocus(cm) {\n  if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm) }\n}\n\nfunction delayBlurEvent(cm) {\n  cm.state.delayingBlurEvent = true\n  setTimeout(function () { if (cm.state.delayingBlurEvent) {\n    cm.state.delayingBlurEvent = false\n    onBlur(cm)\n  } }, 100)\n}\n\nfunction onFocus(cm, e) {\n  if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false }\n\n  if (cm.options.readOnly == \"nocursor\") { return }\n  if (!cm.state.focused) {\n    signal(cm, \"focus\", cm, e)\n    cm.state.focused = true\n    addClass(cm.display.wrapper, \"CodeMirror-focused\")\n    // This test prevents this from firing when a context\n    // menu is closed (since the input reset would kill the\n    // select-all detection hack)\n    if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n      cm.display.input.reset()\n      if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20) } // Issue #1730\n    }\n    cm.display.input.receivedFocus()\n  }\n  restartBlink(cm)\n}\nfunction onBlur(cm, e) {\n  if (cm.state.delayingBlurEvent) { return }\n\n  if (cm.state.focused) {\n    signal(cm, \"blur\", cm, e)\n    cm.state.focused = false\n    rmClass(cm.display.wrapper, \"CodeMirror-focused\")\n  }\n  clearInterval(cm.display.blinker)\n  setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false } }, 150)\n}\n\n// Read the actual heights of the rendered lines, and update their\n// stored heights to match.\nfunction updateHeightsInViewport(cm) {\n  var display = cm.display\n  var prevBottom = display.lineDiv.offsetTop\n  for (var i = 0; i < display.view.length; i++) {\n    var cur = display.view[i], height = (void 0)\n    if (cur.hidden) { continue }\n    if (ie && ie_version < 8) {\n      var bot = cur.node.offsetTop + cur.node.offsetHeight\n      height = bot - prevBottom\n      prevBottom = bot\n    } else {\n      var box = cur.node.getBoundingClientRect()\n      height = box.bottom - box.top\n    }\n    var diff = cur.line.height - height\n    if (height < 2) { height = textHeight(display) }\n    if (diff > .005 || diff < -.005) {\n      updateLineHeight(cur.line, height)\n      updateWidgetHeight(cur.line)\n      if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n        { updateWidgetHeight(cur.rest[j]) } }\n    }\n  }\n}\n\n// Read and store the height of line widgets associated with the\n// given line.\nfunction updateWidgetHeight(line) {\n  if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i)\n    { line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight } }\n}\n\n// Compute the lines that are visible in a given viewport (defaults\n// the the current scroll position). viewport may contain top,\n// height, and ensure (see op.scrollToPos) properties.\nfunction visibleLines(display, doc, viewport) {\n  var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop\n  top = Math.floor(top - paddingTop(display))\n  var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight\n\n  var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom)\n  // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n  // forces those lines into the viewport (if possible).\n  if (viewport && viewport.ensure) {\n    var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line\n    if (ensureFrom < from) {\n      from = ensureFrom\n      to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight)\n    } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n      from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight)\n      to = ensureTo\n    }\n  }\n  return {from: from, to: Math.max(to, from + 1)}\n}\n\n// Re-align line numbers and gutter marks to compensate for\n// horizontal scrolling.\nfunction alignHorizontally(cm) {\n  var display = cm.display, view = display.view\n  if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n  var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft\n  var gutterW = display.gutters.offsetWidth, left = comp + \"px\"\n  for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n    if (cm.options.fixedGutter) {\n      if (view[i].gutter)\n        { view[i].gutter.style.left = left }\n      if (view[i].gutterBackground)\n        { view[i].gutterBackground.style.left = left }\n    }\n    var align = view[i].alignable\n    if (align) { for (var j = 0; j < align.length; j++)\n      { align[j].style.left = left } }\n  } }\n  if (cm.options.fixedGutter)\n    { display.gutters.style.left = (comp + gutterW) + \"px\" }\n}\n\n// Used to ensure that the line number gutter is still the right\n// size for the current document size. Returns true when an update\n// is needed.\nfunction maybeUpdateLineNumberWidth(cm) {\n  if (!cm.options.lineNumbers) { return false }\n  var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display\n  if (last.length != display.lineNumChars) {\n    var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                               \"CodeMirror-linenumber CodeMirror-gutter-elt\"))\n    var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW\n    display.lineGutter.style.width = \"\"\n    display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1\n    display.lineNumWidth = display.lineNumInnerWidth + padding\n    display.lineNumChars = display.lineNumInnerWidth ? last.length : -1\n    display.lineGutter.style.width = display.lineNumWidth + \"px\"\n    updateGutterSpace(cm)\n    return true\n  }\n  return false\n}\n\n// SCROLLING THINGS INTO VIEW\n\n// If an editor sits on the top or bottom of the window, partially\n// scrolled out of view, this ensures that the cursor is visible.\nfunction maybeScrollWindow(cm, rect) {\n  if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n  var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null\n  if (rect.top + box.top < 0) { doScroll = true }\n  else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false }\n  if (doScroll != null && !phantom) {\n    var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"))\n    cm.display.lineSpace.appendChild(scrollNode)\n    scrollNode.scrollIntoView(doScroll)\n    cm.display.lineSpace.removeChild(scrollNode)\n  }\n}\n\n// Scroll a given position into view (immediately), verifying that\n// it actually became visible (as line heights are accurately\n// measured, the position of something may 'drift' during drawing).\nfunction scrollPosIntoView(cm, pos, end, margin) {\n  if (margin == null) { margin = 0 }\n  var rect\n  if (!cm.options.lineWrapping && pos == end) {\n    // Set pos and end to the cursor positions around the character pos sticks to\n    // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n    // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n    pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos\n    end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos\n  }\n  for (var limit = 0; limit < 5; limit++) {\n    var changed = false\n    var coords = cursorCoords(cm, pos)\n    var endCoords = !end || end == pos ? coords : cursorCoords(cm, end)\n    rect = {left: Math.min(coords.left, endCoords.left),\n            top: Math.min(coords.top, endCoords.top) - margin,\n            right: Math.max(coords.left, endCoords.left),\n            bottom: Math.max(coords.bottom, endCoords.bottom) + margin}\n    var scrollPos = calculateScrollPos(cm, rect)\n    var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop)\n      if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true }\n    }\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft)\n      if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true }\n    }\n    if (!changed) { break }\n  }\n  return rect\n}\n\n// Scroll a given set of coordinates into view (immediately).\nfunction scrollIntoView(cm, rect) {\n  var scrollPos = calculateScrollPos(cm, rect)\n  if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop) }\n  if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft) }\n}\n\n// Calculate a new scroll position needed to scroll the given\n// rectangle into view. Returns an object with scrollTop and\n// scrollLeft properties. When these are undefined, the\n// vertical/horizontal position does not need to be adjusted.\nfunction calculateScrollPos(cm, rect) {\n  var display = cm.display, snapMargin = textHeight(cm.display)\n  if (rect.top < 0) { rect.top = 0 }\n  var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop\n  var screen = displayHeight(cm), result = {}\n  if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen }\n  var docBottom = cm.doc.height + paddingVert(display)\n  var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin\n  if (rect.top < screentop) {\n    result.scrollTop = atTop ? 0 : rect.top\n  } else if (rect.bottom > screentop + screen) {\n    var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen)\n    if (newTop != screentop) { result.scrollTop = newTop }\n  }\n\n  var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft\n  var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0)\n  var tooWide = rect.right - rect.left > screenw\n  if (tooWide) { rect.right = rect.left + screenw }\n  if (rect.left < 10)\n    { result.scrollLeft = 0 }\n  else if (rect.left < screenleft)\n    { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)) }\n  else if (rect.right > screenw + screenleft - 3)\n    { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw }\n  return result\n}\n\n// Store a relative adjustment to the scroll position in the current\n// operation (to be applied when the operation finishes).\nfunction addToScrollTop(cm, top) {\n  if (top == null) { return }\n  resolveScrollToPos(cm)\n  cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top\n}\n\n// Make sure that at the end of the operation the current cursor is\n// shown.\nfunction ensureCursorVisible(cm) {\n  resolveScrollToPos(cm)\n  var cur = cm.getCursor()\n  cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin}\n}\n\nfunction scrollToCoords(cm, x, y) {\n  if (x != null || y != null) { resolveScrollToPos(cm) }\n  if (x != null) { cm.curOp.scrollLeft = x }\n  if (y != null) { cm.curOp.scrollTop = y }\n}\n\nfunction scrollToRange(cm, range) {\n  resolveScrollToPos(cm)\n  cm.curOp.scrollToPos = range\n}\n\n// When an operation has its scrollToPos property set, and another\n// scroll action is applied before the end of the operation, this\n// 'simulates' scrolling that position into view in a cheap way, so\n// that the effect of intermediate scroll commands is not ignored.\nfunction resolveScrollToPos(cm) {\n  var range = cm.curOp.scrollToPos\n  if (range) {\n    cm.curOp.scrollToPos = null\n    var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to)\n    scrollToCoordsRange(cm, from, to, range.margin)\n  }\n}\n\nfunction scrollToCoordsRange(cm, from, to, margin) {\n  var sPos = calculateScrollPos(cm, {\n    left: Math.min(from.left, to.left),\n    top: Math.min(from.top, to.top) - margin,\n    right: Math.max(from.right, to.right),\n    bottom: Math.max(from.bottom, to.bottom) + margin\n  })\n  scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop)\n}\n\n// Sync the scrollable area and scrollbars, ensure the viewport\n// covers the visible area.\nfunction updateScrollTop(cm, val) {\n  if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n  if (!gecko) { updateDisplaySimple(cm, {top: val}) }\n  setScrollTop(cm, val, true)\n  if (gecko) { updateDisplaySimple(cm) }\n  startWorker(cm, 100)\n}\n\nfunction setScrollTop(cm, val, forceScroll) {\n  val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val)\n  if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n  cm.doc.scrollTop = val\n  cm.display.scrollbars.setScrollTop(val)\n  if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val }\n}\n\n// Sync scroller and scrollbar, ensure the gutter elements are\n// aligned.\nfunction setScrollLeft(cm, val, isScroller, forceScroll) {\n  val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth)\n  if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n  cm.doc.scrollLeft = val\n  alignHorizontally(cm)\n  if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val }\n  cm.display.scrollbars.setScrollLeft(val)\n}\n\n// SCROLLBARS\n\n// Prepare DOM reads needed to update the scrollbars. Done in one\n// shot to minimize update/measure roundtrips.\nfunction measureForScrollbars(cm) {\n  var d = cm.display, gutterW = d.gutters.offsetWidth\n  var docH = Math.round(cm.doc.height + paddingVert(cm.display))\n  return {\n    clientHeight: d.scroller.clientHeight,\n    viewHeight: d.wrapper.clientHeight,\n    scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n    viewWidth: d.wrapper.clientWidth,\n    barLeft: cm.options.fixedGutter ? gutterW : 0,\n    docHeight: docH,\n    scrollHeight: docH + scrollGap(cm) + d.barHeight,\n    nativeBarWidth: d.nativeBarWidth,\n    gutterWidth: gutterW\n  }\n}\n\nvar NativeScrollbars = function(place, scroll, cm) {\n  this.cm = cm\n  var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\")\n  var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\")\n  place(vert); place(horiz)\n\n  on(vert, \"scroll\", function () {\n    if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\") }\n  })\n  on(horiz, \"scroll\", function () {\n    if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\") }\n  })\n\n  this.checkedZeroWidth = false\n  // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n  if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\" }\n};\n\nNativeScrollbars.prototype.update = function (measure) {\n  var needsH = measure.scrollWidth > measure.clientWidth + 1\n  var needsV = measure.scrollHeight > measure.clientHeight + 1\n  var sWidth = measure.nativeBarWidth\n\n  if (needsV) {\n    this.vert.style.display = \"block\"\n    this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\"\n    var totalHeight = measure.viewHeight - (needsH ? sWidth : 0)\n    // A bug in IE8 can cause this value to be negative, so guard it.\n    this.vert.firstChild.style.height =\n      Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\"\n  } else {\n    this.vert.style.display = \"\"\n    this.vert.firstChild.style.height = \"0\"\n  }\n\n  if (needsH) {\n    this.horiz.style.display = \"block\"\n    this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\"\n    this.horiz.style.left = measure.barLeft + \"px\"\n    var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0)\n    this.horiz.firstChild.style.width =\n      Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\"\n  } else {\n    this.horiz.style.display = \"\"\n    this.horiz.firstChild.style.width = \"0\"\n  }\n\n  if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n    if (sWidth == 0) { this.zeroWidthHack() }\n    this.checkedZeroWidth = true\n  }\n\n  return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n};\n\nNativeScrollbars.prototype.setScrollLeft = function (pos) {\n  if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos }\n  if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\") }\n};\n\nNativeScrollbars.prototype.setScrollTop = function (pos) {\n  if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos }\n  if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\") }\n};\n\nNativeScrollbars.prototype.zeroWidthHack = function () {\n  var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\"\n  this.horiz.style.height = this.vert.style.width = w\n  this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\"\n  this.disableHoriz = new Delayed\n  this.disableVert = new Delayed\n};\n\nNativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n  bar.style.pointerEvents = \"auto\"\n  function maybeDisable() {\n    // To find out whether the scrollbar is still visible, we\n    // check whether the element under the pixel in the bottom\n    // right corner of the scrollbar box is the scrollbar box\n    // itself (when the bar is still visible) or its filler child\n    // (when the bar is hidden). If it is still visible, we keep\n    // it enabled, if it's hidden, we disable pointer events.\n    var box = bar.getBoundingClientRect()\n    var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n        : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1)\n    if (elt != bar) { bar.style.pointerEvents = \"none\" }\n    else { delay.set(1000, maybeDisable) }\n  }\n  delay.set(1000, maybeDisable)\n};\n\nNativeScrollbars.prototype.clear = function () {\n  var parent = this.horiz.parentNode\n  parent.removeChild(this.horiz)\n  parent.removeChild(this.vert)\n};\n\nvar NullScrollbars = function () {};\n\nNullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\nNullScrollbars.prototype.setScrollLeft = function () {};\nNullScrollbars.prototype.setScrollTop = function () {};\nNullScrollbars.prototype.clear = function () {};\n\nfunction updateScrollbars(cm, measure) {\n  if (!measure) { measure = measureForScrollbars(cm) }\n  var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight\n  updateScrollbarsInner(cm, measure)\n  for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n    if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n      { updateHeightsInViewport(cm) }\n    updateScrollbarsInner(cm, measureForScrollbars(cm))\n    startWidth = cm.display.barWidth; startHeight = cm.display.barHeight\n  }\n}\n\n// Re-synchronize the fake scrollbars with the actual size of the\n// content.\nfunction updateScrollbarsInner(cm, measure) {\n  var d = cm.display\n  var sizes = d.scrollbars.update(measure)\n\n  d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\"\n  d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\"\n  d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\"\n\n  if (sizes.right && sizes.bottom) {\n    d.scrollbarFiller.style.display = \"block\"\n    d.scrollbarFiller.style.height = sizes.bottom + \"px\"\n    d.scrollbarFiller.style.width = sizes.right + \"px\"\n  } else { d.scrollbarFiller.style.display = \"\" }\n  if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n    d.gutterFiller.style.display = \"block\"\n    d.gutterFiller.style.height = sizes.bottom + \"px\"\n    d.gutterFiller.style.width = measure.gutterWidth + \"px\"\n  } else { d.gutterFiller.style.display = \"\" }\n}\n\nvar scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars}\n\nfunction initScrollbars(cm) {\n  if (cm.display.scrollbars) {\n    cm.display.scrollbars.clear()\n    if (cm.display.scrollbars.addClass)\n      { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass) }\n  }\n\n  cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n    cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller)\n    // Prevent clicks in the scrollbars from killing focus\n    on(node, \"mousedown\", function () {\n      if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0) }\n    })\n    node.setAttribute(\"cm-not-content\", \"true\")\n  }, function (pos, axis) {\n    if (axis == \"horizontal\") { setScrollLeft(cm, pos) }\n    else { updateScrollTop(cm, pos) }\n  }, cm)\n  if (cm.display.scrollbars.addClass)\n    { addClass(cm.display.wrapper, cm.display.scrollbars.addClass) }\n}\n\n// Operations are used to wrap a series of changes to the editor\n// state in such a way that each change won't have to update the\n// cursor and display (which would be awkward, slow, and\n// error-prone). Instead, display updates are batched and then all\n// combined and executed at once.\n\nvar nextOpId = 0\n// Start a new operation.\nfunction startOperation(cm) {\n  cm.curOp = {\n    cm: cm,\n    viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n    startHeight: cm.doc.height, // Used to detect need to update scrollbar\n    forceUpdate: false,      // Used to force a redraw\n    updateInput: null,       // Whether to reset the input textarea\n    typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n    changeObjs: null,        // Accumulated changes, for firing change events\n    cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n    cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n    selectionChanged: false, // Whether the selection needs to be redrawn\n    updateMaxLine: false,    // Set when the widest line needs to be determined anew\n    scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n    scrollToPos: null,       // Used to scroll to a specific position\n    focus: false,\n    id: ++nextOpId           // Unique ID\n  }\n  pushOperation(cm.curOp)\n}\n\n// Finish an operation, updating the display and signalling delayed events\nfunction endOperation(cm) {\n  var op = cm.curOp\n  finishOperation(op, function (group) {\n    for (var i = 0; i < group.ops.length; i++)\n      { group.ops[i].cm.curOp = null }\n    endOperations(group)\n  })\n}\n\n// The DOM updates done when an operation finishes are batched so\n// that the minimum number of relayouts are required.\nfunction endOperations(group) {\n  var ops = group.ops\n  for (var i = 0; i < ops.length; i++) // Read DOM\n    { endOperation_R1(ops[i]) }\n  for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n    { endOperation_W1(ops[i$1]) }\n  for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n    { endOperation_R2(ops[i$2]) }\n  for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n    { endOperation_W2(ops[i$3]) }\n  for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n    { endOperation_finish(ops[i$4]) }\n}\n\nfunction endOperation_R1(op) {\n  var cm = op.cm, display = cm.display\n  maybeClipScrollbars(cm)\n  if (op.updateMaxLine) { findMaxLine(cm) }\n\n  op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n    op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                       op.scrollToPos.to.line >= display.viewTo) ||\n    display.maxLineChanged && cm.options.lineWrapping\n  op.update = op.mustUpdate &&\n    new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate)\n}\n\nfunction endOperation_W1(op) {\n  op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update)\n}\n\nfunction endOperation_R2(op) {\n  var cm = op.cm, display = cm.display\n  if (op.updatedDisplay) { updateHeightsInViewport(cm) }\n\n  op.barMeasure = measureForScrollbars(cm)\n\n  // If the max line changed since it was last measured, measure it,\n  // and ensure the document's width matches it.\n  // updateDisplay_W2 will use these properties to do the actual resizing\n  if (display.maxLineChanged && !cm.options.lineWrapping) {\n    op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3\n    cm.display.sizerWidth = op.adjustWidthTo\n    op.barMeasure.scrollWidth =\n      Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth)\n    op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm))\n  }\n\n  if (op.updatedDisplay || op.selectionChanged)\n    { op.preparedSelection = display.input.prepareSelection(op.focus) }\n}\n\nfunction endOperation_W2(op) {\n  var cm = op.cm\n\n  if (op.adjustWidthTo != null) {\n    cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\"\n    if (op.maxScrollLeft < cm.doc.scrollLeft)\n      { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true) }\n    cm.display.maxLineChanged = false\n  }\n\n  var takeFocus = op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus())\n  if (op.preparedSelection)\n    { cm.display.input.showSelection(op.preparedSelection, takeFocus) }\n  if (op.updatedDisplay || op.startHeight != cm.doc.height)\n    { updateScrollbars(cm, op.barMeasure) }\n  if (op.updatedDisplay)\n    { setDocumentHeight(cm, op.barMeasure) }\n\n  if (op.selectionChanged) { restartBlink(cm) }\n\n  if (cm.state.focused && op.updateInput)\n    { cm.display.input.reset(op.typing) }\n  if (takeFocus) { ensureFocus(op.cm) }\n}\n\nfunction endOperation_finish(op) {\n  var cm = op.cm, display = cm.display, doc = cm.doc\n\n  if (op.updatedDisplay) { postUpdateDisplay(cm, op.update) }\n\n  // Abort mouse wheel delta measurement, when scrolling explicitly\n  if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n    { display.wheelStartX = display.wheelStartY = null }\n\n  // Propagate the scroll position to the actual DOM scroller\n  if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll) }\n\n  if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true) }\n  // If we need to scroll a specific position into view, do so.\n  if (op.scrollToPos) {\n    var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                 clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin)\n    maybeScrollWindow(cm, rect)\n  }\n\n  // Fire events for markers that are hidden/unidden by editing or\n  // undoing\n  var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers\n  if (hidden) { for (var i = 0; i < hidden.length; ++i)\n    { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\") } } }\n  if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n    { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\") } } }\n\n  if (display.wrapper.offsetHeight)\n    { doc.scrollTop = cm.display.scroller.scrollTop }\n\n  // Fire change events, and delayed event handlers\n  if (op.changeObjs)\n    { signal(cm, \"changes\", cm, op.changeObjs) }\n  if (op.update)\n    { op.update.finish() }\n}\n\n// Run the given function in an operation\nfunction runInOp(cm, f) {\n  if (cm.curOp) { return f() }\n  startOperation(cm)\n  try { return f() }\n  finally { endOperation(cm) }\n}\n// Wraps a function in an operation. Returns the wrapped function.\nfunction operation(cm, f) {\n  return function() {\n    if (cm.curOp) { return f.apply(cm, arguments) }\n    startOperation(cm)\n    try { return f.apply(cm, arguments) }\n    finally { endOperation(cm) }\n  }\n}\n// Used to add methods to editor and doc instances, wrapping them in\n// operations.\nfunction methodOp(f) {\n  return function() {\n    if (this.curOp) { return f.apply(this, arguments) }\n    startOperation(this)\n    try { return f.apply(this, arguments) }\n    finally { endOperation(this) }\n  }\n}\nfunction docMethodOp(f) {\n  return function() {\n    var cm = this.cm\n    if (!cm || cm.curOp) { return f.apply(this, arguments) }\n    startOperation(cm)\n    try { return f.apply(this, arguments) }\n    finally { endOperation(cm) }\n  }\n}\n\n// Updates the display.view data structure for a given change to the\n// document. From and to are in pre-change coordinates. Lendiff is\n// the amount of lines added or subtracted by the change. This is\n// used for changes that span multiple lines, or change the way\n// lines are divided into visual lines. regLineChange (below)\n// registers single-line changes.\nfunction regChange(cm, from, to, lendiff) {\n  if (from == null) { from = cm.doc.first }\n  if (to == null) { to = cm.doc.first + cm.doc.size }\n  if (!lendiff) { lendiff = 0 }\n\n  var display = cm.display\n  if (lendiff && to < display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers > from))\n    { display.updateLineNumbers = from }\n\n  cm.curOp.viewChanged = true\n\n  if (from >= display.viewTo) { // Change after\n    if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n      { resetView(cm) }\n  } else if (to <= display.viewFrom) { // Change before\n    if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n      resetView(cm)\n    } else {\n      display.viewFrom += lendiff\n      display.viewTo += lendiff\n    }\n  } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n    resetView(cm)\n  } else if (from <= display.viewFrom) { // Top overlap\n    var cut = viewCuttingPoint(cm, to, to + lendiff, 1)\n    if (cut) {\n      display.view = display.view.slice(cut.index)\n      display.viewFrom = cut.lineN\n      display.viewTo += lendiff\n    } else {\n      resetView(cm)\n    }\n  } else if (to >= display.viewTo) { // Bottom overlap\n    var cut$1 = viewCuttingPoint(cm, from, from, -1)\n    if (cut$1) {\n      display.view = display.view.slice(0, cut$1.index)\n      display.viewTo = cut$1.lineN\n    } else {\n      resetView(cm)\n    }\n  } else { // Gap in the middle\n    var cutTop = viewCuttingPoint(cm, from, from, -1)\n    var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1)\n    if (cutTop && cutBot) {\n      display.view = display.view.slice(0, cutTop.index)\n        .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n        .concat(display.view.slice(cutBot.index))\n      display.viewTo += lendiff\n    } else {\n      resetView(cm)\n    }\n  }\n\n  var ext = display.externalMeasured\n  if (ext) {\n    if (to < ext.lineN)\n      { ext.lineN += lendiff }\n    else if (from < ext.lineN + ext.size)\n      { display.externalMeasured = null }\n  }\n}\n\n// Register a change to a single line. Type must be one of \"text\",\n// \"gutter\", \"class\", \"widget\"\nfunction regLineChange(cm, line, type) {\n  cm.curOp.viewChanged = true\n  var display = cm.display, ext = cm.display.externalMeasured\n  if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n    { display.externalMeasured = null }\n\n  if (line < display.viewFrom || line >= display.viewTo) { return }\n  var lineView = display.view[findViewIndex(cm, line)]\n  if (lineView.node == null) { return }\n  var arr = lineView.changes || (lineView.changes = [])\n  if (indexOf(arr, type) == -1) { arr.push(type) }\n}\n\n// Clear the view.\nfunction resetView(cm) {\n  cm.display.viewFrom = cm.display.viewTo = cm.doc.first\n  cm.display.view = []\n  cm.display.viewOffset = 0\n}\n\nfunction viewCuttingPoint(cm, oldN, newN, dir) {\n  var index = findViewIndex(cm, oldN), diff, view = cm.display.view\n  if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n    { return {index: index, lineN: newN} }\n  var n = cm.display.viewFrom\n  for (var i = 0; i < index; i++)\n    { n += view[i].size }\n  if (n != oldN) {\n    if (dir > 0) {\n      if (index == view.length - 1) { return null }\n      diff = (n + view[index].size) - oldN\n      index++\n    } else {\n      diff = n - oldN\n    }\n    oldN += diff; newN += diff\n  }\n  while (visualLineNo(cm.doc, newN) != newN) {\n    if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n    newN += dir * view[index - (dir < 0 ? 1 : 0)].size\n    index += dir\n  }\n  return {index: index, lineN: newN}\n}\n\n// Force the view to cover a given range, adding empty view element\n// or clipping off existing ones as needed.\nfunction adjustView(cm, from, to) {\n  var display = cm.display, view = display.view\n  if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n    display.view = buildViewArray(cm, from, to)\n    display.viewFrom = from\n  } else {\n    if (display.viewFrom > from)\n      { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view) }\n    else if (display.viewFrom < from)\n      { display.view = display.view.slice(findViewIndex(cm, from)) }\n    display.viewFrom = from\n    if (display.viewTo < to)\n      { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)) }\n    else if (display.viewTo > to)\n      { display.view = display.view.slice(0, findViewIndex(cm, to)) }\n  }\n  display.viewTo = to\n}\n\n// Count the number of lines in the view whose DOM representation is\n// out of date (or nonexistent).\nfunction countDirtyView(cm) {\n  var view = cm.display.view, dirty = 0\n  for (var i = 0; i < view.length; i++) {\n    var lineView = view[i]\n    if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty }\n  }\n  return dirty\n}\n\n// HIGHLIGHT WORKER\n\nfunction startWorker(cm, time) {\n  if (cm.doc.highlightFrontier < cm.display.viewTo)\n    { cm.state.highlight.set(time, bind(highlightWorker, cm)) }\n}\n\nfunction highlightWorker(cm) {\n  var doc = cm.doc\n  if (doc.highlightFrontier >= cm.display.viewTo) { return }\n  var end = +new Date + cm.options.workTime\n  var context = getContextBefore(cm, doc.highlightFrontier)\n  var changedLines = []\n\n  doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n    if (context.line >= cm.display.viewFrom) { // Visible\n      var oldStyles = line.styles\n      var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null\n      var highlighted = highlightLine(cm, line, context, true)\n      if (resetState) { context.state = resetState }\n      line.styles = highlighted.styles\n      var oldCls = line.styleClasses, newCls = highlighted.classes\n      if (newCls) { line.styleClasses = newCls }\n      else if (oldCls) { line.styleClasses = null }\n      var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n        oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass)\n      for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i] }\n      if (ischange) { changedLines.push(context.line) }\n      line.stateAfter = context.save()\n      context.nextLine()\n    } else {\n      if (line.text.length <= cm.options.maxHighlightLength)\n        { processLine(cm, line.text, context) }\n      line.stateAfter = context.line % 5 == 0 ? context.save() : null\n      context.nextLine()\n    }\n    if (+new Date > end) {\n      startWorker(cm, cm.options.workDelay)\n      return true\n    }\n  })\n  doc.highlightFrontier = context.line\n  doc.modeFrontier = Math.max(doc.modeFrontier, context.line)\n  if (changedLines.length) { runInOp(cm, function () {\n    for (var i = 0; i < changedLines.length; i++)\n      { regLineChange(cm, changedLines[i], \"text\") }\n  }) }\n}\n\n// DISPLAY DRAWING\n\nvar DisplayUpdate = function(cm, viewport, force) {\n  var display = cm.display\n\n  this.viewport = viewport\n  // Store some values that we'll need later (but don't want to force a relayout for)\n  this.visible = visibleLines(display, cm.doc, viewport)\n  this.editorIsHidden = !display.wrapper.offsetWidth\n  this.wrapperHeight = display.wrapper.clientHeight\n  this.wrapperWidth = display.wrapper.clientWidth\n  this.oldDisplayWidth = displayWidth(cm)\n  this.force = force\n  this.dims = getDimensions(cm)\n  this.events = []\n};\n\nDisplayUpdate.prototype.signal = function (emitter, type) {\n  if (hasHandler(emitter, type))\n    { this.events.push(arguments) }\n};\nDisplayUpdate.prototype.finish = function () {\n    var this$1 = this;\n\n  for (var i = 0; i < this.events.length; i++)\n    { signal.apply(null, this$1.events[i]) }\n};\n\nfunction maybeClipScrollbars(cm) {\n  var display = cm.display\n  if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n    display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth\n    display.heightForcer.style.height = scrollGap(cm) + \"px\"\n    display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\"\n    display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\"\n    display.scrollbarsClipped = true\n  }\n}\n\nfunction selectionSnapshot(cm) {\n  if (cm.hasFocus()) { return null }\n  var active = activeElt()\n  if (!active || !contains(cm.display.lineDiv, active)) { return null }\n  var result = {activeElt: active}\n  if (window.getSelection) {\n    var sel = window.getSelection()\n    if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n      result.anchorNode = sel.anchorNode\n      result.anchorOffset = sel.anchorOffset\n      result.focusNode = sel.focusNode\n      result.focusOffset = sel.focusOffset\n    }\n  }\n  return result\n}\n\nfunction restoreSelection(snapshot) {\n  if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n  snapshot.activeElt.focus()\n  if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n    var sel = window.getSelection(), range = document.createRange()\n    range.setEnd(snapshot.anchorNode, snapshot.anchorOffset)\n    range.collapse(false)\n    sel.removeAllRanges()\n    sel.addRange(range)\n    sel.extend(snapshot.focusNode, snapshot.focusOffset)\n  }\n}\n\n// Does the actual updating of the line display. Bails out\n// (returning false) when there is nothing to be done and forced is\n// false.\nfunction updateDisplayIfNeeded(cm, update) {\n  var display = cm.display, doc = cm.doc\n\n  if (update.editorIsHidden) {\n    resetView(cm)\n    return false\n  }\n\n  // Bail out if the visible area is already rendered and nothing changed.\n  if (!update.force &&\n      update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n      display.renderedView == display.view && countDirtyView(cm) == 0)\n    { return false }\n\n  if (maybeUpdateLineNumberWidth(cm)) {\n    resetView(cm)\n    update.dims = getDimensions(cm)\n  }\n\n  // Compute a suitable new viewport (from & to)\n  var end = doc.first + doc.size\n  var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first)\n  var to = Math.min(end, update.visible.to + cm.options.viewportMargin)\n  if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom) }\n  if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo) }\n  if (sawCollapsedSpans) {\n    from = visualLineNo(cm.doc, from)\n    to = visualLineEndNo(cm.doc, to)\n  }\n\n  var different = from != display.viewFrom || to != display.viewTo ||\n    display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth\n  adjustView(cm, from, to)\n\n  display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom))\n  // Position the mover div to align with the current scroll position\n  cm.display.mover.style.top = display.viewOffset + \"px\"\n\n  var toUpdate = countDirtyView(cm)\n  if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n    { return false }\n\n  // For big changes, we hide the enclosing element during the\n  // update, since that speeds up the operations on most browsers.\n  var selSnapshot = selectionSnapshot(cm)\n  if (toUpdate > 4) { display.lineDiv.style.display = \"none\" }\n  patchDisplay(cm, display.updateLineNumbers, update.dims)\n  if (toUpdate > 4) { display.lineDiv.style.display = \"\" }\n  display.renderedView = display.view\n  // There might have been a widget with a focused element that got\n  // hidden or updated, if so re-focus it.\n  restoreSelection(selSnapshot)\n\n  // Prevent selection and cursors from interfering with the scroll\n  // width and height.\n  removeChildren(display.cursorDiv)\n  removeChildren(display.selectionDiv)\n  display.gutters.style.height = display.sizer.style.minHeight = 0\n\n  if (different) {\n    display.lastWrapHeight = update.wrapperHeight\n    display.lastWrapWidth = update.wrapperWidth\n    startWorker(cm, 400)\n  }\n\n  display.updateLineNumbers = null\n\n  return true\n}\n\nfunction postUpdateDisplay(cm, update) {\n  var viewport = update.viewport\n\n  for (var first = true;; first = false) {\n    if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n      // Clip forced viewport to actual scrollable area.\n      if (viewport && viewport.top != null)\n        { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)} }\n      // Updated line heights might result in the drawn area not\n      // actually covering the viewport. Keep looping until it does.\n      update.visible = visibleLines(cm.display, cm.doc, viewport)\n      if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n        { break }\n    }\n    if (!updateDisplayIfNeeded(cm, update)) { break }\n    updateHeightsInViewport(cm)\n    var barMeasure = measureForScrollbars(cm)\n    updateSelection(cm)\n    updateScrollbars(cm, barMeasure)\n    setDocumentHeight(cm, barMeasure)\n    update.force = false\n  }\n\n  update.signal(cm, \"update\", cm)\n  if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n    update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo)\n    cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo\n  }\n}\n\nfunction updateDisplaySimple(cm, viewport) {\n  var update = new DisplayUpdate(cm, viewport)\n  if (updateDisplayIfNeeded(cm, update)) {\n    updateHeightsInViewport(cm)\n    postUpdateDisplay(cm, update)\n    var barMeasure = measureForScrollbars(cm)\n    updateSelection(cm)\n    updateScrollbars(cm, barMeasure)\n    setDocumentHeight(cm, barMeasure)\n    update.finish()\n  }\n}\n\n// Sync the actual display DOM structure with display.view, removing\n// nodes for lines that are no longer in view, and creating the ones\n// that are not there yet, and updating the ones that are out of\n// date.\nfunction patchDisplay(cm, updateNumbersFrom, dims) {\n  var display = cm.display, lineNumbers = cm.options.lineNumbers\n  var container = display.lineDiv, cur = container.firstChild\n\n  function rm(node) {\n    var next = node.nextSibling\n    // Works around a throw-scroll bug in OS X Webkit\n    if (webkit && mac && cm.display.currentWheelTarget == node)\n      { node.style.display = \"none\" }\n    else\n      { node.parentNode.removeChild(node) }\n    return next\n  }\n\n  var view = display.view, lineN = display.viewFrom\n  // Loop over the elements in the view, syncing cur (the DOM nodes\n  // in display.lineDiv) with the view as we go.\n  for (var i = 0; i < view.length; i++) {\n    var lineView = view[i]\n    if (lineView.hidden) {\n    } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n      var node = buildLineElement(cm, lineView, lineN, dims)\n      container.insertBefore(node, cur)\n    } else { // Already drawn\n      while (cur != lineView.node) { cur = rm(cur) }\n      var updateNumber = lineNumbers && updateNumbersFrom != null &&\n        updateNumbersFrom <= lineN && lineView.lineNumber\n      if (lineView.changes) {\n        if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false }\n        updateLineForChanges(cm, lineView, lineN, dims)\n      }\n      if (updateNumber) {\n        removeChildren(lineView.lineNumber)\n        lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)))\n      }\n      cur = lineView.node.nextSibling\n    }\n    lineN += lineView.size\n  }\n  while (cur) { cur = rm(cur) }\n}\n\nfunction updateGutterSpace(cm) {\n  var width = cm.display.gutters.offsetWidth\n  cm.display.sizer.style.marginLeft = width + \"px\"\n}\n\nfunction setDocumentHeight(cm, measure) {\n  cm.display.sizer.style.minHeight = measure.docHeight + \"px\"\n  cm.display.heightForcer.style.top = measure.docHeight + \"px\"\n  cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\"\n}\n\n// Rebuild the gutter elements, ensure the margin to the left of the\n// code matches their width.\nfunction updateGutters(cm) {\n  var gutters = cm.display.gutters, specs = cm.options.gutters\n  removeChildren(gutters)\n  var i = 0\n  for (; i < specs.length; ++i) {\n    var gutterClass = specs[i]\n    var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass))\n    if (gutterClass == \"CodeMirror-linenumbers\") {\n      cm.display.lineGutter = gElt\n      gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\"\n    }\n  }\n  gutters.style.display = i ? \"\" : \"none\"\n  updateGutterSpace(cm)\n}\n\n// Make sure the gutters options contains the element\n// \"CodeMirror-linenumbers\" when the lineNumbers option is true.\nfunction setGuttersForLineNumbers(options) {\n  var found = indexOf(options.gutters, \"CodeMirror-linenumbers\")\n  if (found == -1 && options.lineNumbers) {\n    options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"])\n  } else if (found > -1 && !options.lineNumbers) {\n    options.gutters = options.gutters.slice(0)\n    options.gutters.splice(found, 1)\n  }\n}\n\nvar wheelSamples = 0;\nvar wheelPixelsPerUnit = null;\n// Fill in a browser-detected starting value on browsers where we\n// know one. These don't have to be accurate -- the result of them\n// being wrong would just be a slight flicker on the first wheel\n// scroll (if it is large enough).\nif (ie) { wheelPixelsPerUnit = -.53 }\nelse if (gecko) { wheelPixelsPerUnit = 15 }\nelse if (chrome) { wheelPixelsPerUnit = -.7 }\nelse if (safari) { wheelPixelsPerUnit = -1/3 }\n\nfunction wheelEventDelta(e) {\n  var dx = e.wheelDeltaX, dy = e.wheelDeltaY\n  if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail }\n  if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail }\n  else if (dy == null) { dy = e.wheelDelta }\n  return {x: dx, y: dy}\n}\nfunction wheelEventPixels(e) {\n  var delta = wheelEventDelta(e)\n  delta.x *= wheelPixelsPerUnit\n  delta.y *= wheelPixelsPerUnit\n  return delta\n}\n\nfunction onScrollWheel(cm, e) {\n  var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y\n\n  var display = cm.display, scroll = display.scroller\n  // Quit if there's nothing to scroll here\n  var canScrollX = scroll.scrollWidth > scroll.clientWidth\n  var canScrollY = scroll.scrollHeight > scroll.clientHeight\n  if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n  // Webkit browsers on OS X abort momentum scrolls when the target\n  // of the scroll event is removed from the scrollable element.\n  // This hack (see related code in patchDisplay) makes sure the\n  // element is kept around.\n  if (dy && mac && webkit) {\n    outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n      for (var i = 0; i < view.length; i++) {\n        if (view[i].node == cur) {\n          cm.display.currentWheelTarget = cur\n          break outer\n        }\n      }\n    }\n  }\n\n  // On some browsers, horizontal scrolling will cause redraws to\n  // happen before the gutter has been realigned, causing it to\n  // wriggle around in a most unseemly way. When we have an\n  // estimated pixels/delta value, we just handle horizontal\n  // scrolling entirely here. It'll be slightly off from native, but\n  // better than glitching out.\n  if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n    if (dy && canScrollY)\n      { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)) }\n    setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit))\n    // Only prevent default scrolling if vertical scrolling is\n    // actually possible. Otherwise, it causes vertical scroll\n    // jitter on OSX trackpads when deltaX is small and deltaY\n    // is large (issue #3579)\n    if (!dy || (dy && canScrollY))\n      { e_preventDefault(e) }\n    display.wheelStartX = null // Abort measurement, if in progress\n    return\n  }\n\n  // 'Project' the visible viewport to cover the area that is being\n  // scrolled into view (if we know enough to estimate it).\n  if (dy && wheelPixelsPerUnit != null) {\n    var pixels = dy * wheelPixelsPerUnit\n    var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight\n    if (pixels < 0) { top = Math.max(0, top + pixels - 50) }\n    else { bot = Math.min(cm.doc.height, bot + pixels + 50) }\n    updateDisplaySimple(cm, {top: top, bottom: bot})\n  }\n\n  if (wheelSamples < 20) {\n    if (display.wheelStartX == null) {\n      display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop\n      display.wheelDX = dx; display.wheelDY = dy\n      setTimeout(function () {\n        if (display.wheelStartX == null) { return }\n        var movedX = scroll.scrollLeft - display.wheelStartX\n        var movedY = scroll.scrollTop - display.wheelStartY\n        var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n          (movedX && display.wheelDX && movedX / display.wheelDX)\n        display.wheelStartX = display.wheelStartY = null\n        if (!sample) { return }\n        wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1)\n        ++wheelSamples\n      }, 200)\n    } else {\n      display.wheelDX += dx; display.wheelDY += dy\n    }\n  }\n}\n\n// Selection objects are immutable. A new one is created every time\n// the selection changes. A selection is one or more non-overlapping\n// (and non-touching) ranges, sorted, and an integer that indicates\n// which one is the primary selection (the one that's scrolled into\n// view, that getCursor returns, etc).\nvar Selection = function(ranges, primIndex) {\n  this.ranges = ranges\n  this.primIndex = primIndex\n};\n\nSelection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\nSelection.prototype.equals = function (other) {\n    var this$1 = this;\n\n  if (other == this) { return true }\n  if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n  for (var i = 0; i < this.ranges.length; i++) {\n    var here = this$1.ranges[i], there = other.ranges[i]\n    if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n  }\n  return true\n};\n\nSelection.prototype.deepCopy = function () {\n    var this$1 = this;\n\n  var out = []\n  for (var i = 0; i < this.ranges.length; i++)\n    { out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head)) }\n  return new Selection(out, this.primIndex)\n};\n\nSelection.prototype.somethingSelected = function () {\n    var this$1 = this;\n\n  for (var i = 0; i < this.ranges.length; i++)\n    { if (!this$1.ranges[i].empty()) { return true } }\n  return false\n};\n\nSelection.prototype.contains = function (pos, end) {\n    var this$1 = this;\n\n  if (!end) { end = pos }\n  for (var i = 0; i < this.ranges.length; i++) {\n    var range = this$1.ranges[i]\n    if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n      { return i }\n  }\n  return -1\n};\n\nvar Range = function(anchor, head) {\n  this.anchor = anchor; this.head = head\n};\n\nRange.prototype.from = function () { return minPos(this.anchor, this.head) };\nRange.prototype.to = function () { return maxPos(this.anchor, this.head) };\nRange.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n// Take an unsorted, potentially overlapping set of ranges, and\n// build a selection out of it. 'Consumes' ranges array (modifying\n// it).\nfunction normalizeSelection(ranges, primIndex) {\n  var prim = ranges[primIndex]\n  ranges.sort(function (a, b) { return cmp(a.from(), b.from()); })\n  primIndex = indexOf(ranges, prim)\n  for (var i = 1; i < ranges.length; i++) {\n    var cur = ranges[i], prev = ranges[i - 1]\n    if (cmp(prev.to(), cur.from()) >= 0) {\n      var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to())\n      var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head\n      if (i <= primIndex) { --primIndex }\n      ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to))\n    }\n  }\n  return new Selection(ranges, primIndex)\n}\n\nfunction simpleSelection(anchor, head) {\n  return new Selection([new Range(anchor, head || anchor)], 0)\n}\n\n// Compute the position of the end of a change (its 'to' property\n// refers to the pre-change end).\nfunction changeEnd(change) {\n  if (!change.text) { return change.to }\n  return Pos(change.from.line + change.text.length - 1,\n             lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n}\n\n// Adjust a position to refer to the post-change position of the\n// same text, or the end of the change if the change covers it.\nfunction adjustForChange(pos, change) {\n  if (cmp(pos, change.from) < 0) { return pos }\n  if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n  var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch\n  if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch }\n  return Pos(line, ch)\n}\n\nfunction computeSelAfterChange(doc, change) {\n  var out = []\n  for (var i = 0; i < doc.sel.ranges.length; i++) {\n    var range = doc.sel.ranges[i]\n    out.push(new Range(adjustForChange(range.anchor, change),\n                       adjustForChange(range.head, change)))\n  }\n  return normalizeSelection(out, doc.sel.primIndex)\n}\n\nfunction offsetPos(pos, old, nw) {\n  if (pos.line == old.line)\n    { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n  else\n    { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n}\n\n// Used by replaceSelections to allow moving the selection to the\n// start or around the replaced test. Hint may be \"start\" or \"around\".\nfunction computeReplacedSel(doc, changes, hint) {\n  var out = []\n  var oldPrev = Pos(doc.first, 0), newPrev = oldPrev\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i]\n    var from = offsetPos(change.from, oldPrev, newPrev)\n    var to = offsetPos(changeEnd(change), oldPrev, newPrev)\n    oldPrev = change.to\n    newPrev = to\n    if (hint == \"around\") {\n      var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0\n      out[i] = new Range(inv ? to : from, inv ? from : to)\n    } else {\n      out[i] = new Range(from, from)\n    }\n  }\n  return new Selection(out, doc.sel.primIndex)\n}\n\n// Used to get the editor into a consistent state again when options change.\n\nfunction loadMode(cm) {\n  cm.doc.mode = getMode(cm.options, cm.doc.modeOption)\n  resetModeState(cm)\n}\n\nfunction resetModeState(cm) {\n  cm.doc.iter(function (line) {\n    if (line.stateAfter) { line.stateAfter = null }\n    if (line.styles) { line.styles = null }\n  })\n  cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first\n  startWorker(cm, 100)\n  cm.state.modeGen++\n  if (cm.curOp) { regChange(cm) }\n}\n\n// DOCUMENT DATA STRUCTURE\n\n// By default, updates that start and end at the beginning of a line\n// are treated specially, in order to make the association of line\n// widgets and marker elements with the text behave more intuitive.\nfunction isWholeLineUpdate(doc, change) {\n  return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n    (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n}\n\n// Perform a change on the document data structure.\nfunction updateDoc(doc, change, markedSpans, estimateHeight) {\n  function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n  function update(line, text, spans) {\n    updateLine(line, text, spans, estimateHeight)\n    signalLater(line, \"change\", line, change)\n  }\n  function linesFor(start, end) {\n    var result = []\n    for (var i = start; i < end; ++i)\n      { result.push(new Line(text[i], spansFor(i), estimateHeight)) }\n    return result\n  }\n\n  var from = change.from, to = change.to, text = change.text\n  var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line)\n  var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line\n\n  // Adjust the line structure\n  if (change.full) {\n    doc.insert(0, linesFor(0, text.length))\n    doc.remove(text.length, doc.size - text.length)\n  } else if (isWholeLineUpdate(doc, change)) {\n    // This is a whole-line replace. Treated specially to make\n    // sure line objects move the way they are supposed to.\n    var added = linesFor(0, text.length - 1)\n    update(lastLine, lastLine.text, lastSpans)\n    if (nlines) { doc.remove(from.line, nlines) }\n    if (added.length) { doc.insert(from.line, added) }\n  } else if (firstLine == lastLine) {\n    if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans)\n    } else {\n      var added$1 = linesFor(1, text.length - 1)\n      added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight))\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0))\n      doc.insert(from.line + 1, added$1)\n    }\n  } else if (text.length == 1) {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0))\n    doc.remove(from.line + 1, nlines)\n  } else {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0))\n    update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans)\n    var added$2 = linesFor(1, text.length - 1)\n    if (nlines > 1) { doc.remove(from.line + 1, nlines - 1) }\n    doc.insert(from.line + 1, added$2)\n  }\n\n  signalLater(doc, \"change\", doc, change)\n}\n\n// Call f for all linked documents.\nfunction linkedDocs(doc, f, sharedHistOnly) {\n  function propagate(doc, skip, sharedHist) {\n    if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n      var rel = doc.linked[i]\n      if (rel.doc == skip) { continue }\n      var shared = sharedHist && rel.sharedHist\n      if (sharedHistOnly && !shared) { continue }\n      f(rel.doc, shared)\n      propagate(rel.doc, doc, shared)\n    } }\n  }\n  propagate(doc, null, true)\n}\n\n// Attach a document to an editor.\nfunction attachDoc(cm, doc) {\n  if (doc.cm) { throw new Error(\"This document is already in use.\") }\n  cm.doc = doc\n  doc.cm = cm\n  estimateLineHeights(cm)\n  loadMode(cm)\n  setDirectionClass(cm)\n  if (!cm.options.lineWrapping) { findMaxLine(cm) }\n  cm.options.mode = doc.modeOption\n  regChange(cm)\n}\n\nfunction setDirectionClass(cm) {\n  ;(cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\")\n}\n\nfunction directionChanged(cm) {\n  runInOp(cm, function () {\n    setDirectionClass(cm)\n    regChange(cm)\n  })\n}\n\nfunction History(startGen) {\n  // Arrays of change events and selections. Doing something adds an\n  // event to done and clears undo. Undoing moves events from done\n  // to undone, redoing moves them in the other direction.\n  this.done = []; this.undone = []\n  this.undoDepth = Infinity\n  // Used to track when changes can be merged into a single undo\n  // event\n  this.lastModTime = this.lastSelTime = 0\n  this.lastOp = this.lastSelOp = null\n  this.lastOrigin = this.lastSelOrigin = null\n  // Used by the isClean() method\n  this.generation = this.maxGeneration = startGen || 1\n}\n\n// Create a history change event from an updateDoc-style change\n// object.\nfunction historyChangeFromChange(doc, change) {\n  var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)}\n  attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1)\n  linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true)\n  return histChange\n}\n\n// Pop all selection events off the end of a history array. Stop at\n// a change event.\nfunction clearSelectionEvents(array) {\n  while (array.length) {\n    var last = lst(array)\n    if (last.ranges) { array.pop() }\n    else { break }\n  }\n}\n\n// Find the top change event in the history. Pop off selection\n// events that are in the way.\nfunction lastChangeEvent(hist, force) {\n  if (force) {\n    clearSelectionEvents(hist.done)\n    return lst(hist.done)\n  } else if (hist.done.length && !lst(hist.done).ranges) {\n    return lst(hist.done)\n  } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n    hist.done.pop()\n    return lst(hist.done)\n  }\n}\n\n// Register a change in the history. Merges changes that are within\n// a single operation, or are close together with an origin that\n// allows merging (starting with \"+\") into a single event.\nfunction addChangeToHistory(doc, change, selAfter, opId) {\n  var hist = doc.history\n  hist.undone.length = 0\n  var time = +new Date, cur\n  var last\n\n  if ((hist.lastOp == opId ||\n       hist.lastOrigin == change.origin && change.origin &&\n       ((change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||\n        change.origin.charAt(0) == \"*\")) &&\n      (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n    // Merge this change into the last event\n    last = lst(cur.changes)\n    if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n      // Optimized case for simple insertion -- don't want to add\n      // new changesets for every character typed\n      last.to = changeEnd(change)\n    } else {\n      // Add new sub-event\n      cur.changes.push(historyChangeFromChange(doc, change))\n    }\n  } else {\n    // Can not be merged, start a new event.\n    var before = lst(hist.done)\n    if (!before || !before.ranges)\n      { pushSelectionToHistory(doc.sel, hist.done) }\n    cur = {changes: [historyChangeFromChange(doc, change)],\n           generation: hist.generation}\n    hist.done.push(cur)\n    while (hist.done.length > hist.undoDepth) {\n      hist.done.shift()\n      if (!hist.done[0].ranges) { hist.done.shift() }\n    }\n  }\n  hist.done.push(selAfter)\n  hist.generation = ++hist.maxGeneration\n  hist.lastModTime = hist.lastSelTime = time\n  hist.lastOp = hist.lastSelOp = opId\n  hist.lastOrigin = hist.lastSelOrigin = change.origin\n\n  if (!last) { signal(doc, \"historyAdded\") }\n}\n\nfunction selectionEventCanBeMerged(doc, origin, prev, sel) {\n  var ch = origin.charAt(0)\n  return ch == \"*\" ||\n    ch == \"+\" &&\n    prev.ranges.length == sel.ranges.length &&\n    prev.somethingSelected() == sel.somethingSelected() &&\n    new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n}\n\n// Called whenever the selection changes, sets the new selection as\n// the pending selection in the history, and pushes the old pending\n// selection into the 'done' array when it was significantly\n// different (in number of selected ranges, emptiness, or time).\nfunction addSelectionToHistory(doc, sel, opId, options) {\n  var hist = doc.history, origin = options && options.origin\n\n  // A new event is started when the previous origin does not match\n  // the current, or the origins don't allow matching. Origins\n  // starting with * are always merged, those starting with + are\n  // merged when similar and close together in time.\n  if (opId == hist.lastSelOp ||\n      (origin && hist.lastSelOrigin == origin &&\n       (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n        selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n    { hist.done[hist.done.length - 1] = sel }\n  else\n    { pushSelectionToHistory(sel, hist.done) }\n\n  hist.lastSelTime = +new Date\n  hist.lastSelOrigin = origin\n  hist.lastSelOp = opId\n  if (options && options.clearRedo !== false)\n    { clearSelectionEvents(hist.undone) }\n}\n\nfunction pushSelectionToHistory(sel, dest) {\n  var top = lst(dest)\n  if (!(top && top.ranges && top.equals(sel)))\n    { dest.push(sel) }\n}\n\n// Used to store marked span information in the history.\nfunction attachLocalSpans(doc, change, from, to) {\n  var existing = change[\"spans_\" + doc.id], n = 0\n  doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n    if (line.markedSpans)\n      { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans }\n    ++n\n  })\n}\n\n// When un/re-doing restores text containing marked spans, those\n// that have been explicitly cleared should not be restored.\nfunction removeClearedSpans(spans) {\n  if (!spans) { return null }\n  var out\n  for (var i = 0; i < spans.length; ++i) {\n    if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i) } }\n    else if (out) { out.push(spans[i]) }\n  }\n  return !out ? spans : out.length ? out : null\n}\n\n// Retrieve and filter the old marked spans stored in a change event.\nfunction getOldSpans(doc, change) {\n  var found = change[\"spans_\" + doc.id]\n  if (!found) { return null }\n  var nw = []\n  for (var i = 0; i < change.text.length; ++i)\n    { nw.push(removeClearedSpans(found[i])) }\n  return nw\n}\n\n// Used for un/re-doing changes from the history. Combines the\n// result of computing the existing spans with the set of spans that\n// existed in the history (so that deleting around a span and then\n// undoing brings back the span).\nfunction mergeOldSpans(doc, change) {\n  var old = getOldSpans(doc, change)\n  var stretched = stretchSpansOverChange(doc, change)\n  if (!old) { return stretched }\n  if (!stretched) { return old }\n\n  for (var i = 0; i < old.length; ++i) {\n    var oldCur = old[i], stretchCur = stretched[i]\n    if (oldCur && stretchCur) {\n      spans: for (var j = 0; j < stretchCur.length; ++j) {\n        var span = stretchCur[j]\n        for (var k = 0; k < oldCur.length; ++k)\n          { if (oldCur[k].marker == span.marker) { continue spans } }\n        oldCur.push(span)\n      }\n    } else if (stretchCur) {\n      old[i] = stretchCur\n    }\n  }\n  return old\n}\n\n// Used both to provide a JSON-safe object in .getHistory, and, when\n// detaching a document, to split the history in two\nfunction copyHistoryArray(events, newGroup, instantiateSel) {\n  var copy = []\n  for (var i = 0; i < events.length; ++i) {\n    var event = events[i]\n    if (event.ranges) {\n      copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event)\n      continue\n    }\n    var changes = event.changes, newChanges = []\n    copy.push({changes: newChanges})\n    for (var j = 0; j < changes.length; ++j) {\n      var change = changes[j], m = (void 0)\n      newChanges.push({from: change.from, to: change.to, text: change.text})\n      if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n        if (indexOf(newGroup, Number(m[1])) > -1) {\n          lst(newChanges)[prop] = change[prop]\n          delete change[prop]\n        }\n      } } }\n    }\n  }\n  return copy\n}\n\n// The 'scroll' parameter given to many of these indicated whether\n// the new cursor position should be scrolled into view after\n// modifying the selection.\n\n// If shift is held or the extend flag is set, extends a range to\n// include a given position (and optionally a second position).\n// Otherwise, simply returns the range between the given positions.\n// Used for cursor motion and such.\nfunction extendRange(range, head, other, extend) {\n  if (extend) {\n    var anchor = range.anchor\n    if (other) {\n      var posBefore = cmp(head, anchor) < 0\n      if (posBefore != (cmp(other, anchor) < 0)) {\n        anchor = head\n        head = other\n      } else if (posBefore != (cmp(head, other) < 0)) {\n        head = other\n      }\n    }\n    return new Range(anchor, head)\n  } else {\n    return new Range(other || head, head)\n  }\n}\n\n// Extend the primary selection range, discard the rest.\nfunction extendSelection(doc, head, other, options, extend) {\n  if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend) }\n  setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options)\n}\n\n// Extend all selections (pos is an array of selections with length\n// equal the number of selections)\nfunction extendSelections(doc, heads, options) {\n  var out = []\n  var extend = doc.cm && (doc.cm.display.shift || doc.extend)\n  for (var i = 0; i < doc.sel.ranges.length; i++)\n    { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend) }\n  var newSel = normalizeSelection(out, doc.sel.primIndex)\n  setSelection(doc, newSel, options)\n}\n\n// Updates a single range in the selection.\nfunction replaceOneSelection(doc, i, range, options) {\n  var ranges = doc.sel.ranges.slice(0)\n  ranges[i] = range\n  setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options)\n}\n\n// Reset the selection to a single range.\nfunction setSimpleSelection(doc, anchor, head, options) {\n  setSelection(doc, simpleSelection(anchor, head), options)\n}\n\n// Give beforeSelectionChange handlers a change to influence a\n// selection update.\nfunction filterSelectionChange(doc, sel, options) {\n  var obj = {\n    ranges: sel.ranges,\n    update: function(ranges) {\n      var this$1 = this;\n\n      this.ranges = []\n      for (var i = 0; i < ranges.length; i++)\n        { this$1.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                   clipPos(doc, ranges[i].head)) }\n    },\n    origin: options && options.origin\n  }\n  signal(doc, \"beforeSelectionChange\", doc, obj)\n  if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj) }\n  if (obj.ranges != sel.ranges) { return normalizeSelection(obj.ranges, obj.ranges.length - 1) }\n  else { return sel }\n}\n\nfunction setSelectionReplaceHistory(doc, sel, options) {\n  var done = doc.history.done, last = lst(done)\n  if (last && last.ranges) {\n    done[done.length - 1] = sel\n    setSelectionNoUndo(doc, sel, options)\n  } else {\n    setSelection(doc, sel, options)\n  }\n}\n\n// Set a new selection.\nfunction setSelection(doc, sel, options) {\n  setSelectionNoUndo(doc, sel, options)\n  addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options)\n}\n\nfunction setSelectionNoUndo(doc, sel, options) {\n  if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n    { sel = filterSelectionChange(doc, sel, options) }\n\n  var bias = options && options.bias ||\n    (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1)\n  setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true))\n\n  if (!(options && options.scroll === false) && doc.cm)\n    { ensureCursorVisible(doc.cm) }\n}\n\nfunction setSelectionInner(doc, sel) {\n  if (sel.equals(doc.sel)) { return }\n\n  doc.sel = sel\n\n  if (doc.cm) {\n    doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true\n    signalCursorActivity(doc.cm)\n  }\n  signalLater(doc, \"cursorActivity\", doc)\n}\n\n// Verify that the selection does not partially select any atomic\n// marked ranges.\nfunction reCheckSelection(doc) {\n  setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false))\n}\n\n// Return a selection that does not partially select any atomic\n// ranges.\nfunction skipAtomicInSelection(doc, sel, bias, mayClear) {\n  var out\n  for (var i = 0; i < sel.ranges.length; i++) {\n    var range = sel.ranges[i]\n    var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i]\n    var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear)\n    var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear)\n    if (out || newAnchor != range.anchor || newHead != range.head) {\n      if (!out) { out = sel.ranges.slice(0, i) }\n      out[i] = new Range(newAnchor, newHead)\n    }\n  }\n  return out ? normalizeSelection(out, sel.primIndex) : sel\n}\n\nfunction skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n  var line = getLine(doc, pos.line)\n  if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n    var sp = line.markedSpans[i], m = sp.marker\n    if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n        (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n      if (mayClear) {\n        signal(m, \"beforeCursorEnter\")\n        if (m.explicitlyCleared) {\n          if (!line.markedSpans) { break }\n          else {--i; continue}\n        }\n      }\n      if (!m.atomic) { continue }\n\n      if (oldPos) {\n        var near = m.find(dir < 0 ? 1 : -1), diff = (void 0)\n        if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft)\n          { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null) }\n        if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n          { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n      }\n\n      var far = m.find(dir < 0 ? -1 : 1)\n      if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight)\n        { far = movePos(doc, far, dir, far.line == pos.line ? line : null) }\n      return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n    }\n  } }\n  return pos\n}\n\n// Ensure a given position is not inside an atomic range.\nfunction skipAtomic(doc, pos, oldPos, bias, mayClear) {\n  var dir = bias || 1\n  var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n      skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true))\n  if (!found) {\n    doc.cantEdit = true\n    return Pos(doc.first, 0)\n  }\n  return found\n}\n\nfunction movePos(doc, pos, dir, line) {\n  if (dir < 0 && pos.ch == 0) {\n    if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n    else { return null }\n  } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n    if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n    else { return null }\n  } else {\n    return new Pos(pos.line, pos.ch + dir)\n  }\n}\n\nfunction selectAll(cm) {\n  cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll)\n}\n\n// UPDATING\n\n// Allow \"beforeChange\" event handlers to influence a change\nfunction filterChange(doc, change, update) {\n  var obj = {\n    canceled: false,\n    from: change.from,\n    to: change.to,\n    text: change.text,\n    origin: change.origin,\n    cancel: function () { return obj.canceled = true; }\n  }\n  if (update) { obj.update = function (from, to, text, origin) {\n    if (from) { obj.from = clipPos(doc, from) }\n    if (to) { obj.to = clipPos(doc, to) }\n    if (text) { obj.text = text }\n    if (origin !== undefined) { obj.origin = origin }\n  } }\n  signal(doc, \"beforeChange\", doc, obj)\n  if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj) }\n\n  if (obj.canceled) { return null }\n  return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n}\n\n// Apply a change to a document, and add it to the document's\n// history, and propagating it to all linked documents.\nfunction makeChange(doc, change, ignoreReadOnly) {\n  if (doc.cm) {\n    if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n    if (doc.cm.state.suppressEdits) { return }\n  }\n\n  if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n    change = filterChange(doc, change, true)\n    if (!change) { return }\n  }\n\n  // Possibly split or suppress the update based on the presence\n  // of read-only spans in its range.\n  var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to)\n  if (split) {\n    for (var i = split.length - 1; i >= 0; --i)\n      { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text}) }\n  } else {\n    makeChangeInner(doc, change)\n  }\n}\n\nfunction makeChangeInner(doc, change) {\n  if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n  var selAfter = computeSelAfterChange(doc, change)\n  addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN)\n\n  makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change))\n  var rebased = []\n\n  linkedDocs(doc, function (doc, sharedHist) {\n    if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n      rebaseHist(doc.history, change)\n      rebased.push(doc.history)\n    }\n    makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change))\n  })\n}\n\n// Revert a change stored in a document's history.\nfunction makeChangeFromHistory(doc, type, allowSelectionOnly) {\n  if (doc.cm && doc.cm.state.suppressEdits && !allowSelectionOnly) { return }\n\n  var hist = doc.history, event, selAfter = doc.sel\n  var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done\n\n  // Verify that there is a useable event (so that ctrl-z won't\n  // needlessly clear selection events)\n  var i = 0\n  for (; i < source.length; i++) {\n    event = source[i]\n    if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n      { break }\n  }\n  if (i == source.length) { return }\n  hist.lastOrigin = hist.lastSelOrigin = null\n\n  for (;;) {\n    event = source.pop()\n    if (event.ranges) {\n      pushSelectionToHistory(event, dest)\n      if (allowSelectionOnly && !event.equals(doc.sel)) {\n        setSelection(doc, event, {clearRedo: false})\n        return\n      }\n      selAfter = event\n    }\n    else { break }\n  }\n\n  // Build up a reverse change object to add to the opposite history\n  // stack (redo when undoing, and vice versa).\n  var antiChanges = []\n  pushSelectionToHistory(selAfter, dest)\n  dest.push({changes: antiChanges, generation: hist.generation})\n  hist.generation = event.generation || ++hist.maxGeneration\n\n  var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")\n\n  var loop = function ( i ) {\n    var change = event.changes[i]\n    change.origin = type\n    if (filter && !filterChange(doc, change, false)) {\n      source.length = 0\n      return {}\n    }\n\n    antiChanges.push(historyChangeFromChange(doc, change))\n\n    var after = i ? computeSelAfterChange(doc, change) : lst(source)\n    makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change))\n    if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}) }\n    var rebased = []\n\n    // Propagate to the linked documents\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change)\n        rebased.push(doc.history)\n      }\n      makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change))\n    })\n  };\n\n  for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n    var returned = loop( i$1 );\n\n    if ( returned ) return returned.v;\n  }\n}\n\n// Sub-views need their line numbers shifted when text is added\n// above or below them in the parent document.\nfunction shiftDoc(doc, distance) {\n  if (distance == 0) { return }\n  doc.first += distance\n  doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n    Pos(range.anchor.line + distance, range.anchor.ch),\n    Pos(range.head.line + distance, range.head.ch)\n  ); }), doc.sel.primIndex)\n  if (doc.cm) {\n    regChange(doc.cm, doc.first, doc.first - distance, distance)\n    for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n      { regLineChange(doc.cm, l, \"gutter\") }\n  }\n}\n\n// More lower-level change function, handling only a single document\n// (not linked ones).\nfunction makeChangeSingleDoc(doc, change, selAfter, spans) {\n  if (doc.cm && !doc.cm.curOp)\n    { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n  if (change.to.line < doc.first) {\n    shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line))\n    return\n  }\n  if (change.from.line > doc.lastLine()) { return }\n\n  // Clip the change to the size of this doc\n  if (change.from.line < doc.first) {\n    var shift = change.text.length - 1 - (doc.first - change.from.line)\n    shiftDoc(doc, shift)\n    change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n              text: [lst(change.text)], origin: change.origin}\n  }\n  var last = doc.lastLine()\n  if (change.to.line > last) {\n    change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n              text: [change.text[0]], origin: change.origin}\n  }\n\n  change.removed = getBetween(doc, change.from, change.to)\n\n  if (!selAfter) { selAfter = computeSelAfterChange(doc, change) }\n  if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans) }\n  else { updateDoc(doc, change, spans) }\n  setSelectionNoUndo(doc, selAfter, sel_dontScroll)\n}\n\n// Handle the interaction of a change to a document with the editor\n// that this document is part of.\nfunction makeChangeSingleDocInEditor(cm, change, spans) {\n  var doc = cm.doc, display = cm.display, from = change.from, to = change.to\n\n  var recomputeMaxLength = false, checkWidthStart = from.line\n  if (!cm.options.lineWrapping) {\n    checkWidthStart = lineNo(visualLine(getLine(doc, from.line)))\n    doc.iter(checkWidthStart, to.line + 1, function (line) {\n      if (line == display.maxLine) {\n        recomputeMaxLength = true\n        return true\n      }\n    })\n  }\n\n  if (doc.sel.contains(change.from, change.to) > -1)\n    { signalCursorActivity(cm) }\n\n  updateDoc(doc, change, spans, estimateHeight(cm))\n\n  if (!cm.options.lineWrapping) {\n    doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n      var len = lineLength(line)\n      if (len > display.maxLineLength) {\n        display.maxLine = line\n        display.maxLineLength = len\n        display.maxLineChanged = true\n        recomputeMaxLength = false\n      }\n    })\n    if (recomputeMaxLength) { cm.curOp.updateMaxLine = true }\n  }\n\n  retreatFrontier(doc, from.line)\n  startWorker(cm, 400)\n\n  var lendiff = change.text.length - (to.line - from.line) - 1\n  // Remember that these lines changed, for updating the display\n  if (change.full)\n    { regChange(cm) }\n  else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n    { regLineChange(cm, from.line, \"text\") }\n  else\n    { regChange(cm, from.line, to.line + 1, lendiff) }\n\n  var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\")\n  if (changeHandler || changesHandler) {\n    var obj = {\n      from: from, to: to,\n      text: change.text,\n      removed: change.removed,\n      origin: change.origin\n    }\n    if (changeHandler) { signalLater(cm, \"change\", cm, obj) }\n    if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj) }\n  }\n  cm.display.selForContextMenu = null\n}\n\nfunction replaceRange(doc, code, from, to, origin) {\n  if (!to) { to = from }\n  if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp }\n  if (typeof code == \"string\") { code = doc.splitLines(code) }\n  makeChange(doc, {from: from, to: to, text: code, origin: origin})\n}\n\n// Rebasing/resetting history to deal with externally-sourced changes\n\nfunction rebaseHistSelSingle(pos, from, to, diff) {\n  if (to < pos.line) {\n    pos.line += diff\n  } else if (from < pos.line) {\n    pos.line = from\n    pos.ch = 0\n  }\n}\n\n// Tries to rebase an array of history events given a change in the\n// document. If the change touches the same lines as the event, the\n// event, and everything 'behind' it, is discarded. If the change is\n// before the event, the event's positions are updated. Uses a\n// copy-on-write scheme for the positions, to avoid having to\n// reallocate them all on every rebase, but also avoid problems with\n// shared position objects being unsafely updated.\nfunction rebaseHistArray(array, from, to, diff) {\n  for (var i = 0; i < array.length; ++i) {\n    var sub = array[i], ok = true\n    if (sub.ranges) {\n      if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true }\n      for (var j = 0; j < sub.ranges.length; j++) {\n        rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff)\n        rebaseHistSelSingle(sub.ranges[j].head, from, to, diff)\n      }\n      continue\n    }\n    for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n      var cur = sub.changes[j$1]\n      if (to < cur.from.line) {\n        cur.from = Pos(cur.from.line + diff, cur.from.ch)\n        cur.to = Pos(cur.to.line + diff, cur.to.ch)\n      } else if (from <= cur.to.line) {\n        ok = false\n        break\n      }\n    }\n    if (!ok) {\n      array.splice(0, i + 1)\n      i = 0\n    }\n  }\n}\n\nfunction rebaseHist(hist, change) {\n  var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1\n  rebaseHistArray(hist.done, from, to, diff)\n  rebaseHistArray(hist.undone, from, to, diff)\n}\n\n// Utility for applying a change to a line by handle or number,\n// returning the number and optionally registering the line as\n// changed.\nfunction changeLine(doc, handle, changeType, op) {\n  var no = handle, line = handle\n  if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)) }\n  else { no = lineNo(handle) }\n  if (no == null) { return null }\n  if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType) }\n  return line\n}\n\n// The document is represented as a BTree consisting of leaves, with\n// chunk of lines in them, and branches, with up to ten leaves or\n// other branch nodes below them. The top node is always a branch\n// node, and is the document object itself (meaning it has\n// additional methods and properties).\n//\n// All nodes have parent links. The tree is used both to go from\n// line numbers to line objects, and to go from objects to numbers.\n// It also indexes by height, and is used to convert between height\n// and line object, and to find the total height of the document.\n//\n// See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\nfunction LeafChunk(lines) {\n  var this$1 = this;\n\n  this.lines = lines\n  this.parent = null\n  var height = 0\n  for (var i = 0; i < lines.length; ++i) {\n    lines[i].parent = this$1\n    height += lines[i].height\n  }\n  this.height = height\n}\n\nLeafChunk.prototype = {\n  chunkSize: function chunkSize() { return this.lines.length },\n\n  // Remove the n lines at offset 'at'.\n  removeInner: function removeInner(at, n) {\n    var this$1 = this;\n\n    for (var i = at, e = at + n; i < e; ++i) {\n      var line = this$1.lines[i]\n      this$1.height -= line.height\n      cleanUpLine(line)\n      signalLater(line, \"delete\")\n    }\n    this.lines.splice(at, n)\n  },\n\n  // Helper used to collapse a small branch into a single leaf.\n  collapse: function collapse(lines) {\n    lines.push.apply(lines, this.lines)\n  },\n\n  // Insert the given array of lines at offset 'at', count them as\n  // having the given height.\n  insertInner: function insertInner(at, lines, height) {\n    var this$1 = this;\n\n    this.height += height\n    this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at))\n    for (var i = 0; i < lines.length; ++i) { lines[i].parent = this$1 }\n  },\n\n  // Used to iterate over a part of the tree.\n  iterN: function iterN(at, n, op) {\n    var this$1 = this;\n\n    for (var e = at + n; at < e; ++at)\n      { if (op(this$1.lines[at])) { return true } }\n  }\n}\n\nfunction BranchChunk(children) {\n  var this$1 = this;\n\n  this.children = children\n  var size = 0, height = 0\n  for (var i = 0; i < children.length; ++i) {\n    var ch = children[i]\n    size += ch.chunkSize(); height += ch.height\n    ch.parent = this$1\n  }\n  this.size = size\n  this.height = height\n  this.parent = null\n}\n\nBranchChunk.prototype = {\n  chunkSize: function chunkSize() { return this.size },\n\n  removeInner: function removeInner(at, n) {\n    var this$1 = this;\n\n    this.size -= n\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize()\n      if (at < sz) {\n        var rm = Math.min(n, sz - at), oldHeight = child.height\n        child.removeInner(at, rm)\n        this$1.height -= oldHeight - child.height\n        if (sz == rm) { this$1.children.splice(i--, 1); child.parent = null }\n        if ((n -= rm) == 0) { break }\n        at = 0\n      } else { at -= sz }\n    }\n    // If the result is smaller than 25 lines, ensure that it is a\n    // single leaf node.\n    if (this.size - n < 25 &&\n        (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n      var lines = []\n      this.collapse(lines)\n      this.children = [new LeafChunk(lines)]\n      this.children[0].parent = this\n    }\n  },\n\n  collapse: function collapse(lines) {\n    var this$1 = this;\n\n    for (var i = 0; i < this.children.length; ++i) { this$1.children[i].collapse(lines) }\n  },\n\n  insertInner: function insertInner(at, lines, height) {\n    var this$1 = this;\n\n    this.size += lines.length\n    this.height += height\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize()\n      if (at <= sz) {\n        child.insertInner(at, lines, height)\n        if (child.lines && child.lines.length > 50) {\n          // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n          // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n          var remaining = child.lines.length % 25 + 25\n          for (var pos = remaining; pos < child.lines.length;) {\n            var leaf = new LeafChunk(child.lines.slice(pos, pos += 25))\n            child.height -= leaf.height\n            this$1.children.splice(++i, 0, leaf)\n            leaf.parent = this$1\n          }\n          child.lines = child.lines.slice(0, remaining)\n          this$1.maybeSpill()\n        }\n        break\n      }\n      at -= sz\n    }\n  },\n\n  // When a node has grown, check whether it should be split.\n  maybeSpill: function maybeSpill() {\n    if (this.children.length <= 10) { return }\n    var me = this\n    do {\n      var spilled = me.children.splice(me.children.length - 5, 5)\n      var sibling = new BranchChunk(spilled)\n      if (!me.parent) { // Become the parent node\n        var copy = new BranchChunk(me.children)\n        copy.parent = me\n        me.children = [copy, sibling]\n        me = copy\n     } else {\n        me.size -= sibling.size\n        me.height -= sibling.height\n        var myIndex = indexOf(me.parent.children, me)\n        me.parent.children.splice(myIndex + 1, 0, sibling)\n      }\n      sibling.parent = me.parent\n    } while (me.children.length > 10)\n    me.parent.maybeSpill()\n  },\n\n  iterN: function iterN(at, n, op) {\n    var this$1 = this;\n\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize()\n      if (at < sz) {\n        var used = Math.min(n, sz - at)\n        if (child.iterN(at, used, op)) { return true }\n        if ((n -= used) == 0) { break }\n        at = 0\n      } else { at -= sz }\n    }\n  }\n}\n\n// Line widgets are block elements displayed above or below a line.\n\nvar LineWidget = function(doc, node, options) {\n  var this$1 = this;\n\n  if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n    { this$1[opt] = options[opt] } } }\n  this.doc = doc\n  this.node = node\n};\n\nLineWidget.prototype.clear = function () {\n    var this$1 = this;\n\n  var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line)\n  if (no == null || !ws) { return }\n  for (var i = 0; i < ws.length; ++i) { if (ws[i] == this$1) { ws.splice(i--, 1) } }\n  if (!ws.length) { line.widgets = null }\n  var height = widgetHeight(this)\n  updateLineHeight(line, Math.max(0, line.height - height))\n  if (cm) {\n    runInOp(cm, function () {\n      adjustScrollWhenAboveVisible(cm, line, -height)\n      regLineChange(cm, no, \"widget\")\n    })\n    signalLater(cm, \"lineWidgetCleared\", cm, this, no)\n  }\n};\n\nLineWidget.prototype.changed = function () {\n    var this$1 = this;\n\n  var oldH = this.height, cm = this.doc.cm, line = this.line\n  this.height = null\n  var diff = widgetHeight(this) - oldH\n  if (!diff) { return }\n  updateLineHeight(line, line.height + diff)\n  if (cm) {\n    runInOp(cm, function () {\n      cm.curOp.forceUpdate = true\n      adjustScrollWhenAboveVisible(cm, line, diff)\n      signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line))\n    })\n  }\n};\neventMixin(LineWidget)\n\nfunction adjustScrollWhenAboveVisible(cm, line, diff) {\n  if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n    { addToScrollTop(cm, diff) }\n}\n\nfunction addLineWidget(doc, handle, node, options) {\n  var widget = new LineWidget(doc, node, options)\n  var cm = doc.cm\n  if (cm && widget.noHScroll) { cm.display.alignWidgets = true }\n  changeLine(doc, handle, \"widget\", function (line) {\n    var widgets = line.widgets || (line.widgets = [])\n    if (widget.insertAt == null) { widgets.push(widget) }\n    else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget) }\n    widget.line = line\n    if (cm && !lineIsHidden(doc, line)) {\n      var aboveVisible = heightAtLine(line) < doc.scrollTop\n      updateLineHeight(line, line.height + widgetHeight(widget))\n      if (aboveVisible) { addToScrollTop(cm, widget.height) }\n      cm.curOp.forceUpdate = true\n    }\n    return true\n  })\n  signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle))\n  return widget\n}\n\n// TEXTMARKERS\n\n// Created with markText and setBookmark methods. A TextMarker is a\n// handle that can be used to clear or find a marked position in the\n// document. Line objects hold arrays (markedSpans) containing\n// {from, to, marker} object pointing to such marker objects, and\n// indicating that such a marker is present on that line. Multiple\n// lines may point to the same marker when it spans across lines.\n// The spans will have null for their from/to properties when the\n// marker continues beyond the start/end of the line. Markers have\n// links back to the lines they currently touch.\n\n// Collapsed markers have unique ids, in order to be able to order\n// them, which is needed for uniquely determining an outer marker\n// when they overlap (they may nest, but not partially overlap).\nvar nextMarkerId = 0\n\nvar TextMarker = function(doc, type) {\n  this.lines = []\n  this.type = type\n  this.doc = doc\n  this.id = ++nextMarkerId\n};\n\n// Clear the marker.\nTextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n  if (this.explicitlyCleared) { return }\n  var cm = this.doc.cm, withOp = cm && !cm.curOp\n  if (withOp) { startOperation(cm) }\n  if (hasHandler(this, \"clear\")) {\n    var found = this.find()\n    if (found) { signalLater(this, \"clear\", found.from, found.to) }\n  }\n  var min = null, max = null\n  for (var i = 0; i < this.lines.length; ++i) {\n    var line = this$1.lines[i]\n    var span = getMarkedSpanFor(line.markedSpans, this$1)\n    if (cm && !this$1.collapsed) { regLineChange(cm, lineNo(line), \"text\") }\n    else if (cm) {\n      if (span.to != null) { max = lineNo(line) }\n      if (span.from != null) { min = lineNo(line) }\n    }\n    line.markedSpans = removeMarkedSpan(line.markedSpans, span)\n    if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm)\n      { updateLineHeight(line, textHeight(cm.display)) }\n  }\n  if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n    var visual = visualLine(this$1.lines[i$1]), len = lineLength(visual)\n    if (len > cm.display.maxLineLength) {\n      cm.display.maxLine = visual\n      cm.display.maxLineLength = len\n      cm.display.maxLineChanged = true\n    }\n  } }\n\n  if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1) }\n  this.lines.length = 0\n  this.explicitlyCleared = true\n  if (this.atomic && this.doc.cantEdit) {\n    this.doc.cantEdit = false\n    if (cm) { reCheckSelection(cm.doc) }\n  }\n  if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max) }\n  if (withOp) { endOperation(cm) }\n  if (this.parent) { this.parent.clear() }\n};\n\n// Find the position of the marker in the document. Returns a {from,\n// to} object by default. Side can be passed to get a specific side\n// -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n// Pos objects returned contain a line object, rather than a line\n// number (used to prevent looking up the same line twice).\nTextMarker.prototype.find = function (side, lineObj) {\n    var this$1 = this;\n\n  if (side == null && this.type == \"bookmark\") { side = 1 }\n  var from, to\n  for (var i = 0; i < this.lines.length; ++i) {\n    var line = this$1.lines[i]\n    var span = getMarkedSpanFor(line.markedSpans, this$1)\n    if (span.from != null) {\n      from = Pos(lineObj ? line : lineNo(line), span.from)\n      if (side == -1) { return from }\n    }\n    if (span.to != null) {\n      to = Pos(lineObj ? line : lineNo(line), span.to)\n      if (side == 1) { return to }\n    }\n  }\n  return from && {from: from, to: to}\n};\n\n// Signals that the marker's widget changed, and surrounding layout\n// should be recomputed.\nTextMarker.prototype.changed = function () {\n    var this$1 = this;\n\n  var pos = this.find(-1, true), widget = this, cm = this.doc.cm\n  if (!pos || !cm) { return }\n  runInOp(cm, function () {\n    var line = pos.line, lineN = lineNo(pos.line)\n    var view = findViewForLine(cm, lineN)\n    if (view) {\n      clearLineMeasurementCacheFor(view)\n      cm.curOp.selectionChanged = cm.curOp.forceUpdate = true\n    }\n    cm.curOp.updateMaxLine = true\n    if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n      var oldHeight = widget.height\n      widget.height = null\n      var dHeight = widgetHeight(widget) - oldHeight\n      if (dHeight)\n        { updateLineHeight(line, line.height + dHeight) }\n    }\n    signalLater(cm, \"markerChanged\", cm, this$1)\n  })\n};\n\nTextMarker.prototype.attachLine = function (line) {\n  if (!this.lines.length && this.doc.cm) {\n    var op = this.doc.cm.curOp\n    if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n      { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this) }\n  }\n  this.lines.push(line)\n};\n\nTextMarker.prototype.detachLine = function (line) {\n  this.lines.splice(indexOf(this.lines, line), 1)\n  if (!this.lines.length && this.doc.cm) {\n    var op = this.doc.cm.curOp\n    ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this)\n  }\n};\neventMixin(TextMarker)\n\n// Create a marker, wire it up to the right lines, and\nfunction markText(doc, from, to, options, type) {\n  // Shared markers (across linked documents) are handled separately\n  // (markTextShared will call out to this again, once per\n  // document).\n  if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n  // Ensure we are in an operation.\n  if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n  var marker = new TextMarker(doc, type), diff = cmp(from, to)\n  if (options) { copyObj(options, marker, false) }\n  // Don't connect empty markers unless clearWhenEmpty is false\n  if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n    { return marker }\n  if (marker.replacedWith) {\n    // Showing up as a widget implies collapsed (widget replaces text)\n    marker.collapsed = true\n    marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\")\n    if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\") }\n    if (options.insertLeft) { marker.widgetNode.insertLeft = true }\n  }\n  if (marker.collapsed) {\n    if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n        from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n      { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n    seeCollapsedSpans()\n  }\n\n  if (marker.addToHistory)\n    { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN) }\n\n  var curLine = from.line, cm = doc.cm, updateMaxLine\n  doc.iter(curLine, to.line + 1, function (line) {\n    if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n      { updateMaxLine = true }\n    if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0) }\n    addMarkedSpan(line, new MarkedSpan(marker,\n                                       curLine == from.line ? from.ch : null,\n                                       curLine == to.line ? to.ch : null))\n    ++curLine\n  })\n  // lineIsHidden depends on the presence of the spans, so needs a second pass\n  if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n    if (lineIsHidden(doc, line)) { updateLineHeight(line, 0) }\n  }) }\n\n  if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }) }\n\n  if (marker.readOnly) {\n    seeReadOnlySpans()\n    if (doc.history.done.length || doc.history.undone.length)\n      { doc.clearHistory() }\n  }\n  if (marker.collapsed) {\n    marker.id = ++nextMarkerId\n    marker.atomic = true\n  }\n  if (cm) {\n    // Sync editor state\n    if (updateMaxLine) { cm.curOp.updateMaxLine = true }\n    if (marker.collapsed)\n      { regChange(cm, from.line, to.line + 1) }\n    else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)\n      { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\") } }\n    if (marker.atomic) { reCheckSelection(cm.doc) }\n    signalLater(cm, \"markerAdded\", cm, marker)\n  }\n  return marker\n}\n\n// SHARED TEXTMARKERS\n\n// A shared marker spans multiple linked documents. It is\n// implemented as a meta-marker-object controlling multiple normal\n// markers.\nvar SharedTextMarker = function(markers, primary) {\n  var this$1 = this;\n\n  this.markers = markers\n  this.primary = primary\n  for (var i = 0; i < markers.length; ++i)\n    { markers[i].parent = this$1 }\n};\n\nSharedTextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n  if (this.explicitlyCleared) { return }\n  this.explicitlyCleared = true\n  for (var i = 0; i < this.markers.length; ++i)\n    { this$1.markers[i].clear() }\n  signalLater(this, \"clear\")\n};\n\nSharedTextMarker.prototype.find = function (side, lineObj) {\n  return this.primary.find(side, lineObj)\n};\neventMixin(SharedTextMarker)\n\nfunction markTextShared(doc, from, to, options, type) {\n  options = copyObj(options)\n  options.shared = false\n  var markers = [markText(doc, from, to, options, type)], primary = markers[0]\n  var widget = options.widgetNode\n  linkedDocs(doc, function (doc) {\n    if (widget) { options.widgetNode = widget.cloneNode(true) }\n    markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type))\n    for (var i = 0; i < doc.linked.length; ++i)\n      { if (doc.linked[i].isParent) { return } }\n    primary = lst(markers)\n  })\n  return new SharedTextMarker(markers, primary)\n}\n\nfunction findSharedMarkers(doc) {\n  return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n}\n\nfunction copySharedMarkers(doc, markers) {\n  for (var i = 0; i < markers.length; i++) {\n    var marker = markers[i], pos = marker.find()\n    var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to)\n    if (cmp(mFrom, mTo)) {\n      var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type)\n      marker.markers.push(subMark)\n      subMark.parent = marker\n    }\n  }\n}\n\nfunction detachSharedMarkers(markers) {\n  var loop = function ( i ) {\n    var marker = markers[i], linked = [marker.primary.doc]\n    linkedDocs(marker.primary.doc, function (d) { return linked.push(d); })\n    for (var j = 0; j < marker.markers.length; j++) {\n      var subMarker = marker.markers[j]\n      if (indexOf(linked, subMarker.doc) == -1) {\n        subMarker.parent = null\n        marker.markers.splice(j--, 1)\n      }\n    }\n  };\n\n  for (var i = 0; i < markers.length; i++) loop( i );\n}\n\nvar nextDocId = 0\nvar Doc = function(text, mode, firstLine, lineSep, direction) {\n  if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n  if (firstLine == null) { firstLine = 0 }\n\n  BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])])\n  this.first = firstLine\n  this.scrollTop = this.scrollLeft = 0\n  this.cantEdit = false\n  this.cleanGeneration = 1\n  this.modeFrontier = this.highlightFrontier = firstLine\n  var start = Pos(firstLine, 0)\n  this.sel = simpleSelection(start)\n  this.history = new History(null)\n  this.id = ++nextDocId\n  this.modeOption = mode\n  this.lineSep = lineSep\n  this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\"\n  this.extend = false\n\n  if (typeof text == \"string\") { text = this.splitLines(text) }\n  updateDoc(this, {from: start, to: start, text: text})\n  setSelection(this, simpleSelection(start), sel_dontScroll)\n}\n\nDoc.prototype = createObj(BranchChunk.prototype, {\n  constructor: Doc,\n  // Iterate over the document. Supports two forms -- with only one\n  // argument, it calls that for each line in the document. With\n  // three, it iterates over the range given by the first two (with\n  // the second being non-inclusive).\n  iter: function(from, to, op) {\n    if (op) { this.iterN(from - this.first, to - from, op) }\n    else { this.iterN(this.first, this.first + this.size, from) }\n  },\n\n  // Non-public interface for adding and removing lines.\n  insert: function(at, lines) {\n    var height = 0\n    for (var i = 0; i < lines.length; ++i) { height += lines[i].height }\n    this.insertInner(at - this.first, lines, height)\n  },\n  remove: function(at, n) { this.removeInner(at - this.first, n) },\n\n  // From here, the methods are part of the public interface. Most\n  // are also available from CodeMirror (editor) instances.\n\n  getValue: function(lineSep) {\n    var lines = getLines(this, this.first, this.first + this.size)\n    if (lineSep === false) { return lines }\n    return lines.join(lineSep || this.lineSeparator())\n  },\n  setValue: docMethodOp(function(code) {\n    var top = Pos(this.first, 0), last = this.first + this.size - 1\n    makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                      text: this.splitLines(code), origin: \"setValue\", full: true}, true)\n    if (this.cm) { scrollToCoords(this.cm, 0, 0) }\n    setSelection(this, simpleSelection(top), sel_dontScroll)\n  }),\n  replaceRange: function(code, from, to, origin) {\n    from = clipPos(this, from)\n    to = to ? clipPos(this, to) : from\n    replaceRange(this, code, from, to, origin)\n  },\n  getRange: function(from, to, lineSep) {\n    var lines = getBetween(this, clipPos(this, from), clipPos(this, to))\n    if (lineSep === false) { return lines }\n    return lines.join(lineSep || this.lineSeparator())\n  },\n\n  getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n  getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n  getLineNumber: function(line) {return lineNo(line)},\n\n  getLineHandleVisualStart: function(line) {\n    if (typeof line == \"number\") { line = getLine(this, line) }\n    return visualLine(line)\n  },\n\n  lineCount: function() {return this.size},\n  firstLine: function() {return this.first},\n  lastLine: function() {return this.first + this.size - 1},\n\n  clipPos: function(pos) {return clipPos(this, pos)},\n\n  getCursor: function(start) {\n    var range = this.sel.primary(), pos\n    if (start == null || start == \"head\") { pos = range.head }\n    else if (start == \"anchor\") { pos = range.anchor }\n    else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to() }\n    else { pos = range.from() }\n    return pos\n  },\n  listSelections: function() { return this.sel.ranges },\n  somethingSelected: function() {return this.sel.somethingSelected()},\n\n  setCursor: docMethodOp(function(line, ch, options) {\n    setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options)\n  }),\n  setSelection: docMethodOp(function(anchor, head, options) {\n    setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options)\n  }),\n  extendSelection: docMethodOp(function(head, other, options) {\n    extendSelection(this, clipPos(this, head), other && clipPos(this, other), options)\n  }),\n  extendSelections: docMethodOp(function(heads, options) {\n    extendSelections(this, clipPosArray(this, heads), options)\n  }),\n  extendSelectionsBy: docMethodOp(function(f, options) {\n    var heads = map(this.sel.ranges, f)\n    extendSelections(this, clipPosArray(this, heads), options)\n  }),\n  setSelections: docMethodOp(function(ranges, primary, options) {\n    var this$1 = this;\n\n    if (!ranges.length) { return }\n    var out = []\n    for (var i = 0; i < ranges.length; i++)\n      { out[i] = new Range(clipPos(this$1, ranges[i].anchor),\n                         clipPos(this$1, ranges[i].head)) }\n    if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex) }\n    setSelection(this, normalizeSelection(out, primary), options)\n  }),\n  addSelection: docMethodOp(function(anchor, head, options) {\n    var ranges = this.sel.ranges.slice(0)\n    ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)))\n    setSelection(this, normalizeSelection(ranges, ranges.length - 1), options)\n  }),\n\n  getSelection: function(lineSep) {\n    var this$1 = this;\n\n    var ranges = this.sel.ranges, lines\n    for (var i = 0; i < ranges.length; i++) {\n      var sel = getBetween(this$1, ranges[i].from(), ranges[i].to())\n      lines = lines ? lines.concat(sel) : sel\n    }\n    if (lineSep === false) { return lines }\n    else { return lines.join(lineSep || this.lineSeparator()) }\n  },\n  getSelections: function(lineSep) {\n    var this$1 = this;\n\n    var parts = [], ranges = this.sel.ranges\n    for (var i = 0; i < ranges.length; i++) {\n      var sel = getBetween(this$1, ranges[i].from(), ranges[i].to())\n      if (lineSep !== false) { sel = sel.join(lineSep || this$1.lineSeparator()) }\n      parts[i] = sel\n    }\n    return parts\n  },\n  replaceSelection: function(code, collapse, origin) {\n    var dup = []\n    for (var i = 0; i < this.sel.ranges.length; i++)\n      { dup[i] = code }\n    this.replaceSelections(dup, collapse, origin || \"+input\")\n  },\n  replaceSelections: docMethodOp(function(code, collapse, origin) {\n    var this$1 = this;\n\n    var changes = [], sel = this.sel\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i]\n      changes[i] = {from: range.from(), to: range.to(), text: this$1.splitLines(code[i]), origin: origin}\n    }\n    var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse)\n    for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n      { makeChange(this$1, changes[i$1]) }\n    if (newSel) { setSelectionReplaceHistory(this, newSel) }\n    else if (this.cm) { ensureCursorVisible(this.cm) }\n  }),\n  undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\")}),\n  redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\")}),\n  undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true)}),\n  redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true)}),\n\n  setExtending: function(val) {this.extend = val},\n  getExtending: function() {return this.extend},\n\n  historySize: function() {\n    var hist = this.history, done = 0, undone = 0\n    for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done } }\n    for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone } }\n    return {undo: done, redo: undone}\n  },\n  clearHistory: function() {this.history = new History(this.history.maxGeneration)},\n\n  markClean: function() {\n    this.cleanGeneration = this.changeGeneration(true)\n  },\n  changeGeneration: function(forceSplit) {\n    if (forceSplit)\n      { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null }\n    return this.history.generation\n  },\n  isClean: function (gen) {\n    return this.history.generation == (gen || this.cleanGeneration)\n  },\n\n  getHistory: function() {\n    return {done: copyHistoryArray(this.history.done),\n            undone: copyHistoryArray(this.history.undone)}\n  },\n  setHistory: function(histData) {\n    var hist = this.history = new History(this.history.maxGeneration)\n    hist.done = copyHistoryArray(histData.done.slice(0), null, true)\n    hist.undone = copyHistoryArray(histData.undone.slice(0), null, true)\n  },\n\n  setGutterMarker: docMethodOp(function(line, gutterID, value) {\n    return changeLine(this, line, \"gutter\", function (line) {\n      var markers = line.gutterMarkers || (line.gutterMarkers = {})\n      markers[gutterID] = value\n      if (!value && isEmpty(markers)) { line.gutterMarkers = null }\n      return true\n    })\n  }),\n\n  clearGutter: docMethodOp(function(gutterID) {\n    var this$1 = this;\n\n    this.iter(function (line) {\n      if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n        changeLine(this$1, line, \"gutter\", function () {\n          line.gutterMarkers[gutterID] = null\n          if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null }\n          return true\n        })\n      }\n    })\n  }),\n\n  lineInfo: function(line) {\n    var n\n    if (typeof line == \"number\") {\n      if (!isLine(this, line)) { return null }\n      n = line\n      line = getLine(this, line)\n      if (!line) { return null }\n    } else {\n      n = lineNo(line)\n      if (n == null) { return null }\n    }\n    return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n            textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n            widgets: line.widgets}\n  },\n\n  addLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n      var prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\"\n      if (!line[prop]) { line[prop] = cls }\n      else if (classTest(cls).test(line[prop])) { return false }\n      else { line[prop] += \" \" + cls }\n      return true\n    })\n  }),\n  removeLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n      var prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\"\n      var cur = line[prop]\n      if (!cur) { return false }\n      else if (cls == null) { line[prop] = null }\n      else {\n        var found = cur.match(classTest(cls))\n        if (!found) { return false }\n        var end = found.index + found[0].length\n        line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null\n      }\n      return true\n    })\n  }),\n\n  addLineWidget: docMethodOp(function(handle, node, options) {\n    return addLineWidget(this, handle, node, options)\n  }),\n  removeLineWidget: function(widget) { widget.clear() },\n\n  markText: function(from, to, options) {\n    return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n  },\n  setBookmark: function(pos, options) {\n    var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                    insertLeft: options && options.insertLeft,\n                    clearWhenEmpty: false, shared: options && options.shared,\n                    handleMouseEvents: options && options.handleMouseEvents}\n    pos = clipPos(this, pos)\n    return markText(this, pos, pos, realOpts, \"bookmark\")\n  },\n  findMarksAt: function(pos) {\n    pos = clipPos(this, pos)\n    var markers = [], spans = getLine(this, pos.line).markedSpans\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i]\n      if ((span.from == null || span.from <= pos.ch) &&\n          (span.to == null || span.to >= pos.ch))\n        { markers.push(span.marker.parent || span.marker) }\n    } }\n    return markers\n  },\n  findMarks: function(from, to, filter) {\n    from = clipPos(this, from); to = clipPos(this, to)\n    var found = [], lineNo = from.line\n    this.iter(from.line, to.line + 1, function (line) {\n      var spans = line.markedSpans\n      if (spans) { for (var i = 0; i < spans.length; i++) {\n        var span = spans[i]\n        if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n              span.from == null && lineNo != from.line ||\n              span.from != null && lineNo == to.line && span.from >= to.ch) &&\n            (!filter || filter(span.marker)))\n          { found.push(span.marker.parent || span.marker) }\n      } }\n      ++lineNo\n    })\n    return found\n  },\n  getAllMarks: function() {\n    var markers = []\n    this.iter(function (line) {\n      var sps = line.markedSpans\n      if (sps) { for (var i = 0; i < sps.length; ++i)\n        { if (sps[i].from != null) { markers.push(sps[i].marker) } } }\n    })\n    return markers\n  },\n\n  posFromIndex: function(off) {\n    var ch, lineNo = this.first, sepSize = this.lineSeparator().length\n    this.iter(function (line) {\n      var sz = line.text.length + sepSize\n      if (sz > off) { ch = off; return true }\n      off -= sz\n      ++lineNo\n    })\n    return clipPos(this, Pos(lineNo, ch))\n  },\n  indexFromPos: function (coords) {\n    coords = clipPos(this, coords)\n    var index = coords.ch\n    if (coords.line < this.first || coords.ch < 0) { return 0 }\n    var sepSize = this.lineSeparator().length\n    this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n      index += line.text.length + sepSize\n    })\n    return index\n  },\n\n  copy: function(copyHistory) {\n    var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                      this.modeOption, this.first, this.lineSep, this.direction)\n    doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft\n    doc.sel = this.sel\n    doc.extend = false\n    if (copyHistory) {\n      doc.history.undoDepth = this.history.undoDepth\n      doc.setHistory(this.getHistory())\n    }\n    return doc\n  },\n\n  linkedDoc: function(options) {\n    if (!options) { options = {} }\n    var from = this.first, to = this.first + this.size\n    if (options.from != null && options.from > from) { from = options.from }\n    if (options.to != null && options.to < to) { to = options.to }\n    var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction)\n    if (options.sharedHist) { copy.history = this.history\n    ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist})\n    copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}]\n    copySharedMarkers(copy, findSharedMarkers(this))\n    return copy\n  },\n  unlinkDoc: function(other) {\n    var this$1 = this;\n\n    if (other instanceof CodeMirror) { other = other.doc }\n    if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n      var link = this$1.linked[i]\n      if (link.doc != other) { continue }\n      this$1.linked.splice(i, 1)\n      other.unlinkDoc(this$1)\n      detachSharedMarkers(findSharedMarkers(this$1))\n      break\n    } }\n    // If the histories were shared, split them again\n    if (other.history == this.history) {\n      var splitIds = [other.id]\n      linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true)\n      other.history = new History(null)\n      other.history.done = copyHistoryArray(this.history.done, splitIds)\n      other.history.undone = copyHistoryArray(this.history.undone, splitIds)\n    }\n  },\n  iterLinkedDocs: function(f) {linkedDocs(this, f)},\n\n  getMode: function() {return this.mode},\n  getEditor: function() {return this.cm},\n\n  splitLines: function(str) {\n    if (this.lineSep) { return str.split(this.lineSep) }\n    return splitLinesAuto(str)\n  },\n  lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n  setDirection: docMethodOp(function (dir) {\n    if (dir != \"rtl\") { dir = \"ltr\" }\n    if (dir == this.direction) { return }\n    this.direction = dir\n    this.iter(function (line) { return line.order = null; })\n    if (this.cm) { directionChanged(this.cm) }\n  })\n})\n\n// Public alias.\nDoc.prototype.eachLine = Doc.prototype.iter\n\n// Kludge to work around strange IE behavior where it'll sometimes\n// re-fire a series of drag-related events right after the drop (#1551)\nvar lastDrop = 0\n\nfunction onDrop(e) {\n  var cm = this\n  clearDragCursor(cm)\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n    { return }\n  e_preventDefault(e)\n  if (ie) { lastDrop = +new Date }\n  var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files\n  if (!pos || cm.isReadOnly()) { return }\n  // Might be a file drop, in which case we simply extract the text\n  // and insert it.\n  if (files && files.length && window.FileReader && window.File) {\n    var n = files.length, text = Array(n), read = 0\n    var loadFile = function (file, i) {\n      if (cm.options.allowDropFileTypes &&\n          indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n        { return }\n\n      var reader = new FileReader\n      reader.onload = operation(cm, function () {\n        var content = reader.result\n        if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) { content = \"\" }\n        text[i] = content\n        if (++read == n) {\n          pos = clipPos(cm.doc, pos)\n          var change = {from: pos, to: pos,\n                        text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                        origin: \"paste\"}\n          makeChange(cm.doc, change)\n          setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)))\n        }\n      })\n      reader.readAsText(file)\n    }\n    for (var i = 0; i < n; ++i) { loadFile(files[i], i) }\n  } else { // Normal drop\n    // Don't do a replace if the drop happened inside of the selected text.\n    if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n      cm.state.draggingText(e)\n      // Ensure the editor is re-focused\n      setTimeout(function () { return cm.display.input.focus(); }, 20)\n      return\n    }\n    try {\n      var text$1 = e.dataTransfer.getData(\"Text\")\n      if (text$1) {\n        var selected\n        if (cm.state.draggingText && !cm.state.draggingText.copy)\n          { selected = cm.listSelections() }\n        setSelectionNoUndo(cm.doc, simpleSelection(pos, pos))\n        if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n          { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\") } }\n        cm.replaceSelection(text$1, \"around\", \"paste\")\n        cm.display.input.focus()\n      }\n    }\n    catch(e){}\n  }\n}\n\nfunction onDragStart(cm, e) {\n  if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n  e.dataTransfer.setData(\"Text\", cm.getSelection())\n  e.dataTransfer.effectAllowed = \"copyMove\"\n\n  // Use dummy image instead of default browsers image.\n  // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n  if (e.dataTransfer.setDragImage && !safari) {\n    var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\")\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\"\n    if (presto) {\n      img.width = img.height = 1\n      cm.display.wrapper.appendChild(img)\n      // Force a relayout, or Opera won't use our image for some obscure reason\n      img._top = img.offsetTop\n    }\n    e.dataTransfer.setDragImage(img, 0, 0)\n    if (presto) { img.parentNode.removeChild(img) }\n  }\n}\n\nfunction onDragOver(cm, e) {\n  var pos = posFromMouse(cm, e)\n  if (!pos) { return }\n  var frag = document.createDocumentFragment()\n  drawSelectionCursor(cm, pos, frag)\n  if (!cm.display.dragCursor) {\n    cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\")\n    cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv)\n  }\n  removeChildrenAndAdd(cm.display.dragCursor, frag)\n}\n\nfunction clearDragCursor(cm) {\n  if (cm.display.dragCursor) {\n    cm.display.lineSpace.removeChild(cm.display.dragCursor)\n    cm.display.dragCursor = null\n  }\n}\n\n// These must be handled carefully, because naively registering a\n// handler for each editor will cause the editors to never be\n// garbage collected.\n\nfunction forEachCodeMirror(f) {\n  if (!document.getElementsByClassName) { return }\n  var byClass = document.getElementsByClassName(\"CodeMirror\")\n  for (var i = 0; i < byClass.length; i++) {\n    var cm = byClass[i].CodeMirror\n    if (cm) { f(cm) }\n  }\n}\n\nvar globalsRegistered = false\nfunction ensureGlobalHandlers() {\n  if (globalsRegistered) { return }\n  registerGlobalHandlers()\n  globalsRegistered = true\n}\nfunction registerGlobalHandlers() {\n  // When the window resizes, we need to refresh active editors.\n  var resizeTimer\n  on(window, \"resize\", function () {\n    if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n      resizeTimer = null\n      forEachCodeMirror(onResize)\n    }, 100) }\n  })\n  // When the window loses focus, we want to show the editor as blurred\n  on(window, \"blur\", function () { return forEachCodeMirror(onBlur); })\n}\n// Called when the window resizes\nfunction onResize(cm) {\n  var d = cm.display\n  if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)\n    { return }\n  // Might be a text scaling operation, clear size caches.\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null\n  d.scrollbarsClipped = false\n  cm.setSize()\n}\n\nvar keyNames = {\n  3: \"Enter\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n  19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n  36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n  46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n  106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 127: \"Delete\",\n  173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n  221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n  63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n}\n\n// Number keys\nfor (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i) }\n// Alphabetic keys\nfor (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1) }\n// Function keys\nfor (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2 }\n\nvar keyMap = {}\n\nkeyMap.basic = {\n  \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n  \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n  \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n  \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n  \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n  \"Esc\": \"singleSelection\"\n}\n// Note that the save and find-related commands aren't defined by\n// default. User code or addons can define them. Unknown commands\n// are simply ignored.\nkeyMap.pcDefault = {\n  \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n  \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n  \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n  \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n  \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n  \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n  \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n  fallthrough: \"basic\"\n}\n// Very basic readline/emacs-style bindings, which are standard on Mac.\nkeyMap.emacsy = {\n  \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n  \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n  \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n  \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n  \"Ctrl-O\": \"openLine\"\n}\nkeyMap.macDefault = {\n  \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n  \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n  \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n  \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n  \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n  \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n  \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n  fallthrough: [\"basic\", \"emacsy\"]\n}\nkeyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault\n\n// KEYMAP DISPATCH\n\nfunction normalizeKeyName(name) {\n  var parts = name.split(/-(?!$)/)\n  name = parts[parts.length - 1]\n  var alt, ctrl, shift, cmd\n  for (var i = 0; i < parts.length - 1; i++) {\n    var mod = parts[i]\n    if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true }\n    else if (/^a(lt)?$/i.test(mod)) { alt = true }\n    else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true }\n    else if (/^s(hift)?$/i.test(mod)) { shift = true }\n    else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n  }\n  if (alt) { name = \"Alt-\" + name }\n  if (ctrl) { name = \"Ctrl-\" + name }\n  if (cmd) { name = \"Cmd-\" + name }\n  if (shift) { name = \"Shift-\" + name }\n  return name\n}\n\n// This is a kludge to keep keymaps mostly working as raw objects\n// (backwards compatibility) while at the same time support features\n// like normalization and multi-stroke key bindings. It compiles a\n// new normalized keymap, and then updates the old object to reflect\n// this.\nfunction normalizeKeyMap(keymap) {\n  var copy = {}\n  for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n    var value = keymap[keyname]\n    if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n    if (value == \"...\") { delete keymap[keyname]; continue }\n\n    var keys = map(keyname.split(\" \"), normalizeKeyName)\n    for (var i = 0; i < keys.length; i++) {\n      var val = (void 0), name = (void 0)\n      if (i == keys.length - 1) {\n        name = keys.join(\" \")\n        val = value\n      } else {\n        name = keys.slice(0, i + 1).join(\" \")\n        val = \"...\"\n      }\n      var prev = copy[name]\n      if (!prev) { copy[name] = val }\n      else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n    }\n    delete keymap[keyname]\n  } }\n  for (var prop in copy) { keymap[prop] = copy[prop] }\n  return keymap\n}\n\nfunction lookupKey(key, map, handle, context) {\n  map = getKeyMap(map)\n  var found = map.call ? map.call(key, context) : map[key]\n  if (found === false) { return \"nothing\" }\n  if (found === \"...\") { return \"multi\" }\n  if (found != null && handle(found)) { return \"handled\" }\n\n  if (map.fallthrough) {\n    if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n      { return lookupKey(key, map.fallthrough, handle, context) }\n    for (var i = 0; i < map.fallthrough.length; i++) {\n      var result = lookupKey(key, map.fallthrough[i], handle, context)\n      if (result) { return result }\n    }\n  }\n}\n\n// Modifier key presses don't count as 'real' key presses for the\n// purpose of keymap fallthrough.\nfunction isModifierKey(value) {\n  var name = typeof value == \"string\" ? value : keyNames[value.keyCode]\n  return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n}\n\nfunction addModifierNames(name, event, noShift) {\n  var base = name\n  if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name }\n  if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name }\n  if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") { name = \"Cmd-\" + name }\n  if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name }\n  return name\n}\n\n// Look up the name of a key as indicated by an event object.\nfunction keyName(event, noShift) {\n  if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n  var name = keyNames[event.keyCode]\n  if (name == null || event.altGraphKey) { return false }\n  return addModifierNames(name, event, noShift)\n}\n\nfunction getKeyMap(val) {\n  return typeof val == \"string\" ? keyMap[val] : val\n}\n\n// Helper for deleting text near the selection(s), used to implement\n// backspace, delete, and similar functionality.\nfunction deleteNearSelection(cm, compute) {\n  var ranges = cm.doc.sel.ranges, kill = []\n  // Build up a set of ranges to kill first, merging overlapping\n  // ranges.\n  for (var i = 0; i < ranges.length; i++) {\n    var toKill = compute(ranges[i])\n    while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n      var replaced = kill.pop()\n      if (cmp(replaced.from, toKill.from) < 0) {\n        toKill.from = replaced.from\n        break\n      }\n    }\n    kill.push(toKill)\n  }\n  // Next, remove those actual ranges.\n  runInOp(cm, function () {\n    for (var i = kill.length - 1; i >= 0; i--)\n      { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\") }\n    ensureCursorVisible(cm)\n  })\n}\n\n// Commands are parameter-less actions that can be performed on an\n// editor, mostly used for keybindings.\nvar commands = {\n  selectAll: selectAll,\n  singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n  killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n    if (range.empty()) {\n      var len = getLine(cm.doc, range.head.line).text.length\n      if (range.head.ch == len && range.head.line < cm.lastLine())\n        { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n      else\n        { return {from: range.head, to: Pos(range.head.line, len)} }\n    } else {\n      return {from: range.from(), to: range.to()}\n    }\n  }); },\n  deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n    from: Pos(range.from().line, 0),\n    to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n  }); }); },\n  delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n    from: Pos(range.from().line, 0), to: range.from()\n  }); }); },\n  delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n    var top = cm.charCoords(range.head, \"div\").top + 5\n    var leftPos = cm.coordsChar({left: 0, top: top}, \"div\")\n    return {from: leftPos, to: range.from()}\n  }); },\n  delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n    var top = cm.charCoords(range.head, \"div\").top + 5\n    var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    return {from: range.from(), to: rightPos }\n  }); },\n  undo: function (cm) { return cm.undo(); },\n  redo: function (cm) { return cm.redo(); },\n  undoSelection: function (cm) { return cm.undoSelection(); },\n  redoSelection: function (cm) { return cm.redoSelection(); },\n  goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n  goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n  goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n    {origin: \"+move\", bias: 1}\n  ); },\n  goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n    {origin: \"+move\", bias: 1}\n  ); },\n  goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n    {origin: \"+move\", bias: -1}\n  ); },\n  goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5\n    return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n  }, sel_move); },\n  goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5\n    return cm.coordsChar({left: 0, top: top}, \"div\")\n  }, sel_move); },\n  goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5\n    var pos = cm.coordsChar({left: 0, top: top}, \"div\")\n    if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n    return pos\n  }, sel_move); },\n  goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n  goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n  goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n  goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n  goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n  goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n  goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n  goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n  goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n  goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n  goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n  goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n  delCharBefore: function (cm) { return cm.deleteH(-1, \"char\"); },\n  delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n  delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n  delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n  delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n  delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n  indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n  indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n  indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n  insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n  insertSoftTab: function (cm) {\n    var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].from()\n      var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize)\n      spaces.push(spaceStr(tabSize - col % tabSize))\n    }\n    cm.replaceSelections(spaces)\n  },\n  defaultTab: function (cm) {\n    if (cm.somethingSelected()) { cm.indentSelection(\"add\") }\n    else { cm.execCommand(\"insertTab\") }\n  },\n  // Swap the two chars left and right of each selection's head.\n  // Move cursor behind the two swapped characters afterwards.\n  //\n  // Doesn't consider line feeds a character.\n  // Doesn't scan more than one line above to find a character.\n  // Doesn't do anything on an empty line.\n  // Doesn't do anything with non-empty selections.\n  transposeChars: function (cm) { return runInOp(cm, function () {\n    var ranges = cm.listSelections(), newSel = []\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) { continue }\n      var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text\n      if (line) {\n        if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1) }\n        if (cur.ch > 0) {\n          cur = new Pos(cur.line, cur.ch + 1)\n          cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                          Pos(cur.line, cur.ch - 2), cur, \"+transpose\")\n        } else if (cur.line > cm.doc.first) {\n          var prev = getLine(cm.doc, cur.line - 1).text\n          if (prev) {\n            cur = new Pos(cur.line, 1)\n            cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                            prev.charAt(prev.length - 1),\n                            Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\")\n          }\n        }\n      }\n      newSel.push(new Range(cur, cur))\n    }\n    cm.setSelections(newSel)\n  }); },\n  newlineAndIndent: function (cm) { return runInOp(cm, function () {\n    var sels = cm.listSelections()\n    for (var i = sels.length - 1; i >= 0; i--)\n      { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\") }\n    sels = cm.listSelections()\n    for (var i$1 = 0; i$1 < sels.length; i$1++)\n      { cm.indentLine(sels[i$1].from().line, null, true) }\n    ensureCursorVisible(cm)\n  }); },\n  openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n  toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n}\n\n\nfunction lineStart(cm, lineN) {\n  var line = getLine(cm.doc, lineN)\n  var visual = visualLine(line)\n  if (visual != line) { lineN = lineNo(visual) }\n  return endOfLine(true, cm, visual, lineN, 1)\n}\nfunction lineEnd(cm, lineN) {\n  var line = getLine(cm.doc, lineN)\n  var visual = visualLineEnd(line)\n  if (visual != line) { lineN = lineNo(visual) }\n  return endOfLine(true, cm, line, lineN, -1)\n}\nfunction lineStartSmart(cm, pos) {\n  var start = lineStart(cm, pos.line)\n  var line = getLine(cm.doc, start.line)\n  var order = getOrder(line, cm.doc.direction)\n  if (!order || order[0].level == 0) {\n    var firstNonWS = Math.max(0, line.text.search(/\\S/))\n    var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch\n    return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n  }\n  return start\n}\n\n// Run a handler that was bound to a key.\nfunction doHandleBinding(cm, bound, dropShift) {\n  if (typeof bound == \"string\") {\n    bound = commands[bound]\n    if (!bound) { return false }\n  }\n  // Ensure previous input has been read, so that the handler sees a\n  // consistent view of the document\n  cm.display.input.ensurePolled()\n  var prevShift = cm.display.shift, done = false\n  try {\n    if (cm.isReadOnly()) { cm.state.suppressEdits = true }\n    if (dropShift) { cm.display.shift = false }\n    done = bound(cm) != Pass\n  } finally {\n    cm.display.shift = prevShift\n    cm.state.suppressEdits = false\n  }\n  return done\n}\n\nfunction lookupKeyForEditor(cm, name, handle) {\n  for (var i = 0; i < cm.state.keyMaps.length; i++) {\n    var result = lookupKey(name, cm.state.keyMaps[i], handle, cm)\n    if (result) { return result }\n  }\n  return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n    || lookupKey(name, cm.options.keyMap, handle, cm)\n}\n\n// Note that, despite the name, this function is also used to check\n// for bound mouse clicks.\n\nvar stopSeq = new Delayed\nfunction dispatchKey(cm, name, e, handle) {\n  var seq = cm.state.keySeq\n  if (seq) {\n    if (isModifierKey(name)) { return \"handled\" }\n    stopSeq.set(50, function () {\n      if (cm.state.keySeq == seq) {\n        cm.state.keySeq = null\n        cm.display.input.reset()\n      }\n    })\n    name = seq + \" \" + name\n  }\n  var result = lookupKeyForEditor(cm, name, handle)\n\n  if (result == \"multi\")\n    { cm.state.keySeq = name }\n  if (result == \"handled\")\n    { signalLater(cm, \"keyHandled\", cm, name, e) }\n\n  if (result == \"handled\" || result == \"multi\") {\n    e_preventDefault(e)\n    restartBlink(cm)\n  }\n\n  if (seq && !result && /\\'$/.test(name)) {\n    e_preventDefault(e)\n    return true\n  }\n  return !!result\n}\n\n// Handle a key from the keydown event.\nfunction handleKeyBinding(cm, e) {\n  var name = keyName(e, true)\n  if (!name) { return false }\n\n  if (e.shiftKey && !cm.state.keySeq) {\n    // First try to resolve full name (including 'Shift-'). Failing\n    // that, see if there is a cursor-motion command (starting with\n    // 'go') bound to the keyname without 'Shift-'.\n    return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n        || dispatchKey(cm, name, e, function (b) {\n             if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n               { return doHandleBinding(cm, b) }\n           })\n  } else {\n    return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n  }\n}\n\n// Handle a key from the keypress event\nfunction handleCharBinding(cm, e, ch) {\n  return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n}\n\nvar lastStoppedKey = null\nfunction onKeyDown(e) {\n  var cm = this\n  cm.curOp.focus = activeElt()\n  if (signalDOMEvent(cm, e)) { return }\n  // IE does strange things with escape.\n  if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false }\n  var code = e.keyCode\n  cm.display.shift = code == 16 || e.shiftKey\n  var handled = handleKeyBinding(cm, e)\n  if (presto) {\n    lastStoppedKey = handled ? code : null\n    // Opera has no cut event... we try to at least catch the key combo\n    if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n      { cm.replaceSelection(\"\", null, \"cut\") }\n  }\n\n  // Turn mouse into crosshair when Alt is held on Mac.\n  if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n    { showCrossHair(cm) }\n}\n\nfunction showCrossHair(cm) {\n  var lineDiv = cm.display.lineDiv\n  addClass(lineDiv, \"CodeMirror-crosshair\")\n\n  function up(e) {\n    if (e.keyCode == 18 || !e.altKey) {\n      rmClass(lineDiv, \"CodeMirror-crosshair\")\n      off(document, \"keyup\", up)\n      off(document, \"mouseover\", up)\n    }\n  }\n  on(document, \"keyup\", up)\n  on(document, \"mouseover\", up)\n}\n\nfunction onKeyUp(e) {\n  if (e.keyCode == 16) { this.doc.sel.shift = false }\n  signalDOMEvent(this, e)\n}\n\nfunction onKeyPress(e) {\n  var cm = this\n  if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n  var keyCode = e.keyCode, charCode = e.charCode\n  if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n  if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n  var ch = String.fromCharCode(charCode == null ? keyCode : charCode)\n  // Some browsers fire keypress events for backspace\n  if (ch == \"\\x08\") { return }\n  if (handleCharBinding(cm, e, ch)) { return }\n  cm.display.input.onKeyPress(e)\n}\n\nvar DOUBLECLICK_DELAY = 400\n\nvar PastClick = function(time, pos, button) {\n  this.time = time\n  this.pos = pos\n  this.button = button\n};\n\nPastClick.prototype.compare = function (time, pos, button) {\n  return this.time + DOUBLECLICK_DELAY > time &&\n    cmp(pos, this.pos) == 0 && button == this.button\n};\n\nvar lastClick;\nvar lastDoubleClick;\nfunction clickRepeat(pos, button) {\n  var now = +new Date\n  if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n    lastClick = lastDoubleClick = null\n    return \"triple\"\n  } else if (lastClick && lastClick.compare(now, pos, button)) {\n    lastDoubleClick = new PastClick(now, pos, button)\n    lastClick = null\n    return \"double\"\n  } else {\n    lastClick = new PastClick(now, pos, button)\n    lastDoubleClick = null\n    return \"single\"\n  }\n}\n\n// A mouse down can be a single click, double click, triple click,\n// start of selection drag, start of text drag, new cursor\n// (ctrl-click), rectangle drag (alt-drag), or xwin\n// middle-click-paste. Or it might be a click on something we should\n// not interfere with, such as a scrollbar or widget.\nfunction onMouseDown(e) {\n  var cm = this, display = cm.display\n  if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n  display.input.ensurePolled()\n  display.shift = e.shiftKey\n\n  if (eventInWidget(display, e)) {\n    if (!webkit) {\n      // Briefly turn off draggability, to allow widgets to do\n      // normal dragging things.\n      display.scroller.draggable = false\n      setTimeout(function () { return display.scroller.draggable = true; }, 100)\n    }\n    return\n  }\n  if (clickInGutter(cm, e)) { return }\n  var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\"\n  window.focus()\n\n  // #3261: make sure, that we're not starting a second selection\n  if (button == 1 && cm.state.selectingText)\n    { cm.state.selectingText(e) }\n\n  if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n  if (button == 1) {\n    if (pos) { leftButtonDown(cm, pos, repeat, e) }\n    else if (e_target(e) == display.scroller) { e_preventDefault(e) }\n  } else if (button == 2) {\n    if (pos) { extendSelection(cm.doc, pos) }\n    setTimeout(function () { return display.input.focus(); }, 20)\n  } else if (button == 3) {\n    if (captureRightClick) { onContextMenu(cm, e) }\n    else { delayBlurEvent(cm) }\n  }\n}\n\nfunction handleMappedButton(cm, button, pos, repeat, event) {\n  var name = \"Click\"\n  if (repeat == \"double\") { name = \"Double\" + name }\n  else if (repeat == \"triple\") { name = \"Triple\" + name }\n  name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name\n\n  return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n    if (typeof bound == \"string\") { bound = commands[bound] }\n    if (!bound) { return false }\n    var done = false\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true }\n      done = bound(cm, pos) != Pass\n    } finally {\n      cm.state.suppressEdits = false\n    }\n    return done\n  })\n}\n\nfunction configureMouse(cm, repeat, event) {\n  var option = cm.getOption(\"configureMouse\")\n  var value = option ? option(cm, repeat, event) : {}\n  if (value.unit == null) {\n    var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey\n    value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\"\n  }\n  if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey }\n  if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey }\n  if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey) }\n  return value\n}\n\nfunction leftButtonDown(cm, pos, repeat, event) {\n  if (ie) { setTimeout(bind(ensureFocus, cm), 0) }\n  else { cm.curOp.focus = activeElt() }\n\n  var behavior = configureMouse(cm, repeat, event)\n\n  var sel = cm.doc.sel, contained\n  if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n      repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n      (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n      (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n    { leftButtonStartDrag(cm, event, pos, behavior) }\n  else\n    { leftButtonSelect(cm, event, pos, behavior) }\n}\n\n// Start a text drag. When it ends, see if any dragging actually\n// happen, and treat as a click if it didn't.\nfunction leftButtonStartDrag(cm, event, pos, behavior) {\n  var display = cm.display, moved = false\n  var dragEnd = operation(cm, function (e) {\n    if (webkit) { display.scroller.draggable = false }\n    cm.state.draggingText = false\n    off(document, \"mouseup\", dragEnd)\n    off(document, \"mousemove\", mouseMove)\n    off(display.scroller, \"dragstart\", dragStart)\n    off(display.scroller, \"drop\", dragEnd)\n    if (!moved) {\n      e_preventDefault(e)\n      if (!behavior.addNew)\n        { extendSelection(cm.doc, pos, null, null, behavior.extend) }\n      // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n      if (webkit || ie && ie_version == 9)\n        { setTimeout(function () {document.body.focus(); display.input.focus()}, 20) }\n      else\n        { display.input.focus() }\n    }\n  })\n  var mouseMove = function(e2) {\n    moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10\n  }\n  var dragStart = function () { return moved = true; }\n  // Let the drag handler handle this.\n  if (webkit) { display.scroller.draggable = true }\n  cm.state.draggingText = dragEnd\n  dragEnd.copy = !behavior.moveOnDrag\n  // IE's approach to draggable\n  if (display.scroller.dragDrop) { display.scroller.dragDrop() }\n  on(document, \"mouseup\", dragEnd)\n  on(document, \"mousemove\", mouseMove)\n  on(display.scroller, \"dragstart\", dragStart)\n  on(display.scroller, \"drop\", dragEnd)\n\n  delayBlurEvent(cm)\n  setTimeout(function () { return display.input.focus(); }, 20)\n}\n\nfunction rangeForUnit(cm, pos, unit) {\n  if (unit == \"char\") { return new Range(pos, pos) }\n  if (unit == \"word\") { return cm.findWordAt(pos) }\n  if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n  var result = unit(cm, pos)\n  return new Range(result.from, result.to)\n}\n\n// Normal selection, as opposed to text dragging.\nfunction leftButtonSelect(cm, event, start, behavior) {\n  var display = cm.display, doc = cm.doc\n  e_preventDefault(event)\n\n  var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges\n  if (behavior.addNew && !behavior.extend) {\n    ourIndex = doc.sel.contains(start)\n    if (ourIndex > -1)\n      { ourRange = ranges[ourIndex] }\n    else\n      { ourRange = new Range(start, start) }\n  } else {\n    ourRange = doc.sel.primary()\n    ourIndex = doc.sel.primIndex\n  }\n\n  if (behavior.unit == \"rectangle\") {\n    if (!behavior.addNew) { ourRange = new Range(start, start) }\n    start = posFromMouse(cm, event, true, true)\n    ourIndex = -1\n  } else {\n    var range = rangeForUnit(cm, start, behavior.unit)\n    if (behavior.extend)\n      { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend) }\n    else\n      { ourRange = range }\n  }\n\n  if (!behavior.addNew) {\n    ourIndex = 0\n    setSelection(doc, new Selection([ourRange], 0), sel_mouse)\n    startSel = doc.sel\n  } else if (ourIndex == -1) {\n    ourIndex = ranges.length\n    setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),\n                 {scroll: false, origin: \"*mouse\"})\n  } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n    setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                 {scroll: false, origin: \"*mouse\"})\n    startSel = doc.sel\n  } else {\n    replaceOneSelection(doc, ourIndex, ourRange, sel_mouse)\n  }\n\n  var lastPos = start\n  function extendTo(pos) {\n    if (cmp(lastPos, pos) == 0) { return }\n    lastPos = pos\n\n    if (behavior.unit == \"rectangle\") {\n      var ranges = [], tabSize = cm.options.tabSize\n      var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize)\n      var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize)\n      var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol)\n      for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n           line <= end; line++) {\n        var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize)\n        if (left == right)\n          { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))) }\n        else if (text.length > leftPos)\n          { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))) }\n      }\n      if (!ranges.length) { ranges.push(new Range(start, start)) }\n      setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                   {origin: \"*mouse\", scroll: false})\n      cm.scrollIntoView(pos)\n    } else {\n      var oldRange = ourRange\n      var range = rangeForUnit(cm, pos, behavior.unit)\n      var anchor = oldRange.anchor, head\n      if (cmp(range.anchor, anchor) > 0) {\n        head = range.head\n        anchor = minPos(oldRange.from(), range.anchor)\n      } else {\n        head = range.anchor\n        anchor = maxPos(oldRange.to(), range.head)\n      }\n      var ranges$1 = startSel.ranges.slice(0)\n      ranges$1[ourIndex] = new Range(clipPos(doc, anchor), head)\n      setSelection(doc, normalizeSelection(ranges$1, ourIndex), sel_mouse)\n    }\n  }\n\n  var editorSize = display.wrapper.getBoundingClientRect()\n  // Used to ensure timeout re-tries don't fire when another extend\n  // happened in the meantime (clearTimeout isn't reliable -- at\n  // least on Chrome, the timeouts still happen even when cleared,\n  // if the clear happens after their scheduled firing time).\n  var counter = 0\n\n  function extend(e) {\n    var curCount = ++counter\n    var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\")\n    if (!cur) { return }\n    if (cmp(cur, lastPos) != 0) {\n      cm.curOp.focus = activeElt()\n      extendTo(cur)\n      var visible = visibleLines(display, doc)\n      if (cur.line >= visible.to || cur.line < visible.from)\n        { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e) }}), 150) }\n    } else {\n      var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0\n      if (outside) { setTimeout(operation(cm, function () {\n        if (counter != curCount) { return }\n        display.scroller.scrollTop += outside\n        extend(e)\n      }), 50) }\n    }\n  }\n\n  function done(e) {\n    cm.state.selectingText = false\n    counter = Infinity\n    e_preventDefault(e)\n    display.input.focus()\n    off(document, \"mousemove\", move)\n    off(document, \"mouseup\", up)\n    doc.history.lastSelOrigin = null\n  }\n\n  var move = operation(cm, function (e) {\n    if (!e_button(e)) { done(e) }\n    else { extend(e) }\n  })\n  var up = operation(cm, done)\n  cm.state.selectingText = up\n  on(document, \"mousemove\", move)\n  on(document, \"mouseup\", up)\n}\n\n\n// Determines whether an event happened in the gutter, and fires the\n// handlers for the corresponding event.\nfunction gutterEvent(cm, e, type, prevent) {\n  var mX, mY\n  try { mX = e.clientX; mY = e.clientY }\n  catch(e) { return false }\n  if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n  if (prevent) { e_preventDefault(e) }\n\n  var display = cm.display\n  var lineBox = display.lineDiv.getBoundingClientRect()\n\n  if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n  mY -= lineBox.top - display.viewOffset\n\n  for (var i = 0; i < cm.options.gutters.length; ++i) {\n    var g = display.gutters.childNodes[i]\n    if (g && g.getBoundingClientRect().right >= mX) {\n      var line = lineAtHeight(cm.doc, mY)\n      var gutter = cm.options.gutters[i]\n      signal(cm, type, cm, line, gutter, e)\n      return e_defaultPrevented(e)\n    }\n  }\n}\n\nfunction clickInGutter(cm, e) {\n  return gutterEvent(cm, e, \"gutterClick\", true)\n}\n\n// CONTEXT MENU HANDLING\n\n// To make the context menu work, we need to briefly unhide the\n// textarea (making it as unobtrusive as possible) to let the\n// right-click take effect on it.\nfunction onContextMenu(cm, e) {\n  if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n  if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n  cm.display.input.onContextMenu(e)\n}\n\nfunction contextMenuInGutter(cm, e) {\n  if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n  return gutterEvent(cm, e, \"gutterContextMenu\", false)\n}\n\nfunction themeChanged(cm) {\n  cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n    cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\")\n  clearCaches(cm)\n}\n\nvar Init = {toString: function(){return \"CodeMirror.Init\"}}\n\nvar defaults = {}\nvar optionHandlers = {}\n\nfunction defineOptions(CodeMirror) {\n  var optionHandlers = CodeMirror.optionHandlers\n\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt\n    if (handle) { optionHandlers[name] =\n      notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old) }} : handle }\n  }\n\n  CodeMirror.defineOption = option\n\n  // Passed to option handlers when there is no old value.\n  CodeMirror.Init = Init\n\n  // These two are, on init, called from the constructor because they\n  // have to be initialized before the editor can start at all.\n  option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true)\n  option(\"mode\", null, function (cm, val) {\n    cm.doc.modeOption = val\n    loadMode(cm)\n  }, true)\n\n  option(\"indentUnit\", 2, loadMode, true)\n  option(\"indentWithTabs\", false)\n  option(\"smartIndent\", true)\n  option(\"tabSize\", 4, function (cm) {\n    resetModeState(cm)\n    clearCaches(cm)\n    regChange(cm)\n  }, true)\n  option(\"lineSeparator\", null, function (cm, val) {\n    cm.doc.lineSep = val\n    if (!val) { return }\n    var newBreaks = [], lineNo = cm.doc.first\n    cm.doc.iter(function (line) {\n      for (var pos = 0;;) {\n        var found = line.text.indexOf(val, pos)\n        if (found == -1) { break }\n        pos = found + val.length\n        newBreaks.push(Pos(lineNo, found))\n      }\n      lineNo++\n    })\n    for (var i = newBreaks.length - 1; i >= 0; i--)\n      { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)) }\n  })\n  option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function (cm, val, old) {\n    cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\")\n    if (old != Init) { cm.refresh() }\n  })\n  option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true)\n  option(\"electricChars\", true)\n  option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n    throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n  }, true)\n  option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true)\n  option(\"rtlMoveVisually\", !windows)\n  option(\"wholeLineUpdateBefore\", true)\n\n  option(\"theme\", \"default\", function (cm) {\n    themeChanged(cm)\n    guttersChanged(cm)\n  }, true)\n  option(\"keyMap\", \"default\", function (cm, val, old) {\n    var next = getKeyMap(val)\n    var prev = old != Init && getKeyMap(old)\n    if (prev && prev.detach) { prev.detach(cm, next) }\n    if (next.attach) { next.attach(cm, prev || null) }\n  })\n  option(\"extraKeys\", null)\n  option(\"configureMouse\", null)\n\n  option(\"lineWrapping\", false, wrappingChanged, true)\n  option(\"gutters\", [], function (cm) {\n    setGuttersForLineNumbers(cm.options)\n    guttersChanged(cm)\n  }, true)\n  option(\"fixedGutter\", true, function (cm, val) {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\"\n    cm.refresh()\n  }, true)\n  option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true)\n  option(\"scrollbarStyle\", \"native\", function (cm) {\n    initScrollbars(cm)\n    updateScrollbars(cm)\n    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop)\n    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)\n  }, true)\n  option(\"lineNumbers\", false, function (cm) {\n    setGuttersForLineNumbers(cm.options)\n    guttersChanged(cm)\n  }, true)\n  option(\"firstLineNumber\", 1, guttersChanged, true)\n  option(\"lineNumberFormatter\", function (integer) { return integer; }, guttersChanged, true)\n  option(\"showCursorWhenSelecting\", false, updateSelection, true)\n\n  option(\"resetSelectionOnContextMenu\", true)\n  option(\"lineWiseCopyCut\", true)\n  option(\"pasteLinesPerSelection\", true)\n\n  option(\"readOnly\", false, function (cm, val) {\n    if (val == \"nocursor\") {\n      onBlur(cm)\n      cm.display.input.blur()\n    }\n    cm.display.input.readOnlyChanged(val)\n  })\n  option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset() }}, true)\n  option(\"dragDrop\", true, dragDropChanged)\n  option(\"allowDropFileTypes\", null)\n\n  option(\"cursorBlinkRate\", 530)\n  option(\"cursorScrollMargin\", 0)\n  option(\"cursorHeight\", 1, updateSelection, true)\n  option(\"singleCursorHeightPerLine\", true, updateSelection, true)\n  option(\"workTime\", 100)\n  option(\"workDelay\", 100)\n  option(\"flattenSpans\", true, resetModeState, true)\n  option(\"addModeClass\", false, resetModeState, true)\n  option(\"pollInterval\", 100)\n  option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; })\n  option(\"historyEventDelay\", 1250)\n  option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true)\n  option(\"maxHighlightLength\", 10000, resetModeState, true)\n  option(\"moveInputWithCursor\", true, function (cm, val) {\n    if (!val) { cm.display.input.resetPosition() }\n  })\n\n  option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; })\n  option(\"autofocus\", null)\n  option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true)\n}\n\nfunction guttersChanged(cm) {\n  updateGutters(cm)\n  regChange(cm)\n  alignHorizontally(cm)\n}\n\nfunction dragDropChanged(cm, value, old) {\n  var wasOn = old && old != Init\n  if (!value != !wasOn) {\n    var funcs = cm.display.dragFunctions\n    var toggle = value ? on : off\n    toggle(cm.display.scroller, \"dragstart\", funcs.start)\n    toggle(cm.display.scroller, \"dragenter\", funcs.enter)\n    toggle(cm.display.scroller, \"dragover\", funcs.over)\n    toggle(cm.display.scroller, \"dragleave\", funcs.leave)\n    toggle(cm.display.scroller, \"drop\", funcs.drop)\n  }\n}\n\nfunction wrappingChanged(cm) {\n  if (cm.options.lineWrapping) {\n    addClass(cm.display.wrapper, \"CodeMirror-wrap\")\n    cm.display.sizer.style.minWidth = \"\"\n    cm.display.sizerWidth = null\n  } else {\n    rmClass(cm.display.wrapper, \"CodeMirror-wrap\")\n    findMaxLine(cm)\n  }\n  estimateLineHeights(cm)\n  regChange(cm)\n  clearCaches(cm)\n  setTimeout(function () { return updateScrollbars(cm); }, 100)\n}\n\n// A CodeMirror instance represents an editor. This is the object\n// that user code is usually dealing with.\n\nfunction CodeMirror(place, options) {\n  var this$1 = this;\n\n  if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n  this.options = options = options ? copyObj(options) : {}\n  // Determine effective options based on given values and defaults.\n  copyObj(defaults, options, false)\n  setGuttersForLineNumbers(options)\n\n  var doc = options.value\n  if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction) }\n  this.doc = doc\n\n  var input = new CodeMirror.inputStyles[options.inputStyle](this)\n  var display = this.display = new Display(place, doc, input)\n  display.wrapper.CodeMirror = this\n  updateGutters(this)\n  themeChanged(this)\n  if (options.lineWrapping)\n    { this.display.wrapper.className += \" CodeMirror-wrap\" }\n  initScrollbars(this)\n\n  this.state = {\n    keyMaps: [],  // stores maps added by addKeyMap\n    overlays: [], // highlighting overlays, as added by addOverlay\n    modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n    overwrite: false,\n    delayingBlurEvent: false,\n    focused: false,\n    suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n    pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\n    selectingText: false,\n    draggingText: false,\n    highlight: new Delayed(), // stores highlight worker timeout\n    keySeq: null,  // Unfinished key sequence\n    specialChars: null\n  }\n\n  if (options.autofocus && !mobile) { display.input.focus() }\n\n  // Override magic textarea content restore that IE sometimes does\n  // on our hidden textarea on reload\n  if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20) }\n\n  registerEventHandlers(this)\n  ensureGlobalHandlers()\n\n  startOperation(this)\n  this.curOp.forceUpdate = true\n  attachDoc(this, doc)\n\n  if ((options.autofocus && !mobile) || this.hasFocus())\n    { setTimeout(bind(onFocus, this), 20) }\n  else\n    { onBlur(this) }\n\n  for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n    { optionHandlers[opt](this$1, options[opt], Init) } }\n  maybeUpdateLineNumberWidth(this)\n  if (options.finishInit) { options.finishInit(this) }\n  for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this$1) }\n  endOperation(this)\n  // Suppress optimizelegibility in Webkit, since it breaks text\n  // measuring on line wrapping boundaries.\n  if (webkit && options.lineWrapping &&\n      getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n    { display.lineDiv.style.textRendering = \"auto\" }\n}\n\n// The default configuration options.\nCodeMirror.defaults = defaults\n// Functions to run when options are changed.\nCodeMirror.optionHandlers = optionHandlers\n\n// Attach the necessary event handlers when initializing the editor\nfunction registerEventHandlers(cm) {\n  var d = cm.display\n  on(d.scroller, \"mousedown\", operation(cm, onMouseDown))\n  // Older IE's will not fire a second mousedown for a double click\n  if (ie && ie_version < 11)\n    { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n      if (signalDOMEvent(cm, e)) { return }\n      var pos = posFromMouse(cm, e)\n      if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n      e_preventDefault(e)\n      var word = cm.findWordAt(pos)\n      extendSelection(cm.doc, word.anchor, word.head)\n    })) }\n  else\n    { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }) }\n  // Some browsers fire contextmenu *after* opening the menu, at\n  // which point we can't mess with it anymore. Context menu is\n  // handled in onMouseDown for these browsers.\n  if (!captureRightClick) { on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); }) }\n\n  // Used to suppress mouse event handling when a touch happens\n  var touchFinished, prevTouch = {end: 0}\n  function finishTouch() {\n    if (d.activeTouch) {\n      touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000)\n      prevTouch = d.activeTouch\n      prevTouch.end = +new Date\n    }\n  }\n  function isMouseLikeTouchEvent(e) {\n    if (e.touches.length != 1) { return false }\n    var touch = e.touches[0]\n    return touch.radiusX <= 1 && touch.radiusY <= 1\n  }\n  function farAway(touch, other) {\n    if (other.left == null) { return true }\n    var dx = other.left - touch.left, dy = other.top - touch.top\n    return dx * dx + dy * dy > 20 * 20\n  }\n  on(d.scroller, \"touchstart\", function (e) {\n    if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {\n      d.input.ensurePolled()\n      clearTimeout(touchFinished)\n      var now = +new Date\n      d.activeTouch = {start: now, moved: false,\n                       prev: now - prevTouch.end <= 300 ? prevTouch : null}\n      if (e.touches.length == 1) {\n        d.activeTouch.left = e.touches[0].pageX\n        d.activeTouch.top = e.touches[0].pageY\n      }\n    }\n  })\n  on(d.scroller, \"touchmove\", function () {\n    if (d.activeTouch) { d.activeTouch.moved = true }\n  })\n  on(d.scroller, \"touchend\", function (e) {\n    var touch = d.activeTouch\n    if (touch && !eventInWidget(d, e) && touch.left != null &&\n        !touch.moved && new Date - touch.start < 300) {\n      var pos = cm.coordsChar(d.activeTouch, \"page\"), range\n      if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n        { range = new Range(pos, pos) }\n      else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n        { range = cm.findWordAt(pos) }\n      else // Triple tap\n        { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n      cm.setSelection(range.anchor, range.head)\n      cm.focus()\n      e_preventDefault(e)\n    }\n    finishTouch()\n  })\n  on(d.scroller, \"touchcancel\", finishTouch)\n\n  // Sync scrolling between fake scrollbars and real scrollable\n  // area, ensure viewport is updated when scrolling.\n  on(d.scroller, \"scroll\", function () {\n    if (d.scroller.clientHeight) {\n      updateScrollTop(cm, d.scroller.scrollTop)\n      setScrollLeft(cm, d.scroller.scrollLeft, true)\n      signal(cm, \"scroll\", cm)\n    }\n  })\n\n  // Listen to wheel events in order to try and update the viewport on time.\n  on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); })\n  on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); })\n\n  // Prevent wrapper from ever scrolling\n  on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; })\n\n  d.dragFunctions = {\n    enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e) }},\n    over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e) }},\n    start: function (e) { return onDragStart(cm, e); },\n    drop: operation(cm, onDrop),\n    leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm) }}\n  }\n\n  var inp = d.input.getField()\n  on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); })\n  on(inp, \"keydown\", operation(cm, onKeyDown))\n  on(inp, \"keypress\", operation(cm, onKeyPress))\n  on(inp, \"focus\", function (e) { return onFocus(cm, e); })\n  on(inp, \"blur\", function (e) { return onBlur(cm, e); })\n}\n\nvar initHooks = []\nCodeMirror.defineInitHook = function (f) { return initHooks.push(f); }\n\n// Indent the given line. The how parameter can be \"smart\",\n// \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n// (typically set to true for forced single-line indents), empty\n// lines are not indented, and places where the mode returns Pass\n// are left alone.\nfunction indentLine(cm, n, how, aggressive) {\n  var doc = cm.doc, state\n  if (how == null) { how = \"add\" }\n  if (how == \"smart\") {\n    // Fall back to \"prev\" when the mode doesn't have an indentation\n    // method.\n    if (!doc.mode.indent) { how = \"prev\" }\n    else { state = getContextBefore(cm, n).state }\n  }\n\n  var tabSize = cm.options.tabSize\n  var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize)\n  if (line.stateAfter) { line.stateAfter = null }\n  var curSpaceString = line.text.match(/^\\s*/)[0], indentation\n  if (!aggressive && !/\\S/.test(line.text)) {\n    indentation = 0\n    how = \"not\"\n  } else if (how == \"smart\") {\n    indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text)\n    if (indentation == Pass || indentation > 150) {\n      if (!aggressive) { return }\n      how = \"prev\"\n    }\n  }\n  if (how == \"prev\") {\n    if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize) }\n    else { indentation = 0 }\n  } else if (how == \"add\") {\n    indentation = curSpace + cm.options.indentUnit\n  } else if (how == \"subtract\") {\n    indentation = curSpace - cm.options.indentUnit\n  } else if (typeof how == \"number\") {\n    indentation = curSpace + how\n  }\n  indentation = Math.max(0, indentation)\n\n  var indentString = \"\", pos = 0\n  if (cm.options.indentWithTabs)\n    { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\"} }\n  if (pos < indentation) { indentString += spaceStr(indentation - pos) }\n\n  if (indentString != curSpaceString) {\n    replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\")\n    line.stateAfter = null\n    return true\n  } else {\n    // Ensure that, if the cursor was in the whitespace at the start\n    // of the line, it is moved to the end of that space.\n    for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n      var range = doc.sel.ranges[i$1]\n      if (range.head.line == n && range.head.ch < curSpaceString.length) {\n        var pos$1 = Pos(n, curSpaceString.length)\n        replaceOneSelection(doc, i$1, new Range(pos$1, pos$1))\n        break\n      }\n    }\n  }\n}\n\n// This will be set to a {lineWise: bool, text: [string]} object, so\n// that, when pasting, we know what kind of selections the copied\n// text was made out of.\nvar lastCopied = null\n\nfunction setLastCopied(newLastCopied) {\n  lastCopied = newLastCopied\n}\n\nfunction applyTextInput(cm, inserted, deleted, sel, origin) {\n  var doc = cm.doc\n  cm.display.shift = false\n  if (!sel) { sel = doc.sel }\n\n  var paste = cm.state.pasteIncoming || origin == \"paste\"\n  var textLines = splitLinesAuto(inserted), multiPaste = null\n  // When pasing N lines into N selections, insert one line per selection\n  if (paste && sel.ranges.length > 1) {\n    if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n      if (sel.ranges.length % lastCopied.text.length == 0) {\n        multiPaste = []\n        for (var i = 0; i < lastCopied.text.length; i++)\n          { multiPaste.push(doc.splitLines(lastCopied.text[i])) }\n      }\n    } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n      multiPaste = map(textLines, function (l) { return [l]; })\n    }\n  }\n\n  var updateInput\n  // Normal behavior is to insert the new text into every selection\n  for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n    var range = sel.ranges[i$1]\n    var from = range.from(), to = range.to()\n    if (range.empty()) {\n      if (deleted && deleted > 0) // Handle deletion\n        { from = Pos(from.line, from.ch - deleted) }\n      else if (cm.state.overwrite && !paste) // Handle overwrite\n        { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)) }\n      else if (lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted)\n        { from = to = Pos(from.line, 0) }\n    }\n    updateInput = cm.curOp.updateInput\n    var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                       origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\")}\n    makeChange(cm.doc, changeEvent)\n    signalLater(cm, \"inputRead\", cm, changeEvent)\n  }\n  if (inserted && !paste)\n    { triggerElectric(cm, inserted) }\n\n  ensureCursorVisible(cm)\n  cm.curOp.updateInput = updateInput\n  cm.curOp.typing = true\n  cm.state.pasteIncoming = cm.state.cutIncoming = false\n}\n\nfunction handlePaste(e, cm) {\n  var pasted = e.clipboardData && e.clipboardData.getData(\"Text\")\n  if (pasted) {\n    e.preventDefault()\n    if (!cm.isReadOnly() && !cm.options.disableInput)\n      { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }) }\n    return true\n  }\n}\n\nfunction triggerElectric(cm, inserted) {\n  // When an 'electric' character is inserted, immediately trigger a reindent\n  if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n  var sel = cm.doc.sel\n\n  for (var i = sel.ranges.length - 1; i >= 0; i--) {\n    var range = sel.ranges[i]\n    if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n    var mode = cm.getModeAt(range.head)\n    var indented = false\n    if (mode.electricChars) {\n      for (var j = 0; j < mode.electricChars.length; j++)\n        { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n          indented = indentLine(cm, range.head.line, \"smart\")\n          break\n        } }\n    } else if (mode.electricInput) {\n      if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n        { indented = indentLine(cm, range.head.line, \"smart\") }\n    }\n    if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line) }\n  }\n}\n\nfunction copyableRanges(cm) {\n  var text = [], ranges = []\n  for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n    var line = cm.doc.sel.ranges[i].head.line\n    var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)}\n    ranges.push(lineRange)\n    text.push(cm.getRange(lineRange.anchor, lineRange.head))\n  }\n  return {text: text, ranges: ranges}\n}\n\nfunction disableBrowserMagic(field, spellcheck) {\n  field.setAttribute(\"autocorrect\", \"off\")\n  field.setAttribute(\"autocapitalize\", \"off\")\n  field.setAttribute(\"spellcheck\", !!spellcheck)\n}\n\nfunction hiddenTextarea() {\n  var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\")\n  var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\")\n  // The textarea is kept positioned near the cursor to prevent the\n  // fact that it'll be scrolled into view on input from scrolling\n  // our fake cursor out of view. On webkit, when wrap=off, paste is\n  // very slow. So make the area wide instead.\n  if (webkit) { te.style.width = \"1000px\" }\n  else { te.setAttribute(\"wrap\", \"off\") }\n  // If border: 0; -- iOS fails to open keyboard (issue #1287)\n  if (ios) { te.style.border = \"1px solid black\" }\n  disableBrowserMagic(te)\n  return div\n}\n\n// The publicly visible API. Note that methodOp(f) means\n// 'wrap f in an operation, performed on its `this` parameter'.\n\n// This is not the complete set of editor methods. Most of the\n// methods defined on the Doc type are also injected into\n// CodeMirror.prototype, for backwards compatibility and\n// convenience.\n\nfunction addEditorMethods(CodeMirror) {\n  var optionHandlers = CodeMirror.optionHandlers\n\n  var helpers = CodeMirror.helpers = {}\n\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function(){window.focus(); this.display.input.focus()},\n\n    setOption: function(option, value) {\n      var options = this.options, old = options[option]\n      if (options[option] == value && option != \"mode\") { return }\n      options[option] = value\n      if (optionHandlers.hasOwnProperty(option))\n        { operation(this, optionHandlers[option])(this, value, old) }\n      signal(this, \"optionChange\", this, option)\n    },\n\n    getOption: function(option) {return this.options[option]},\n    getDoc: function() {return this.doc},\n\n    addKeyMap: function(map, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map))\n    },\n    removeKeyMap: function(map) {\n      var maps = this.state.keyMaps\n      for (var i = 0; i < maps.length; ++i)\n        { if (maps[i] == map || maps[i].name == map) {\n          maps.splice(i, 1)\n          return true\n        } }\n    },\n\n    addOverlay: methodOp(function(spec, options) {\n      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec)\n      if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n      insertSorted(this.state.overlays,\n                   {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                    priority: (options && options.priority) || 0},\n                   function (overlay) { return overlay.priority; })\n      this.state.modeGen++\n      regChange(this)\n    }),\n    removeOverlay: methodOp(function(spec) {\n      var this$1 = this;\n\n      var overlays = this.state.overlays\n      for (var i = 0; i < overlays.length; ++i) {\n        var cur = overlays[i].modeSpec\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1)\n          this$1.state.modeGen++\n          regChange(this$1)\n          return\n        }\n      }\n    }),\n\n    indentLine: methodOp(function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\" }\n        else { dir = dir ? \"add\" : \"subtract\" }\n      }\n      if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive) }\n    }),\n    indentSelection: methodOp(function(how) {\n      var this$1 = this;\n\n      var ranges = this.doc.sel.ranges, end = -1\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i]\n        if (!range.empty()) {\n          var from = range.from(), to = range.to()\n          var start = Math.max(end, from.line)\n          end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1\n          for (var j = start; j < end; ++j)\n            { indentLine(this$1, j, how) }\n          var newRanges = this$1.doc.sel.ranges\n          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n            { replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll) }\n        } else if (range.head.line > end) {\n          indentLine(this$1, range.head.line, how, true)\n          end = range.head.line\n          if (i == this$1.doc.sel.primIndex) { ensureCursorVisible(this$1) }\n        }\n      }\n    }),\n\n    // Fetch the parser token for a given character. Useful for hacks\n    // that want to inspect the mode state (say, for completion).\n    getTokenAt: function(pos, precise) {\n      return takeToken(this, pos, precise)\n    },\n\n    getLineTokens: function(line, precise) {\n      return takeToken(this, Pos(line), precise, true)\n    },\n\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos)\n      var styles = getLineStyles(this, getLine(this.doc, pos.line))\n      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch\n      var type\n      if (ch == 0) { type = styles[2] }\n      else { for (;;) {\n        var mid = (before + after) >> 1\n        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid }\n        else if (styles[mid * 2 + 1] < ch) { before = mid + 1 }\n        else { type = styles[mid * 2 + 2]; break }\n      } }\n      var cut = type ? type.indexOf(\"overlay \") : -1\n      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n    },\n\n    getModeAt: function(pos) {\n      var mode = this.doc.mode\n      if (!mode.innerMode) { return mode }\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n    },\n\n    getHelper: function(pos, type) {\n      return this.getHelpers(pos, type)[0]\n    },\n\n    getHelpers: function(pos, type) {\n      var this$1 = this;\n\n      var found = []\n      if (!helpers.hasOwnProperty(type)) { return found }\n      var help = helpers[type], mode = this.getModeAt(pos)\n      if (typeof mode[type] == \"string\") {\n        if (help[mode[type]]) { found.push(help[mode[type]]) }\n      } else if (mode[type]) {\n        for (var i = 0; i < mode[type].length; i++) {\n          var val = help[mode[type][i]]\n          if (val) { found.push(val) }\n        }\n      } else if (mode.helperType && help[mode.helperType]) {\n        found.push(help[mode.helperType])\n      } else if (help[mode.name]) {\n        found.push(help[mode.name])\n      }\n      for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n        var cur = help._global[i$1]\n        if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1)\n          { found.push(cur.val) }\n      }\n      return found\n    },\n\n    getStateAfter: function(line, precise) {\n      var doc = this.doc\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line)\n      return getContextBefore(this, line + 1, precise).state\n    },\n\n    cursorCoords: function(start, mode) {\n      var pos, range = this.doc.sel.primary()\n      if (start == null) { pos = range.head }\n      else if (typeof start == \"object\") { pos = clipPos(this.doc, start) }\n      else { pos = start ? range.from() : range.to() }\n      return cursorCoords(this, pos, mode || \"page\")\n    },\n\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n    },\n\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\")\n      return coordsChar(this, coords.left, coords.top)\n    },\n\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top\n      return lineAtHeight(this.doc, height + this.display.viewOffset)\n    },\n    heightAtLine: function(line, mode, includeWidgets) {\n      var end = false, lineObj\n      if (typeof line == \"number\") {\n        var last = this.doc.first + this.doc.size - 1\n        if (line < this.doc.first) { line = this.doc.first }\n        else if (line > last) { line = last; end = true }\n        lineObj = getLine(this.doc, line)\n      } else {\n        lineObj = line\n      }\n      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n        (end ? this.doc.height - heightAtLine(lineObj) : 0)\n    },\n\n    defaultTextHeight: function() { return textHeight(this.display) },\n    defaultCharWidth: function() { return charWidth(this.display) },\n\n    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      var display = this.display\n      pos = cursorCoords(this, clipPos(this.doc, pos))\n      var top = pos.bottom, left = pos.left\n      node.style.position = \"absolute\"\n      node.setAttribute(\"cm-ignore-events\", \"true\")\n      this.display.input.setUneditable(node)\n      display.sizer.appendChild(node)\n      if (vert == \"over\") {\n        top = pos.top\n      } else if (vert == \"above\" || vert == \"near\") {\n        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth)\n        // Default to positioning above (if specified and possible); otherwise default to positioning below\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          { top = pos.top - node.offsetHeight }\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          { top = pos.bottom }\n        if (left + node.offsetWidth > hspace)\n          { left = hspace - node.offsetWidth }\n      }\n      node.style.top = top + \"px\"\n      node.style.left = node.style.right = \"\"\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth\n        node.style.right = \"0px\"\n      } else {\n        if (horiz == \"left\") { left = 0 }\n        else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2 }\n        node.style.left = left + \"px\"\n      }\n      if (scroll)\n        { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}) }\n    },\n\n    triggerOnKeyDown: methodOp(onKeyDown),\n    triggerOnKeyPress: methodOp(onKeyPress),\n    triggerOnKeyUp: onKeyUp,\n    triggerOnMouseDown: methodOp(onMouseDown),\n\n    execCommand: function(cmd) {\n      if (commands.hasOwnProperty(cmd))\n        { return commands[cmd].call(null, this) }\n    },\n\n    triggerElectric: methodOp(function(text) { triggerElectric(this, text) }),\n\n    findPosH: function(from, amount, unit, visually) {\n      var this$1 = this;\n\n      var dir = 1\n      if (amount < 0) { dir = -1; amount = -amount }\n      var cur = clipPos(this.doc, from)\n      for (var i = 0; i < amount; ++i) {\n        cur = findPosH(this$1.doc, cur, dir, unit, visually)\n        if (cur.hitSide) { break }\n      }\n      return cur\n    },\n\n    moveH: methodOp(function(dir, unit) {\n      var this$1 = this;\n\n      this.extendSelectionsBy(function (range) {\n        if (this$1.display.shift || this$1.doc.extend || range.empty())\n          { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n        else\n          { return dir < 0 ? range.from() : range.to() }\n      }, sel_move)\n    }),\n\n    deleteH: methodOp(function(dir, unit) {\n      var sel = this.doc.sel, doc = this.doc\n      if (sel.somethingSelected())\n        { doc.replaceSelection(\"\", null, \"+delete\") }\n      else\n        { deleteNearSelection(this, function (range) {\n          var other = findPosH(doc, range.head, dir, unit, false)\n          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n        }) }\n    }),\n\n    findPosV: function(from, amount, unit, goalColumn) {\n      var this$1 = this;\n\n      var dir = 1, x = goalColumn\n      if (amount < 0) { dir = -1; amount = -amount }\n      var cur = clipPos(this.doc, from)\n      for (var i = 0; i < amount; ++i) {\n        var coords = cursorCoords(this$1, cur, \"div\")\n        if (x == null) { x = coords.left }\n        else { coords.left = x }\n        cur = findPosV(this$1, coords, dir, unit)\n        if (cur.hitSide) { break }\n      }\n      return cur\n    },\n\n    moveV: methodOp(function(dir, unit) {\n      var this$1 = this;\n\n      var doc = this.doc, goals = []\n      var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected()\n      doc.extendSelectionsBy(function (range) {\n        if (collapse)\n          { return dir < 0 ? range.from() : range.to() }\n        var headPos = cursorCoords(this$1, range.head, \"div\")\n        if (range.goalColumn != null) { headPos.left = range.goalColumn }\n        goals.push(headPos.left)\n        var pos = findPosV(this$1, headPos, dir, unit)\n        if (unit == \"page\" && range == doc.sel.primary())\n          { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top) }\n        return pos\n      }, sel_move)\n      if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n        { doc.sel.ranges[i].goalColumn = goals[i] } }\n    }),\n\n    // Find the word at the given position (as returned by coordsChar).\n    findWordAt: function(pos) {\n      var doc = this.doc, line = getLine(doc, pos.line).text\n      var start = pos.ch, end = pos.ch\n      if (line) {\n        var helper = this.getHelper(pos, \"wordChars\")\n        if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end }\n        var startChar = line.charAt(start)\n        var check = isWordChar(startChar, helper)\n          ? function (ch) { return isWordChar(ch, helper); }\n          : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n          : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); }\n        while (start > 0 && check(line.charAt(start - 1))) { --start }\n        while (end < line.length && check(line.charAt(end))) { ++end }\n      }\n      return new Range(Pos(pos.line, start), Pos(pos.line, end))\n    },\n\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite) { return }\n      if (this.state.overwrite = !this.state.overwrite)\n        { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\") }\n      else\n        { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\") }\n\n      signal(this, \"overwriteToggle\", this, this.state.overwrite)\n    },\n    hasFocus: function() { return this.display.input.getField() == activeElt() },\n    isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n    scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y) }),\n    getScrollInfo: function() {\n      var scroller = this.display.scroller\n      return {left: scroller.scrollLeft, top: scroller.scrollTop,\n              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n              clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n    },\n\n    scrollIntoView: methodOp(function(range, margin) {\n      if (range == null) {\n        range = {from: this.doc.sel.primary().head, to: null}\n        if (margin == null) { margin = this.options.cursorScrollMargin }\n      } else if (typeof range == \"number\") {\n        range = {from: Pos(range, 0), to: null}\n      } else if (range.from == null) {\n        range = {from: range, to: null}\n      }\n      if (!range.to) { range.to = range.from }\n      range.margin = margin || 0\n\n      if (range.from.line != null) {\n        scrollToRange(this, range)\n      } else {\n        scrollToCoordsRange(this, range.from, range.to, range.margin)\n      }\n    }),\n\n    setSize: methodOp(function(width, height) {\n      var this$1 = this;\n\n      var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; }\n      if (width != null) { this.display.wrapper.style.width = interpret(width) }\n      if (height != null) { this.display.wrapper.style.height = interpret(height) }\n      if (this.options.lineWrapping) { clearLineMeasurementCache(this) }\n      var lineNo = this.display.viewFrom\n      this.doc.iter(lineNo, this.display.viewTo, function (line) {\n        if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n          { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n        ++lineNo\n      })\n      this.curOp.forceUpdate = true\n      signal(this, \"refresh\", this)\n    }),\n\n    operation: function(f){return runInOp(this, f)},\n    startOperation: function(){return startOperation(this)},\n    endOperation: function(){return endOperation(this)},\n\n    refresh: methodOp(function() {\n      var oldHeight = this.display.cachedTextHeight\n      regChange(this)\n      this.curOp.forceUpdate = true\n      clearCaches(this)\n      scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop)\n      updateGutterSpace(this)\n      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n        { estimateLineHeights(this) }\n      signal(this, \"refresh\", this)\n    }),\n\n    swapDoc: methodOp(function(doc) {\n      var old = this.doc\n      old.cm = null\n      attachDoc(this, doc)\n      clearCaches(this)\n      this.display.input.reset()\n      scrollToCoords(this, doc.scrollLeft, doc.scrollTop)\n      this.curOp.forceScroll = true\n      signalLater(this, \"swapDoc\", this, old)\n      return old\n    }),\n\n    getInputField: function(){return this.display.input.getField()},\n    getWrapperElement: function(){return this.display.wrapper},\n    getScrollerElement: function(){return this.display.scroller},\n    getGutterElement: function(){return this.display.gutters}\n  }\n  eventMixin(CodeMirror)\n\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []} }\n    helpers[type][name] = value\n  }\n  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n    CodeMirror.registerHelper(type, name, value)\n    helpers[type]._global.push({pred: predicate, val: value})\n  }\n}\n\n// Used for horizontal relative motion. Dir is -1 or 1 (left or\n// right), unit can be \"char\", \"column\" (like char, but doesn't\n// cross line boundaries), \"word\" (across next word), or \"group\" (to\n// the start of next group of word or non-word-non-whitespace\n// chars). The visually param controls whether, in right-to-left\n// text, direction 1 means to move towards the next index in the\n// string, or towards the character to the right of the current\n// position. The resulting position will have a hitSide=true\n// property if it reached the end of the document.\nfunction findPosH(doc, pos, dir, unit, visually) {\n  var oldPos = pos\n  var origDir = dir\n  var lineObj = getLine(doc, pos.line)\n  function findNextLine() {\n    var l = pos.line + dir\n    if (l < doc.first || l >= doc.first + doc.size) { return false }\n    pos = new Pos(l, pos.ch, pos.sticky)\n    return lineObj = getLine(doc, l)\n  }\n  function moveOnce(boundToLine) {\n    var next\n    if (visually) {\n      next = moveVisually(doc.cm, lineObj, pos, dir)\n    } else {\n      next = moveLogically(lineObj, pos, dir)\n    }\n    if (next == null) {\n      if (!boundToLine && findNextLine())\n        { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir) }\n      else\n        { return false }\n    } else {\n      pos = next\n    }\n    return true\n  }\n\n  if (unit == \"char\") {\n    moveOnce()\n  } else if (unit == \"column\") {\n    moveOnce(true)\n  } else if (unit == \"word\" || unit == \"group\") {\n    var sawType = null, group = unit == \"group\"\n    var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\")\n    for (var first = true;; first = false) {\n      if (dir < 0 && !moveOnce(!first)) { break }\n      var cur = lineObj.text.charAt(pos.ch) || \"\\n\"\n      var type = isWordChar(cur, helper) ? \"w\"\n        : group && cur == \"\\n\" ? \"n\"\n        : !group || /\\s/.test(cur) ? null\n        : \"p\"\n      if (group && !first && !type) { type = \"s\" }\n      if (sawType && sawType != type) {\n        if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\"}\n        break\n      }\n\n      if (type) { sawType = type }\n      if (dir > 0 && !moveOnce(!first)) { break }\n    }\n  }\n  var result = skipAtomic(doc, pos, oldPos, origDir, true)\n  if (equalCursorPos(oldPos, result)) { result.hitSide = true }\n  return result\n}\n\n// For relative vertical movement. Dir may be -1 or 1. Unit can be\n// \"page\" or \"line\". The resulting position will have a hitSide=true\n// property if it reached the end of the document.\nfunction findPosV(cm, pos, dir, unit) {\n  var doc = cm.doc, x = pos.left, y\n  if (unit == \"page\") {\n    var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight)\n    var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3)\n    y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount\n\n  } else if (unit == \"line\") {\n    y = dir > 0 ? pos.bottom + 3 : pos.top - 3\n  }\n  var target\n  for (;;) {\n    target = coordsChar(cm, x, y)\n    if (!target.outside) { break }\n    if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n    y += dir * 5\n  }\n  return target\n}\n\n// CONTENTEDITABLE INPUT STYLE\n\nvar ContentEditableInput = function(cm) {\n  this.cm = cm\n  this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null\n  this.polling = new Delayed()\n  this.composing = null\n  this.gracePeriod = false\n  this.readDOMTimeout = null\n};\n\nContentEditableInput.prototype.init = function (display) {\n    var this$1 = this;\n\n  var input = this, cm = input.cm\n  var div = input.div = display.lineDiv\n  disableBrowserMagic(div, cm.options.spellcheck)\n\n  on(div, \"paste\", function (e) {\n    if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n    // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n    if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20) }\n  })\n\n  on(div, \"compositionstart\", function (e) {\n    this$1.composing = {data: e.data, done: false}\n  })\n  on(div, \"compositionupdate\", function (e) {\n    if (!this$1.composing) { this$1.composing = {data: e.data, done: false} }\n  })\n  on(div, \"compositionend\", function (e) {\n    if (this$1.composing) {\n      if (e.data != this$1.composing.data) { this$1.readFromDOMSoon() }\n      this$1.composing.done = true\n    }\n  })\n\n  on(div, \"touchstart\", function () { return input.forceCompositionEnd(); })\n\n  on(div, \"input\", function () {\n    if (!this$1.composing) { this$1.readFromDOMSoon() }\n  })\n\n  function onCopyCut(e) {\n    if (signalDOMEvent(cm, e)) { return }\n    if (cm.somethingSelected()) {\n      setLastCopied({lineWise: false, text: cm.getSelections()})\n      if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\") }\n    } else if (!cm.options.lineWiseCopyCut) {\n      return\n    } else {\n      var ranges = copyableRanges(cm)\n      setLastCopied({lineWise: true, text: ranges.text})\n      if (e.type == \"cut\") {\n        cm.operation(function () {\n          cm.setSelections(ranges.ranges, 0, sel_dontScroll)\n          cm.replaceSelection(\"\", null, \"cut\")\n        })\n      }\n    }\n    if (e.clipboardData) {\n      e.clipboardData.clearData()\n      var content = lastCopied.text.join(\"\\n\")\n      // iOS exposes the clipboard API, but seems to discard content inserted into it\n      e.clipboardData.setData(\"Text\", content)\n      if (e.clipboardData.getData(\"Text\") == content) {\n        e.preventDefault()\n        return\n      }\n    }\n    // Old-fashioned briefly-focus-a-textarea hack\n    var kludge = hiddenTextarea(), te = kludge.firstChild\n    cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild)\n    te.value = lastCopied.text.join(\"\\n\")\n    var hadFocus = document.activeElement\n    selectInput(te)\n    setTimeout(function () {\n      cm.display.lineSpace.removeChild(kludge)\n      hadFocus.focus()\n      if (hadFocus == div) { input.showPrimarySelection() }\n    }, 50)\n  }\n  on(div, \"copy\", onCopyCut)\n  on(div, \"cut\", onCopyCut)\n};\n\nContentEditableInput.prototype.prepareSelection = function () {\n  var result = prepareSelection(this.cm, false)\n  result.focus = this.cm.state.focused\n  return result\n};\n\nContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n  if (!info || !this.cm.display.view.length) { return }\n  if (info.focus || takeFocus) { this.showPrimarySelection() }\n  this.showMultipleSelections(info)\n};\n\nContentEditableInput.prototype.showPrimarySelection = function () {\n  var sel = window.getSelection(), cm = this.cm, prim = cm.doc.sel.primary()\n  var from = prim.from(), to = prim.to()\n\n  if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n    sel.removeAllRanges()\n    return\n  }\n\n  var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset)\n  var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset)\n  if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n      cmp(minPos(curAnchor, curFocus), from) == 0 &&\n      cmp(maxPos(curAnchor, curFocus), to) == 0)\n    { return }\n\n  var view = cm.display.view\n  var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n      {node: view[0].measure.map[2], offset: 0}\n  var end = to.line < cm.display.viewTo && posToDOM(cm, to)\n  if (!end) {\n    var measure = view[view.length - 1].measure\n    var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map\n    end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]}\n  }\n\n  if (!start || !end) {\n    sel.removeAllRanges()\n    return\n  }\n\n  var old = sel.rangeCount && sel.getRangeAt(0), rng\n  try { rng = range(start.node, start.offset, end.offset, end.node) }\n  catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n  if (rng) {\n    if (!gecko && cm.state.focused) {\n      sel.collapse(start.node, start.offset)\n      if (!rng.collapsed) {\n        sel.removeAllRanges()\n        sel.addRange(rng)\n      }\n    } else {\n      sel.removeAllRanges()\n      sel.addRange(rng)\n    }\n    if (old && sel.anchorNode == null) { sel.addRange(old) }\n    else if (gecko) { this.startGracePeriod() }\n  }\n  this.rememberSelection()\n};\n\nContentEditableInput.prototype.startGracePeriod = function () {\n    var this$1 = this;\n\n  clearTimeout(this.gracePeriod)\n  this.gracePeriod = setTimeout(function () {\n    this$1.gracePeriod = false\n    if (this$1.selectionChanged())\n      { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }) }\n  }, 20)\n};\n\nContentEditableInput.prototype.showMultipleSelections = function (info) {\n  removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors)\n  removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection)\n};\n\nContentEditableInput.prototype.rememberSelection = function () {\n  var sel = window.getSelection()\n  this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset\n  this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset\n};\n\nContentEditableInput.prototype.selectionInEditor = function () {\n  var sel = window.getSelection()\n  if (!sel.rangeCount) { return false }\n  var node = sel.getRangeAt(0).commonAncestorContainer\n  return contains(this.div, node)\n};\n\nContentEditableInput.prototype.focus = function () {\n  if (this.cm.options.readOnly != \"nocursor\") {\n    if (!this.selectionInEditor())\n      { this.showSelection(this.prepareSelection(), true) }\n    this.div.focus()\n  }\n};\nContentEditableInput.prototype.blur = function () { this.div.blur() };\nContentEditableInput.prototype.getField = function () { return this.div };\n\nContentEditableInput.prototype.supportsTouch = function () { return true };\n\nContentEditableInput.prototype.receivedFocus = function () {\n  var input = this\n  if (this.selectionInEditor())\n    { this.pollSelection() }\n  else\n    { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }) }\n\n  function poll() {\n    if (input.cm.state.focused) {\n      input.pollSelection()\n      input.polling.set(input.cm.options.pollInterval, poll)\n    }\n  }\n  this.polling.set(this.cm.options.pollInterval, poll)\n};\n\nContentEditableInput.prototype.selectionChanged = function () {\n  var sel = window.getSelection()\n  return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n    sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n};\n\nContentEditableInput.prototype.pollSelection = function () {\n  if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n  var sel = window.getSelection(), cm = this.cm\n  // On Android Chrome (version 56, at least), backspacing into an\n  // uneditable block element will put the cursor in that element,\n  // and then, because it's not editable, hide the virtual keyboard.\n  // Because Android doesn't allow us to actually detect backspace\n  // presses in a sane way, this code checks for when that happens\n  // and simulates a backspace press in this case.\n  if (android && chrome && this.cm.options.gutters.length && isInGutter(sel.anchorNode)) {\n    this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs})\n    this.blur()\n    this.focus()\n    return\n  }\n  if (this.composing) { return }\n  this.rememberSelection()\n  var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset)\n  var head = domToPos(cm, sel.focusNode, sel.focusOffset)\n  if (anchor && head) { runInOp(cm, function () {\n    setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll)\n    if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true }\n  }) }\n};\n\nContentEditableInput.prototype.pollContent = function () {\n  if (this.readDOMTimeout != null) {\n    clearTimeout(this.readDOMTimeout)\n    this.readDOMTimeout = null\n  }\n\n  var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary()\n  var from = sel.from(), to = sel.to()\n  if (from.ch == 0 && from.line > cm.firstLine())\n    { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length) }\n  if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n    { to = Pos(to.line + 1, 0) }\n  if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n  var fromIndex, fromLine, fromNode\n  if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n    fromLine = lineNo(display.view[0].line)\n    fromNode = display.view[0].node\n  } else {\n    fromLine = lineNo(display.view[fromIndex].line)\n    fromNode = display.view[fromIndex - 1].node.nextSibling\n  }\n  var toIndex = findViewIndex(cm, to.line)\n  var toLine, toNode\n  if (toIndex == display.view.length - 1) {\n    toLine = display.viewTo - 1\n    toNode = display.lineDiv.lastChild\n  } else {\n    toLine = lineNo(display.view[toIndex + 1].line) - 1\n    toNode = display.view[toIndex + 1].node.previousSibling\n  }\n\n  if (!fromNode) { return false }\n  var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine))\n  var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length))\n  while (newText.length > 1 && oldText.length > 1) {\n    if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine-- }\n    else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++ }\n    else { break }\n  }\n\n  var cutFront = 0, cutEnd = 0\n  var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length)\n  while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n    { ++cutFront }\n  var newBot = lst(newText), oldBot = lst(oldText)\n  var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                           oldBot.length - (oldText.length == 1 ? cutFront : 0))\n  while (cutEnd < maxCutEnd &&\n         newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n    { ++cutEnd }\n  // Try to move start of change to start of selection if ambiguous\n  if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n    while (cutFront && cutFront > from.ch &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n      cutFront--\n      cutEnd++\n    }\n  }\n\n  newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\")\n  newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\")\n\n  var chFrom = Pos(fromLine, cutFront)\n  var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0)\n  if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n    replaceRange(cm.doc, newText, chFrom, chTo, \"+input\")\n    return true\n  }\n};\n\nContentEditableInput.prototype.ensurePolled = function () {\n  this.forceCompositionEnd()\n};\nContentEditableInput.prototype.reset = function () {\n  this.forceCompositionEnd()\n};\nContentEditableInput.prototype.forceCompositionEnd = function () {\n  if (!this.composing) { return }\n  clearTimeout(this.readDOMTimeout)\n  this.composing = null\n  this.updateFromDOM()\n  this.div.blur()\n  this.div.focus()\n};\nContentEditableInput.prototype.readFromDOMSoon = function () {\n    var this$1 = this;\n\n  if (this.readDOMTimeout != null) { return }\n  this.readDOMTimeout = setTimeout(function () {\n    this$1.readDOMTimeout = null\n    if (this$1.composing) {\n      if (this$1.composing.done) { this$1.composing = null }\n      else { return }\n    }\n    this$1.updateFromDOM()\n  }, 80)\n};\n\nContentEditableInput.prototype.updateFromDOM = function () {\n    var this$1 = this;\n\n  if (this.cm.isReadOnly() || !this.pollContent())\n    { runInOp(this.cm, function () { return regChange(this$1.cm); }) }\n};\n\nContentEditableInput.prototype.setUneditable = function (node) {\n  node.contentEditable = \"false\"\n};\n\nContentEditableInput.prototype.onKeyPress = function (e) {\n  if (e.charCode == 0) { return }\n  e.preventDefault()\n  if (!this.cm.isReadOnly())\n    { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0) }\n};\n\nContentEditableInput.prototype.readOnlyChanged = function (val) {\n  this.div.contentEditable = String(val != \"nocursor\")\n};\n\nContentEditableInput.prototype.onContextMenu = function () {};\nContentEditableInput.prototype.resetPosition = function () {};\n\nContentEditableInput.prototype.needsContentAttribute = true\n\nfunction posToDOM(cm, pos) {\n  var view = findViewForLine(cm, pos.line)\n  if (!view || view.hidden) { return null }\n  var line = getLine(cm.doc, pos.line)\n  var info = mapFromLineView(view, line, pos.line)\n\n  var order = getOrder(line, cm.doc.direction), side = \"left\"\n  if (order) {\n    var partPos = getBidiPartAt(order, pos.ch)\n    side = partPos % 2 ? \"right\" : \"left\"\n  }\n  var result = nodeAndOffsetInLineMap(info.map, pos.ch, side)\n  result.offset = result.collapse == \"right\" ? result.end : result.start\n  return result\n}\n\nfunction isInGutter(node) {\n  for (var scan = node; scan; scan = scan.parentNode)\n    { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n  return false\n}\n\nfunction badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\nfunction domTextBetween(cm, from, to, fromLine, toLine) {\n  var text = \"\", closing = false, lineSep = cm.doc.lineSeparator()\n  function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n  function close() {\n    if (closing) {\n      text += lineSep\n      closing = false\n    }\n  }\n  function addText(str) {\n    if (str) {\n      close()\n      text += str\n    }\n  }\n  function walk(node) {\n    if (node.nodeType == 1) {\n      var cmText = node.getAttribute(\"cm-text\")\n      if (cmText != null) {\n        addText(cmText || node.textContent.replace(/\\u200b/g, \"\"))\n        return\n      }\n      var markerID = node.getAttribute(\"cm-marker\"), range\n      if (markerID) {\n        var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID))\n        if (found.length && (range = found[0].find()))\n          { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)) }\n        return\n      }\n      if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n      var isBlock = /^(pre|div|p)$/i.test(node.nodeName)\n      if (isBlock) { close() }\n      for (var i = 0; i < node.childNodes.length; i++)\n        { walk(node.childNodes[i]) }\n      if (isBlock) { closing = true }\n    } else if (node.nodeType == 3) {\n      addText(node.nodeValue)\n    }\n  }\n  for (;;) {\n    walk(from)\n    if (from == to) { break }\n    from = from.nextSibling\n  }\n  return text\n}\n\nfunction domToPos(cm, node, offset) {\n  var lineNode\n  if (node == cm.display.lineDiv) {\n    lineNode = cm.display.lineDiv.childNodes[offset]\n    if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n    node = null; offset = 0\n  } else {\n    for (lineNode = node;; lineNode = lineNode.parentNode) {\n      if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n      if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n    }\n  }\n  for (var i = 0; i < cm.display.view.length; i++) {\n    var lineView = cm.display.view[i]\n    if (lineView.node == lineNode)\n      { return locateNodeInLineView(lineView, node, offset) }\n  }\n}\n\nfunction locateNodeInLineView(lineView, node, offset) {\n  var wrapper = lineView.text.firstChild, bad = false\n  if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n  if (node == wrapper) {\n    bad = true\n    node = wrapper.childNodes[offset]\n    offset = 0\n    if (!node) {\n      var line = lineView.rest ? lst(lineView.rest) : lineView.line\n      return badPos(Pos(lineNo(line), line.text.length), bad)\n    }\n  }\n\n  var textNode = node.nodeType == 3 ? node : null, topNode = node\n  if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n    textNode = node.firstChild\n    if (offset) { offset = textNode.nodeValue.length }\n  }\n  while (topNode.parentNode != wrapper) { topNode = topNode.parentNode }\n  var measure = lineView.measure, maps = measure.maps\n\n  function find(textNode, topNode, offset) {\n    for (var i = -1; i < (maps ? maps.length : 0); i++) {\n      var map = i < 0 ? measure.map : maps[i]\n      for (var j = 0; j < map.length; j += 3) {\n        var curNode = map[j + 2]\n        if (curNode == textNode || curNode == topNode) {\n          var line = lineNo(i < 0 ? lineView.line : lineView.rest[i])\n          var ch = map[j] + offset\n          if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)] }\n          return Pos(line, ch)\n        }\n      }\n    }\n  }\n  var found = find(textNode, topNode, offset)\n  if (found) { return badPos(found, bad) }\n\n  // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n  for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n    found = find(after, after.firstChild, 0)\n    if (found)\n      { return badPos(Pos(found.line, found.ch - dist), bad) }\n    else\n      { dist += after.textContent.length }\n  }\n  for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n    found = find(before, before.firstChild, -1)\n    if (found)\n      { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n    else\n      { dist$1 += before.textContent.length }\n  }\n}\n\n// TEXTAREA INPUT STYLE\n\nvar TextareaInput = function(cm) {\n  this.cm = cm\n  // See input.poll and input.reset\n  this.prevInput = \"\"\n\n  // Flag that indicates whether we expect input to appear real soon\n  // now (after some event like 'keypress' or 'input') and are\n  // polling intensively.\n  this.pollingFast = false\n  // Self-resetting timeout for the poller\n  this.polling = new Delayed()\n  // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n  this.hasSelection = false\n  this.composing = null\n};\n\nTextareaInput.prototype.init = function (display) {\n    var this$1 = this;\n\n  var input = this, cm = this.cm\n\n  // Wraps and hides input textarea\n  var div = this.wrapper = hiddenTextarea()\n  // The semihidden textarea that is focused when the editor is\n  // focused, and receives input.\n  var te = this.textarea = div.firstChild\n  display.wrapper.insertBefore(div, display.wrapper.firstChild)\n\n  // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n  if (ios) { te.style.width = \"0px\" }\n\n  on(te, \"input\", function () {\n    if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null }\n    input.poll()\n  })\n\n  on(te, \"paste\", function (e) {\n    if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n    cm.state.pasteIncoming = true\n    input.fastPoll()\n  })\n\n  function prepareCopyCut(e) {\n    if (signalDOMEvent(cm, e)) { return }\n    if (cm.somethingSelected()) {\n      setLastCopied({lineWise: false, text: cm.getSelections()})\n    } else if (!cm.options.lineWiseCopyCut) {\n      return\n    } else {\n      var ranges = copyableRanges(cm)\n      setLastCopied({lineWise: true, text: ranges.text})\n      if (e.type == \"cut\") {\n        cm.setSelections(ranges.ranges, null, sel_dontScroll)\n      } else {\n        input.prevInput = \"\"\n        te.value = ranges.text.join(\"\\n\")\n        selectInput(te)\n      }\n    }\n    if (e.type == \"cut\") { cm.state.cutIncoming = true }\n  }\n  on(te, \"cut\", prepareCopyCut)\n  on(te, \"copy\", prepareCopyCut)\n\n  on(display.scroller, \"paste\", function (e) {\n    if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n    cm.state.pasteIncoming = true\n    input.focus()\n  })\n\n  // Prevent normal selection in the editor (we handle our own)\n  on(display.lineSpace, \"selectstart\", function (e) {\n    if (!eventInWidget(display, e)) { e_preventDefault(e) }\n  })\n\n  on(te, \"compositionstart\", function () {\n    var start = cm.getCursor(\"from\")\n    if (input.composing) { input.composing.range.clear() }\n    input.composing = {\n      start: start,\n      range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n    }\n  })\n  on(te, \"compositionend\", function () {\n    if (input.composing) {\n      input.poll()\n      input.composing.range.clear()\n      input.composing = null\n    }\n  })\n};\n\nTextareaInput.prototype.prepareSelection = function () {\n  // Redraw the selection and/or cursor\n  var cm = this.cm, display = cm.display, doc = cm.doc\n  var result = prepareSelection(cm)\n\n  // Move the hidden textarea near the cursor to prevent scrolling artifacts\n  if (cm.options.moveInputWithCursor) {\n    var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\")\n    var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect()\n    result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                        headPos.top + lineOff.top - wrapOff.top))\n    result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                         headPos.left + lineOff.left - wrapOff.left))\n  }\n\n  return result\n};\n\nTextareaInput.prototype.showSelection = function (drawn) {\n  var cm = this.cm, display = cm.display\n  removeChildrenAndAdd(display.cursorDiv, drawn.cursors)\n  removeChildrenAndAdd(display.selectionDiv, drawn.selection)\n  if (drawn.teTop != null) {\n    this.wrapper.style.top = drawn.teTop + \"px\"\n    this.wrapper.style.left = drawn.teLeft + \"px\"\n  }\n};\n\n// Reset the input to correspond to the selection (or to be empty,\n// when not typing and nothing is selected)\nTextareaInput.prototype.reset = function (typing) {\n  if (this.contextMenuPending || this.composing) { return }\n  var cm = this.cm\n  if (cm.somethingSelected()) {\n    this.prevInput = \"\"\n    var content = cm.getSelection()\n    this.textarea.value = content\n    if (cm.state.focused) { selectInput(this.textarea) }\n    if (ie && ie_version >= 9) { this.hasSelection = content }\n  } else if (!typing) {\n    this.prevInput = this.textarea.value = \"\"\n    if (ie && ie_version >= 9) { this.hasSelection = null }\n  }\n};\n\nTextareaInput.prototype.getField = function () { return this.textarea };\n\nTextareaInput.prototype.supportsTouch = function () { return false };\n\nTextareaInput.prototype.focus = function () {\n  if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n    try { this.textarea.focus() }\n    catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n  }\n};\n\nTextareaInput.prototype.blur = function () { this.textarea.blur() };\n\nTextareaInput.prototype.resetPosition = function () {\n  this.wrapper.style.top = this.wrapper.style.left = 0\n};\n\nTextareaInput.prototype.receivedFocus = function () { this.slowPoll() };\n\n// Poll for input changes, using the normal rate of polling. This\n// runs as long as the editor is focused.\nTextareaInput.prototype.slowPoll = function () {\n    var this$1 = this;\n\n  if (this.pollingFast) { return }\n  this.polling.set(this.cm.options.pollInterval, function () {\n    this$1.poll()\n    if (this$1.cm.state.focused) { this$1.slowPoll() }\n  })\n};\n\n// When an event has just come in that is likely to add or change\n// something in the input textarea, we poll faster, to ensure that\n// the change appears on the screen quickly.\nTextareaInput.prototype.fastPoll = function () {\n  var missed = false, input = this\n  input.pollingFast = true\n  function p() {\n    var changed = input.poll()\n    if (!changed && !missed) {missed = true; input.polling.set(60, p)}\n    else {input.pollingFast = false; input.slowPoll()}\n  }\n  input.polling.set(20, p)\n};\n\n// Read input from the textarea, and update the document to match.\n// When something is selected, it is present in the textarea, and\n// selected (unless it is huge, in which case a placeholder is\n// used). When nothing is selected, the cursor sits after previously\n// seen text (can be empty), which is stored in prevInput (we must\n// not reset the textarea when typing, because that breaks IME).\nTextareaInput.prototype.poll = function () {\n    var this$1 = this;\n\n  var cm = this.cm, input = this.textarea, prevInput = this.prevInput\n  // Since this is called a *lot*, try to bail out as cheaply as\n  // possible when it is clear that nothing happened. hasSelection\n  // will be the case when there is a lot of text in the textarea,\n  // in which case reading its value would be expensive.\n  if (this.contextMenuPending || !cm.state.focused ||\n      (hasSelection(input) && !prevInput && !this.composing) ||\n      cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n    { return false }\n\n  var text = input.value\n  // If nothing changed, bail.\n  if (text == prevInput && !cm.somethingSelected()) { return false }\n  // Work around nonsensical selection resetting in IE9/10, and\n  // inexplicable appearance of private area unicode characters on\n  // some key combos in Mac (#2689).\n  if (ie && ie_version >= 9 && this.hasSelection === text ||\n      mac && /[\\uf700-\\uf7ff]/.test(text)) {\n    cm.display.input.reset()\n    return false\n  }\n\n  if (cm.doc.sel == cm.display.selForContextMenu) {\n    var first = text.charCodeAt(0)\n    if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\" }\n    if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n  }\n  // Find the part of the input that is actually new\n  var same = 0, l = Math.min(prevInput.length, text.length)\n  while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same }\n\n  runInOp(cm, function () {\n    applyTextInput(cm, text.slice(same), prevInput.length - same,\n                   null, this$1.composing ? \"*compose\" : null)\n\n    // Don't leave long text in the textarea, since it makes further polling slow\n    if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\" }\n    else { this$1.prevInput = text }\n\n    if (this$1.composing) {\n      this$1.composing.range.clear()\n      this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                         {className: \"CodeMirror-composing\"})\n    }\n  })\n  return true\n};\n\nTextareaInput.prototype.ensurePolled = function () {\n  if (this.pollingFast && this.poll()) { this.pollingFast = false }\n};\n\nTextareaInput.prototype.onKeyPress = function () {\n  if (ie && ie_version >= 9) { this.hasSelection = null }\n  this.fastPoll()\n};\n\nTextareaInput.prototype.onContextMenu = function (e) {\n  var input = this, cm = input.cm, display = cm.display, te = input.textarea\n  var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop\n  if (!pos || presto) { return } // Opera is difficult.\n\n  // Reset the current text selection only if the click is done outside of the selection\n  // and 'resetSelectionOnContextMenu' option is true.\n  var reset = cm.options.resetSelectionOnContextMenu\n  if (reset && cm.doc.sel.contains(pos) == -1)\n    { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll) }\n\n  var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText\n  input.wrapper.style.cssText = \"position: absolute\"\n  var wrapperBox = input.wrapper.getBoundingClientRect()\n  te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\"\n  var oldScrollY\n  if (webkit) { oldScrollY = window.scrollY } // Work around Chrome issue (#2712)\n  display.input.focus()\n  if (webkit) { window.scrollTo(null, oldScrollY) }\n  display.input.reset()\n  // Adds \"Select all\" to context menu in FF\n  if (!cm.somethingSelected()) { te.value = input.prevInput = \" \" }\n  input.contextMenuPending = true\n  display.selForContextMenu = cm.doc.sel\n  clearTimeout(display.detectingSelectAll)\n\n  // Select-all will be greyed out if there's nothing to select, so\n  // this adds a zero-width space so that we can later check whether\n  // it got selected.\n  function prepareSelectAllHack() {\n    if (te.selectionStart != null) {\n      var selected = cm.somethingSelected()\n      var extval = \"\\u200b\" + (selected ? te.value : \"\")\n      te.value = \"\\u21da\" // Used to catch context-menu undo\n      te.value = extval\n      input.prevInput = selected ? \"\" : \"\\u200b\"\n      te.selectionStart = 1; te.selectionEnd = extval.length\n      // Re-set this, in case some other handler touched the\n      // selection in the meantime.\n      display.selForContextMenu = cm.doc.sel\n    }\n  }\n  function rehide() {\n    input.contextMenuPending = false\n    input.wrapper.style.cssText = oldWrapperCSS\n    te.style.cssText = oldCSS\n    if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos) }\n\n    // Try to detect the user choosing select-all\n    if (te.selectionStart != null) {\n      if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack() }\n      var i = 0, poll = function () {\n        if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n            te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n          operation(cm, selectAll)(cm)\n        } else if (i++ < 10) {\n          display.detectingSelectAll = setTimeout(poll, 500)\n        } else {\n          display.selForContextMenu = null\n          display.input.reset()\n        }\n      }\n      display.detectingSelectAll = setTimeout(poll, 200)\n    }\n  }\n\n  if (ie && ie_version >= 9) { prepareSelectAllHack() }\n  if (captureRightClick) {\n    e_stop(e)\n    var mouseup = function () {\n      off(window, \"mouseup\", mouseup)\n      setTimeout(rehide, 20)\n    }\n    on(window, \"mouseup\", mouseup)\n  } else {\n    setTimeout(rehide, 50)\n  }\n};\n\nTextareaInput.prototype.readOnlyChanged = function (val) {\n  if (!val) { this.reset() }\n  this.textarea.disabled = val == \"nocursor\"\n};\n\nTextareaInput.prototype.setUneditable = function () {};\n\nTextareaInput.prototype.needsContentAttribute = false\n\nfunction fromTextArea(textarea, options) {\n  options = options ? copyObj(options) : {}\n  options.value = textarea.value\n  if (!options.tabindex && textarea.tabIndex)\n    { options.tabindex = textarea.tabIndex }\n  if (!options.placeholder && textarea.placeholder)\n    { options.placeholder = textarea.placeholder }\n  // Set autofocus to true if this textarea is focused, or if it has\n  // autofocus and no other element is focused.\n  if (options.autofocus == null) {\n    var hasFocus = activeElt()\n    options.autofocus = hasFocus == textarea ||\n      textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body\n  }\n\n  function save() {textarea.value = cm.getValue()}\n\n  var realSubmit\n  if (textarea.form) {\n    on(textarea.form, \"submit\", save)\n    // Deplorable hack to make the submit method do the right thing.\n    if (!options.leaveSubmitMethodAlone) {\n      var form = textarea.form\n      realSubmit = form.submit\n      try {\n        var wrappedSubmit = form.submit = function () {\n          save()\n          form.submit = realSubmit\n          form.submit()\n          form.submit = wrappedSubmit\n        }\n      } catch(e) {}\n    }\n  }\n\n  options.finishInit = function (cm) {\n    cm.save = save\n    cm.getTextArea = function () { return textarea; }\n    cm.toTextArea = function () {\n      cm.toTextArea = isNaN // Prevent this from being ran twice\n      save()\n      textarea.parentNode.removeChild(cm.getWrapperElement())\n      textarea.style.display = \"\"\n      if (textarea.form) {\n        off(textarea.form, \"submit\", save)\n        if (typeof textarea.form.submit == \"function\")\n          { textarea.form.submit = realSubmit }\n      }\n    }\n  }\n\n  textarea.style.display = \"none\"\n  var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n    options)\n  return cm\n}\n\nfunction addLegacyProps(CodeMirror) {\n  CodeMirror.off = off\n  CodeMirror.on = on\n  CodeMirror.wheelEventPixels = wheelEventPixels\n  CodeMirror.Doc = Doc\n  CodeMirror.splitLines = splitLinesAuto\n  CodeMirror.countColumn = countColumn\n  CodeMirror.findColumn = findColumn\n  CodeMirror.isWordChar = isWordCharBasic\n  CodeMirror.Pass = Pass\n  CodeMirror.signal = signal\n  CodeMirror.Line = Line\n  CodeMirror.changeEnd = changeEnd\n  CodeMirror.scrollbarModel = scrollbarModel\n  CodeMirror.Pos = Pos\n  CodeMirror.cmpPos = cmp\n  CodeMirror.modes = modes\n  CodeMirror.mimeModes = mimeModes\n  CodeMirror.resolveMode = resolveMode\n  CodeMirror.getMode = getMode\n  CodeMirror.modeExtensions = modeExtensions\n  CodeMirror.extendMode = extendMode\n  CodeMirror.copyState = copyState\n  CodeMirror.startState = startState\n  CodeMirror.innerMode = innerMode\n  CodeMirror.commands = commands\n  CodeMirror.keyMap = keyMap\n  CodeMirror.keyName = keyName\n  CodeMirror.isModifierKey = isModifierKey\n  CodeMirror.lookupKey = lookupKey\n  CodeMirror.normalizeKeyMap = normalizeKeyMap\n  CodeMirror.StringStream = StringStream\n  CodeMirror.SharedTextMarker = SharedTextMarker\n  CodeMirror.TextMarker = TextMarker\n  CodeMirror.LineWidget = LineWidget\n  CodeMirror.e_preventDefault = e_preventDefault\n  CodeMirror.e_stopPropagation = e_stopPropagation\n  CodeMirror.e_stop = e_stop\n  CodeMirror.addClass = addClass\n  CodeMirror.contains = contains\n  CodeMirror.rmClass = rmClass\n  CodeMirror.keyNames = keyNames\n}\n\n// EDITOR CONSTRUCTOR\n\ndefineOptions(CodeMirror)\n\naddEditorMethods(CodeMirror)\n\n// Set up methods on CodeMirror's prototype to redirect to the editor's document.\nvar dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \")\nfor (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n  { CodeMirror.prototype[prop] = (function(method) {\n    return function() {return method.apply(this.doc, arguments)}\n  })(Doc.prototype[prop]) } }\n\neventMixin(Doc)\n\n// INPUT HANDLING\n\nCodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput}\n\n// MODE DEFINITION AND QUERYING\n\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nCodeMirror.defineMode = function(name/*, mode, …*/) {\n  if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name }\n  defineMode.apply(this, arguments)\n}\n\nCodeMirror.defineMIME = defineMIME\n\n// Minimal default mode.\nCodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); })\nCodeMirror.defineMIME(\"text/plain\", \"null\")\n\n// EXTENSIONS\n\nCodeMirror.defineExtension = function (name, func) {\n  CodeMirror.prototype[name] = func\n}\nCodeMirror.defineDocExtension = function (name, func) {\n  Doc.prototype[name] = func\n}\n\nCodeMirror.fromTextArea = fromTextArea\n\naddLegacyProps(CodeMirror)\n\nCodeMirror.version = \"5.28.0\"\n\nreturn CodeMirror;\n\n})));","/*!\n * clipboard.js v1.7.1\n * https://zenorocha.github.io/clipboard.js\n *\n * Licensed MIT © Zeno Rocha\n */\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Clipboard = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n},{}],2:[function(require,module,exports){\nvar closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n},{\"./closest\":1}],3:[function(require,module,exports){\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && (value instanceof HTMLElement || value instanceof SVGElement)\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n},{}],4:[function(require,module,exports){\nvar is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n},{\"./is\":3,\"delegate\":2}],5:[function(require,module,exports){\nfunction select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n},{}],6:[function(require,module,exports){\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n},{}],7:[function(require,module,exports){\n(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', 'select'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('select'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.select);\n        global.clipboardAction = mod.exports;\n    }\n})(this, function (module, _select) {\n    'use strict';\n\n    var _select2 = _interopRequireDefault(_select);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var ClipboardAction = function () {\n        /**\n         * @param {Object} options\n         */\n        function ClipboardAction(options) {\n            _classCallCheck(this, ClipboardAction);\n\n            this.resolveOptions(options);\n            this.initSelection();\n        }\n\n        /**\n         * Defines base properties passed from constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(ClipboardAction, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = options.action;\n                this.container = options.container;\n                this.emitter = options.emitter;\n                this.target = options.target;\n                this.text = options.text;\n                this.trigger = options.trigger;\n\n                this.selectedText = '';\n            }\n        }, {\n            key: 'initSelection',\n            value: function initSelection() {\n                if (this.text) {\n                    this.selectFake();\n                } else if (this.target) {\n                    this.selectTarget();\n                }\n            }\n        }, {\n            key: 'selectFake',\n            value: function selectFake() {\n                var _this = this;\n\n                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n                this.removeFake();\n\n                this.fakeHandlerCallback = function () {\n                    return _this.removeFake();\n                };\n                this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n                this.fakeElem = document.createElement('textarea');\n                // Prevent zooming on iOS\n                this.fakeElem.style.fontSize = '12pt';\n                // Reset box model\n                this.fakeElem.style.border = '0';\n                this.fakeElem.style.padding = '0';\n                this.fakeElem.style.margin = '0';\n                // Move element out of screen horizontally\n                this.fakeElem.style.position = 'absolute';\n                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n                // Move element to the same position vertically\n                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n                this.fakeElem.style.top = yPosition + 'px';\n\n                this.fakeElem.setAttribute('readonly', '');\n                this.fakeElem.value = this.text;\n\n                this.container.appendChild(this.fakeElem);\n\n                this.selectedText = (0, _select2.default)(this.fakeElem);\n                this.copyText();\n            }\n        }, {\n            key: 'removeFake',\n            value: function removeFake() {\n                if (this.fakeHandler) {\n                    this.container.removeEventListener('click', this.fakeHandlerCallback);\n                    this.fakeHandler = null;\n                    this.fakeHandlerCallback = null;\n                }\n\n                if (this.fakeElem) {\n                    this.container.removeChild(this.fakeElem);\n                    this.fakeElem = null;\n                }\n            }\n        }, {\n            key: 'selectTarget',\n            value: function selectTarget() {\n                this.selectedText = (0, _select2.default)(this.target);\n                this.copyText();\n            }\n        }, {\n            key: 'copyText',\n            value: function copyText() {\n                var succeeded = void 0;\n\n                try {\n                    succeeded = document.execCommand(this.action);\n                } catch (err) {\n                    succeeded = false;\n                }\n\n                this.handleResult(succeeded);\n            }\n        }, {\n            key: 'handleResult',\n            value: function handleResult(succeeded) {\n                this.emitter.emit(succeeded ? 'success' : 'error', {\n                    action: this.action,\n                    text: this.selectedText,\n                    trigger: this.trigger,\n                    clearSelection: this.clearSelection.bind(this)\n                });\n            }\n        }, {\n            key: 'clearSelection',\n            value: function clearSelection() {\n                if (this.trigger) {\n                    this.trigger.focus();\n                }\n\n                window.getSelection().removeAllRanges();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.removeFake();\n            }\n        }, {\n            key: 'action',\n            set: function set() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n                this._action = action;\n\n                if (this._action !== 'copy' && this._action !== 'cut') {\n                    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n                }\n            },\n            get: function get() {\n                return this._action;\n            }\n        }, {\n            key: 'target',\n            set: function set(target) {\n                if (target !== undefined) {\n                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                        if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                        }\n\n                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                        }\n\n                        this._target = target;\n                    } else {\n                        throw new Error('Invalid \"target\" value, use a valid Element');\n                    }\n                }\n            },\n            get: function get() {\n                return this._target;\n            }\n        }]);\n\n        return ClipboardAction;\n    }();\n\n    module.exports = ClipboardAction;\n});\n\n},{\"select\":5}],8:[function(require,module,exports){\n(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n        global.clipboard = mod.exports;\n    }\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n    'use strict';\n\n    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n    var _goodListener2 = _interopRequireDefault(_goodListener);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var Clipboard = function (_Emitter) {\n        _inherits(Clipboard, _Emitter);\n\n        /**\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         * @param {Object} options\n         */\n        function Clipboard(trigger, options) {\n            _classCallCheck(this, Clipboard);\n\n            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n            _this.resolveOptions(options);\n            _this.listenClick(trigger);\n            return _this;\n        }\n\n        /**\n         * Defines if attributes would be resolved using internal setter functions\n         * or custom functions that were passed in the constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(Clipboard, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n                this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n                this.container = _typeof(options.container) === 'object' ? options.container : document.body;\n            }\n        }, {\n            key: 'listenClick',\n            value: function listenClick(trigger) {\n                var _this2 = this;\n\n                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                    return _this2.onClick(e);\n                });\n            }\n        }, {\n            key: 'onClick',\n            value: function onClick(e) {\n                var trigger = e.delegateTarget || e.currentTarget;\n\n                if (this.clipboardAction) {\n                    this.clipboardAction = null;\n                }\n\n                this.clipboardAction = new _clipboardAction2.default({\n                    action: this.action(trigger),\n                    target: this.target(trigger),\n                    text: this.text(trigger),\n                    container: this.container,\n                    trigger: trigger,\n                    emitter: this\n                });\n            }\n        }, {\n            key: 'defaultAction',\n            value: function defaultAction(trigger) {\n                return getAttributeValue('action', trigger);\n            }\n        }, {\n            key: 'defaultTarget',\n            value: function defaultTarget(trigger) {\n                var selector = getAttributeValue('target', trigger);\n\n                if (selector) {\n                    return document.querySelector(selector);\n                }\n            }\n        }, {\n            key: 'defaultText',\n            value: function defaultText(trigger) {\n                return getAttributeValue('text', trigger);\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.listener.destroy();\n\n                if (this.clipboardAction) {\n                    this.clipboardAction.destroy();\n                    this.clipboardAction = null;\n                }\n            }\n        }], [{\n            key: 'isSupported',\n            value: function isSupported() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n                var actions = typeof action === 'string' ? [action] : action;\n                var support = !!document.queryCommandSupported;\n\n                actions.forEach(function (action) {\n                    support = support && !!document.queryCommandSupported(action);\n                });\n\n                return support;\n            }\n        }]);\n\n        return Clipboard;\n    }(_tinyEmitter2.default);\n\n    /**\n     * Helper function to retrieve attribute value.\n     * @param {String} suffix\n     * @param {Element} element\n     */\n    function getAttributeValue(suffix, element) {\n        var attribute = 'data-clipboard-' + suffix;\n\n        if (!element.hasAttribute(attribute)) {\n            return;\n        }\n\n        return element.getAttribute(attribute);\n    }\n\n    module.exports = Clipboard;\n});\n\n},{\"./clipboard-action\":7,\"good-listener\":4,\"tiny-emitter\":6}]},{},[8])(8)\n});","'use strict';\n\nwindow._native = function () {\n\tvar _options = {};\n\tvar _construct = function _construct(e) {\n\t\tvar defaultOptions = {\n\t\t\tcarbonZoneKey: '',\n\t\t\tfallback: '',\n\t\t\tignore: 'false',\n\t\t\tplacement: '',\n\t\t\tprefix: 'native',\n\t\t\ttargetClass: 'native-ad'\n\t\t};\n\n\t\tif (typeof e === 'undefined') return defaultOptions;\n\t\tObject.keys(defaultOptions).forEach(function (key, index) {\n\t\t\tif (typeof e[key] === 'undefined') {\n\t\t\t\te[key] = defaultOptions[key];\n\t\t\t}\n\t\t});\n\t\treturn e;\n\t};\n\n\tvar init = function init(zone, options) {\n\t\t_options = _construct(options);\n\n\t\tvar jsonUrl = 'https://srv.buysellads.com/ads/' + zone + '.json?callback=_native_go';\n\t\tif (_options['placement'] !== '') {\n\t\t\tjsonUrl += '&segment=placement:' + _options['placement'];\n\t\t}\n\t\tif (_options['ignore'] === 'true') {\n\t\t\tjsonUrl += '&ignore=yes';\n\t\t}\n\n\t\tvar srv = document.createElement('script');\n\t\tsrv.src = jsonUrl;\n\t\tdocument.getElementsByTagName('head')[0].appendChild(srv);\n\t};\n\n\tvar carbon = function carbon(e) {\n\t\tvar srv = document.createElement('script');\n\t\tsrv.src = '//cdn.carbonads.com/carbon.js?serve=' + e['carbonZoneKey'] + '&placement=' + e['placement'];\n\t\tsrv.id = '_carbonads_js';\n\n\t\treturn srv;\n\t};\n\n\tvar sanitize = function sanitize(ads) {\n\t\treturn ads.filter(function (ad) {\n\t\t\treturn Object.keys(ad).length > 0;\n\t\t}).filter(function (ad) {\n\t\t\treturn ad.hasOwnProperty('statlink');\n\t\t});\n\t};\n\n\tvar pixel = function pixel(p, timestamp) {\n\t\tvar c = '';\n\t\tif (p) {\n\t\t\tp.split('||').forEach(function (pixel, index) {\n\t\t\t\tc += '<img src=\"' + pixel.replace('[timestamp]', timestamp) + '\" style=\"display:none;\" height=\"0\" width=\"0\" />';\n\t\t\t});\n\t\t}\n\t\treturn c;\n\t};\n\n\tvar options = function options() {\n\t\treturn _options;\n\t};\n\n\treturn {\n\t\tcarbon: carbon,\n\t\tinit: init,\n\t\toptions: options,\n\t\tpixel: pixel,\n\t\tsanitize: sanitize\n\t};\n}({});\n\nwindow._native_go = function (json) {\n\tvar options = _native.options();\n\tvar ads = _native.sanitize(json['ads']);\n\tvar selectedClass = document.querySelectorAll('.' + options['targetClass']);\n\n\tif (ads.length < 1) {\n\t\tselectedClass.forEach(function (className, index) {\n\t\t\tvar selectedTarget = document.getElementsByClassName(options['targetClass'])[index];\n\n\t\t\tif (options['fallback'] !== '' || options['carbonZoneKey'] !== '') selectedTarget.setAttribute('data-state', 'visible');\n\t\t\tselectedTarget.innerHTML = options['fallback'];\n\t\t\tif (options['carbonZoneKey'] !== '') selectedTarget.appendChild(_native.carbon(options));\n\t\t});\n\n\t\t// End at this line if no ads are found, avoiding unnecessary steps\n\t\treturn;\n\t}\n\n\tselectedClass.forEach(function (className, index) {\n\t\tvar selectedTarget = document.getElementsByClassName(options['targetClass'])[index];\n\t\tvar adElement = selectedTarget.innerHTML||\"\";\n\t\tvar prefix = options['prefix'];\n\t\tvar ad = ads[index];\n\n\t\tif (ad && className) {\n\t\t\tvar adInnerHtml = adElement.replace(new RegExp('#' + prefix + '_bg_color#', 'g'), ad['backgroundColor']).replace(new RegExp('#' + prefix + '_bg_color_hover#', 'g'), ad['backgroundHoverColor']).replace(new RegExp('#' + prefix + '_company#', 'g'), ad['company']).replace(new RegExp('#' + prefix + '_cta#', 'g'), ad['callToAction']).replace(new RegExp('#' + prefix + '_cta_bg_color#', 'g'), ad['ctaBackgroundColor']).replace(new RegExp('#' + prefix + '_cta_bg_color_hover#', 'g'), ad['ctaBackgroundHoverColor']).replace(new RegExp('#' + prefix + '_cta_color#', 'g'), ad['ctaTextColor']).replace(new RegExp('#' + prefix + '_cta_color_hover#', 'g'), ad['ctaTextColorHover']).replace(new RegExp('#' + prefix + '_desc#', 'g'), ad['description']).replace(new RegExp('#' + prefix + '_index#', 'g'), prefix + '-' + ad['i']).replace(new RegExp('#' + prefix + '_img#', 'g'), ad['image']).replace(new RegExp('#' + prefix + '_small_img#', 'g'), ad['smallImage']).replace(new RegExp('#' + prefix + '_link#', 'g'), ad['statlink']).replace(new RegExp('#' + prefix + '_logo#', 'g'), ad['logo']).replace(new RegExp('#' + prefix + '_color#', 'g'), ad['textColor']).replace(new RegExp('#' + prefix + '_color_hover#', 'g'), ad['textColorHover']).replace(new RegExp('#' + prefix + '_title#', 'g'), ad['title']);\n\t\t\tselectedTarget.innerHTML = adInnerHtml + _native.pixel(ad['pixel'], ad['timestamp']);\n\t\t\tselectedTarget.setAttribute('data-state', 'visible');\n\t\t} else {\n\t\t\tselectedTarget.innerHTML = \"\";\n\t\t}\n\t});\n};","/*\n* Event\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/**\n * A collection of Classes that are shared across all the CreateJS libraries.  The classes are included in the minified\n * files of each library and are available on the createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @module CreateJS\n * @main CreateJS\n */\n\n\n/**\n * Contains properties and methods shared by all events for use with\n * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n * \n * Note that Event objects are often reused, so you should never\n * rely on an event object's state outside of the call stack it was received in.\n * @class Event\n * @param {String} type The event type.\n * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n * @constructor\n **/\nexport default class Event {\n\t\t\n\t\n\tconstructor(type, bubbles, cancelable) {\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tpreventDefault() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tstopPropagation() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tstopImmediatePropagation() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tremove() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tclone() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tset(props) {\n\t\tfor (let n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\ttoString() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n}\n","/*\n* EventDispatcher\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n\n// constructor:\n/**\n* EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n*\n* You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n* EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n* \n* Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n* DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n* bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n* \n* EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n* to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n* {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n* {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n* \n* Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n* method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n* includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n*\n* <h4>Example</h4>\n* Add EventDispatcher capabilities to the \"MyClass\" class.\n*\n*      EventDispatcher.initialize(MyClass.prototype);\n*\n* Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n*\n*      instance.addEventListener(\"eventName\", handlerMethod);\n*      function handlerMethod(event) {\n*          console.log(event.target + \" Was Clicked\");\n*      }\n*\n* <b>Maintaining proper scope</b><br />\n* Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n* method to subscribe to events simplifies this.\n*\n*      instance.addEventListener(\"click\", function(event) {\n*          console.log(instance == this); // false, scope is ambiguous.\n*      });\n*      \n*      instance.on(\"click\", function(event) {\n*          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n*      });\n* \n* If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n* scope.\n*\n* <b>Browser support</b>\n* The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n* requires modern browsers (IE9+).\n*      \n*\n* @class EventDispatcher\n* @constructor\n**/\nimport Event from \"./Event.js\";\n\nexport default class EventDispatcher {\n\t\n\tconstructor() {\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t\t\n\t\t\n\t\t/**\n\t\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t\t * .on method.\n\t\t * \n\t\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t\t *\n\t\t * @method off\n\t\t * @param {String} type The string type of the event.\n\t\t * @param {Function | Object} listener The listener function or object.\n\t\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t\t **/\n\t\t this.off = this.removeEventListener;\n\t}\n\t\n\t\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tstatic EventDispatcher(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\taddEventListener(type, listener, useCapture) {\n\t\tlet listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tlet arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\ton(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\treturn this.addEventListener(type, function(evt) {\n\t\t\t\tlistener.call(scope, evt, data);\n\t\t\t\tonce&&evt.remove();\n\t\t\t}, useCapture);\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tremoveEventListener(type, listener, useCapture) {\n\t\tlet listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tlet arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (let i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] === listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tremoveAllEventListeners(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tdispatchEvent(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tlet listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tlet top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tlet i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\thasEventListener(type) {\n\t\tlet listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\twillTrigger(type) {\n\t\tlet o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\ttoString() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\t_dispatchEvent(eventObj, eventPhase) {\n\t\tlet l, arr, listeners = (eventPhase <= 2) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners && (arr = listeners[eventObj.type]) && (l=arr.length)) {\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase|0; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (let i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tlet o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (eventPhase === 2) { this._dispatchEvent(eventObj, 2.1); }\n\t};\n\n}\n\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nlet DOMUtils = {}, $ = DOMUtils;\nexport default DOMUtils;\n\t\n$.query = function(query, element = document.body) {\n\treturn (query[0] === \">\") ? $._childQuery(query, element, $.query) : element.querySelector(query);\n};\n\n$.queryAll = function(query, element = document.body) {\n\treturn (query[0] === \">\") ? $._childQuery(query, element, $.queryAll) : element.querySelectorAll(query);\n};\n\n$.removeClass = function(element, className) {\n\tif ($._runOnNodeList($.removeClass, element, className)) { return element; }\n\tif (className instanceof RegExp) {\n\t\tlet arr = (element.getAttribute(\"class\")||\"\").split(\" \"), re = className;\n\t\telement.setAttribute(\"class\", arr.filter((s)=> !re.test(s)).join(\" \"));\n\t} else {\n\t\tlet list = element.classList;\n\t\tlist.remove.apply(list, className.split(\" \"));\n\t}\n\treturn element;\n};\n\n$.addClass = function(element, className) {\n\tif ($._runOnNodeList($.addClass, element, className)) { return element; }\n\t\n\t$.removeClass(element, className);\n\n\tlet names = className.split(\" \");\n\tfor (let i = 0; i < names.length; i++) {\n\t\telement.classList.add(names[i]);\n\t}\n\treturn element;\n};\n\n$.toggleClass = function(element, className, value) {\n\tif ($._runOnNodeList($.toggleClass, element, className, value)) { return element; }\n\tlet curValue = $.hasClass(element, className);\n\tif (value == null) { value = !curValue; }\n\telse if (value === curValue) { return; }\n\tif (value) { $.addClass(element, className); }\n\telse { $.removeClass(element, className); }\n};\n\n$.hasClass = function(element, className) {\n\treturn !!(element.getAttribute(\"class\")||\"\").match(new RegExp(\"\\\\b\\\\s?\" + className + \"\\\\b\", \"g\"));\n};\n\n$.swapClass = function(element, oldClass, newClass) {\n\t$.removeClass(element, oldClass);\n\t$.addClass(element, newClass);\n\treturn element;\n};\n\n$.remove = function(element) {\n\tif ($._runOnNodeList($.remove, element)) { return element; }\n\t\n\tif (element.remove) {\n\t\telement.remove();\n\t} else if (element.parentNode) {\n\t\telement.parentNode.removeChild(element);\n\t}\n\treturn element;\n};\n\n$.on = function(element, event, listener) {\n\tif ($._runOnNodeList($.on, element, event, listener)) { return element; }\n\telement.addEventListener(event, listener);\n}\n\n$.off = function(element, event, listener) {\n\tif ($._runOnNodeList($.off, element, event, listener)) { return element; }\n\telement.removeEventListener(event, listener);\n}\n\n/*\n Remove all children from an element.\n When using .innerHTML = \"\"; IE fails when adding new dom elements via appendChild();\n */\n$.empty = function(element) {\n\tif ($._runOnNodeList($.empty, element)) { return element; }\n\t\n\twhile (element.firstChild) {\n\t\telement.removeChild(element.firstChild);\n\t}\n\treturn element;\n};\n\n$.create = function(type, className, content, parent) {\n\tlet element = document.createElement(type || \"div\");\n\tif (className) { element.className = className; }\n\tif (content) {\n\t\tif (content instanceof HTMLElement) { element.appendChild(content); }\n\t\telse { element.innerHTML = content; }\n\t}\n\tif (parent) { parent.appendChild(element); }\n\treturn element;\n};\n\n$.getEl = function(query, scope) {\n\tif (query instanceof HTMLElement || !query) { return query; }\n\treturn $.query(query, scope);\n};\n\n$.togglePanel = function(element, openEl, closedEl, open) {\n\tlet el1 = $.getEl(openEl, element), el2 = $.getEl(closedEl, element), tmp, isOpen = !$.hasClass(element, \"closed\");\n\tif (open === undefined) { open = !isOpen; }\n\telse { open = !!open; }\n\tif (open === isOpen) { return; }\n\tif (open) {\n\t\t$.removeClass(element, \"closed\");\n\t\ttmp = el2;\n\t\tel2 = el1;\n\t\tel1 = tmp;\n\t}\n\telse { $.addClass(element, \"closed\"); }\n\n\tel1 && (el1.style.display = \"none\");\n\tif (el2) {\n\t\tlet f = function(evt) {\n\t\t\tif (evt.target !== element) { return; }\n\t\t\tel2.style.display = \"flex\";\n\t\t\telement.removeEventListener(\"transitionend\", f);\n\t\t};\n\t\telement.addEventListener(\"transitionend\", f);\n\t}\n};\n\n$.transition = function(target, className, then) {\n\tlet f = (evt) => {\n\t\tif (evt.target !== target) { return; }\n\t\ttarget.removeEventListener(\"transition\", f);\n\t\tthen();\n\t};\n\ttarget.addEventListener(\"transitionend\", f);\n\t$.addClass(target, className);\n};\n\n$.template = function(strings, ...keys) {\n\treturn (o) => {\n\t\tlet result = strings[0];\n\t\tfor (let i=0, l=keys.length; i<l; i++) {\n\t\t\tresult += o[keys[i]] + strings[i+1];\n\t\t}\n\t\treturn result;\n\t};\n};\n\n// TODO: evaluate whether this belongs here. Feels awkward given its specific DOM dependencies.\n$.getCSSValue = function(name, prop) {\n\tlet el = $.create(\"div\", name);\n\tel.style.display = \"none\";\n\tel.id = \"export\";\n\tdocument.body.appendChild(el);\n\tlet val = window.getComputedStyle(el).getPropertyValue(prop);\n\t$.remove(el);\n\treturn val;\n};\n\n$._runOnNodeList = function(f, nodelist, ...rest) {\n\tif (!nodelist) { return true; }\n\tif (nodelist.length === undefined) { return false; }\n\tfor (let i=0, l=nodelist.length; i<l; i++) {\n\t\tf.call(DOMUtils, nodelist[i], ...rest);\n\t}\n\treturn true;\n};\n\n$._childQuery = function(query, el, f) {\n\tif (!el.id) { el.id = \"___tmp_id\"; }\n\tlet result = f(\"#\"+el.id+\" \"+query, el.parentNode);\n\tif (el.id === \"___tmp_id\") { el.id = \"\"; }\n\treturn result;\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nlet Utils = {};\nexport default Utils;\n\nUtils.prepMenuContent = function(content, idMap) {\n\tif (!idMap.__next_id) { idMap.__next_id = 1; }\n\tlet kids = content.kids;\n\tfor (let i = 0, l = kids.length; i < l; i++) {\n\t\tlet o = kids[i];\n\t\t// current list implementation requires everything to have an id:\n\t\tif (!o.id) { o.id = \"__id_\"+(idMap.__next_id++); }\n\t\tidMap[o.id] = o;\n\t\to.parent = content;\n\t\tif (o.kids) { Utils.prepMenuContent(o, idMap); }\n\t}\n\treturn content;\n};\n\nUtils.find = function(arr, f) {\n\tfor (let i=0, l=arr.length; i<l; i++) {\n\t\tif (f(arr[i])) { return arr[i]; }\n\t}\n}\n\nUtils.findIndex = function(arr, f) {\n\tfor (let i=0, l=arr.length; i<l; i++) {\n\t\tif (f(arr[i])) { return i; }\n\t}\n\treturn -1;\n}\n\nUtils.copy = function(target, source) {\n\tfor (let n in source) { target[n] = source[n]; }\n\treturn target;\n}\n\nUtils.clone = function(o) {\n\t// this seems hacky, but it's the fastest, easiest approach for now:\n\treturn JSON.parse(JSON.stringify(o));\n}\n\nUtils.searchRank = function(o, search) {\n\tlet test = Utils.searchTest;\n\tsearch = search.toLowerCase();\n\n\tif (o.access) { // pattern (My Favorites).\n\t\t// text? pattern?\n\t\treturn test((o.keywords||\"\")+\" \"+(o.name||\"\"), search, 16) + test((o.description||\"\")+\" \"+(o.author||\"\"), search, 8);\n\t} else { // reference.\n\t\treturn test(o.token, search, 16) + test((o.id||\"\")+\" \"+(o.label||\"\"), search, 8) + test((o.desc||\"\")+\" \"+(o.ext||\"\"), search, 4);\n\t}\n}\n\nUtils.searchTest = function(str, search, weight=1) {\n\treturn (str && str.toLowerCase().indexOf(search) !== -1) ? weight : 0;\n}\n\nUtils.htmlSafe = function (str) {\n\treturn str == null ? \"\" : (\"\" + str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\");\n};\n\nUtils.shorten = function (str, length, htmlSafe, tag=\"\") {\n\tif (!str) { return str; }\n\tlet b = length > 0 && str.length > length;\n\tif (b) { str = str.substr(0, length-1); }\n\tif (htmlSafe) { str = Utils.htmlSafe(str); }\n\treturn !b ? str : str + (tag&&\"<\"+tag+\">\") + \"\\u2026\" + (tag&&\"</\"+tag+\">\");\n};\n\nUtils.unescSubstStr = function(str) {\n\tif (!str) { return \"\"; }\n\treturn str.replace(Utils.SUBST_ESC_RE, (a, b, c)=> Utils.SUBST_ESC_CHARS[b] || String.fromCharCode(parseInt(c, 16)) );\n};\n\n\nUtils.getRegExp = function(str) {\n\t// returns a JS RegExp object.\n\tlet match = str.match(/^\\/(.+)\\/([a-z]+)?$/), regex=null;\n\ttry {\n\t\tregex = match ? new RegExp(match[1], match[2] || \"\") : new RegExp(str, \"g\");\n\t} catch(e) { }\n\treturn regex;\n};\n\nUtils.decomposeRegEx = function(str, delim=\"/\") {\n\tlet re = new RegExp(\"^\"+delim+\"(.*)\"+delim+\"([igmsuUxy]*)$\");\n\tlet match = re.exec(str);\n\tif (match) {\n\t\treturn {source: match[1], flags: match[2]};\n\t} else {\n\t\treturn {source: str, flags: \"g\"};\n\t}\n};\n\nUtils.isMac = function () {\n\treturn !!(navigator.userAgent.match(/Mac\\sOS/i))\n};\n\nUtils.getCtrlKey = function () {\n\treturn Utils.isMac() ? \"cmd\" : \"ctrl\";\n};\n\nUtils.now = function() {\n\treturn window.performance ? performance.now() : Date.now();\n};\n\nUtils.getUrlParams = function() {\n\tlet match, re = /([^&=]+)=?([^&]*)/g, params = {};\n\tlet url  = window.location.search.substr(1).replace(/\\+/g, \" \");\n\twhile (match = re.exec(url)) { params[decodeURIComponent(match[1])] = decodeURIComponent(match[2]); }\n\treturn params;\n};\n\nlet deferIds = {};\nUtils.defer = function (f, id, t=1) {\n\tclearTimeout(deferIds[id]);\n\tif (f === null) {\n\t\tdelete(deferIds[id]);\n\t\treturn;\n\t}\n\tdeferIds[id] = setTimeout(()=>{\n\t\tdelete deferIds[id];\n\t\tf();\n\t}, t)\n};\n\nUtils.getHashCode = function(s) {\n\tlet hash = 0, l = s.length, i;\n\tfor (i = 0; i < l; i++ ) {\n\t\thash = ((hash << 5) - hash) + s.charCodeAt(i) | 0;\n\t}\n\treturn hash;\n};\n\nUtils.getPatternURL = function(pattern) {\n\tlet a = Utils.isLocal ? \"?id=\" : \"/\";\n\tlet url = window.location.origin, id=pattern&&pattern.id||\"\";\n\treturn url+a+id;\n}\n\nUtils.isLocal = (window.location.hostname === \"localhost\");\n\nUtils.getPatternURLStr = function(pattern) {\n\tif (!pattern || !pattern.id) { return null; }\n\tlet a = Utils.isLocal ? \"?id=\" : \"/\";\n\tlet url = window.location.host, id=pattern.id;\n\treturn url+a+id;\n}\n\nUtils.getForkName = function(name) {\n\tlet res = / ?\\(fork ?(\\d*)\\)$/.exec(name);\n\tif (res) {\n\t\tlet num = (res[1]||1)*1 + 1;\n\t\treturn name.substr(0, res.index) + \" (fork \"+num+\")\";\n\t}\n\treturn name + \" (fork)\";\n}\n\nUtils.SUBST_ESC_CHARS = {\n\t// this is just the list supported in Replace. Others: b, f, \", etc.\n\tn: \"\\n\",\n\tr: \"\\r\",\n\tt: \"\\t\",\n\t\"\\\\\": \"\\\\\"\n};\n\nUtils.SUBST_ESC_RE = /\\\\([nrt\\\\]|u([A-Z0-9]{4}))/ig;","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\n\nexport default class Tooltip {\n\t\n\tconstructor(el, transition=false) {\n\t\tthis.el = $.remove(el);\n\t\tthis.transition = transition;\n\t\tthis.contentEl = $.query(\".content\", el);\n\t\tthis.tipEl = $.query(\".tip\", el);\n\t\tthis.hideF = (evt)=> Date.now()>this._showT && this.handleBodyClick(evt);\n\t\tthis.curId = null;\n\t}\n\t\n\ttoggle(id, content, x, y, autohide, th) {\n\t\tif (id === this.curId) { return this.hide(id); }\n\t\tthis.show(id, content, x, y, autohide, th);\n\t}\n\t\n\ttoggleOn(id, content, el, autohide, th) {\n\t\tif (id === this.curId) { return this.hide(id); }\n\t\tthis.showOn(id, content, el, autohide, th);\n\t\tthis.toggleEl = el;\n\t\t$.addClass(el, \"selected\");\n\t}\n\t\n\thide(id) {\n\t\tif (id && this.curId !== id) { return; }\n\t\tlet el = this.el, elStyle = el.style;\n\t\t$.empty($.query(\".content\", $.remove(el)));\n\t\t$.removeClass(el, \"flipped\");\n\t\tdocument.body.removeEventListener(\"mousedown\", this.hideF);\n\t\t\n\t\tif (this.toggleEl) {\n\t\t\t$.removeClass(this.toggleEl, \"selected\");\n\t\t\tthis.toggleEl = null;\n\t\t}\n\t\t\n\t\t// reset position and width so that content wrapping resolves properly:\n\t\telStyle.left = elStyle.top = \"0\";\n\t\telStyle.width = \"\";\n\t\tif (this.transition) {\n\t\t\telStyle.opacity = 0;\n\t\t\telStyle.marginTop = \"-0.25em\";\n\t\t}\n\t\tthis.curId = null;\n\t}\n\n\tshow(id, content, x, y, autohide = false, th = 0) {\n\t\tthis.hide();\n\t\tif (!content) { return; }\n\n\t\tlet el = this.el, elStyle = el.style, contentEl = this.contentEl, body = document.body, pad = 8;\n\t\tif (content instanceof HTMLElement) { contentEl.appendChild(content); }\n\t\telse { contentEl.innerHTML = content; }\n\n\t\tif (autohide) {\n\t\t\tthis._showT = Date.now()+30; // ignore double clicks and events in the current stack.\n\t\t\tbody.addEventListener(\"mousedown\", this.hideF);\n\t\t}\n\n\t\tbody.appendChild(el);\n\n\t\tlet wh = window.innerHeight, ww = window.innerWidth;\n\t\tlet rect = el.getBoundingClientRect(), w = rect.right - rect.left, h = rect.bottom - rect.top, off = 0;\n\t\tif (y + h > wh - pad) {\n\t\t\t$.addClass(el, \"flipped\");\n\t\t\ty -= th;\n\t\t}\n\t\tif (x - w / 2 < pad) { off = pad - x + w / 2; }\n\t\telse if (x + w / 2 > ww - pad) { off = ww - pad - x - w / 2; }\n\t\tthis.tipEl.style.marginRight = Math.max(-w / 2 + 10, Math.min(w / 2 - 10, off)) * 2 + \"px\";\n\t\telStyle.width = Math.ceil(w/2)*2 + \"px\";\n\t\telStyle.top = Math.round(y) + \"px\";\n\t\telStyle.left = Math.round(x + off) + \"px\";\n\t\tif (this.transition) {\n\t\t\telStyle.opacity = 1;\n\t\t\telStyle.marginTop = 0;\n\t\t}\n\t\t\n\t\tthis.curId = id;\n\t}\n\t\n\tshowOn(id, content, el, autohide, th=0) {\n\t\tlet rect = el.getBoundingClientRect();\n\t\tlet x = Math.round((rect.left+rect.right)/2);\n\t\tlet y = rect.bottom+th;\n\t\tlet h = rect.bottom-rect.top;\n\t\tthis.show(id, content, x, y, autohide, h);\n\t}\n\n\thandleBodyClick(evt) {\n\t\tlet id = this.curId;\n\t\tif (this.el.contains(evt.target) || (this.toggleEl && this.toggleEl.contains(evt.target))) { return; }\n\t\tthis.hide(id);\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Utils from \"../utils/Utils\";\nimport app from \"../app\";\n\nexport default class Server {\n\t\n// regex:\n\tstatic solve(req) {\n\t\treturn Server._getRequest(\"regex/solve\", {data: JSON.stringify(req)});\n\t}\n\t\n\tstatic version(flavor) {\n\t\treturn Server._getRequest(\"regex/version\", {flavor:flavor});\n\t}\n\n// patterns:\n\tstatic communitySearch(str) {\n\t\treturn Server._getRequest(\"patterns/search\", {query:str||\"\", startIndex:0, limit:100}, (data) => { this._processPatternList(data); });\n\t}\n\t\n\tstatic load(id) {\n\t\treturn Server._getRequest(\"patterns/load\", {patternId:id}, (data) => this._processPattern(data));\n\t}\n\t\n\tstatic save(pattern, fork, community) {\n\t\t// clone and prep the pattern object:\n\t\tlet o = this._prepPattern(pattern, fork, community);\n\t\treturn Server._getRequest(\"patterns/save\", o, (data) => this._processPattern(data));\n\t}\n\n\tstatic rate(id, rating) {\n\t\treturn Server._getRequest(\"patterns/rate\", {patternId:id, userRating:rating}, (data) => data.rating = Number(data.rating));\n\t}\n\t\n\tstatic delete(id) {\n\t\treturn Server._getRequest(\"patterns/delete\", {patternId:id});\n\t}\n\t\n\tstatic favorite(id, value) {\n\t\treturn Server._getRequest(\"patterns/favorite\", {patternId:id, favorite:!!value});\n\t}\n\t\n\tstatic private(id, value) {\n\t\treturn Server.setAccess(id, value ? \"private\" : \"protected\");\n\t}\n\n\tstatic setAccess(id, value) {\n\t\treturn Server._getRequest(\"patterns/setAccess\", {patternId:id, access:value});\n\t}\n\n\tstatic multiFavorite(ids) {\n\t\treturn Server._getRequest(\"patterns/multiFavorite\", {patternIds:JSON.stringify(ids)});\n\t}\n\n// account:\n\tstatic login(service) {\n\t\twindow.location = Server.url + \"?action=account/login&type=\"+service;\n\t}\n\n\tstatic logout() {\n\t\treturn Server._getRequest(\"account/logout\", {});\n\t}\n\t\n\tstatic verify() {\n\t\treturn Server._getRequest(\"account/verify\", {});\n\t}\n\n\tstatic patterns() {\n\t\treturn Server._getRequest(\"account/patterns\", {}, (data) => {\n\t\t\tthis._processPatternList(data);\n\t\t\tdata.results.sort((a, b) => {\n\t\t\t\treturn (b.favorite - a.favorite) || (b.dateAdded - a.dateAdded) || 1-2*(a.id > b.id);\n\t\t\t})\n\t\t});\n\t}\n\n// helpers:\n\tstatic _processPatternList(data) {\n\t\tdata.results.forEach(this._processPattern);\n\t}\n\n\tstatic _processPattern(o) {\n\t\t// parse values:\n\t\to.rating = Number(o.rating);\n\t\to.userRating = Number(o.userRating);\n\t\to.flavor = o.flavor || \"js\";\n\t\to.mode = o.mode || \"text\";\n\t\to.text = o.text || null;\n\t\tif (o.tool && o.tool.id) { o.tool.id = o.tool.id.toLowerCase(); }\n\t}\n\n\tstatic _prepPattern(o, fork, community) {\n\t\to = Utils.clone(o);\n\t\tif (fork) {\n\t\t\to.parentId = o.id;\n\t\t\tdelete(o.id);\n\t\t\tif (!community) { o.name = Utils.getForkName(o.name); }\n\t\t}\n\t\t// clear null values:\n\t\tif (!o.id) { delete(o.id); }\n\t\tif (!o.parentId) { delete(o.parentId); }\n\t\tdelete(o.userId); // this gets added by the server\n\t\to.tool = o.tool && JSON.stringify(o.tool);\n\t\to.tests = o.tests && JSON.stringify(o.tests);\n\t\treturn o;\n\t}\n\n// private methods:\n\tstatic _getRequest(action, data={}, postprocess) {\n\t\tlet req = new XMLHttpRequest(), p = new ServerPromise(req, postprocess), params = [];\n\t\treq.open(\"POST\", Server.url);\n\t\treq.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\", true);\n\t\treq.timeout = 5000;\n\t\tdata.action = action;\n\t\t\n\t\tif (Server.isLocal && Server.useBeta) { data.userId = 111; }\n\t\tfor (let n in data) { params.push(n + \"=\" + encodeURIComponent(data[n])); }\n\t\tif (Server.isLocal) { console.log(data); }\n\t\treq.send(params.join(\"&\"));\n\t\treturn p;\n\t}\n}\n\nclass ServerPromise {\n\tconstructor(req, postprocess) {\n\t\tthis._req = req;\n\t\tthis._postprocess = postprocess;\n\t\treq.addEventListener(\"load\", ()=>this._load());\n\t\treq.addEventListener(\"timeout\", (evt)=>this._error(\"servercomm\"));\n\t\treq.addEventListener(\"error\", (evt)=>this._error(\"servercomm\"));\n\t}\n\n\tthen(f, cf, ff) {\n\t\tthis._loadF = f;\n\t\tif (cf) { this.catch(cf); }\n\t\tif (this._data) { f(this._data); }\n\t\tif (ff) { this.finally(ff); }\n\t\treturn this;\n\t}\n\t\n\tcatch(f) {\n\t\tthis._errorF = f;\n\t\tif (this._err) { f(this._err); }\n\t\treturn this;\n\t}\n\n\tfinally(f) {\n\t\tthis._finallyF = f;\n\t\tif (this._complete) { f(); }\n\t\treturn this;\n\t}\n\t\n\tabort() {\n\t\tif (this._complete) { return; }\n\t\tthis._complete = true;\n\t\tthis._req.abort();\n\t\tthis._finallyF && this._finallyF();\n\t\tthis._loadF = this._errorF = this._finallyF = null; // just to make sure.\n\t}\n\t\n\t_load() {\n\t\tlet json;\n\t\tthis._complete = true;\n\t\tif (Server.isLocal) { console.log(this._req.response || this._req.responseText); }\n\t\ttry { json = JSON.parse(this._req.response || this._req.responseText); }\n\t\tcatch (e) { return this._error(e); }\n\t\tif (!json.success) { return this._error(json.data); }\n\t\tthis._postprocess && this._postprocess(json.data);\n\t\tthis._data = json.data;\n\t\tthis._loadF && this._loadF(this._data);\n\t\tthis._finallyF && this._finallyF();\n\t}\n\t\n\t_error(e) {\n\t\tthis._err = (e.data && e.data.error) || e.message || e.detail || e.type || String(e);\n\t\tthis._errorF && this._errorF(this._err);\n\t\tthis._finallyF && this._finallyF();\n\t}\n}\n\nServer.isLocal = Utils.isLocal;\nServer.useBeta = Server.isLocal || (window.location.hostname === \"beta.regexr.com\");\nServer.host = \"https://\" + (Server.useBeta ? \"beta.\" : \"\") + \"regexr.com\"\nServer.url =  Server.host + \"/server/api.php\";","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/*\nUtilities for working with CodeMirror.\n*/\n\nimport Utils from \"../utils/Utils\";\nimport $ from \"../utils/DOMUtils\";\n\nlet CMUtils = {};\nexport default CMUtils;\n\nCMUtils.create = function (target, opts={}, width=\"100%\", height=\"100%\") {\n\tlet keys = {}, ctrlKey = Utils.getCtrlKey();\n\t//keys[ctrlKey + \"-Z\"] = keys[ctrlKey + \"-Y\"] = keys[\"Shift-\" + ctrlKey + \"-Z\"] = () => false; // block CM handling\n\n\tlet o = Utils.copy({\n\t\tlineNumbers: false,\n\t\ttabSize: 3,\n\t\tindentWithTabs: true,\n\t\textraKeys: keys,\n\t\tspecialChars: /[ \\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/,\n\t\tspecialCharPlaceholder: (ch) => $.create(\"span\", ch === \" \" ? \"cm-space\" : \"cm-special\", \" \") // needs to be a space so wrapping works\n\t}, opts);\n\t\n\tlet cm = CodeMirror(target, o);\n\tcm.setSize(width, height);\n\t\n\t\n\tif (cm.getOption(\"maxLength\")) {\n\t\tcm.on(\"beforeChange\", CMUtils.enforceMaxLength);\n\t}\n\tif (cm.getOption(\"singleLine\")) {\n\t\tcm.on(\"beforeChange\", CMUtils.enforceSingleLine);\n\t}\n\t\n\treturn cm;\n};\n\nCMUtils.getCharIndexAt = function (cm, winX, winY) {\n\tlet pos = cm.coordsChar({left: winX, top: winY}, \"page\");\n\t// test current and prev character, since CM seems to use the center of each character for coordsChar:\n\tfor (let i = 0; i <= 1; i++) {\n\t\tlet rect = cm.charCoords(pos, \"page\");\n\t\tif (winX >= rect.left && winX <= rect.right && winY >= rect.top && winY <= rect.bottom) {\n\t\t\treturn cm.indexFromPos(pos);\n\t\t}\n\t\tif (pos.ch-- <= 0) {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn null;\n};\n/*\n// unused?\nCMUtils.getEOLPos = function (cm, pos) {\n\tif (!isNaN(pos)) {\n\t\tpos = cm.posFromIndex(pos);\n\t}\n\tlet rect = cm.charCoords(pos, \"local\"), w = cm.getScrollInfo().width;\n\treturn cm.coordsChar({left: w - 1, top: rect.top}, \"local\");\n};\n*/\nCMUtils.getCharRect = function (cm, index) {\n\tif (index == null) { return null; }\n\tlet pos = cm.posFromIndex(index), rect = cm.charCoords(pos);\n\trect.x = rect.left;\n\trect.y = rect.top;\n\trect.width = rect.right - rect.left;\n\trect.height = rect.bottom - rect.top;\n\treturn rect;\n};\n\n\nCMUtils.enforceMaxLength = function (cm, change) {\n\tlet maxLength = cm.getOption(\"maxLength\");\n\tif (maxLength && change.update) {\n\t\tlet str = change.text.join(\"\\n\");\n\t\tlet delta = str.length - (cm.indexFromPos(change.to) - cm.indexFromPos(change.from));\n\t\tif (delta <= 0) { return true; \n\t\t}\n\t\tdelta = cm.getValue().length + delta - maxLength;\n\t\tif (delta > 0) {\n\t\t\tstr = str.substr(0, str.length - delta);\n\t\t\tchange.update(change.from, change.to, str.split(\"\\n\"));\n\t\t}\n\t}\n\treturn true;\n};\n\nCMUtils.enforceSingleLine = function (cm, change) {\n\tif (change.update) {\n\t\tlet str = change.text.join(\"\").replace(/(\\n|\\r)/g, \"\");\n\t\tchange.update(change.from, change.to, [str]);\n\t}\n\treturn true;\n};\n\nCMUtils.selectAll = function(cm) {\n\tcm.focus();\n\tcm.setSelection({ch:0,line:0},{ch:0, line:cm.lineCount()});\n}\n\nCMUtils.calcRangePos = function(cm, i, l=0, o={}) {\n\tlet doc = cm.getDoc();\n\to.startPos = doc.posFromIndex(i);\n\to.endPos = doc.posFromIndex(i+l);\n\treturn o;\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nlet Track = {};\nexport default Track;\n\nTrack.GA_ID = \"UA-3579542-6\";\n\nTrack.page = function(path) {\n\tgtag(\"config\", Track.GA_ID, {\"page_path\": \"/\"+path});\n};\n\n// https://developers.google.com/analytics/devguides/collection/gtagjs/events\nTrack.event = function(name, category, label) {\n\tlet o = {};\n\tif (category) { o.event_category = category; }\n\tif (label) { o.event_label = label; }\n\tgtag(\"event\", name, o);\n}\n\n\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport EventDispatcher from \"../events/EventDispatcher\";\n\nexport default class List extends EventDispatcher {\n\tconstructor(el, opts) {\n\t\tsuper();\n\t\tthis.el = el;\n\t\tthis.multi = opts.multi;\n\t\tthis.template = opts.template;\n\t\tthis.data = opts.data;\n\t\tif (opts.selected) { this.selected = opts.selected; }\n\t}\n\t\n\tset data(data) {\n\t\t$.empty(this.el);\n\t\tthis._data = data;\n\t\tif (!data || !data.length) { return; }\n\t\tfor (let i=0, l=data.length; i<l; i++) {\n\t\t\tthis.addItem(data[i]);\n\t\t}\n\t}\n\n\tget data() {\n\t\treturn this._data;\n\t}\n\t\n\tset selected(ids) {\n\t\t$.removeClass($.queryAll(\".selected\", this.el), \"selected\");\n\t\tif (!(ids instanceof Array)) { ids = [ids]; }\n\t\tids.forEach((id)=>$.addClass($.query(\"[data-id='\"+id+\"']\",this.el), \"selected\"));\n\t\t\n\t\tif (!this.multi) { this.scrollTo(ids[0]); }\n\t}\n\t\n\tget selected() {\n\t\tlet els = $.queryAll(\"li.selected\", this.el);\n\t\tif (!els[0]) { return null; }\n\t\tif (!this.multi) { return els[0].dataset.id; }\n\t\tlet ids = [];\n\t\tfor (let i=0, l=els.length; i<l; i++) { ids.push(els[i].dataset.id); }\n\t\treturn ids;\n\t}\n\n\tset selectedIndex(index) {\n\t\tlet data = this.data;\n\t\tthis.selected = data && data[index] && data[index].id;\n\t}\n\n\tget selectedIndex() {\n\t\tlet el = this.selectedEl, id = el && el.dataset.id;\n\t\treturn id === null ? -1 : this.data.findIndex((o) => o.id === id);\n\t}\n\t\n\tget selectedItem() {\n\t\tlet el = this.selectedEl;\n\t\treturn el && el.item;\n\t}\n\n\tget selectedEl() {\n\t\treturn $.query(\"li.selected\", this.el);\n\t}\n\t\n\trefresh() {\n\t\tlet sel = this.selected;\n\t\tthis.data = this._data;\n\t\tthis.selected = sel;\n\t}\n\n\taddItem(o, selected=null) {\n\t\tlet label, id, sel;\n\t\tlet f=(evt) => this.handleClick(evt), template=this.template;\n\t\tif (typeof o === \"string\") {\n\t\t\tid = o;\n\t\t\tlabel = template ? template(o) : o;\n\t\t} else {\n\t\t\tif (o.hide) { return; }\n\t\t\tid = o.id || o.label;\n\t\t\tlabel = template ? template(o) : o.label;\n\t\t\tif (selected === null) { sel = o.selected; }\n\t\t}\n\t\tlet item = $.create(\"li\", sel ? \"selected\" : null, label, this.el);\n\t\titem.dataset.id = id;\n\t\titem.item = o;\n\t\titem.addEventListener(\"click\", f);\n\t\titem.addEventListener(\"dblclick\", f);\n\n\t\tif (selected) {\n\t\t\tthis.selected = o.id;\n\t\t}\n\t}\n\n\tremoveItem(id) {\n\t\tlet el = $.query(\"[data-id='\"+id+\"']\",this.el);\n\t\tel && el.remove();\n\t}\n\n\thandleClick(evt) {\n\t\tlet id = evt.currentTarget.dataset.id, old = this.selected;\n\t\tif (!this.getEl(id)) { return; }\n\t\tif (evt.type === \"dblclick\") {\n\t\t\tif (id != null) { this.dispatchEvent(\"dblclick\"); }\n\t\t\treturn;\n\t\t} else if (this.multi) {\n\t\t\t$.toggleClass(evt.currentTarget, \"selected\");\n\t\t} else if (old === id) {\n\t\t\tif (id != null) { this.dispatchEvent(\"selclick\"); }\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.selected = id;\n\t\t}\n\t\tif (!this.dispatchEvent(\"change\", false, true)) { this.selected = old; }\n\t}\n\t\n\tscrollTo(id=this.selected) {\n\t\tlet el = this.getEl(id);\n\t\tif (!el) { return; }\n\t\t//el.scrollIntoView(); // this is too jumpy, but would handle horizontal.\n\n\t\tlet scrollEl = this.scrollEl || this.el;\n\t\tlet top = el.offsetTop - scrollEl.offsetTop;\n\t\tif (top + el.offsetHeight > scrollEl.scrollTop+scrollEl.offsetHeight) {\n\t\t\tscrollEl.scrollTop = top+el.offsetHeight-scrollEl.offsetHeight+10;\n\t\t} else if (top < scrollEl.scrollTop) {\n\t\t\tscrollEl.scrollTop = top-10;\n\t\t}\n\t}\n\n\tgetEl(id) {\n\t\treturn $.query(\"[data-id='\"+id+\"']\", this.el);\n\t}\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Utils from \"./utils/Utils.js\";\n\nexport default class ExpressionLexer {\n\tconstructor() {\n\t\tthis.profile = null;\n\t}\n\t\n\tset profile(profile) {\n\t\tthis._profile = profile;\n\t\tthis.string = this.token = this.errors = this.captureGroups = this.namedGroups = null;\n\t}\n\t\n\tparse(str) {\n\t\tif (!this._profile) { return null; }\n\t\tif (str === this.string) { return this.token; }\n\t\n\t\tthis.token = null;\n\t\tthis._modes = {};\n\t\tthis.string = str;\n\t\tthis.errors = [];\n\t\tlet capgroups = this.captureGroups = [];\n\t\tlet namedgroups = this.namedGroups = {};\n\t\tlet brgroups = this.branchResetGroups = [];\n\t\tlet groups = [], refs = [], i = 0, l = str.length;\n\t\tlet o, c, token, charset = null;\n\t\t// previous is the previous token, prv is the previous \"active\" token (!ignore)\n\t\tlet prev = null, prv = null\n\t\tlet profile = this._profile, unquantifiable = profile.unquantifiable;\n\t\tlet charTypes = profile.charTypes;\n\t\tlet closeIndex = str.lastIndexOf(\"/\");\n\t\t\n\t\tfor (let i=closeIndex+1; i<l; i++) { this._modes[str[i]] = true; }\n\t\n\t\twhile (i < l) {\n\t\t\tc = str[i];\n\t\t\t\n\t\t\ttoken = {i: i, l: 1, prev: prev, prv: prv, modes:this._modes};\n\t\t\tif (prev) { prev.next = token; }\n\t\t\telse { this.token = token; }\n\t\n\t\t\tif (i === 0 || i >= closeIndex) {\n\t\t\t\tthis.parseFlag(str, token);\n\t\t\t} else if (c === \"(\" && !charset) {\n\t\t\t\tthis.parseParen(str, token);\n\t\t\t\tif (token.close === null) {\n\t\t\t\t\ttoken.depth = groups.length;\n\t\t\t\t\tgroups.push(token);\n\t\t\t\t}\n\t\t\t\tif (token.capture) { this.addCaptureGroup(token, groups); }\n\t\t\t} else if (c === \")\" && !charset) {\n\t\t\t\ttoken.type = \"groupclose\";\n\t\t\t\tif (groups.length) {\n\t\t\t\t\to = token.open = groups.pop();\n\t\t\t\t\to.close = token;\n\t\t\t\t\tif (o.type === \"branchreset\") {\n\t\t\t\t\t\tbrgroups.pop();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttoken.error = {id: \"groupclose\"};\n\t\t\t\t}\n\t\t\t} else if (c === \"[\") {\n\t\t\t\tcharset = this.parseSquareBracket(str, token, charset);\n\t\t\t} else if (c === \"]\" && charset) {\n\t\t\t\ttoken.type = \"setclose\";\n\t\t\t\ttoken.open = charset;\n\t\t\t\tcharset.close = token;\n\t\t\t\tcharset = null;\n\t\t\t} else if (c === \"+\" && prv && prv.clss === \"quant\" && profile.tokens.possessive) {\n\t\t\t\ttoken.type = \"possessive\";\n\t\t\t\ttoken.related = [prv];\n\t\t\t} else if ((c === \"+\" || c === \"*\") && !charset) {\n\t\t\t\ttoken.type = charTypes[c];\n\t\t\t\ttoken.clss = \"quant\";\n\t\t\t\ttoken.min = (c === \"+\" ? 1 : 0);\n\t\t\t\ttoken.max = -1;\n\t\t\t} else if (c === \"{\" && !charset && str.substr(i).search(/^{\\d+,?\\d*}/) !== -1) {\n\t\t\t\tthis.parseQuant(str, token);\n\t\t\t} else if (c === \"\\\\\") {\n\t\t\t\tthis.parseBackSlash(str, token, charset, closeIndex);\n\t\t\t} else if (c === \"?\" && !charset) {\n\t\t\t\tif (!prv || prv.clss !== \"quant\") {\n\t\t\t\t\ttoken.type = charTypes[c];\n\t\t\t\t\ttoken.clss = \"quant\";\n\t\t\t\t\ttoken.min = 0;\n\t\t\t\t\ttoken.max = 1;\n\t\t\t\t} else {\n\t\t\t\t\ttoken.type = \"lazy\";\n\t\t\t\t\ttoken.related = [prv];\n\t\t\t\t}\n\t\t\t} else if (c === \"-\" && charset && prv.code !== undefined && prv.prv && prv.prv.type !== \"range\") {\n\t\t\t\t// this may be the start of a range, but we'll need to validate after the next token.\n\t\t\t\ttoken.type = \"range\";\n\t\t\t} else {\n\t\t\t\tthis.parseChar(str, token, charset);\n\t\t\t\tif (!charset && this._modes.x && /\\s/.test(c)) {\n\t\t\t\t\ttoken.ignore = true;\n\t\t\t\t\ttoken.type = \"ignorews\";\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// post process token:\n\t\t\t// quantifier:\n\t\t\tif (token.clss === \"quant\") {\n\t\t\t\tif (!prv || prv.close !== undefined || unquantifiable[prv.type] || (prv.open && unquantifiable[prv.open.type])) {\n\t\t\t\t\ttoken.error = {id: \"quanttarg\"};\n\t\t\t\t} else {\n\t\t\t\t\ttoken.related = [prv.open || prv];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// reference:\n\t\t\tif (token.group === true) {\n\t\t\t\trefs.push(token);\n\t\t\t}\n\n\t\t\t// conditional:\n\t\t\tlet curGroup = groups.length ? groups[groups.length-1] : null;\n\t\t\tif (curGroup && (curGroup.type === \"conditional\" || curGroup.type === \"conditionalgroup\") && token.type === \"alt\") {\n\t\t\t\tif (!curGroup.alt) { curGroup.alt = token; }\n\t\t\t\telse { token.error = {id: \"extraelse\"}; }\n\t\t\t\ttoken.related = [curGroup];\n\t\t\t\ttoken.type = \"conditionalelse\";\n\t\t\t\ttoken.clss = \"special\";\n\t\t\t} else if (curGroup && curGroup.type === \"branchreset\") {\n\t\t\t\t// reset group\n\t\t\t\tcurGroup.curGroupNum = curGroup.inGroupNum;\n\t\t\t}\n\n\t\t\t// range:\n\t\t\tif (prv && prv.type === \"range\" && prv.l === 1) {\n\t\t\t\tthis.validateRange(str, token);\n\t\t\t}\n\t\t\t\n\t\t\t// js warnings:\n\t\t\t// TODO: this isn't ideal, but I'm hesitant to write a more robust solution for a couple of edge cases.\n\t\t\tif (profile.id === \"js\") { this.addJSWarnings(token); }\n\n\t\t\t// general:\n\t\t\tif (token.open && !token.clss) {\n\t\t\t\ttoken.clss = token.open.clss;\n\t\t\t}\n\t\t\tif (token.error) {\n\t\t\t\tthis.addError(token);\n\t\t\t}\n\t\t\ti += token.l;\n\t\t\tprev = token;\n\t\t\tif (!token.ignore) { prv = token; }\n\t\t}\n\t\n\t\t// post processing:\n\t\twhile (groups.length) {\n\t\t\tthis.addError(groups.pop(), {id: \"groupopen\"});\n\t\t}\n\t\tthis.matchRefs(refs, capgroups, namedgroups);\n\t\tif (charset) {\n\t\t\tthis.addError(charset, {id: \"setopen\"});\n\t\t}\n\t\n\t\treturn this.token;\n\t}\n\n\taddError(token, error=token.error) {\n\t\ttoken.error = error;\n\t\tthis.errors.push(token);\n\t}\n\n\taddJSWarnings(token) {\n\t\tif (token.error) { return; }\n\t\tif ((token.type === \"neglookbehind\" || token.type === \"poslookbehind\") ||\n\t\t\t(token.type === \"sticky\" || token.type === \"unicode\" || token.type == \"dotall\") ||\n\t\t\t(token.type === \"unicodecat\" || token.type === \"unicodescript\") ||\n\t\t\t(token.type === \"namedgroup\")\n\t\t\t) {\n\t\t\t\ttoken.error = {id: \"jsfuture\", warning:true};\n\t\t}\n\t}\n\n\taddCaptureGroup(token, groups) {\n\t\t// it would be nice to make branch reset groups actually highlight all of the groups that share the same number\n\t\t// that would require switching to arrays of groups for each group num - requires rearchitecture throughout the app.\n\t\tlet capgroups = this.captureGroups, brgroups = this.branchResetGroups, namedgroups = this.namedGroups;\n\t\tlet curGroup = groups.length ? groups[groups.length-1] : null;\n\t\tif (brgroups.length) {\n\t\t\tlet brgroup = brgroups[brgroups.length-1];\n\t\t\ttoken.num = ++brgroup.curGroupNum;\n\t\t} else {\n\t\t\ttoken.num = capgroups.length+1;\n\t\t}\n\t\tif (!capgroups[token.num-1]) { capgroups.push(token); }\n\t\tif (token.name && !token.error) {\n\t\t\tif (/\\d/.test(token.name[0])) { token.error = {id: \"badname\"}; }\n\t\t\telse if (namedgroups[token.name]) {\n\t\t\t\ttoken.error = {id: \"dupname\"};\n\t\t\t\ttoken.related = [namedgroups[token.name]];\n\t\t\t} else { namedgroups[token.name] = token; }\n\t\t}\n\t}\n\t\n\tgetRef(token, str) {\n\t\ttoken.clss = \"ref\";\n\t\ttoken.group = true;\n\t\ttoken.relIndex = this.captureGroups.length;\n\t\ttoken.name = str;\n\t}\n\t\n\tmatchRefs(refs, indexes, names) {\n\t\twhile (refs.length) {\n\t\t\tlet token = refs.pop(), name=token.name, group = names[name];\n\t\n\t\t\tif (!group && !isNaN(name)) {\n\t\t\t\tlet sign = name[0], index = parseInt(name) + ((sign === \"+\" || sign === \"-\") ? token.relIndex : 0);\n\t\t\t\tif (sign === \"-\") { index++; }\n\t\t\t\tgroup = indexes[index-1];\n\t\t\t}\n\t\t\tif (group) {\n\t\t\t\ttoken.group = group;\n\t\t\t\ttoken.related = [group];\n\t\t\t\ttoken.dir = (token.i < group.i) ? 1 : (!group.close || token.i < group.close.i) ? 0 : -1;\n\t\t\t} else {\n\t\t\t\tdelete token.group;\n\t\t\t\tdelete token.relIndex;\n\t\t\t\tthis.refToOctal(token);\n\t\t\t\tif (token.error) { this.errors.push(token.error); }\n\t\t\t}\n\t\t}\n\t};\n\t\n\trefToOctal(token) {\n\t\t// PCRE: \\# unmatched, \\0 \\00 \\## = octal\n\t\t// JS: \\# \\0 \\00 \\## = octal\n\t\t// PCRE matches \\8 \\9 to \"8\" \"9\"\n\t\t// JS: without the u flag \\8 \\9 match \"8\" \"9\" in IE, FF & Chrome, and \"\\8\" \"\\9\" in Safari. We support the former.\n\t\t// JS: with the u flag, Chrome & FF throw an esc error, Safari does not.\n\t\t\n\t\t// TODO: handle \\0 for PCRE? Would need more testing.\n\t\t// TODO: this doesn't handle two digit refs with 8/9 in them. Ex. \\18 - not even sure what this is interpreted as.\n\t\tlet name = token.name, profile = this._profile;\n\t\tif (token.type !== \"numref\") {\n\t\t\t// not a simple \\4 style reference, so can't decompose into an octal.\n\t\t\ttoken.error = {id: \"unmatchedref\"};\n\t\t} else if (/^[0-7]{2}$/.test(name) || (profile.config.reftooctalalways && /^[0-7]$/.test(name))) { // octal\n\t\t\tlet next = token.next, char = String.fromCharCode(next.code);\n\t\t\tif (next.type === \"char\" && char >= \"0\" && char <= \"7\" && parseInt(name+char, 8) <= 255) {\n\t\t\t\tname += char;\n\t\t\t\tthis.mergeNext(token);\n\t\t\t}\n\t\t\ttoken.code = parseInt(name,8);\n\t\t\ttoken.clss = \"esc\";\n\t\t\ttoken.type = \"escoctal\";\n\t\t\tdelete token.name;\n\t\t} else if (name === \"8\" || name === \"9\") {\n\t\t\tthis.parseEscChar(token, name);\n\t\t\tdelete token.name;\n\t\t} else {\n\t\t\ttoken.error = {id: \"unmatchedref\"};\n\t\t}\n\t};\n\t\n\tmergeNext(token) {\n\t\tlet next = token.next;\n\t\ttoken.next = next.next;\n\t\ttoken.next.prev = token;\n\t\ttoken.l++;\n\t};\n\t\n\tparseFlag(str, token) {\n\t\t// note that this doesn't deal with misformed patterns or incorrect flags.\n\t\tlet i = token.i, c = str[i];\n\t\tif (str[i] === \"/\") {\n\t\t\ttoken.type = (i === 0) ? \"open\" : \"close\";\n\t\t\tif (i !== 0) {\n\t\t\t\ttoken.related = [this.token];\n\t\t\t\tthis.token.related = [token];\n\t\t\t}\n\t\t} else {\n\t\t\ttoken.type = this._profile.flags[c];\n\t\t}\n\t\t//token.clear = true;\n\t};\n\t\n\tparseChar(str, token, charset) {\n\t\tlet c = str[token.i];\n\t\ttoken.type = (!charset && this._profile.charTypes[c]) || \"char\";\n\t\tif (!charset && c === \"/\") {\n\t\t\ttoken.error = {id: \"fwdslash\"};\n\t\t}\n\t\tif (token.type === \"char\") {\n\t\t\ttoken.code = c.charCodeAt(0);\n\t\t} else if (ExpressionLexer.ANCHOR_TYPES[token.type]) {\n\t\t\ttoken.clss = \"anchor\";\n\t\t} else if (token.type === \"dot\") {\n\t\t\ttoken.clss = \"charclass\";\n\t\t}\n\t\treturn token;\n\t};\n\t\n\tparseSquareBracket(str, token, charset) {\n\t\tlet match;\n\t\tif (this._profile.tokens.posixcharclass && (match = str.substr(token.i).match(/^\\[(:|\\.)([^\\]]*?)\\1]/))) {\n\t\t\t// posixcharclass: [:alpha:]\n\t\t\t// posixcollseq: [.ch.]\n\t\t\t// currently neither flavor supports posixcollseq, but PCRE does flag as an error:\n\t\t\t// TODO: the expression above currently does not catch [.\\].]\n\t\t\ttoken.l = match[0].length;\n\t\t\ttoken.value = match[2];\n\t\t\ttoken.clss = \"charclass\";\n\t\t\tif (match[1] === \":\") {\n\t\t\t\ttoken.type = \"posixcharclass\";\n\t\t\t\tif (!this._profile.posixCharClasses[match[2]]) { token.error = {id: \"posixcharclassbad\"}; }\n\t\t\t\telse if (!charset) { token.error = {id: \"posixcharclassnoset\"}; }\n\t\t\t} else {\n\t\t\t\ttoken.type = \"posixcollseq\";\n\t\t\t\t// TODO: can this be generalized? Right now, no, because we assign ids that aren't in the profile.\n\t\t\t\ttoken.error = {id: \"notsupported\"};\n\t\t\t}\n\t\t} else if (!charset) {\n\t\t\t// set [a-z] [aeiou]\n\t\t\t// setnot [^a-z]\n\t\t\ttoken.type = token.clss = \"set\";\n\t\t\tif (str[token.i + 1] === \"^\") {\n\t\t\t\ttoken.l++;\n\t\t\t\ttoken.type += \"not\";\n\t\t\t}\n\t\t\tcharset = token;\n\t\t} else {\n\t\t\t// [[] (square bracket inside a set)\n\t\t\tthis.parseChar(str, token, charset);\n\t\t}\n\t\treturn charset;\n\t};\n\t\n\tparseParen(str, token) {\n\t\t/*\n\t\tcore:\n\t.\t\tgroup:\n\t.\t\tlookahead: ?= ?!\n\t.\t\tnoncap: ?:\n\t\tPCRE:\n\t.\t\tlookbehind: ?<= ?<!\n\t.\t\tnamed: ?P<name> ?'name' ?<name>\n\t.\t\tnamedref: ?P=name\t\tAlso: \\g'name' \\k'name' etc\n\t.\t\tcomment: ?#\n\t.\t\tatomic: ?>\n\t.\t\trecursion: ?0 ?R\t\tAlso: \\g<0>\n\t.\t\tdefine: ?(DEFINE)\n\t.\t\tsubroutine: ?1 ?-1 ?&name ?P>name\n\t\t\tconditionalgroup: ?(1)a|b ?(-1)a|b ?(name)a|b\n\t\t\tconditional: ?(?=if)then|else\n\t\t\tmode: ?c-i\n\t\t\tbranchreset: ?|\n\t\t*/\n\t\n\t\ttoken.clss = token.type = \"group\";\n\t\tif (str[token.i+1] !== \"?\") {\n\t\t\ttoken.close = null; // indicates that it needs a close token.\n\t\t\ttoken.capture = true;\n\t\t\treturn token;\n\t\t}\n\t\n\t\tlet sub = str.substr(token.i+2), match, s=sub[0];\n\t\n\t\tif (s === \":\") {\n\t\t\t// (?:foo)\n\t\t\ttoken.type = \"noncapgroup\";\n\t\t\ttoken.close = null;\n\t\t\ttoken.l = 3;\n\t\t} else if (s === \">\") {\n\t\t\t// (?>foo)\n\t\t\ttoken.type = \"atomic\";\n\t\t\ttoken.close = null;\n\t\t\ttoken.l = 3;\n\t\t} else if (s === \"|\") {\n\t\t\t// (?|(a)|(b))\n\t\t\ttoken.type = \"branchreset\";\n\t\t\ttoken.close = null;\n\t\t\ttoken.l = 3;\n\t\t\ttoken.inGroupNum = token.curGroupNum = this.captureGroups.length;\n\t\t\tthis.branchResetGroups.push(token);\n\t\t} else if (s === \"#\" && (match = sub.match(/[^)]*\\)/))) {\n\t\t\t// (?#foo)\n\t\t\ttoken.clss = token.type = \"comment\";\n\t\t\ttoken.ignore = true;\n\t\t\ttoken.l = 2+match[0].length;\n\t\t} else if (/^(R|0)\\)/.test(sub)) {\n\t\t\t// (?R) (?0)\n\t\t\ttoken.clss = \"ref\";\n\t\t\ttoken.type = \"recursion\";\n\t\t\ttoken.l = 4;\n\t\t} else if (match = sub.match(/^P=(\\w+)\\)/i)) {\n\t\t\t// (?P=name)\n\t\t\ttoken.type = \"namedref\";\n\t\t\tthis.getRef(token, match[1]);\n\t\t\ttoken.l = match[0].length+2;\n\t\t} else if (/^\\(DEFINE\\)/.test(sub)) {\n\t\t\t// (?(DEFINE)foo)\n\t\t\ttoken.type = \"define\";\n\t\t\ttoken.close = null;\n\t\t\ttoken.l = 10;\n\t\t} else if (match = sub.match(/^<?[=!]/)) {\n\t\t\t// (?=foo) (?<!foo)\n\t\t\tlet isCond = token.prv.type === \"conditional\";\n\t\t\ttoken.clss = isCond ? \"special\" : \"lookaround\";\n\t\t\ttoken.close = null;\n\t\t\ts = match[0];\n\t\t\ttoken.behind = s[0] === \"<\";\n\t\t\ttoken.negative = s[+token.behind] === \"!\";\n\t\t\ttoken.type = isCond ? \"condition\" : (token.negative ? \"neg\" : \"pos\") + \"look\" + (token.behind ? \"behind\" : \"ahead\");\n\t\t\tif (isCond) {\n\t\t\t\ttoken.prv.related = [token];\n\t\t\t\ttoken.prv.condition = token;\n\t\t\t\ttoken.related = [token.prv];\n\t\t\t}\n\t\t\ttoken.l = s.length + 2;\n\t\t} else if (\n\t\t\t(match = sub.match(/^<(\\w+)>/)) ||\n\t\t\t(this._profile.config.namedgroupalt && ((match = sub.match(/^'(\\w+)'/)) || (match = sub.match(/^P<(\\w+)>/))))\n\t\t\t) {\n\t\t\t// (?<name>foo) (?'name'foo) (?P<name>foo)\n\t\t\ttoken.type = \"namedgroup\";\n\t\t\ttoken.close = null;\n\t\t\ttoken.name = match[1];\n\t\t\ttoken.capture = true;\n\t\t\ttoken.l = match[0].length + 2;\n\t\t} else if ((match = sub.match(/^([-+]?\\d\\d?)\\)/)) || (match = sub.match(/^(?:&|P>)(\\w+)\\)/))) {\n\t\t\t// (?1) (?-1) (?&name) (?P>name)\n\t\t\ttoken.type = (isNaN(match[1]) ? \"named\" : \"num\") + \"subroutine\";\n\t\t\tthis.getRef(token, match[1]);\n\t\t\ttoken.l = match[0].length + 2;\n\t\t} else if ((match = sub.match(/^\\(([-+]?\\d\\d?)\\)/)) || (match = sub.match(/^\\((\\w+)\\)/))) {\n\t\t\t// (?(1)a|b) (?(-1)a|b) (?(name)a|b)\n\t\t\tthis.getRef(token, match[1]);\n\t\t\ttoken.clss = \"special\";\n\t\t\ttoken.type = \"conditionalgroup\";\n\t\t\ttoken.close = null;\n\t\t\ttoken.l = match[0].length + 2;\n\t\t} else if (/^\\(\\?<?[=!]/.test(sub)) {\n\t\t\t// (?(?=if)then|else)\n\t\t\ttoken.clss = \"special\";\n\t\t\ttoken.type = \"conditional\";\n\t\t\ttoken.close = null;\n\t\t\ttoken.l = 2;\n\t\t} else if (this.parseMode(token, sub)) {\n\t\t\t// (?i-x)\n\t\t\t// do nothing. handled by parseMode.\n\t\t} else {\n\t\t\t// error, found a (? without matching anything. Treat it as a normal group and let it error out.\n\t\t\ttoken.close = null;\n\t\t\ttoken.capture = true;\n\t\t}\n\t\n\t\tif (!this._profile.tokens[token.type]) { token.error = {id: \"notsupported\"}; }\n\t\n\t\treturn token;\n\t};\n\t\n\tparseBackSlash(str, token, charset, closeIndex) {\n\t\t// Note: Chrome does weird things with \\x & \\u depending on a number of factors, we ignore this.\n\t\tlet i = token.i, match, profile = this._profile;\n\t\tlet sub = str.substr(i + 1), c = sub[0], val;\n\t\tif (i + 1 === (closeIndex || str.length)) {\n\t\t\ttoken.error = {id: \"esccharopen\"};\n\t\t\treturn;\n\t\t}\n\t\n\t\tif (!charset && (match = sub.match(/^\\d\\d?/))) {\n\t\t\t// \\1 to \\99\n\t\t\t// write this as a reference for now, and re-write it later if it doesn't match a group\n\t\t\ttoken.type = \"numref\";\n\t\t\tthis.getRef(token, match[0]);\n\t\t\ttoken.l += match[0].length;\n\t\t\treturn token;\n\t\t}\n\t\tif (profile.tokens.namedref && !charset && (c === \"g\" || c === \"k\")) {\n\t\t\treturn this.parseRef(token, sub);\n\t\t}\n\t\n\t\tif (profile.tokens.unicodecat && (!profile.flags.u || this._modes.u) && (c === \"p\" || c === \"P\")) {\n\t\t\t// unicode: \\p{Ll} \\pL\n\t\t\treturn this.parseUnicode(token, sub);\n\t\t} else if (profile.tokens.escsequence && c === \"Q\") {\n\t\t\t// escsequence: \\Q...\\E\n\t\t\ttoken.type = \"escsequence\";\n\t\t\tlet e=2;\n\t\t\tif ((i = sub.indexOf(\"\\\\E\")) !== -1) { token.l += i + 2; e+=2; }\n\t\t\telse { token.l += closeIndex - token.i - 1; }\n\t\t\ttoken.value = str.substr(token.i+2, token.l-e);\n\t\t} else if (profile.tokens.escunicodeub && this._modes.u && (match = sub.match(/^u\\{(\\d+)}/))) {\n\t\t\t// unicodeu: \\u{0061}\n\t\t\ttoken.type = \"escunicodeub\";\n\t\t\ttoken.l += match[0].length;\n\t\t\ttoken.code = parseInt(match[1], 16);\n\t\t} else if (profile.tokens.escunicodeu && (match = sub.match(/^u([\\da-fA-F]{4})/))) {\n\t\t\t// unicode: \\uFFFF\n\t\t\t// update SubstLexer if this changes:\n\t\t\ttoken.type = \"escunicodeu\";\n\t\t\ttoken.l += match[0].length;\n\t\t\ttoken.code = parseInt(match[1], 16);\n\t\t} else if (profile.tokens.escunicodexb && (match = sub.match(/^x\\{(.*?)}/))) {\n\t\t\t// unicode: \\x{FFFF}\n\t\t\ttoken.type = \"escunicodexb\";\n\t\t\ttoken.l += match[0].length;\n\t\t\tval = parseInt(match[1], 16);\n\t\t\t// PCRE errors on more than 2 digits (>255). In theory it should allow 4?\n\t\t\tif (isNaN(val) || val > 255 || /[^\\da-f]/i.test(match[1])) { token.error = {id: \"esccharbad\"}; }\n\t\t\telse { token.code = val; }\n\t\t} else if (match = sub.match(/^x([\\da-fA-F]{0,2})/)) {\n\t\t\t// hex ascii: \\xFF\n\t\t\ttoken.type = \"eschexadecimal\";\n\t\t\ttoken.l += match[0].length;\n\t\t\ttoken.code = parseInt(match[1]||0, 16);\n\t\t} else if (match = sub.match(/^c([a-zA-Z])?/)) {\n\t\t\t// control char: \\cA \\cz\n\t\t\t// also handles: \\c\n\t\t\t// not supported in JS strings\n\t\t\ttoken.type = \"esccontrolchar\";\n\t\t\tif (match[1]) {\n\t\t\t\ttoken.code = match[1].toUpperCase().charCodeAt(0) - 64; // A=65\n\t\t\t\ttoken.l += 2;\n\t\t\t} else if (profile.config.ctrlcodeerr) {\n\t\t\t\ttoken.l++;\n\t\t\t\ttoken.error = {id: \"esccharbad\"};\n\t\t\t} else {\n\t\t\t\treturn this.parseChar(str, token, charset); // this builds the \"/\" token\n\t\t\t}\n\t\t} else if (match = sub.match(/^[0-7]{1,3}/)) {\n\t\t\t// octal ascii: \\011\n\t\t\ttoken.type = \"escoctal\";\n\t\t\tsub = match[0];\n\t\t\tif (parseInt(sub, 8) > 255) {\n\t\t\t\tsub = sub.substr(0, 2);\n\t\t\t}\n\t\t\ttoken.l += sub.length;\n\t\t\ttoken.code = parseInt(sub, 8);\n\t\t} else if (profile.tokens.escoctalo && (match = sub.match(/^o\\{(.*?)}/i))) {\n\t\t\t// \\o{377}\n\t\t\ttoken.type = \"escoctal\";\n\t\t\ttoken.l += match[0].length;\n\t\t\tval = parseInt(match[1], 8);\n\t\t\tif (isNaN(val) || val > 255 || /[^0-7]/.test(match[1])) { token.error = {id: \"esccharbad\"}; }\n\t\t\telse { token.code = val; }\n\t\t} else {\n\t\t\t// single char\n\t\t\tif (token.type = profile.escCharTypes[c]) {\n\t\t\t\ttoken.l++;\n\t\t\t\ttoken.clss = ExpressionLexer.ANCHOR_TYPES[token.type] ? \"anchor\" : \"charclass\";\n\t\t\t\treturn token;\n\t\t\t}\n\t\t\t\n\t\t\ttoken.code = profile.escCharCodes[c];\n\t\t\tif (token.code === undefined || token.code === false) {\n\t\t\t\t// unrecognized.\n\t\t\t\treturn this.parseEscChar(token, c);\n\t\t\t}\n\t\t\t\n\t\t\t// update SubstLexer if this changes:\n\t\t\ttoken.l++;\n\t\t\ttoken.type = \"esc_\"+token.code;\n\t\t}\n\t\ttoken.clss = \"esc\";\n\t\treturn token;\n\t};\n\t\n\tparseEscChar(token, c) {\n\t\t// unrecognized escchar: \\u \\a \\8, etc\n\t\t// JS: allowed except if u flag set, Safari still allows \\8 \\9\n\t\t// PCRE: allows \\8 \\9 but not others // TODO: support?\n\t\tlet profile = this._profile;\n\t\ttoken.l=2;\n\t\tif (!profile.badEscChars[c] && (profile.tokens.escchar && !this._modes.u) || profile.escChars[c]) {\n\t\t\ttoken.type = \"escchar\";\n\t\t\ttoken.code = c.charCodeAt(0);\n\t\t\ttoken.clss = \"esc\";\n\t\t} else {\n\t\t\ttoken.error = {id: \"esccharbad\"};\n\t\t}\n\t}\n\t\n\tparseRef(token, sub) {\n\t\t// namedref: \\k<name> \\k'name' \\k{name} \\g{name}\n\t\t// namedsubroutine: \\g<name> \\g'name'\n\t\t// numref: \\g1 \\g+2 \\g{2}\n\t\t// numsubroutine: \\g<-1> \\g'1'\n\t\t// recursion: \\g<0> \\g'0'\n\t\tlet c=sub[0], s=\"\", match;\n\t\tif (match = sub.match(/^[gk](?:'\\w*'|<\\w*>|{\\w*})/)) {\n\t\t\ts = match[0].substr(2, match[0].length - 3);\n\t\t\tif (c === \"k\" && !isNaN(s)) { s = \"\"; } // TODO: specific error for numeric \\k?\n\t\t} else if (match = sub.match(/^g(?:({[-+]?\\d+}|<[-+]?\\d+>|'[-+]?\\d+')|([-+]?\\d+))/)) {\n\t\t\ts = match[2] !== undefined ? match[2] : match[1].substr(1, match[1].length-2);\n\t\t}\n\t\tlet isRef = c === \"k\" || !(sub[1] === \"'\" || sub[1] === \"<\");\n\t\tif (!isRef && s == 0) {\n\t\t\ttoken.type = \"recursion\";\n\t\t\ttoken.clss = \"ref\";\n\t\t} else {\n\t\t\t// namedref, extnumref, namedsubroutine, numsubroutine\n\t\t\ttoken.type = (isNaN(s) ? \"named\" : (isRef?\"ext\":\"\")+\"num\") + (isRef ? \"ref\" : \"subroutine\");\n\t\t\tthis.getRef(token, s);\n\t\t}\n\t\ttoken.l += match ? match[0].length : 1;\n\t};\n\t\n\tparseUnicode(token, sub) {\n\t\t// unicodescript: \\p{Cherokee}\n\t\t// unicodecat: \\p{Ll} \\pL\n\t\t// not: \\P{Ll} \\p{^Lu}\n\t\tlet match = sub.match(/p\\{\\^?([^}]*)}/i), val = match && match[1], not = sub[0] === \"P\";\n\t\tif (!match && (match = sub.match(/[pP]([LMZSNPC])/))) { val = match[1]; }\n\t\telse { not = not !== (sub[2] === \"^\"); }\n\t\ttoken.l += match ? match[0].length : 1;\n\t\ttoken.type = \"unicodecat\";\n\t\tif (this._profile.unicodeScripts[val]) {\n\t\t\ttoken.type = \"unicodescript\";\n\t\t} else if (!this._profile.unicodeCategories[val]) {\n\t\t\tval = null;\n\t\t}\n\t\tif (not) { token.type = \"not\"+token.type; }\n\t\tif ((!this._profile.config.unicodenegated && sub[2] === \"^\") || !val) {\n\t\t\ttoken.error = {id: \"unicodebad\"}\n\t\t}\n\t\ttoken.value = val;\n\t\ttoken.clss = \"charclass\"\n\t\treturn token;\n\t};\n\t\n\tparseMode(token, sub) {\n\t\t// (?i-x)\n\t\t// supported modes in PCRE: i-caseinsens, x-freespacing, s-dotall, m-multiline, U-switchlazy, [J-samename]\n\t\tlet match = sub.match(/^[-a-z]+\\)/i);\n\t\tif (!match) { return; }\n\t\tlet supModes = this._profile.modes;\n\t\tlet modes = Utils.copy({}, this._modes), bad=false, not=false, s=match[0], c;\n\t\ttoken.on = token.off = \"\";\n\n\t\tfor (let i=0, l=s.length-1; i<l; i++) {\n\t\t\tc=s[i];\n\t\t\tif (c === \"-\") { not = true; continue; }\n\t\t\tif (!supModes[c]) { bad = true; break; }\n\t\t\tmodes[c] = !not;\n\n\t\t\ttoken.on = token.on.replace(c, \"\");\n\t\t\tif (not) {\n\t\t\t\ttoken.off = token.off.replace(c, \"\");\n\t\t\t\ttoken.off += c;\n\t\t\t} else {\n\t\t\t\ttoken.on += c;\n\t\t\t}\n\t\t}\n\n\t\ttoken.clss = \"special\";\n\t\ttoken.type = \"mode\";\n\t\ttoken.l = match[0].length + 2;\n\n\t\tif (bad) {\n\t\t\ttoken.error = {id: \"modebad\"};\n\t\t\ttoken.errmode = c;\n\t\t} else {\n\t\t\tthis._modes = modes;\n\t\t}\n\t\treturn token;\n\t}\n\t\n\tparseQuant(str, token) {\n\t\t// quantifier: {0,3} {3} {1,}\n\t\ttoken.type = token.clss = \"quant\";\n\t\tlet i = token.i;\n\t\tlet end = str.indexOf(\"}\", i + 1);\n\t\ttoken.l += end - i;\n\t\tlet arr = str.substring(i + 1, end).split(\",\");\n\t\ttoken.min = parseInt(arr[0]);\n\t\ttoken.max = (arr[1] === undefined) ? token.min : (arr[1] === \"\") ? -1 : parseInt(arr[1]);\n\t\tif (token.max !== -1 && token.min > token.max) {\n\t\t\ttoken.error = {id: \"quantrev\"};\n\t\t}\n\t\treturn token;\n\t};\n\t\n\tvalidateRange(str, end) {\n\t\t// char range: [a-z] [\\11-\\n]\n\t\tlet next = end, token = end.prv, prv = token.prv;\n\t\tif (prv.code === undefined || next.code === undefined) {\n\t\t\t// not a range, rewrite as a char:\n\t\t\tthis.parseChar(str, token);\n\t\t} else {\n\t\t\ttoken.clss = \"set\";\n\t\t\tif (prv.code > next.code) {\n\t\t\t\t// this gets added here because parse has already moved to the next token:\n\t\t\t\tthis.errors.push(token.error = {id: \"rangerev\"});\n\t\t\t}\n\t\t\t// preserve as separate tokens, but treat as one in the UI:\n\t\t\tnext.proxy = prv.proxy = token;\n\t\t\ttoken.set = [prv, token, next];\n\t\t}\n\t};\n\n}\n\nExpressionLexer.ANCHOR_TYPES = {\n\t\"bof\": true,\n\t\"eof\": true,\n\t\"bos\": true,\n\t\"eos\": true,\n\t\"abseos\": true,\n\t\"wordboundary\": true,\n\t\"notwordboundary\": true,\n\t\"prevmatchend\": true\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nimport EventDispatcher from \"../events/EventDispatcher\";\nimport CMUtils from \"../utils/CMUtils\";\n\nexport default class ExpressionHighlighter extends EventDispatcher {\n\tconstructor(cm) {\n\t\tsuper();\n\t\tthis.cm = cm;\n\t\tthis._activeMarks = [];\n\t\tthis._hoverMarks = [];\n\t\tthis._hoverToken = null;\n\t}\n\t\n\tclear() {\n\t\tthis.cm.operation(() => {\n\t\t\tlet marks = this._activeMarks;\n\t\t\tfor (var i = 0, l = marks.length; i < l; i++) {\n\t\t\t\tmarks[i].clear();\n\t\t\t}\n\t\t\tmarks.length = 0;\n\t\t});\n\t}\n\t\n\tdraw(token) {\n\t\tlet cm = this.cm, pre = ExpressionHighlighter.CSS_PREFIX;\n\t\n\t\tthis.clear();\n\t\tcm.operation(() => {\n\t\t\t\n\t\t\tlet groupClasses = ExpressionHighlighter.GROUP_CLASS_BY_TYPE;\n\t\t\tlet doc = cm.getDoc(), endToken, marks = this._activeMarks;\n\t\n\t\t\twhile (token) {\n\t\t\t\tif (token.clear) {\n\t\t\t\t\ttoken = token.next;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\ttoken = this._calcTokenPos(token);\n\t\n\t\t\t\tvar className = pre + (token.clss || token.type);\n\t\t\t\tif (token.error) {\n\t\t\t\t\tclassName += \" \" + pre + (token.error.warning ? \"warning\" : \"error\");\n\t\t\t\t}\n\t\n\t\t\t\tif (className) {\n\t\t\t\t\tmarks.push(doc.markText(token.startPos, token.endPos, {className: className}));\n\t\t\t\t}\n\t\n\t\t\t\tif (token.close) {\n\t\t\t\t\tendToken = this._calcTokenPos(token.close);\n\t\t\t\t\tclassName = groupClasses[token.clss || token.type];\n\t\t\t\t\tif (className) {\n\t\t\t\t\t\tclassName = className.replace(\"%depth%\", token.depth);\n\t\t\t\t\t\tmarks.push(doc.markText(token.startPos, endToken.endPos, {className: className}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttoken = token.next;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tset hoverToken(token) {\n\t\tif (token === this._hoverToken) { return; }\n\t\tif (token && token.set && token.set.indexOf(this._hoverToken) !== -1) { return; }\n\t\twhile (this._hoverMarks.length) { this._hoverMarks.pop().clear(); }\n\t\t\n\t\tthis._hoverToken = token;\n\t\tif (token) {\n\t\t\tif (token.open) {\n\t\t\t\tthis._drawSelect(token.open);\n\t\t\t} else {\n\t\t\t\tthis._drawSelect(token);\n\t\t\t}\n\t\t\tif (token.related) {\n\t\t\t\tfor (let i = 0, l=token.related.length; i < l; i++) {\n\t\t\t\t\tthis._drawSelect(token.related[i], ExpressionHighlighter.CSS_PREFIX + \"related\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.dispatchEvent(\"hover\");\n\t};\n\t\n\tget hoverToken() {\n\t\treturn this._hoverToken;\n\t}\n\t\n\t\n// private methods:\n\t_drawSelect(token, style = ExpressionHighlighter.CSS_PREFIX+\"selected\") {\n\t\tlet doc = this.cm.getDoc(), endToken = token.close || token;\n\t\tif (token.set) {\n\t\t\tendToken = token.set[token.set.length - 1];\n\t\t\ttoken = token.set[0];\n\t\t}\n\t\t\n\t\tthis._calcTokenPos(endToken);\n\t\tthis._calcTokenPos(token);\n\t\tthis._hoverMarks.push(doc.markText(token.startPos, endToken.endPos, {\n\t\t\tclassName: style,\n\t\t\tstartStyle: style + \"-left\",\n\t\t\tendStyle: style + \"-right\"\n\t\t}));\n\t};\n\n\t_calcTokenPos(token) {\n\t\tif (token.startPos || token == null) {\n\t\t\treturn token;\n\t\t}\n\t\tCMUtils.calcRangePos(this.cm, token.i, token.l, token);\n\t\treturn token;\n\t};\n\t\n};\n\nExpressionHighlighter.CSS_PREFIX = \"exp-\";\n\nExpressionHighlighter.GROUP_CLASS_BY_TYPE = {\n\tset: ExpressionHighlighter.CSS_PREFIX+\"group-set\",\n\tsetnot: ExpressionHighlighter.CSS_PREFIX+\"group-set\",\n\tgroup: ExpressionHighlighter.CSS_PREFIX+\"group-%depth%\",\n\tlookaround: ExpressionHighlighter.CSS_PREFIX+\"group-%depth%\"\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport CMUtils from \"../utils/CMUtils\";\n\nimport app from \"../app\";\n\nexport default class ExpressionHover {\n\tconstructor (editor, highlighter) {\n\t\tthis.editor = editor;\n\t\tthis.highlighter = highlighter;\n\t\tthis.isMouseDown = false;\n\t\tthis.token = null;\n\t\t\n\t\tlet o = editor.display.lineDiv;\n\t\to.addEventListener(\"mousemove\", (evt)=> this._handleMouseMove(evt));\n\t\to.addEventListener(\"mouseout\", (evt)=> this._handleMouseOut(evt));\n\t\to.addEventListener(\"mousedown\", (evt)=> this._handleMouseDown(evt));\n\t\t\n\t}\n\n\t\n// private methods:\n\t_handleMouseMove(evt) {\n\t\tif (this.isMouseDown) { return; }\n\t\t\n\t\tlet index, editor = this.editor, token = this.token, target = null;\n\t\t\n\t\tif (evt && token && (index = CMUtils.getCharIndexAt(editor, evt.clientX, evt.clientY + window.pageYOffset)) != null) {\n\t\t\twhile (token) {\n\t\t\t\tif (index >= token.i && index < token.i+token.l) {\n\t\t\t\t\ttarget = token;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ttoken = token.next;\n\t\t\t}\n\t\t}\n\t\t\n\t\twhile (target) {\n\t\t\tif (target.open) { target = target.open; }\n\t\t\telse if (target.proxy) { target = target.proxy; }\n\t\t\telse { break; }\n\t\t}\n\t\n\t\tthis.highlighter.hoverToken = target;\n\t\tlet rect = (index != null) && CMUtils.getCharRect(editor, index);\n\t\tif (rect) { rect.right = rect.left = evt.clientX; }\n\t\tapp.tooltip.hover.show(\"ExpressionHover\", app.reference.tipForToken(target), evt.clientX, rect.bottom, true, 0);\n\t}\n\t\n\t_handleMouseOut(evt) {\n\t\tthis.highlighter.hoverToken = null;\n\t\tapp.tooltip.hover.hide(\"ExpressionHover\");\n\t}\n\t\n\t_handleMouseDown(evt) {\n\t\t// TODO: Should this also be in TextHover?\n\t\tif (evt.which !== 1 && evt.button !== 1) { return; }\n\t\t\n\t\tthis.isMouseDown = true;\n\t\tlet f, t = window.addEventListener ? window : document;\n\t\tt.addEventListener(\"mouseup\", f = () => {\n\t\t\tt.removeEventListener(\"mouseup\", f);\n\t\t\tthis.isMouseDown = false;\n\t\t});\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/*\nThe core profile essentially defines every feature we support, and is then pared down by other profiles. All values should be y (true).\n\nIt also acts in part as pseudo documentation for all of the \"type\" values.\n */\nlet y=true, n=false;\n\nlet core = {\n\tid: \"core\",\n\t\n\tflags: {\n\t\t\"g\": \"global\", // note that this is not a real flag in some flavors, but a different method call\n\t\t\"i\": \"caseinsensitive\",\n\t\t\"m\": \"multiline\",\n\t\t\"s\": \"dotall\",\n\t\t\"u\": \"unicode\",\n\t\t\"y\": \"sticky\",\n\t\t\"x\": \"extended\",\n\t\t\"U\": \"ungreedy\"\n\t},\n\t\n\t// reserved characters that need to be escaped:\n\tescChars: \"+*?^$\\\\.[]{}()|/\".split(\"\").reduce((o, c) => { o[c] = y; return o}, {}),\n\n\t// escape chars that are specifically not supported by the flavor:\n\tbadEscChars: n,\n\t\n\tescCharCodes: {\n\t\t\"0\": 0,  // null\n\t\t\"a\": 7,  // bell\n\t\t\"t\": 9,  // tab\n\t\t\"n\": 10, // lf\n\t\t\"v\": 11, // vertical tab\n\t\t\"f\": 12, // form feed\n\t\t\"r\": 13, // cr\n\t\t\"e\": 27  // escape\n\t},\n\t\n\tescCharTypes: {\n\t\t\"A\": \"bos\",\n\t\t\"b\": \"wordboundary\",\n\t\t\"B\": \"notwordboundary\",\n\t\t\"d\": \"digit\",\n\t\t\"D\": \"notdigit\",\n\t\t\"G\": \"prevmatchend\",\n\t\t\"h\": \"hwhitespace\",\n\t\t\"H\": \"nothwhitespace\",\n\t\t\"K\": \"keepout\",\n\t\t\"N\": \"notlinebreak\",\n\t\t\"R\": \"linebreak\",\n\t\t\"s\": \"whitespace\",\n\t\t\"S\": \"notwhitespace\",\n\t\t\"v\": \"vwhitespace\",\n\t\t\"V\": \"notvwhitespace\",\n\t\t\"w\": \"word\",\n\t\t\"W\": \"notword\",\n\t\t\"X\": \"unicodegrapheme\",\n\t\t\"Z\": \"eos\",\n\t\t\"z\": \"abseos\"\n\t},\n\t\n\tcharTypes: {\n\t\t\".\": \"dot\",\n\t\t\"|\": \"alt\",\n\t\t\"$\": \"eof\",\n\t\t\"^\": \"bof\",\n\t\t\"?\": \"opt\",  // also: \"lazy\"\n\t\t\"+\": \"plus\", // also: \"possessive\"\n\t\t\"*\": \"star\"\n\t},\n\t\n\tunquantifiable: {\n\t\t// all group/set open tokens are unquantifiable by default (ie. tokens with a .close value)\n\t\t\"quant\": y,\n\t\t\"plus\": y,\n\t\t\"star\": y,\n\t\t\"opt\": y,\n\t\t\"lazy\": y,\n\t\t\"possessive\": y,\n\t\t\"eof\": y,\n\t\t\"bof\": y,\n\t\t\"eos\": y,\n\t\t\"abseos\": y,\n\t\t\"alt\": y,\n\t\t\"open\": y,\n\t\t\"mode\": y,\n\t\t\"comment\":y, // TODO: this should actually be ignored by quantifiers.\n\t\t\"condition\": y\n\t},\n\t\n\tunicodeScripts: {\n\t\t// from: http://www.pcre.org/original/doc/html/pcrepattern.html\n\t\t\"Arabic\": y,\n\t\t\"Armenian\": y,\n\t\t\"Avestan\": y,\n\t\t\"Balinese\": y,\n\t\t\"Bamum\": y,\n\t\t\"Bassa_Vah\": y,\n\t\t\"Batak\": y,\n\t\t\"Bengali\": y,\n\t\t\"Bopomofo\": y,\n\t\t\"Brahmi\": y,\n\t\t\"Braille\": y,\n\t\t\"Buginese\": y,\n\t\t\"Buhid\": y,\n\t\t\"Canadian_Aboriginal\": y,\n\t\t\"Carian\": y,\n\t\t\"Caucasian_Albanian\": y,\n\t\t\"Chakma\": y,\n\t\t\"Cham\": y,\n\t\t\"Cherokee\": y,\n\t\t\"Common\": y,\n\t\t\"Coptic\": y,\n\t\t\"Cuneiform\": y,\n\t\t\"Cypriot\": y,\n\t\t\"Cyrillic\": y,\n\t\t\"Deseret\": y,\n\t\t\"Devanagari\": y,\n\t\t\"Duployan\": y,\n\t\t\"Egyptian_Hieroglyphs\": y,\n\t\t\"Elbasan\": y,\n\t\t\"Ethiopic\": y,\n\t\t\"Georgian\": y,\n\t\t\"Glagolitic\": y,\n\t\t\"Gothic\": y,\n\t\t\"Grantha\": y,\n\t\t\"Greek\": y,\n\t\t\"Gujarati\": y,\n\t\t\"Gurmukhi\": y,\n\t\t\"Han\": y,\n\t\t\"Hangul\": y,\n\t\t\"Hanunoo\": y,\n\t\t\"Hebrew\": y,\n\t\t\"Hiragana\": y,\n\t\t\"Imperial_Aramaic\": y,\n\t\t\"Inherited\": y,\n\t\t\"Inscriptional_Pahlavi\": y,\n\t\t\"Inscriptional_Parthian\": y,\n\t\t\"Javanese\": y,\n\t\t\"Kaithi\": y,\n\t\t\"Kannada\": y,\n\t\t\"Katakana\": y,\n\t\t\"Kayah_Li\": y,\n\t\t\"Kharoshthi\": y,\n\t\t\"Khmer\": y,\n\t\t\"Khojki\": y,\n\t\t\"Khudawadi\": y,\n\t\t\"Lao\": y,\n\t\t\"Latin\": y,\n\t\t\"Lepcha\": y,\n\t\t\"Limbu\": y,\n\t\t\"Linear_A\": y,\n\t\t\"Linear_B\": y,\n\t\t\"Lisu\": y,\n\t\t\"Lycian\": y,\n\t\t\"Lydian\": y,\n\t\t\"Mahajani\": y,\n\t\t\"Malayalam\": y,\n\t\t\"Mandaic\": y,\n\t\t\"Manichaean\": y,\n\t\t\"Meetei_Mayek\": y,\n\t\t\"Mende_Kikakui\": y,\n\t\t\"Meroitic_Cursive\": y,\n\t\t\"Meroitic_Hieroglyphs\": y,\n\t\t\"Miao\": y,\n\t\t\"Modi\": y,\n\t\t\"Mongolian\": y,\n\t\t\"Mro\": y,\n\t\t\"Myanmar\": y,\n\t\t\"Nabataean\": y,\n\t\t\"New_Tai_Lue\": y,\n\t\t\"Nko\": y,\n\t\t\"Ogham\": y,\n\t\t\"Ol_Chiki\": y,\n\t\t\"Old_Italic\": y,\n\t\t\"Old_North_Arabian\": y,\n\t\t\"Old_Permic\": y,\n\t\t\"Old_Persian\": y,\n\t\t\"Old_South_Arabian\": y,\n\t\t\"Old_Turkic\": y,\n\t\t\"Oriya\": y,\n\t\t\"Osmanya\": y,\n\t\t\"Pahawh_Hmong\": y,\n\t\t\"Palmyrene\": y,\n\t\t\"Pau_Cin_Hau\": y,\n\t\t\"Phags_Pa\": y,\n\t\t\"Phoenician\": y,\n\t\t\"Psalter_Pahlavi\": y,\n\t\t\"Rejang\": y,\n\t\t\"Runic\": y,\n\t\t\"Samaritan\": y,\n\t\t\"Saurashtra\": y,\n\t\t\"Sharada\": y,\n\t\t\"Shavian\": y,\n\t\t\"Siddham\": y,\n\t\t\"Sinhala\": y,\n\t\t\"Sora_Sompeng\": y,\n\t\t\"Sundanese\": y,\n\t\t\"Syloti_Nagri\": y,\n\t\t\"Syriac\": y,\n\t\t\"Tagalog\": y,\n\t\t\"Tagbanwa\": y,\n\t\t\"Tai_Le\": y,\n\t\t\"Tai_Tham\": y,\n\t\t\"Tai_Viet\": y,\n\t\t\"Takri\": y,\n\t\t\"Tamil\": y,\n\t\t\"Telugu\": y,\n\t\t\"Thaana\": y,\n\t\t\"Thai\": y,\n\t\t\"Tibetan\": y,\n\t\t\"Tifinagh\": y,\n\t\t\"Tirhuta\": y,\n\t\t\"Ugaritic\": y,\n\t\t\"Vai\": y,\n\t\t\"Warang_Citi\": y,\n\t\t\"Yi\": y\n\t},\n\t\n\tunicodeCategories: {\n\t\t// from: http://www.pcre.org/original/doc/html/pcrepattern.html\n\t\t\"C\": y, // Other\n\t\t\"Cc\": y, // Control\n\t\t\"Cf\": y, // Format\n\t\t\"Cn\": y, // Unassigned\n\t\t\"Co\": y, // Private use\n\t\t\"Cs\": y, // Surrogate\n\t\t\"L\": y, // Letter\n\t\t\"L&\": y, // Any letter \n\t\t\"Ll\": y, // Lower case letter\n\t\t\"Lm\": y, // Modifier letter\n\t\t\"Lo\": y, // Other letter\n\t\t\"Lt\": y, // Title case letter\n\t\t\"Lu\": y, // Upper case letter\n\t\t\"M\": y, // Mark\n\t\t\"Mc\": y, // Spacing mark\n\t\t\"Me\": y, // Enclosing mark\n\t\t\"Mn\": y, // Non-spacing mark\n\t\t\"N\": y, // Number\n\t\t\"Nd\": y, // Decimal number\n\t\t\"Nl\": y, // Letter number\n\t\t\"No\": y, // Other number\n\t\t\"P\": y, // Punctuation\n\t\t\"Pc\": y, // Connector punctuation\n\t\t\"Pd\": y, // Dash punctuation\n\t\t\"Pe\": y, // Close punctuation\n\t\t\"Pf\": y, // Final punctuation\n\t\t\"Pi\": y, // Initial punctuation\n\t\t\"Po\": y, // Other punctuation\n\t\t\"Ps\": y, // Open punctuation\n\t\t\"S\": y, // Symbol\n\t\t\"Sc\": y, // Currency symbol\n\t\t\"Sk\": y, // Modifier symbol\n\t\t\"Sm\": y, // Mathematical symbol\n\t\t\"So\": y, // Other symbol\n\t\t\"Z\": y, // Separator\n\t\t\"Zl\": y, // Line separator\n\t\t\"Zp\": y, // Paragraph separator\n\t\t\"Zs\": y // Space separator\n\t},\n\t\n\tposixCharClasses: {\n\t\t// from: http://www.pcre.org/original/doc/html/pcrepattern.html\n\t\t\"alnum\": y, // letters and digits\n\t\t\"alpha\": y, // letters\n\t\t\"ascii\": y, // character codes 0 - 127\n\t\t\"blank\": y, // space or tab only\n\t\t\"cntrl\": y, // control characters\n\t\t\"digit\": y, // decimal digits (same as \\d)\n\t\t\"graph\": y, // printing characters, excluding space\n\t\t\"lower\": y, // lower case letters\n\t\t\"print\": y, // printing characters, including space\n\t\t\"punct\": y, // printing characters, excluding letters and digits and space\n\t\t\"space\": y, // white space (the same as \\s from PCRE 8.34)\n\t\t\"upper\": y, // upper case letters\n\t\t\"word\": y, // \"word\" characters (same as \\w)\n\t\t\"xdigit\": y // hexadecimal digits\n\t},\n\t\n\tmodes: {\n\t\t\"i\": \"caseinsensitive\",\n\t\t\"s\": \"dotall\",\n\t\t\"m\": \"multiline\",\n\t\t\"x\": \"freespacing\",\n\t\t\"J\": \"samename\",\n\t\t\"U\": \"switchlazy\"\n\t},\n\t\n\ttokens: {\n\t\t// note that not all of these are actively used in the lexer, but are included for completeness.\n\t\t\"open\": y, // opening /\n\t\t\"close\": y, // closing /\n\t\t\"char\": y, // abc\n\t\t\n\t\t// classes:\n\t\t// also in escCharTypes and charTypes\n\t\t\"set\": y, // [a-z]\n\t\t\"setnot\": y, // [^a-z]\n\t\t\"setclose\": y, // ]\n\t\t\"range\": y, // [a-z]\n\t\t\"unicodecat\": y, // \\p{Ll} \\P{^Ll} \\pL\n\t\t\"notunicodecat\": y, // \\P{Ll} \\p{^Ll} \\PL\n\t\t\"unicodescript\": y, // \\p{Cherokee} \\P{^Cherokee}\n\t\t\"notunicodescript\": y, // \\P{Cherokee} \\p{^Cherokee}\n\t\t\"posixcharclass\": y, // [[:alpha:]]\n\t\t// not in supported flavors:\t\"posixcollseq\": y, // [[.foo.]] // this is recognized by the lexer, currently returns \"notsupported\" error\n\t\t// not in supported flavors:\t\"unicodeblock\": y, // \\p{InThai} \\p{IsThai} and NOT \\P\n\t\t// not in supported flavors:\t\"subtract\": y, // [base-[subtract]]\n\t\t// not in supported flavors:\t\"intersect\": y, // [base&&[intersect]]\n\t\t\n\t\t// esc:\n\t\t// also in escCharCodes and escCharTypes\n\t\t\"escoctal\": y, // \\11\n\t\t\"escunicodeu\": y, // \\uFFFF\n\t\t\"escunicodeub\": y, // \\u{00A9}\n\t\t\"escunicodexb\": y, // \\x{00A9}\n\t\t\"escsequence\": y, // \\Q...\\E\n\t\t\"eschexadecimal\": y, // \\xFF\n\t\t\"esccontrolchar\": y, // \\cA\n\t\t\"escoctalo\": y, // \\o{377} // resolved to escoctal in lexer, no docs required\n\t\t\"escchar\": y, // \\m (unrecognized escapes) // no reference documentation required\n\t\t\n\t\t// group:\n\t\t\"group\": y, // (foo)\n\t\t\"groupclose\": y, // )\n\t\t\"noncapgroup\": y, // (?:foo)\n\t\t\"namedgroup\": y, // (?P<name>foo) (?<name>foo) (?'name'foo)\n\t\t\"atomic\": y, // (?>foo|bar)\n\t\t\"define\": y, // (?(DEFINE)foo)\n\t\t\"branchreset\": y, // (?|(a)|(b))\n\t\t\n\t\t// lookaround:\n\t\t\"poslookbehind\" : y, // (?<=foo)\n\t\t\"neglookbehind\": y, // (?<!foo)\n\t\t\"poslookahead\": y, // (?=foo)\n\t\t\"neglookahead\": y, // (?!foo)\n\t\t\n\t\t// ref:\n\t\t\"namedref\": y, // \\k<name> \\k'name' \\k{name} (?P=name)  \\g{name}\n\t\t\"numref\": y, // \\1\n\t\t\"extnumref\": y, // \\g{-1} \\g{+1} \\g{1} \\g1 \\g-1\n\t\t\"recursion\": y, // (?R) (?0) \\g<0> \\g'0'\n\t\t\"numsubroutine\": y, // \\g<1> \\g'-1' (?1) (?-1)\n\t\t\"namedsubroutine\": y, // \\g<name> \\g'name' (?&name) (?P>name)\n\t\t\n\t\t// quantifiers:\n\t\t// also in specialChars\n\t\t\"quant\": y, // {1,2}\n\t\t\"possessive\": y, // ++\n\t\t\"lazy\": y, // ?\n\t\t\n\t\t// special:\n\t\t\"conditional\": y, // (?(?=if)then|else)\n\t\t\"condition\": y, // (?=if) any lookaround\n\t\t\"conditionalelse\": y, // |\n\t\t\"conditionalgroup\": y, // (?(1)a|b) (?(-1)a|b) (?(name)a|b)\n\t\t\"mode\": y, // (?i-x) see modes above\n\t\t\"comment\": y, // (?#comment)\n\n\t\t// meta:\n\t\t\"matchanyset\": y // [\\s\\S]\n\t},\n\t\n\tsubstTokens: {\n\t\t// named references aren't supported in JS or PCRE / PHP\n\t\t\"subst_$esc\": y, // $$\n\t\t\"subst_$&match\": y, // $&\n\t\t\"subst_$before\": y, // $`\n\t\t\"subst_$after\": y, // $'\n\t\t\"subst_$group\": y, // $1 $99 // resolved to subst_group in lexer, no docs required\n\t\t\"subst_$bgroup\": y, // ${1} ${99} // resolved to subst_group in lexer, no docs required\n\t\t\"subst_bsgroup\": y, // \\1 \\99 // resolved to subst_group in lexer, no docs required\n\t\t\"subst_group\": y, // $1 \\1 \\{1} // combined in docs, not used by lexer\n\t\t\"subst_0match\": y, // $0 \\0 \\{0}\n\t\t\n\t\t// this isn't a feature of the engine, but of RegExr:\n\t\t\"subst_esc\": y // \\n \\r \\u1234\n\t},\n\t\n\tconfig: {\n\t\t\"forwardref\": y, // \\1(a)\n\t\t\"nestedref\": y, // (\\1a|b)+\n\t\t\"ctrlcodeerr\": y, // does \\c error? (vs decompose)\n\t\t\"reftooctalalways\": y, // does a single digit reference \\1 become an octal? (vs remain an unmatched ref)\n\t\t\"substdecomposeref\": y, // will a subst reference decompose? (ex. \\3 becomes \"\\\" & \"3\" if < 3 groups)\n\t\t\"looseesc\": y, // should unrecognized escape sequences match the character (ex. \\u could match \"u\") // disabled when `u` flag is set\n\t\t\"unicodenegated\": y, // \\p{^etc}\"\n\t\t\"namedgroupalt\": y, // if false, only support (?<name>foo)\n\t},\n\t\n\tdocs: {\n\t\t// for example:\n\t\t//possessive: {desc: \"+This will be appended to the existing entry.\" },\n\t\t//namedgroup: {tip: \"This will overwrite the existing entry.\" }\n\t}\n};\n\nexport default core;\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/*\nThe PCRE profile is almost a straight copy of the core profile.\n*/\nlet y=true, n=false;\n\nlet pcre = {\n\tid: \"pcre\",\n\tlabel: \"PCRE\",\n\tbrowser: false,\n\t\n\tflags: {\n\t\t\"u\": n,\n\t\t\"y\": n\n\t},\n\t\n\tbadEscChars: \"uUlLN\".split(\"\").reduce((o, c) => { o[c] = y; return o}, {}),\n\n\tescCharCodes: {\n\t\t\"v\": n // vertical tab // PCRE support \\v as vertical whitespace\n\t},\n\t\n\ttokens: {\n\t\t\"escunicodeu\": n, // \\uFFFF\n\t\t\"escunicodeub\": n, // \\u{00A9}\n\t\t// octalo PCRE 8.34+\n\t},\n\t\n\tsubstTokens: {\n\t\t\"subst_$esc\": n, // $$\n\t\t\"subst_$&match\": n, // $&\n\t\t\"subst_$before\": n, // $`\n\t\t\"subst_$after\": n // $'\n\t},\n\t\n\tconfig: {\n\t\t\"reftooctalalways\": n, // does a single digit reference \\1 become an octal? (vs remain an unmatched ref)\n\t\t\"substdecomposeref\": n, // will a subst reference decompose? (ex. \\3 becomes \"\\\" & \"3\" if < 3 groups)\n\t\t\"looseesc\": n // should unrecognized escape sequences match the character (ex. \\u could match \"u\") // disabled when `u` flag is set\n\t},\n\t\n\tdocs: {\n\t\t\"escoctal\":{ext:\"+<p>The syntax <code>\\\\o{FFF}</code> is also supported.</p>\"},\n\t\t\"numref\":{\n\t\t\text:\"<p>There are multiple syntaxes for this feature: <code>\\\\1</code> <code>\\\\g1</code> <code>\\\\g{1}</code>.</p>\"+\n\t\t\t\t\"<p>The latter syntaxes support relative values preceded by <code>+</code> or <code>-</code>. For example <code>\\\\g-1</code> would match the group preceding the reference.</p>\"\n\t\t},\n\t\t\"lazy\": { ext:\"+<p>This behaviour is reversed by the ungreedy (<code>U</code>) flag/modifier.</p>\" }\n\t}\n};\n\nexport default pcre;","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/*\nThe javascript profile disables a large number of features.\n\nNote that JS warnings are currently added in addJSWarnings in the ExpresssionLexer.\n*/\n\nlet y=true, n=false;\nfunction test(expr, flag) { try { return new RegExp(expr, flag) && undefined; } catch (e) { return n; } }\nfunction testFlag(flag) { return test(\".\", flag); }\nlet unicodeFlag = testFlag(\"u\");\nlet stickyFlag = testFlag(\"y\");\nlet dotallFlag = testFlag(\"s\");\nlet lookbehind = test(\"(?<=A)\");\nlet namedgroup = test(\"(?<A>B)\");\nlet unicodecat = test(\"\\\\p{Ll}\", \"u\"); // disabled when `u` flag is not set\n\n\nlet javascript = {\n\tid: \"js\",\n\tlabel: \"JavaScript\",\n\tbrowser: true,\n\t\n\tflags: {\n\t\t\"s\": dotallFlag, // warning\n\t\t\"x\": n,\n\t\t\"u\": unicodeFlag, // warning\n\t\t\"y\": stickyFlag, // warning\n\t\t\"U\": n\n\t},\n\n\tescCharCodes: {\n\t\t\"a\": n, // bell\n\t\t\"e\": n  // escape\n\t},\n\n\tescCharTypes: {\n\t\t\"A\": n, // bos\n\t\t\"G\": n, // prevmatchend\n\t\t\"h\": n, // hwhitespace\n\t\t\"H\": n, // nothwhitespace\n\t\t\"K\": n, // keepout\n\t\t\"N\": n, // notlinebreak\n\t\t\"R\": n, // newline\n\t\t\"v\": n, // vwhitespace\n\t\t\"V\": n, // notvwhitespace\n\t\t\"X\": n, // unicodegrapheme\n\t\t\"Z\": n, // eos\n\t\t\"z\": n  // abseos\n\t},\n\n\tunicodeScripts: unicodecat,\n\n\tunicodeCategories: unicodecat,\n\n\tposixCharClasses: n,\n\n\tmodes: n,\n\n\ttokens: {\n\t\t// classes:\n\t\t// also in escCharSpecials and specialChars\n\t\t\"unicodecat\": unicodecat, // \\p{Ll} \\P{^Ll} \\pL\n\t\t\"notunicodecat\": unicodecat, // \\P{Ll} \\p{^Ll} \\PL\n\t\t\"unicodescript\": unicodecat, // \\p{Cherokee} \\P{^Cherokee}\n\t\t\"notunicodescript\": unicodecat, // \\P{Cherokee} \\p{^Cherokee}\n\t\t\"posixcharclass\": n, // [[:alpha:]]\n\n\t\t// esc:\n\t\t// also in escCharCodes and escCharSpecials\n\t\t\"escunicodeub\": unicodeFlag, // \\u{00A9}\n\t\t\"escunicodexb\": n, // \\x{00A9}\n\t\t\"escsequence\": n, // \\Q...\\E\n\t\t\"escoctalo\": n, // \\o{377}\n\n\t\t// group:\n\t\t\"namedgroup\": namedgroup, // (?P<name>foo) (?<name>foo) (?'name'foo)\n\t\t\"atomic\": n, // (?>foo|bar)\n\t\t\"define\": n, // (?(DEFINE)foo)\n\t\t\"branchreset\": n, // (?|(a)|(b))\n\n\t\t// lookaround:\n\t\t\"poslookbehind\": lookbehind, // (?<=foo) // warning\n\t\t\"neglookbehind\": lookbehind, // (?<!foo) // warning\n\n\t\t// ref:\n\t\t\"namedref\": n, // \\k<name> \\k'name' \\k{name} (?P=name)  \\g{name}\n\t\t\"extnumref\": n, // \\g{-1} \\g{+1} \\g{1} \\g1 \\g-1\n\t\t\"recursion\": n, // (?R) (?0) \\g<0> \\g'0'\n\t\t\"numsubroutine\": n, // \\g<1> \\g'-1' (?1) (?-1)\n\t\t\"namedsubroutine\": n, // \\g<name> \\g'name' (?&name) (?P>name)\n\n\t\t// quantifiers:\n\t\t// also in specialChars\n\t\t\"possessive\": n,\n\n\t\t// special:\n\t\t\"conditional\": n, // (?(?=if)then|else)\n\t\t\"conditionalif\": n, // (?=if) any lookaround\n\t\t\"conditionalelse\": n, // |\n\t\t\"conditionalgroup\": n, // (?(1)a|b) (?(-1)a|b) (?(name)a|b)\n\t\t\"mode\": n, // (?i-x) see modes above\n\t\t\"comment\": n // (?#comment)\n\t},\n\n\tconfig: {\n\t\t\"forwardref\": n, // \\1(a)\n\t\t\"nestedref\": n, // (\\1a|b)+\n\t\t\"ctrlcodeerr\": n, // does \\c error, or decompose?\n\t\t\"unicodenegated\": n, // \\p{^etc}\n\t\t\"namedgroupalt\": n, // if false, only support (?<name>foo)\n\t},\n\t\n\tsubstTokens: {\n\t\t\"subst_0match\": n, // $0 \\0 \\{0}\n\t\t\"subst_$bgroup\": n, // ${1} ${99}\n\t\t\"subst_bsgroup\": n // \\1 \\99\n\t},\n\t\n\tdocs: {\n\t\t\"subst_group\": {ext:\"\"}, // remove other syntaxes.\n\t\t\"namedgroup\": {ext:\"\"}, // remove other syntaxes.\n\t\t\"unicodecat\": {\n\t\t\text: \"<p>Requires the <code>u</code> flag.</p>\"+\n\t\t\t\"<p>For a list of values, see this <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes'>MDN page</a>.</p>\"\n\t\t},\n\t\t// notunicodecat, unicodescript, notunicodescript are copied from unicodecat below.\n\t}\n};\n\njavascript.docs.notunicodecat = javascript.docs.unicodescript = javascript.docs.notunicodescript = javascript.docs.unicodecat;\n\nexport default javascript;\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport core from \"./core\";\nimport pcre from \"./pcre\";\nimport js from \"./javascript\";\n\nlet profiles = {core};\nexport default profiles;\n\nprofiles.pcre = merge(core, pcre);\nprofiles.js = merge(core, js);\n\nfunction merge(p1, p2) {\n\t// merges p1 into p2, essentially just a simple deep copy without array support.\n\tfor (let n in p1) {\n\t\tif (p2[n] === false) { continue; }\n\t\telse if (typeof p1[n] === \"object\") { p2[n] = merge(p1[n], p2[n] || {}); }\n\t\telse if (p2[n] === undefined) { p2[n] = p1[n]; }\n\t}\n\treturn p2;\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport CMUtils from \"../utils/CMUtils\";\nimport Utils from \"../utils/Utils\";\nimport Track from \"../utils/Track\";\n\nimport List from \"../controls/List\";\nimport ExpressionLexer from \"../ExpressionLexer\";\nimport ExpressionHighlighter from \"./ExpressionHighlighter\";\nimport ExpressionHover from \"./ExpressionHover\";\nimport profiles from \"../profiles/profiles\";\nimport EventDispatcher from \"../events/EventDispatcher\"\n\nimport app from \"../app\";\n\nexport default class Expression extends EventDispatcher {\n\tconstructor (el) {\n\t\tsuper();\n\t\tthis.el = el;\n\t\tthis.delim = \"/\";\n\t\tthis.lexer = new ExpressionLexer();\n\t\t\n\t\tthis._initUI(el);\n\t\tapp.flavor.on(\"change\", ()=> this._onFlavorChange());\n\t\tthis._onFlavorChange();\n\t}\n\t\n\tset value(expression) {\n\t\tlet regex = Utils.decomposeRegEx(expression || Expression.DEFAULT_EXPRESSION, this.delim);\n\t\tthis.pattern = regex.source;\n\t\tthis.flags = regex.flags;\n\t}\n\t\n\tget value() {\n\t\treturn this.editor.getValue();\n\t}\n\t\n\tset pattern(pattern) {\n\t\tlet index = this.editor.getValue().lastIndexOf(this.delim);\n\t\tthis.editor.replaceRange(pattern, {line: 0, ch: 1}, {line: 0, ch: index});\n\t\tthis._deferUpdate();\n\t}\n\t\n\tget pattern() {\n\t\treturn Utils.decomposeRegEx(this.editor.getValue(), this.delim).source;\n\t}\n\t\n\tset flags(flags) {\n\t\tflags = app.flavor.validateFlagsStr(flags);\n\t\tlet str = this.editor.getValue(), index = str.lastIndexOf(this.delim);\n\t\tthis.editor.replaceRange(flags, {line: 0, ch: index + 1}, {line: 0, ch: str.length }); // this doesn't work if readOnly is false.\n\t}\n\t\n\tget flags() {\n\t\treturn Utils.decomposeRegEx(this.editor.getValue(), this.delim).flags;\n\t}\n\t\n\tget token() {\n\t\treturn this.lexer.token;\n\t}\n\t\n\tshowFlags() {\n\t\tthis.flagsList.selected = this.flags.split(\"\");\n\t\tapp.tooltip.toggle.toggleOn(\"flags\", this.flagsEl, this.flagsBtn, true, -2);\n\t}\n\n\ttoggleFlag(s) {\n\t\tlet flags = this.flags, i = flags.indexOf(s);\n\t\tthis.flags = i>=0 ? flags.replace(s, \"\") : flags+s;\n\t}\n\t\n\tshowFlavors() {\n\t\tapp.tooltip.toggle.toggleOn(\"flavor\", this.flavorEl, this.flavorBtn, true, -2)\n\t}\n\t\n\tinsert(str) {\n\t\tthis.editor.replaceSelection(str, \"end\");\n\t}\n\n\tselectAll() {\n\t\tCMUtils.selectAll(this.editor);\n\t}\n\t\n// private methods:\n\t_initUI(el) {\n\t\tthis.editorEl = $.query(\"> .editor\", el);\n\t\tlet editor = this.editor = CMUtils.create(this.editorEl, {\n\t\t\tautofocus: true,\n\t\t\tmaxLength: 2500,\n\t\t\tsingleLine: true\n\t\t}, \"100%\", \"100%\");\n\t\t\n\t\teditor.on(\"mousedown\", (cm, evt)=> this._onEditorMouseDown(cm, evt));\n\t\teditor.on(\"change\", (cm, evt)=> this._onEditorChange(cm, evt));\n\t\teditor.on(\"keydown\", (cm, evt)=> this._onEditorKeyDown(cm, evt));\n\t\t// hacky method to disable overwrite mode on expressions to avoid overwriting flags:\n\t\teditor.toggleOverwrite = ()=>{};\n\t\t\n\t\tthis.errorEl = $.query(\".icon.alert\", this.editorEl);\n\t\tthis.errorEl.addEventListener(\"mouseenter\", (evt)=>this._onMouseError(evt));\n\t\tthis.errorEl.addEventListener(\"mouseleave\", (evt)=>this._onMouseError(evt));\n\t\t\n\t\tthis.highlighter = new ExpressionHighlighter(editor);\n\t\tthis.hover = new ExpressionHover(editor, this.highlighter);\n\t\t\n\t\tthis._setInitialExpression();\n\t\tthis._initTooltips(el);\n\t\tthis.value = Expression.DEFAULT_EXPRESSION;\n\t}\n\t\n\t_setInitialExpression() {\n\t\tlet editor = this.editor;\n\t\teditor.setValue(\"/./g\");\n\t\t\n\t\t// leading /\n\t\teditor.getDoc().markText({line: 0, ch: 0}, {\n\t\t\tline: 0,\n\t\t\tch: 1\n\t\t}, {\n\t\t\tclassName: \"exp-decorator\",\n\t\t\treadOnly: true,\n\t\t\tatomic: true,\n\t\t\tinclusiveLeft: true\n\t\t});\n\t\t\n\t\t// trailing /g\n\t\teditor.getDoc().markText({line: 0, ch: 2}, {\n\t\t\tline: 0,\n\t\t\tch: 4\n\t\t}, {\n\t\t\tclassName: \"exp-decorator\",\n\t\t\treadOnly: false,\n\t\t\tatomic: true,\n\t\t\tinclusiveRight: true\n\t\t});\n\t\tthis._deferUpdate();\n\t}\n\t\n\t_deferUpdate() {\n\t\tUtils.defer(()=>this._update(), \"Expression._update\");\n\t}\n\t\n\t_update() {\n\t\tlet expr = this.editor.getValue();\n\t\tthis.lexer.profile = app.flavor.profile;\n\t\tlet token = this.lexer.parse(expr);\n\t\t$.toggleClass(this.editorEl, \"error\", !!this.lexer.errors.length);\n\t\tthis.hover.token = token;\n\t\tthis.highlighter.draw(token);\n\t\tthis.dispatchEvent(\"change\");\n\t}\n\t\n\t_initTooltips(el) {\n\t\tconst template = $.template`<svg class=\"inline check icon\"><use xlink:href=\"#check\"></use></svg> ${\"label\"}`;\n\t\tlet flavorData = app.flavor.profiles.map((o)=>({id:o.id, label:o.label+\" (\"+(o.browser?\"Browser\":\"Server\")+\")\"}));\n\t\t\n\t\tthis.flavorBtn = $.query(\"section.expression .button.flavor\", el);\n\t\tthis.flavorEl = $.query(\"#library #tooltip-flavor\");\n\t\tthis.flavorList = new List($.query(\"ul.list\", this.flavorEl), {data:flavorData, template});\n\t\tthis.flavorList.on(\"change\", ()=>this._onFlavorListChange());\n\t\tthis.flavorBtn.addEventListener(\"click\", (evt) => this.showFlavors());\n\t\t$.query(\".icon.help\", this.flavorEl).addEventListener(\"click\", ()=> app.sidebar.goto(\"engine\"));\n\t\t\n\t\tthis.flagsBtn = $.query(\"section.expression .button.flags\", el);\n\t\tthis.flagsEl = $.query(\"#library #tooltip-flags\");\n\t\tthis.flagsList = new List($.query(\"ul.list\", this.flagsEl), {data:[], multi:true, template});\n\t\tthis.flagsList.on(\"change\", ()=> this._onFlagListChange());\n\t\tthis.flagsBtn.addEventListener(\"click\", (evt) => this.showFlags());\n\t\t$.query(\".icon.help\", this.flagsEl).addEventListener(\"click\", ()=> app.sidebar.goto(\"flags\"));\n\t}\n\n// event handlers:\n\t_onFlavorListChange() {\n\t\tapp.tooltip.toggle.hide(\"flavor\");\n\t\tapp.flavor.value = this.flavorList.selected;\n\t\tTrack.page(\"flavor/\"+this.flavorList.selected);\n\t}\n\t\n\t_onFlagListChange() {\n\t\tlet sel = this.flagsList.selected;\n\t\tthis.flags = sel ? sel.join(\"\") : \"\";\n\t\tTrack.event(\"set_flags\", \"engagement\", this.flags);\n\t}\n\t\n\t_onFlavorChange() {\n\t\tlet flavor = app.flavor, profile = flavor.profile;\n\t\tthis.flavorList.selected = profile.id;\n\t\t$.query(\"> .label\", this.flavorBtn).innerText = profile.label;\n\t\t\n\t\tlet supported = Expression.FLAGS.split(\"\").filter((n)=>!!profile.flags[n]);\n\t\tlet labels = Expression.FLAG_LABELS;\n\t\tthis.flagsList.data = supported.map((n)=>({id:n, label:labels[n]}));\n\t\tthis.flags = this.flags.split(\"\").filter((n)=>!!profile.flags[n]).join(\"\");\n\t}\n\t\n\t_onEditorMouseDown(cm, evt) {\n\t\t// offset by half a character to make accidental clicks less likely:\n\t\tlet index = CMUtils.getCharIndexAt(cm, evt.clientX - cm.defaultCharWidth() * 0.6, evt.clientY);\n\t\tif (index >= cm.getValue().lastIndexOf(this.delim)) {\n\t\t\tthis.showFlags();\n\t\t}\n\t}\n\t\t\n\t\n\t_onEditorChange(cm, evt) {\n\t\t// catches pasting full expressions in.\n\t\t// TODO: will need to be updated to work with other delimeters\n\t\tthis._deferUpdate();\n\t\tlet str = evt.text[0];\n\t\tif (str.length < 3 || !str.match(/^\\/.+[^\\\\]\\/[a-z]*$/ig) || evt.from.ch !== 1 || evt.to.ch != 1 + evt.removed[0].length) {\n\t\t\t// not pasting a full expression.\n\t\t\treturn;\n\t\t}\n\t\tthis.value = str;\n\t}\n\t\n\t_onEditorKeyDown(cm, evt) {\n\t\t// Ctrl or Command + D by default, will delete the expression and the flags field, Re: https://github.com/gskinner/regexr/issues/74\n\t\t// So we just manually reset to nothing here.\n\t\tif ((evt.ctrlKey || evt.metaKey) && evt.keyCode == 68) {\n\t\t\tevt.preventDefault();\n\t\t\tthis.pattern = \"\";\n\t\t}\n\t}\n\t\n\t_onMouseError(evt) {\n\t\tlet tt = app.tooltip.hover, errs = this.lexer.errors;\n\t\tif (evt.type === \"mouseleave\") { return tt.hide(\"error\"); }\n\t\tif (errs.length === 0) { return; }\n\t\tlet err = errs.length === 1 && errs[0].error;\n\t\tlet str = err ? app.reference.getError(err, errs[0]) : \"Problems in the Expression are underlined in <span class='exp-error'>red</span>. Roll over them for details.\";\n\t\tlet label = err && err.warning ? \"WARNING\" : \"PARSE ERROR\";\n\t\ttt.showOn(\"error\", \"<span class='error'>\"+label+\":</span> \"+str, this.errorEl);\n\t}\n\t\n}\n\nExpression.DEFAULT_EXPRESSION = \"/([A-Z])\\\\w+/g\";\n\nExpression.FLAGS = \"gimsuxyU\"; // for flag order\nExpression.FLAG_LABELS = {\n\t\"g\": \"<em>g</em>lobal\",\n\t\"i\": \"case <em>i</em>nsensitive\",\n\t\"m\": \"<em>m</em>ultiline\",\n\t\"s\": \"<em>s</em>ingle line (dotall)\",\n\t\"u\": \"<em>u</em>nicode\",\n\t\"x\": \"e<em>x</em>tended\",\n\t\"y\": \"stick<em>y</em>\",\n\t\"U\": \"<em>U</em>ngreedy\"\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nlet UID = {\n\t_next: 0,\n\tget id() { return Date.now() + \"_\" + this._next++; },\n\tassign(list, force=false) {\n\t\tlist.forEach((o) => o.id = o.id == null || force ? this.id : o.id );\n\t}\n};\nexport default UID;\n\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Utils from \"../utils/Utils\";\n\nexport default class TextHighlighter {\n\tconstructor(editor, canvas, fill = \"#6CF\", stroke=\"#888\") {\n\t\tthis.lineSpacing = 2;\n\t\tthis.capWidth = 4;\n\t\tthis.lastBottom = -1;\n\t\tthis.lastRight = -1;\n\t\tthis.editor = editor;\n\t\tthis.canvas = canvas;\n\t\tthis.fill = fill;\n\t\tthis.stroke = stroke;\n\t}\n\t\n\tset matches(val) {\n\t\tthis._matches = val;\n\t\tthis._deferUpdate();\n\t}\n\t\n\tset hoverMatch(val) {\n\t\tthis._hoverMatch = val;\n\t\tthis._deferUpdate();\n\t}\n\t\n\tset selectedMatch(val) {\n\t\tthis._selectedMatch = val;\n\t\tthis._deferUpdate();\n\t}\n\n\tredraw() {\n\t\tthis._update();\n\t}\n\t\n\t_deferUpdate() {\n\t\tUtils.defer(()=>this._update(), \"TextHighlighter._update\");\n\t}\n\t\n\t_update() {\n\t\tthis.clear();\n\t\tlet matches = this._matches, hoverMatch = this._hoverMatch, selectedMatch = this._selectedMatch;\n\t\tif (!matches || !matches.length) { return; }\n\t\t\n\t\n\t\tlet cm = this.editor, doc = cm.getDoc()\n\t\tlet ctx = this.canvas.getContext(\"2d\");\n\t\tctx.fillStyle = this.fill;\n\t\tctx.strokeStyle = this.stroke;\n\t\tctx.lineWidth = 2;\n\t\n\t\t// find the range of the visible text:\n\t\tlet scroll = cm.getScrollInfo();\n\t\tlet top = cm.indexFromPos(cm.coordsChar({\n\t\t\tleft: 0,\n\t\t\ttop: scroll.top\n\t\t}, \"local\"));\n\t\tlet bottom = cm.indexFromPos(cm.coordsChar({\n\t\t\tleft: scroll.clientWidth,\n\t\t\ttop: scroll.top + scroll.clientHeight\n\t\t}, \"local\"));\n\t\n\t\tfor (let i = 0, l = matches.length; i < l; i++) {\n\t\t\tlet match = matches[i], start = match.i, end = match.i+match.l-1;\n\t\t\t\n\t\t\tif (start > bottom) { break; } // all done.\n\t\t\tif (end < top || end < start) { continue; } // not visible, so don't mark.\n\t\t\tlet startPos = match.startPos || (match.startPos = doc.posFromIndex(start));\n\t\t\tlet endPos = match.endPos || (match.endPos = doc.posFromIndex(end));\n\t\t\tlet emphasis = match === hoverMatch || match === selectedMatch;\n\t\n\t\t\tlet startRect = cm.charCoords(startPos, \"local\"), endRect = cm.charCoords(endPos, \"local\");\n\t\n\t\t\tif (startRect.bottom === endRect.bottom) {\n\t\t\t\tthis.drawHighlight(ctx, startRect.left, startRect.top, endRect.right, endRect.bottom, scroll.top, false, false, emphasis);\n\t\t\t} else {\n\t\t\t\tlet lw = cm.getScrollInfo().width, lh = cm.defaultTextHeight();\n\t\t\t\t// render first line:\n\t\t\t\tthis.drawHighlight(ctx, startRect.left, startRect.top, lw - 2, startRect.bottom, scroll.top, false, true, emphasis); // startRect.top+lh\n\t\t\t\t// render lines in between:\n\t\t\t\tlet y = startRect.top;\n\t\t\t\twhile ((y += lh) < endRect.top - 1) { // the -1 is due to fractional issues on FF\n\t\t\t\t\tthis.drawHighlight(ctx, 0, y, lw - 2, y + startRect.bottom - startRect.top, scroll.top, true, true, emphasis); // lh\n\t\t\t\t}\n\t\t\t\t// render last line:\n\t\t\t\tthis.drawHighlight(ctx, 0, endRect.top, endRect.right, endRect.bottom, scroll.top, true, false, emphasis);\n\t\t\t\t// CMUtils.getEOLPos(this.sourceCM, startPos);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tdrawHighlight(ctx, left, top, right, bottom, scrollY, startCap, endCap, emphasis) {\n\t\tlet capW = this.capWidth;\n\t\n\t\tif (right < 0 || left + 1 >= right) { return; } // weird bug in CodeMirror occasionally returns negative values\n\t\tleft = left + 0.5 | 0;\n\t\tright = right + 0.5 | 0;\n\t\ttop = (top + 0.5 | 0) + this.lineSpacing;\n\t\tbottom = bottom + 0.5 | 0;\n\t\n\t\tif (top + 1 > this.lastBottom) {\n\t\t\tthis.lastBottom = bottom;\n\t\t}\n\t\telse if (left < this.lastRight) {\n\t\t\tleft = this.lastRight;\n\t\t}\n\t\tthis.lastRight = right;\n\t\t\n\t\tlet a = ctx.globalAlpha;\n\t\tif (startCap) {\n\t\t\tctx.globalAlpha = a * 0.5;\n\t\t\tctx.fillRect(left + 1 | 0, top - scrollY, capW + 1, bottom - top);\n\t\t\tleft += capW;\n\t\t}\n\t\tif (endCap) {\n\t\t\tctx.globalAlpha = a * 0.5;\n\t\t\tctx.fillRect(right - capW - 1 | 0, top - scrollY, capW + 1, bottom - top);\n\t\t\tright -= capW;\n\t\t}\n\t\tctx.globalAlpha = a;\n\t\tctx.fillRect(left + 1, top - scrollY, right - left - 1, bottom - top);\n\n\t\tif (emphasis) {\n\t\t\tctx.strokeRect(left + 1, top - scrollY, right - left - 1, bottom - top);\n\t\t}\n\t}\n\t\n\tclear() {\n\t\tthis.canvas.width = this.canvas.width;\n\t\tthis.lastBottom = -1;\n\t}\n}\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport CMUtils from \"../utils/CMUtils\";\nimport $ from \"../utils/DOMUtils\";\n\nimport app from \"../app\";\n\nexport default class TextHover {\n\tconstructor (editor, highlighter) {\n\t\tthis.editor = editor;\n\t\tthis.highlighter = highlighter;\n\t\tthis._matches = this._x = null;\n\t\t\n\t\tlet o = editor.display.lineDiv;\n\t\to.addEventListener(\"mousemove\", (evt)=> this._handleMouseMove(evt));\n\t\to.addEventListener(\"mouseout\", (evt)=> this._handleMouseOut(evt));\n\t}\n\n\tset matches(val) {\n\t\tthis._matches = val;\n\t\tthis._update();\n\t}\n\n// private methods:\n\t_handleMouseMove(evt) {\n\t\tthis._x = evt.clientX;\n\t\tthis._y = evt.clientY + window.pageYOffset;\n\t\tthis._update();\n\t}\n\t\n\t_handleMouseOut(evt) {\n\t\tthis._x = null;\n\t\tthis._update();\n\t}\n\n\t_update() {\n\t\tif (this._x === null) {\n\t\t\tthis.highlighter.hoverMatch = null;\n\t\t\tapp.tooltip.hover.hide(\"TextHover\");\n\t\t\treturn;\n\t\t}\n\t\tlet index, cm = this.editor, match, matches = this._matches, x = this._x, y = this._y;\n\t\t\n\t\tif (matches && matches.length && (index = CMUtils.getCharIndexAt(cm, x, y)) != null) {\n\t\t\tmatch = this.highlighter.hoverMatch = app.text.getMatchAt(index);\n\t\t}\n\t\tlet rect = (index != null) && CMUtils.getCharRect(cm, index);\n\t\tif (rect) { rect.right = rect.left = x; }\n\t\tlet tip = app.reference.tipForMatch(match, cm.getValue());\n\t\tif (tip) {\n\t\t\tlet div = $.create(\"div\", \"texthover\", tip);\n\t\t\tapp.tooltip.hover.show(\"TextHover\", div, x, rect.bottom, true, 0);\n\t\t}\n\t\t\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/*\nTODO:\nAdd analytics.\nSave / load - don't forget to assign IDs on load.\nServer solve.\nIssue with CM not updating in Text when loading pattern in Test mode.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport Utils from \"../utils/Utils\";\nimport UID from \"../utils/UID\";\nimport CMUtils from \"../utils/CMUtils\";\nimport TextHighlighter from \"./TextHighlighter\";\nimport TextHover from \"./TextHover\";\nimport EventDispatcher from \"../events/EventDispatcher\";\nimport List from \"../controls/List\";\nimport Track from \"../utils/Track\";\n\nimport app from \"../app\";\n\nexport default class Text extends EventDispatcher {\n\tconstructor (el) {\n\t\tsuper();\n\t\tthis.el = el;\n\t\tthis._initUI(el);\n\t\tthis._initTestUI(el);\n\t\tapp.on(\"result\", () => this._setResult(app.result));\n\t\tapp.theme.on(\"change\", () => this._handleThemeChange());\n\t}\n\t\n\tset value(val) {\n\t\tthis.editor.setValue(val || this.defaultText);\n\t}\n\t\n\tget value() {\n\t\treturn this.editor.getValue();\n\t}\n\n\tset tests(val) {\n\t\tif (!(val instanceof Array)) {\n\t\t\tval = [];\n\t\t\t$.removeClass(this.testsEl, \"tests-added\");\n\t\t}\n\t\tthis._tests = this.testList.data = val;\n\t\tthis._testMatches = null;\n\t\tthis._reselectTest();\n\t}\n\n\tget tests() {\n\t\treturn this._tests;\n\t}\n\n\tset mode(val) {\n\t\tif (val === this.mode) { return; }\n\t\tthis.modeList.selected = val || \"text\";\n\t\tthis._handleModeChange();\n\t}\n\n\tget mode() {\n\t\treturn this.modeList.selected;\n\t}\n\t\n\tget selectedMatch() {\n\t\tlet cm = this.editor;\n\t\treturn this.getMatchAt(cm.indexFromPos(cm.getCursor()), true);\n\t}\n\t\n\tgetMatchValue(match) {\n\t\t// this also works for groups.\n\t\treturn match ? this.value.substr(match.i, match.l) : null;\n\t}\n\t\n\tgetMatchAt(index, inclusive) {\n\t\t// also used by TextHover\n\t\tlet match, offset=(inclusive ? -1 : 0), matches=this._result && this._result.matches;\n\t\tif (!matches) { return null; }\n\t\tfor (let i = 0, l = matches.length; i < l; i++) {\n\t\t\tmatch = matches[i];\n\t\t\tif (match.l+match.i-1 < index + offset) { continue; }\n\t\t\tif (match.i > index) { break; }\n\t\t\treturn match;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetEmptyTest() {\n\t\treturn {\n\t\t\tid: UID.id,\n\t\t\tname: \"\",\n\t\t\ttext: \"Enter your test text here.\",\n\t\t\ttype: \"any\"\n\t\t}\n\t}\n\t\n// private methods:\n\t_initUI(el) {\n\t\tthis.resultEl = $.query(\"> header .result\", el);\n\t\tthis.resultEl.addEventListener(\"mouseenter\", (evt)=>this._mouseResult(evt));\n\t\tthis.resultEl.addEventListener(\"mouseleave\", (evt)=>this._mouseResult(evt));\n\n\t\tthis.modeListEl = $.query(\"> header .modelist\", el);\n\t\tlet data = [\"Text\", \"Tests\"].map((val) => ({label:val, id:val.toLowerCase()}));\n\t\tthis.modeList = new List(this.modeListEl, {data});\n\t\tthis.modeList.on(\"change\", ()=> this._handleModeChange());\n\t\tthis.modeList.selected = \"text\";\n\t\t\n\t\tlet textEl = $.query(\".editor > .pad\", el);\n\t\tthis.defaultText = $.query(\"textarea\", textEl).value;\n\t\tlet editor = this.editor = CMUtils.create($.empty(textEl), {lineWrapping: true}, \"100%\", \"100%\");\n\t\teditor.setValue(this.defaultText);\n\t\t\n\t\teditor.on(\"change\", ()=> this._change());\n\t\teditor.on(\"scroll\", ()=> this._update());\n\t\teditor.on(\"cursorActivity\", () => this._updateSelected());\n\t\t\n\t\tlet detector = $.create(\"iframe\", \"resizedetector\", null, textEl), win = detector.contentWindow;\n\t\tlet canvas = this.canvas = $.create(\"canvas\", \"highlights\", null, textEl);\n\t\ttextEl.appendChild(editor.display.wrapper); // move the editor on top of the iframe & canvas.\n\n\t\twin.onresize = ()=> {\n\t\t\tlet w = win.innerWidth|0, h = win.innerHeight|0;\n\t\t\tthis._startResize();\n\t\t\tUtils.defer(() => this._handleResize(w, h), \"text_resize\", 250);\n\t\t};\n\t\twin.onresize();\n\t\t\n\t\tthis.highlighter = new TextHighlighter(editor, canvas, $.getCSSValue(\"match\", \"color\"), $.getCSSValue(\"selected-stroke\", \"color\"));\n\t\tthis.hover = new TextHover(editor, this.highlighter);\n\t}\n\n\t_handleThemeChange() {\n\t\tthis.highlighter.fill = $.getCSSValue(\"match\", \"color\");\n\t\tthis.highlighter.stroke = $.getCSSValue(\"selected-stroke\", \"color\");\n\t\tthis.highlighter.redraw();\n\t}\n\n\t_handleModeChange(evt) {\n\t\tthis.dispatchEvent(\"modechange\");\n\t\tif (this.mode === \"text\") { this.editor.refresh(); }\n\t\telse { $.addClass(this.el, \"tests-viewed\"); }\n\n\t\tTrack.page(\"mode/\"+this.mode);\n\t}\n\t\n\t_setResult(val) {\n\t\tthis._result = val;\n\t\tthis._testMatches = null;\n\n\t\tif (this.mode !== val.mode) { return; }\n\t\tif (val.mode === \"tests\") {\n\t\t\tthis._updateTests();\n\t\t} else { // mode === \"text\"\n\t\t\tthis._updateEmptyCount();\n\t\t\tthis._updateResult();\n\t\t\tthis._updateSelected();\n\t\t\tthis._deferUpdate();\n\t\t}\n\t}\n\t\n\t_deferUpdate() {\n\t\tUtils.defer(()=>this._update(), \"Text._update\");\n\t}\n\t\n\t_update() {\n\t\tlet result = this._result, matches = result && result.matches;\n\t\tif (result && result.mode === \"tests\") {\n\t\t\tthis._updateTests();\n\t\t} else { // mode === \"text\"\n\t\t\tthis.hover.matches = this.highlighter.matches = matches;\n\t\t}\n\t}\n\t\n\t_updateResult() {\n\t\tlet result = this._result, matches=result&&result.matches, l=matches&&matches.length, text;\n\t\t\n\t\tif (l && result && !result.error) {\n\t\t\ttext = l + \" match\" + (l>1?\"es\":\"\") + (this._emptyCount?\"*\":\"\");\n\t\t} else if (!result || !result.error) {\n\t\t\ttext = \"No match\";\n\t\t}\n\t\tthis._showResult(text);\n\t}\n\n\t_showResult(text, clss) {\n\t\tlet result = this._result, el = this.resultEl;\n\t\t$.removeClass(el, \"error warning matches pass fail\");\n\n\t\tif (result && result.error) {\n\t\t\tif (!text) { text = result.error.warning ? \"WARNING\" : \"ERROR\"; }\n\t\t\t$.addClass(el, \"error\");\n\t\t\tif (result.error.warning) { $.addClass(el, \"warning\"); }\n\t\t}\n\n\t\tif (clss) { $.addClass(el, clss); }\n\t\tel.innerHTML = text;\n\t\tif (result.time != null) {  el.innerHTML += \"<em> (\"+parseFloat(result.time).toFixed(1)+\"ms)</em>\"; }\n\t}\n\t\n\t_updateSelected() {\n\t\tlet match = this.selectedMatch;\n\t\tif (this.highlighter.selectedMatch === match) { return; }\n\t\tthis.highlighter.selectedMatch = match;\n\t\tthis.dispatchEvent(\"select\");\n\t}\n\t\n\t_change() {\n\t\tthis.dispatchEvent(\"change\");\n\t}\n\n\t_startResize() {\n\t\tlet canvas = this.canvas, style=canvas.style;\n\t\tstyle.visibility = \"hidden\";\n\t\tstyle.opacity = 0;\n\t\t// keeps it from causing scrollbars:\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\t\n\t_mouseResult(evt) {\n\t\tlet tt = app.tooltip.hover, res=this._result, err = res&&res.error, str=\"\";\n\t\tif (evt.type === \"mouseleave\") { return tt.hide(\"result\"); }\n\t\tif (err && !err.warning) {\n\t\t\tstr = \"<span class='error'>EXEC ERROR:</span> \" + this._errorText(err);\n\t\t} else {\n\t\t\tif (err && err.warning) {\n\t\t\t\tstr = \"<span class='error warning'>WARNING:</span> \"+ this._errorText(err) + \"<hr>\";\n\t\t\t}\n\t\t\tlet l = this._tests.length;\n\t\t\tif (this.mode === \"tests\") {\n\t\t\t\tif (this._tests.length === 0) {\n\t\t\t\t\tstr += \"Use the 'Add Test' button to create a new test.\";\n\t\t\t\t} else if (this._testFails) {\n\t\t\t\t\tstr += this._testFails+\" out of \"+l+\" tests failed.\";\n\t\t\t\t} else {\n\t\t\t\t\tstr += \"All \"+l+\" tests passed.\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstr += (l||\"No\")+\" match\"+(l>1?\"es\":\"\")+\" found in \"+this.value.length+\" characters\";\n\t\t\t\tstr += this._emptyCount  ? \", including \"+this._emptyCount+\" empty matches (* not displayed).\" : \".\";\n\t\t\t\tlet cm = this.editor, sel = cm.listSelections()[0], pos = sel.head;\n\t\t\t\tlet i0 = cm.indexFromPos(pos), i1=cm.indexFromPos(sel.anchor), range=Math.abs(i0-i1);\n\t\t\t\tstr += \"<hr>Insertion point: line \"+pos.line+\", col \"+pos.ch+\", index \"+i0;\n\t\t\t\tstr += (range>0 ? \" (\"+range+\" character\"+(range===1?\"\":\"s\")+\" selected)\" : \"\");\n\t\t\t}\n\t\t\t\n\t\t}\n\t\ttt.showOn(\"result\", str, this.resultEl, false, -2);\n\t}\n\n\t_updateEmptyCount() {\n\t\tlet result = this._result, matches = result && result.matches;\n\t\tthis._emptyCount = matches ? matches.reduce((v,o)=>v+(o.l?0:1),0) : 0;\n\t}\n\n\t_errorText(err) {\n\t\treturn err.message || app.reference.getError(err);\n\t}\n\t\n\t_handleResize(w, h) {\n\t\tlet canvas = this.canvas, style=canvas.style;\n\t\tstyle.visibility = style.opacity = \"\";\n\t\tcanvas.width = w;\n\t\tcanvas.height = h;\n\t\tthis.editor.refresh();\n\t\tthis._deferUpdate();\n\t}\n\n// Test mode:\n\t_initTestUI(el) {\n\t\tconst types = [\n\t\t\t{id:\"all\", label:\"Match Full\"},\n\t\t\t{id:\"any\", label:\"Match Any\"},\n\t\t\t// {id:\"start\", label:\"Match Start\"},\n\t\t\t{id:\"none\", label:\"Match None\"},\n\t\t];\n\t\tthis.typeLabels = types.reduce((o, t) => { o[t.id] = t.label; return o; }, {});\n\n\t\tthis.testsEl = $.query(\".tests\", el);\n\t\tthis.testItemEl = $.query(\"#library > #tests_item\");\n\t\tthis.testListEl = $.query(\".list\", this.testsEl);\n\t\tthis.testList = new List(this.testListEl, {template:(o) => this._testItemTemplate(o)});\n\t\tthis.testList.scrollEl = this.testsEl;\n\n\t\tthis.testList.on(\"change\", (evt) => this._handleTestChange(evt));\n\n\t\t$.on($.queryAll(\".button.add\", el), \"click\", ()=>this._addTest());\n\n\t\tconst template = $.template`<svg class=\"inline check icon\"><use xlink:href=\"#check\"></use></svg> ${\"label\"}`;\n\t\tthis.typesEl = $.query(\"#library #tooltip-testtypes\");\n\t\tthis.typesList = new List($.query(\"ul.list\", this.typesEl), {data:types, template});\n\t\tthis.typesList.on(\"change\", ()=> this._handleTypesChange());\n\n\t\tthis.tests = null;\n\t}\n\n\t_updateTests() {\n\t\tlet result = this._result;\n\t\tif (result.error) { return this._showResult(); }\n\n\t\tlet data = this._tests, l=data.length;\n\t\tif (!data || !l) { return this._showResult(\"No tests.\"); }\n\t\t\n\t\tlet matches = result.matches.reduce((o, t) => { o[t.id] = t; return o; }, {}), fails=0;\n\t\tfor (let i=0; i<l; i++) {\n\t\t\tlet test = data[i], match=matches[test.id], pass=false, el=this.testList.getEl(test.id);\n\t\t\tif (test.type === \"none\") {\n\t\t\t\tpass = (match.i == null);\n\t\t\t} else if (test.type === \"all\") {\n\t\t\t\tpass = (match.l === test.text.length);\n\t\t\t} else if (test.type === \"start\") {\n\t\t\t\tpass = (match.i === 0);\n\t\t\t} else { // any\n\t\t\t\tpass = (match.i != null);\n\t\t\t}\n\t\t\t$.toggleClass(el, \"fail\", !pass);\n\t\t\tif (!pass) { fails++; }\n\t\t}\n\n\t\tthis._testFails = fails;\n\t\tthis._testMatches = matches;\n\t\tif (fails) {\n\t\t\tthis._showResult(fails+\" FAILED\", \"fail\");\n\t\t} else {\n\t\t\tthis._showResult(\"PASSED\", \"pass\");\n\t\t}\n\t\t\n\t\tthis._updateSelTest();\n\t}\n\n\t_updateSelTest() {\n\t\tif (this._testMark) { this._testMark.clear(); }\n\t\tlet matches = this._testMatches, el = this.testList.selectedEl;\n\t\tif (!el || !matches) { return; }\n\t\tlet match = matches[this.testList.selected], cm = this.testEditor;\n\t\tif (match && match.i != null) {\n\t\t\tlet pos = CMUtils.calcRangePos(cm, match.i, match.l);\n\t\t\tthis._testMark = this.testEditor.getDoc().markText(pos.startPos, pos.endPos, {className:\"match\"});\n\t\t}\n\t}\n\n\t_testItemTemplate(o) {\n\t\tlet el = this.testItemEl.cloneNode(true);\n\t\tlet typeBtn = $.query(\"header .button.type\", el);\n\t\ttypeBtn.addEventListener(\"click\", (evt) => this._showTypes(typeBtn, o));\n\n\t\tlet delBtn = $.query(\"header .delete\", el);\n\t\tdelBtn.addEventListener(\"click\", (evt) => this._deleteTest(o));\n\n\t\tlet nameFld = $.query(\"header .name\", el);\n\t\tnameFld.addEventListener(\"input\", () => this._handleTestNameChange(nameFld, o));\n\n\t\tthis._updateTestHeader(o, el, false);\n\n\t\treturn el;\n\t}\n\n\t_updateTestHeader(o, el, edit) {\n\t\tlet nameFld = $.query(\"header .name\", el);\n\t\tnameFld.value = o.name||\"\";\n\t\tnameFld.placeholder = o.text && !edit ? o.text.substr(0, 100) : \"Untitled Test\";\n\n\t\tlet typeLbl = $.query(\"header .button.type .label\", el);\n\t\ttypeLbl.innerText = this.typeLabels[o.type];\n\t}\n\n\t_addTest() {\n\t\tconst o = this.getEmptyTest();\n\t\tthis._tests.push(o);\n\t\tthis.testList.addItem(o, true);\n\t\tthis._handleTestChange();\n\t\tthis.testEditor.execCommand(\"selectAll\");\n\t\t$.addClass(this.testsEl, \"tests-added\");\n\t\tthis._change();\n\t}\n\n\t_reselectTest() {\n\t\tif (this._selTest) {\n\t\t\tthis.testList.selected = this._selTest.id;\n\t\t}\n\t\tif (!this._selTest || this.testList.selected == null) {\n\t\t\tthis.testList.selectedIndex = 0;\n\t\t}\n\t\tthis._selTest = null;\n\t\tthis._handleTestChange();\n\t}\n\n\t_handleTestChange() {\n\t\tlet el, o;\n\t\tif (this._selTest) {\n\t\t\to = this._selTest;\n\t\t\tel = this.testList.getEl(o.id);\n\t\t\tthis._updateTestHeader(o, el, false);\n\t\t}\n\n\t\tel = this.testList.selectedEl;\n\t\to = this._selTest = this.testList.selectedItem;\n\n\t\tif (!o) { return; }\n\n\t\tthis._getTestEditor($.query(\"article .editor .pad\", el), o);\n\t\tthis._updateTestHeader(o, el, true);\n\t\tthis._updateSelTest();\n\t\tthis.testEditor.focus();\n\t\tthis.testEditor.setCursor(this.testEditor.lineCount(), 0);\n\t}\n\n\t_handleTestNameChange(fld, o) {\n\t\to.name = fld.value;\n\t\tthis._change();\n\t}\n\n\t_handleTypesChange() {\n\t\tlet el = this.testList.selectedEl, o = this.testList.selectedItem;\n\t\to.type = this.typesList.selectedItem.id;\n\t\tapp.tooltip.toggle.hide(\"testtypes\");\n\t\tthis._updateTestHeader(o, el, true);\n\t\tthis._change();\n\t}\n\n\t_handleTestTextChange(change) {\n\t\tthis._selTest.text = this.testEditor.getValue();\n\t\tif (change.origin !== \"setValue\") { this._change(); }\n\t}\n\n\t_showTypes(el, o) {\n\t\tthis.typesList.selected = o.type;\n\t\tapp.tooltip.toggle.toggleOn(\"testtypes\", this.typesEl, el, true, -2);\n\t}\n\n\t_deleteTest(o) {\n\t\tlet data = this._tests;\n\t\tlet i = data.indexOf(o);\n\t\tdata.splice(i, 1);\n\t\tthis._selTest = null;\n\t\tthis.testList.removeItem(o.id);\n\t\tif (data.length) { this.testList.selected = data[Math.min(i, data.length-1)].id; }\n\t\tthis._updateTests();\n\t\tthis._handleTestChange();\n\t\tthis._change();\n\t}\n\n\t_getTestEditor(el, o) {\n\t\tlet cm = this.testEditor;\n\t\tif (!cm) {\n\t\t\tcm = this.testEditor = CMUtils.create($.empty(el), {lineWrapping: true}, \"100%\", \"100%\");\n\t\t\tcm.on(\"change\", (a, b) => this._handleTestTextChange(b));\n\t\t} else {\n\t\t\tel.appendChild(cm.getWrapperElement());\n\t\t}\n\t\tcm.setValue(o.text);\n\t}\n}\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../../utils/DOMUtils\";\nimport Utils from \"../../utils/Utils.js\";\n\nimport ExpressionHighlighter from \"../ExpressionHighlighter\";\n\nimport app from \"../../app\";\n\nexport default class Explain {\n\t\n\tconstructor(el) {\n\t\tthis.el = el;\n\t\t$.addClass(el, \"explain\");\n\t\tthis._update();\n\t\t\n\t\tthis._bound_handleEvent = (evt) => this._handleEvent(evt);\n\t\tapp.expression.addEventListener(\"change\", this._bound_handleEvent);\n\t\tapp.expression.highlighter.addEventListener(\"hover\", this._bound_handleEvent);\n\t}\n\t\n\t\n\tcleanup() {\n\t\t$.empty(this.el);\n\t\t$.removeClass(this.el, \"explain\");\n\t\tapp.expression.removeEventListener(\"change\", this._bound_handleEvent);\n\t\tapp.expression.highlighter.removeEventListener(\"hover\", this._bound_handleEvent);\n\t}\n\t\n// private methods:\n\t_update() {\n\t\tlet el = $.empty(this.el), token = app.expression.token, expr = app.expression.value;\n\t\tthis._divs = [];\n\t\tif (!token || token.next.type === \"close\") {\n\t\t\tel.innerHTML = \"<span class='desc'>Enter an Expression above and it will be explained here.</span>\";\n\t\t\treturn;\n\t\t}\n\t\tel.innerHTML = \"<span class='desc'>Roll-over elements below to highlight in the Expression above. Click to open in Reference.</span>\";\n\t\twhile ((token = token.next) && (token.type !== \"close\")) {\n\t\t\t\n\t\t\tif (token.proxy || (token.open && token.open.proxy)) { continue; }\n\t\t\t\n\t\t\tlet groupClasses = ExpressionHighlighter.GROUP_CLASS_BY_TYPE, pre = ExpressionHighlighter.CSS_PREFIX;\n\t\t\tlet i = token.i, end = token.i+token.l, content=expr.substring(i, end).replace(\"<\", \"&lt;\");\n\t\t\tif (token.set) {\n\t\t\t\tlet set0=token.set[0], set2=token.set[2];\n\t\t\t\tcontent = \"<span class='\"+pre+(set0.clss || set0.type)+\"'>\"+expr.substring(set0.i, set0.i+set0.l)+\"</span>\";\n\t\t\t\tcontent += expr.substring(i, end);\n\t\t\t\tcontent += \"<span class='\"+pre+(set2.clss || set2.type)+\"'>\"+expr.substring(set2.i, set2.i+set2.l)+\"</span>\";\n\t\t\t}\n\t\t\t\n\t\t\tlet className = pre + (token.clss || token.type);\n\t\t\tcontent = \"<code class='token \"+className+\"'>\"+content+\"</code> \";\n\t\t\tif (!token.open) { content += app.reference.tipForToken(token); }\n\t\t\telse { content += \"&nbsp;\"; }\n\t\t\tlet div = $.create(\"div\", null, content, el);\n\t\t\t\n\t\t\tif (token.close) {\n\t\t\t\tclassName = groupClasses[token.clss || token.type];\n\t\t\t\tif (className) {\n\t\t\t\t\tclassName = className.replace(\"%depth%\", Math.min(4,token.depth));\n\t\t\t\t\t$.addClass(div, className);\n\t\t\t\t}\n\t\t\t\tif (token.depth > 3) {\n\t\t\t\t\tdiv.innerHTML = \"So... you wanted to see what would happen if you just kept nesting groups, eh? Well, this is it.\"+\n\t\t\t\t\t\t\" I was going to reward your curiosity with a RegEx joke, but a quick search on google reveals that not even\"+\n\t\t\t\t\t\t\" the collective wisdom of the internet can make regular expressions funny. Well, except the whole 'now you've got two problems'\"+\n\t\t\t\t\t\t\" shtick, but you've probably heard that one already. Wasn't really worth the effort, was it?\";\n\t\t\t\t\ttoken = token.close.prv;\n\t\t\t\t\tthis._divs.push(div);\n\t\t\t\t\tel = div;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tel = div;\n\t\t\t}\n\t\t\t\n\t\t\tdiv.token = token;\n\t\n\t\t\tif (token.open) {\n\t\t\t\t$.addClass(div, \"close\");\n\t\t\t\tdiv.proxy = el;\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\t\n\t\t\tif (token.error) {\n\t\t\t\t$.addClass(div, \"error\");\n\t\t\t\tif (token.error.warning) { $.addClass(div, \"warning\"); }\n\t\t\t}\n\t\n\t\t\tif (!token.open) {\n\t\t\t\tdiv.addEventListener(\"mouseover\", this._handleMouseEvent);\n\t\t\t\tdiv.addEventListener(\"mouseout\", this._handleMouseEvent);\n\t\t\t\tdiv.addEventListener(\"click\", this._handleMouseEvent);\n\t\t\t}\n\t\t\t\n\t\t\tif (token.clss === \"quant\" || token.type === \"lazy\" || token.type === \"possessive\") {\n\t\t\t\tthis._insertApplied(div);\n\t\t\t} else {\n\t\t\t\tthis._divs.push(div);\n\t\t\t}\n\t\t}\n\t}\n\n\t_insertApplied(div) {\n\t\tlet divs = this._divs, prv = div.token.prv, d, i=divs.length;\n\t\twhile ((d = divs[--i]) && d.token !== prv) {} // search backwards for efficiency\n\t\td = d.proxy||d;\n\t\tdivs.splice(i, 0, div);\n\t\td.insertAdjacentElement(\"afterend\", div);\n\t\t$.addClass(div, \"applied\");\n\t}\n\n\t_handleHoverChange() {\n\t\tlet token = app.expression.highlighter.hoverToken;\n\t\t$.removeClass($.queryAll(\"div.selected\", this.el), \"selected\");\n\t\t$.removeClass($.queryAll(\"div.related\", this.el), \"related\");\n\t\tif (!token) { return; }\n\t\t\n\t\tlet div = this._findDiv(token);\n\t\t$.addClass(div, \"selected\");\n\t\tif (token.related) {\n\t\t\tfor (let i = 0, l=token.related.length; i < l; i++) {\n\t\t\t\t$.addClass(this._findDiv(token.related[i]), \"related\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_findDiv(token) {\n\t\treturn Utils.find(this._divs, (div) => div.token === token);\n\t}\n\n\t_handleMouseEvent(evt) {\n\t\tlet type = evt.type, token = evt.currentTarget.token;\n\t\tif (type == \"click\") { app.sidebar.showToken(token); }\n\t\telse { app.expression.highlighter.hoverToken = type === \"mouseout\" ? null : token; }\n\t\tevt.stopPropagation();\n\t}\n\t\n\t_handleEvent(evt) {\n\t\tif (evt.type === \"change\") { this._update(); }\n\t\telse if (evt.type === \"hover\") { this._handleHoverChange(); }\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../../utils/DOMUtils\";\nimport Utils from \"../../utils/Utils\";\n\nimport app from \"../../app\";\n\nexport default class Details {\n\t\n\tconstructor(el) {\n\t\tthis.el = el;\n\t\t$.addClass(el, \"details\");\n\t\tthis._update();\n\t\t\n\t\tthis._bound_handleEvent = (evt) => this._handleEvent(evt);\n\t\tapp.addEventListener(\"result\", this._bound_handleEvent);\n\t\tapp.text.addEventListener(\"select\", this._bound_handleEvent);\n\t}\n\t\n\t\n\tcleanup() {\n\t\t$.empty(this.el);\n\t\t$.removeClass(this.el, \"details\");\n\t\tapp.removeEventListener(\"result\", this._bound_handleEvent);\n\t\tapp.text.removeEventListener(\"select\", this._bound_handleEvent);\n\t\tUtils.defer(null, \"Details._update\");\n\t}\n\t\n// private methods:\n\t_update() {\n\t\t$.empty(this.el);\n\t\t$.create(\"div\", \"desc\", \"Click a <span class='match'>match</span> above to display match &amp; group details. Mouse over a <code>Group</code> row to highlight it in the Expression.\", this.el);\n\t\tthis._addMatch(app.text.selectedMatch, app.text.value);\n\t}\n\t\n\t_addMatch(match, textVal) {\n\t\tif (!match) { return; }\n\t\tlet groups = match.groups, l=groups&&groups.length, ext=l&&(groups[0].i != null), matchVal=this._getMatchVal(match, textVal), extStr=\"\", me = match.i+match.l;\n\t\tlet groupTokens = app.expression.lexer.captureGroups;\n\t\t\n\t\tlet tableEl = $.create(\"table\", null, null, this.el);\n\t\tlet matchEl = $.create(\"tr\", \"match\", \"<td>Match \"+match.num+\"</td><td>\"+this._getRangeStr(match)+\"</td><td></td>\", tableEl);\n\t\t\n\t\tif (l) {\n\t\t\tlet inGroups = [], lastIndex = match.i;\n\t\t\tfor (let i = 0; i <= l; i++) {\n\t\t\t\tlet group = groups[i], index = group ? group.i : me, num = i + 1, token = groupTokens[i];\n\t\t\t\tif (ext) {\n\t\t\t\t\tfor (let j = inGroups.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tlet inGroup = inGroups[j], ge = inGroup.i + inGroup.l;\n\t\t\t\t\t\tif (ge > index) { break; }\n\t\t\t\t\t\tinGroups.pop();\n\t\t\t\t\t\textStr += Utils.htmlSafe(textVal.substring(lastIndex, ge)) + \"</span>\";\n\t\t\t\t\t\tlastIndex = ge;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!group) { break; }\n\t\t\t\tif (group.l) {\n\t\t\t\t\textStr += Utils.htmlSafe(textVal.substring(lastIndex, index)) + \"<span class='group-\" + num % 6 + \" num-\" + num + \"'>\";\n\t\t\t\t\tinGroups.push(group);\n\t\t\t\t\tlastIndex = index;\n\t\t\t\t}\n\t\t\t\tlet val = \"<span\" + (ext ? \" class='group-\" + num % 6 + \"'\" : \"\") + \">\" + this._getMatchVal(group, textVal) + \"</span>\";\n\t\t\t\tlet label = token.name ? \"'\"+token.name+\"'\" : (\"Group \" + num);\n\t\t\t\tlet tr = $.create(\"tr\", \"group\", \"<td>\" + label + \"</td><td>\" + this._getRangeStr(group) + \"</td><td>\" + val + \"</td>\", tableEl);\n\t\t\t\t\n\t\t\t\ttr.token = token;\n\t\t\t\ttr.addEventListener(\"mouseover\", this._handleMouseEvent);\n\t\t\t\ttr.addEventListener(\"mouseout\", this._handleMouseEvent);\n\t\t\t}\n\t\t\tif (ext) { extStr += Utils.htmlSafe(textVal.substring(lastIndex, me)); }\n\t\t} else {\n\t\t\t$.create(\"tr\", \"nogroup\", \"<td colspan='3'>No groups.</td>\", tableEl);\n\t\t}\n\t\t\n\t\t$.query(\"td:last-child\", matchEl).innerHTML = extStr || matchVal;\n\t}\n\t\n\t_getMatchVal(match, str) {\n\t\tlet val = match.s || (match.i === undefined ? \"\" : str.substr(match.i, match.l));\n\t\treturn val ? Utils.htmlSafe(val) : \"<em>&lt;empty&gt;</em>\";\n\t}\n\t\n\t_getRangeStr(match) {\n\t\t// we could check for match.l>0 to catch empty matches, but having a weird range might be more accurate.\n\t\treturn match.i != null ? match.i + \"-\" + (match.i+match.l-1) : \"n/a\";\n\t}\n\n\t_handleEvent(evt) {\n\t\tUtils.defer(()=>this._update(), \"Details._update\");\n\t}\n\t\n\t_handleMouseEvent(evt) {\n\t\tlet type = evt.type, token = evt.currentTarget.token;\n\t\tapp.expression.highlighter.hoverToken = type === \"mouseout\" ? null : token;\n\t\tif (type === \"mouseover\") { $.addClass($.query(\"span.num-\"+token.num, this.el), \"hover\"); }\n\t\telse { $.removeClass($.query(\"span.hover\", this.el), \"hover\"); }\n\t\tevt.stopPropagation();\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../../utils/DOMUtils\";\nimport Utils from \"../../utils/Utils\";\nimport app from \"../../app\";\n\nexport default class Replace {\n\tconstructor(el, cm) {\n\t\tthis.el = el;\n\t\tthis.editor = cm;\n\t\t\n\t\tthis._bound_handleEvent = (evt) => this._handleEvent(evt);\n\t\tapp.addEventListener(\"result\", this._bound_handleEvent);\n\t\t\n\t\tthis._initUI();\n\t\tthis._update();\n\t}\n\t\n\tcleanup() {\n\t\t$.empty(this.el);\n\t\tthis.output.value = \"\";\n\t\t$.removeClass(this.el, \"details\");\n\t\tapp.removeEventListener(\"result\", this._bound_handleEvent);\n\t\tUtils.defer(null, \"Replace._update\");\n\t}\n\t\n// private methods:\n\t_initUI() {\n\t\tthis.output = $.create(\"textarea\", null, null, this.el);\n\t\tthis.output.readOnly = true;\n\t}\n\t\n\t_update() {\n\t\tlet o = app.result && app.result.tool, result = o&&o.result;\n\t\tthis.output.value = result || \"no result\";\n\t}\n\n\t_handleEvent(evt) {\n\t\tUtils.defer(()=>this._update(), \"Replace._update\");\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Utils from \"./utils/Utils\";\n\nimport app from \"./app\";\n\nexport default class SubstLexer {\n\tconstructor() {\n\t\tthis.profile = null;\n\t}\n\t\n\tset profile(profile) {\n\t\tthis._profile = profile;\n\t\tthis.string = this.token = this.errors = null;\n\t}\n\t\n\tparse(str) {\n\t\tif (!this._profile) { return null; }\n\t\t\n\t\tthis.token = null;\n\t\tthis.string = str;\n\t\tthis.errors = [];\n\t\t\n\t\t// TODO: should this be passed in from Tools?\n\t\tlet capGroups = app.expression.lexer.captureGroups;\n\t\t\n\t\tlet prev=null, token, c;\n\t\tfor (let i=0, l=str.length; i<l; i+=token.l) {\n\t\t\tc = str[i];\n\t\t\ttoken = {prev: prev, i: i, l: 1, subst: true};\n\t\n\t\t\tif (c === \"$\" && i + 1 < l) {\n\t\t\t\tthis.parseDollar(str, token, capGroups);\n\t\t\t} else if (c == \"\\\\\" && i + 1 < l) {\n\t\t\t\tthis.parseBackSlash(str, token, capGroups);\n\t\t\t}\n\t\t\t\n\t\t\tif (!token.type) {\n\t\t\t\ttoken.type = \"char\";\n\t\t\t\ttoken.code = c.charCodeAt(0);\n\t\t\t}\n\t\n\t\t\tif (prev) {\n\t\t\t\tprev.next = token;\n\t\t\t}\n\t\t\tif (!this.token) {\n\t\t\t\tthis.token = token;\n\t\t\t}\n\t\t\t\n\t\t\tif (token.error) {\n\t\t\t\t// SubstLexer currently doesn't generate any errors.\n\t\t\t\tthis.errors.push(token.error);\n\t\t\t}\n\t\t\tprev = token;\n\t\t}\n\t\n\t\treturn this.token;\n\t};\n\t\n\tparseBackSlash(str, token, capGroups) {\n\t\tlet match, sub = str.substr(token.i), profile = this._profile;\n\t\tif (profile.substTokens.subst_bsgroup && (match = sub.match(/^\\\\(\\d\\d?)/))) {\n\t\t\tthis._getRef(match[1], token, capGroups, \"subst_bsgroup\");\n\t\t} else if (match = sub.match(SubstLexer.SUBST_ESC_RE)) {\n\t\t\tif (match[1][0] === \"u\") {\n\t\t\t\ttoken.type = \"escunicode\";\n\t\t\t\ttoken.code = parseInt(match[2], 16);\n\t\t\t} else {\n\t\t\t\ttoken.code = profile.escCharCodes[match[1]];\n\t\t\t\ttoken.type = \"esc_\"+token.code;\n\t\t\t}\n\t\t\tif (token.type) {\n\t\t\t\ttoken.clss = \"esc\";\n\t\t\t\ttoken.l += match[1].length;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tparseDollar(str, token, capGroups) {\n\t\t// Note: Named groups are not supported in PCRE or JS.\n\t\tlet match = str.substr(token.i + 1).match(/^([$&`']|\\d\\d?|{\\d\\d?})/);\n\t\tif (!match) { return; }\n\t\tlet d = match[1], type=SubstLexer.$_TYPES[d], profile=this._profile;\n\t\t\n\t\tif (type) {\n\t\t\tif (!profile.substTokens[type]) { return; }\n\t\t\ttoken.type = type;\n\t\t\ttoken.clss = \"subst\";\n\t\t\ttoken.l += d.length;\n\t\t} else {\n\t\t\tthis._getRef(d, token, capGroups, d[0] === \"{\" ? \"subst_$bgroup\" : \"subst_$group\");\n\t\t}\n\t};\n\t\n\t_getRef(numStr, token, capGroups, type) {\n\t\tif (!this._profile.substTokens[type]) { return; }\n\t\tlet num = parseInt(numStr.match(/\\d\\d?/)[0]), l=0;\n\t\tif (!this._profile.config.substdecomposeref || capGroups[num-1]) { l = numStr.length; }\n\t\telse if (num >= 10 && capGroups[(num = (num/10|0))-1]) { l = numStr.length-1; }\n\t\tif (l) {\n\t\t\ttoken.l += l;\n\t\t\t// we don't assign the original type, because the docs combine them all into one id:\n\t\t\ttoken.type = num > 0 ? \"subst_group\" : \"subst_0match\";\n\t\t\ttoken.clss = \"subst\";\n\t\t\tif (num > 0) { token.group = capGroups[num-1]; }\n\t\t}\n\t}\n}\n\nSubstLexer.$_TYPES = {\n\t\"$\": \"subst_$esc\",\n\t\"&\": \"subst_$&match\",\n\t\"`\": \"subst_$before\",\n\t\"'\": \"subst_$after\",\n\t\"0\": \"subst_0match\"\n};\n\nSubstLexer.SUBST_ESC_RE = new RegExp(\"^\"+Utils.SUBST_ESC_RE.source,\"i\");\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport CMUtils from \"../utils/CMUtils\";\nimport Utils from \"../utils/Utils\";\nimport Track from \"../utils/Track\";\n\nimport List from \"../controls/List\";\nimport ExpressionHighlighter from \"./ExpressionHighlighter\";\nimport ExpressionHover from \"./ExpressionHover\";\nimport Explain from \"./tools/Explain\";\nimport Details from \"./tools/Details\";\nimport Replace from \"./tools/Replace\";\n\nimport SubstLexer from \"../SubstLexer\";\nimport EventDispatcher from \"../events/EventDispatcher\";\n\nimport app from \"../app\";\n\nexport default class Tools extends EventDispatcher {\n\tconstructor (el) {\n\t\tsuper();\n\t\tthis.el = el;\n\t\tthis._initUI();\n\t\tthis.value = null;\n\t}\n\t\n\tset value(o) {\n\t\tif (!o) {\n\t\t\tthis.show(\"explain\");\n\t\t\tthis._toolValues = Utils.copy({}, Tools.DEFAULT_VALUES);\n\t\t} else {\n\t\t\tthis.show(o.id);\n\t\t\tif (o.input != null) { this.editor.setValue(o.input); }\n\t\t}\n\t}\n\t\n\tget value() {\n\t\treturn {\n\t\t\tid: this._toolId,\n\t\t\tinput: this.input\n\t\t};\n\t}\n\t\n\tget input() {\n\t\treturn this.hasInput ? this.editor.getValue() : null;\n\t}\n\t\n\tget hasInput() {\n\t\tlet id = this._toolId;\n\t\treturn (id === \"replace\" || id === \"list\");\n\t}\n\t\n\tshow(id) {\n\t\tif (!id || id === this._toolId) { return; }\n\n\t\tthis.toolList.selected = this._toolId = id;\n\t\tlet input = (id === \"replace\" || id === \"list\");\n\t\t\n\t\tif (this._tool) { this._tool.cleanup(); }\n\t\t\n\t\t$.toggleClass($.query(\"> article\", this.el), \"showinput\", input);\n\t\tif (input) {\n\t\t\tthis.editor.setValue(this._toolValues[id]);\n\t\t\tthis.editor.refresh();\n\t\t\tthis.editor.focus();\n\t\t}\n\t\t\n\t\tif (id === \"explain\") { this._tool = new Explain(this.contentEl); }\n\t\telse if (id === \"details\") { this._tool = new Details(this.contentEl); }\n\t\telse if (id === \"replace\" || id === \"list\") { this._tool = new Replace(this.resultEl, this.editor); }\n\t\t\n\t\tthis._toolId = id;\n\t\tthis._updateHighlights();\n\t}\n\t\n\t_initUI() {\n\t\tlet el = this.el;\n\t\tthis.headerEl = $.query(\"header\", this.el);\n\t\tthis.headerEl.addEventListener(\"click\", (evt) => this._handleHeaderClick(evt));\n\t\t\n\t\tthis.contentEl = $.query(\"> article > .content\", el);\n\t\tthis.resultEl = $.query(\"> article > .inputtool > .result\", el);\n\t\t\n\t\tthis.toolListEl = $.query(\".toollist\", this.headerEl);\n\t\tlet data = [\"Replace\", \"List\", \"Details\", \"Explain\"].map((val) => ({label:val, id:val.toLowerCase()}));\n\t\tthis.toolList = new List(this.toolListEl, {data});\n\t\tthis.toolList.on(\"change\", ()=> this._handleListChange());\n\t\t\n\t\tlet editor = this.editor = CMUtils.create($.query(\".inputtool .editor\", el), {\n\t\t\tmaxLength: 2500,\n\t\t\tsingleLine: true\n\t\t}, \"100%\", \"100%\");\n\n\t\t$.query(\".help.icon\", el).addEventListener(\"click\", () => app.sidebar.goto(this._toolId));\n\t\t\n\t\t// TODO: evaluate this living here or in Replace:\n\t\teditor.on(\"change\", ()=> this._handleEditorChange());\n\t\t\n\t\tapp.flavor.on(\"change\", () => this._updateHighlights());\n\t\tapp.expression.on(\"change\", () => this._updateHighlights());\n\t\t\n\t\tthis.lexer = new SubstLexer();\n\t\tthis.highlighter = new ExpressionHighlighter(editor);\n\t\tthis.hover = new ExpressionHover(editor, this.highlighter);\n\t}\n\t\n\t_handleEditorChange() {\n\t\tthis._updateHighlights();\n\t\tthis._toolValues[this._toolId] = this.editor.getValue();\n\t\tthis.dispatchEvent(\"change\");\n\t}\n\t\n\t_updateHighlights() {\n\t\tif (!this.hasInput) { return; } // only for Replace & List\n\t\tthis.lexer.profile = app.flavor.profile;\n\t\tlet token = this.lexer.parse(this.editor.getValue());\n\t\tthis.highlighter.draw(token);\n\t\tthis.hover.token = token;\n\t}\n\t\n\t_handleListChange() {\n\t\tthis.show(this.toolList.selected);\n\t\tTrack.page(\"tool/\"+this.toolList.selected);\n\t}\n\t\n\t_handleHeaderClick(evt) {\n\t\tif ($.hasClass(this.el, \"closed\") || !this.toolListEl.contains(evt.target)) {\n\t\t\t$.togglePanel(this.el, 'article');\n\t\t}\n\t}\n}\nTools.DEFAULT_VALUES = {\n\treplace: \"<< $& >>\",\n\tlist: \"$&\\\\n\"\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nlet home = {};\nexport default home;\n\nhome.id = \"home\";\nhome.label = \"Menu\";\nhome.desc = \"[from HTML]\";\nhome.kids = [\n\n\n\t{\n\tlabel: \"Pattern Settings\",\n\tid: \"share\",\n\tel: \"#share_main\",\n\tlist: false,\n\tkids: [\n\t\t{\n\t\tlabel: \"Save to my Favorites\",\n\t\tid: \"share_favorites\",\n\t\tel:\"#share_favorites\"\n\t\t},\n\t\t{\n\t\tlabel: \"Share with the Community\",\n\t\tid: \"share_community\",\n\t\tel:\"#share_community\"\n\t\t}\n\t]\n\t},\n\n\t{\n\tlabel: \"My Patterns\",\n\tid:\"favorites\",\n\tdesc: \"The list above will display any patterns that you create or favorite.\"+\n\t\t\"<p>To edit a pattern you created, click its URL or double-click it in the list to load it, then open Save / Share to edit and save.</p>\",\n\tsearch: true,\n\tkids: []\n\t},\n\n\t{\n\tlabel: \"Cheatsheet\",\n\tid:\"cheatsheet\",\n\tel: \"#cheatsheet\"\n\t},\n\n\t{ // injected from Reference\n\tid:\"reference\"\n\t},\n\n\t{\n\tlabel: \"Community Patterns\",\n\tid: \"community\",\n\tdesc: \"Welcome to Community Patterns, a searchable database of patterns submitted by users like you.\"+\n\t\t\"<p>After selecting a pattern, click its URL or double-click it in the list to load the full pattern. Or use the right arrow icon to load just the expression or text.</p>\"+\n\t\t\"<p>Help make the Community better by rating patterns, and submitting your own via <b>Search & Share</b> in the menu.</p>\",\n\tsearch: true,\n\tkids: []\n\t},\n\n\t{\n\tlabel: \"Help\",\n\tid: \"help\",\n\tdesc: \"Help for the RegExr application. See the <b>RegEx Reference</b> for help with Regular Expressions.\",\n\tkids: [\n\n\t\t{\n\t\tlabel:\"About\",\n\t\tdesc:\"RegExr v<%= build_version %> (<%= build_date %>).\"+\n\t\t\t\"<p>Created by <a href='http://twitter.com/gskinner/' target='_blank'>Grant Skinner</a> and the <a href='http://gskinner.com/' target='_blank'>gskinner</a> team, using the <a href='http://createjs.com/' target='_blank'>CreateJS</a> & <a href='http://codemirror.net/' target='_blank'>CodeMirror</a> libraries.</p>\"+\n\t\t\t\"<p>You can provide feedback or log bugs on <a href='http://github.com/gskinner/regexr/' target='_blank'>GitHub</a>.</p>\"\n\t\t},\n\t\t{\n\t\tlabel:\"Getting started\",\n\t\tdesc:\"RegExr provides real-time visual results, syntax highlighting, tooltips, and undo/redo ({{getCtrlKey()}}-Z / Y) so it's easy and fun to explore Regular Expressions.\"+\n\t\t\t\"<p>Browse through the <b>RegEx Reference</b> and test different tokens to see what they do, then check out <b>Community Patterns</b> to see examples.</p>\"+\n\t\t\t\"<p>You can also <b>Save</b> your patterns for later reference, or to share with others. <b>Sign In</b> to ensure you don't lose your patterns.</p>\"+\n\t\t\t\"<p>Modify your pattern's details, share it with the <b>Community</b>, or make it private, or delete it in <b>Pattern Settings</b></p>\",\n\t\tkids: [\n\t\t\t{\n\t\t\tlabel:\"Expression panel\",\n\t\t\tdesc:\"This is where you enter a regular expression to test. The results in the <b>Text</b> and <b>Tools</b> panel will update as you type.\"+\n\t\t\t\t\"Roll over the expression for information on each token.\"+\n\t\t\t\t\"<p>The buttons to the right allow you to switch RegEx engines, or edit the expression flags.</p>\"\n\t\t\t},\n\t\t\t{\n\t\t\tlabel:\"Text panel\",\n\t\t\tdesc:\"This is where you enter text to test your expression against. Drag & drop a text file to load its contents.\"+\n\t\t\t\t\"<p>Matches will be highlighted as you type. Roll over a match for information on the match and its capture groups. The match count and execution time are shown in the title bar.</p>\"+\n\t\t\t\t\"<p>Lighter colored caps at the start or end of a line indicate the match continues between lines.</p>\"\n\t\t\t},\n\t\t\t{\n\t\t\tlabel:\"Tests panel\",\n\t\t\tdesc:\"This allows you to create a suite of tests that you can use to validate your <b>Expression</b> in real time.\"+\n\t\t\t\t\"<p>A test can check if the pattern matches anything, matches everything, or matches nothing in the test text.</p>\"+\n\t\t\t\t\"<p>Access this panel with the toggle at the top of the <b>Text</b> panel. When you save, both your Text and Tests will be saved.</p>\"\n\t\t\t},\n\t\t\t{\n\t\t\tlabel:\"Tools panel\",\n\t\t\tdesc:\"Click the <b>Tools</b> title bar below the <b>Text</b> panel to show or hide the <b>Tools</b> panel.\"+\n\t\t\t\t\"<p>Tools provide different ways of working with or exploring your results.</p>\",\n\t\t\tkids: [\n\t\t\t\t{\n\t\t\t\tlabel:\"Replace\",\n\t\t\t\tid: \"replace\",\n\t\t\t\tdesc:\"The <b>Replace</b> tool replaces matches with a specified string or pattern.\"+\n\t\t\t\t\t\"<p>Matches in the <b>Text</b> panel are replaced by the substitution string & displayed as you type.</p>\"+\n\t\t\t\t\t\"<p>Substitution tokens and escaped characters are supported, such as <code>\\\\n</code>, <code>\\\\t</code> & <code>\\\\u0009</code>.</p>\"+\n\t\t\t\t\t\"<p>Roll over tokens for information, and check out the <b>RegEx Reference</b> for more information.</p>\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\tlabel:\"List\",\n\t\t\t\tid: \"list\",\n\t\t\t\tdesc:\"The <b>List</b> tool lists all found matches.\"+\n\t\t\t\t\t\"<p>You can specify either a simple delimiter (ex. <code>,</code> or <code>\\\\n</code>), or use substitution tokens to generate more advanced reports. For example, <code>$1\\\\n</code> would list all group 1 results (in the JavaScript engine).</p>\"+\n\t\t\t\t\t\"<p>Escaped characters are supported, such as <code>\\\\n</code>, <code>\\\\t</code> & <code>\\\\u0009</code>.</p>\"+\n\t\t\t\t\t\"<p>Roll over tokens for information.</p>\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\tlabel:\"Details\",\n\t\t\t\tid: \"details\",\n\t\t\t\tdesc:\"The <b>Details</b> tool displays the full text of a match and its capture groups.\"+\n\t\t\t\t\t\"<p>Click on a highlighted match in the <b>Text</b> panel to display the details for that match.</p>\"+\n\t\t\t\t\t\"<p>Roll over a group row to highlight that group in your <b>Expression</b>.</p>\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\tlabel:\"Explain\",\n\t\t\t\tid: \"explain\",\n\t\t\t\tdesc:\"The <b>Explain</b> tool displays a detailed breakdown of the <b>Expression</b>.\"+\n\t\t\t\t\t\"<p>Mouse over the explanation to highlight the related tokens in the <b>Expression</b> panel and vice versa.</p>\"+\n\t\t\t\t\t\"<p>Click an item in the explanation to show more info in the <b>RegEx Reference</b>.</p>\"\n\t\t\t\t}\n\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\tlabel:\"Menu\",\n\t\t\tdesc:\"The <b>Menu</b> (this panel) includes <b>Help</b>, a full <b>RegEx Reference</b>, a <b>Cheatsheet</b>, and <b>Pattern Settings</b> features.\"+\n\t\t\t\t\"<p>Double-click a selected item in the <b>RegEx Reference</b> to insert it into your <b>Expression</b>. Click the arrow beside an example to load it.</p>\"+\n\t\t\t\t\"<p>The menu also includes searchable <b>Community Patterns</b>, and patterns you've created or favorited in <b>My Patterns</b>.</p>\"\n\t\t\t}\n\t\t]\n\t\t},\n\t\t{\n\t\tlabel:\"Signing in\",\n\t\tid: \"signin\",\n\t\tdesc:\"Before you sign in, RegExr creates a temporary account which relies on a browser cookie. This means you can't access your patterns on other computers, and that you could lose your patterns if your cookies are deleted or expire.\"+\n\t\t\t\"<p>Signing in creates a permanent account, so you can access your patterns anywhere, anytime.</p>\"+\n\t\t\t\"<p>Your existing patterns &amp; favorites will automatically be assigned to the new account.</p>\"+\n\t\t\t\"<p>We don't use your info for anything other than signing you into your RegExr account.</p>\"\n\t\t},\n\t\t{\n\t\tid: \"engine\",\n\t\tlabel:\"RegEx engines\",\n\t\tdesc:\"While the core feature set of regular expressions is fairly consistent, different implementations (ex. Perl vs Java) may have different features or behaviours.\"+\n\t\t\t \"<p>RegExr currently supports JavaScript RegExp executed in your browser and PCRE via PHP.</p>\"+\n\t\t\t \"<p>You can switch engines using the dropdown in Expression.</p>\",\n\t\tkids: [\n\t\t\t{\n\t\t\tlabel:\"JavaScript\",\n\t\t\tdesc:\"Your browser's JavaScript engine is used to execute RegEx in an asynchronous worker using <code>RegExp.exec()</code>.\"+\n\t\t\t\t\"<p>Note that while implementations are mostly consistent, there are small variations between browsers. Here is a short list of known differences:<ul>\"+\n\t\t\t\t\"<li>Older browsers don't support the u or y flags</li>\"+\n\t\t\t\t\"<li>Differences in handling of certain ambiguous escapes: \\\\8 \\\\9</li>\"+\n\t\t\t\t\"<li>Chrome handles \\\\x & \\\\u escapes slightly differently than other browsers</li>\"+\n\t\t\t\t\"<li>Chrome supports lookbehind, but it isn't yet in the JS spec</li>\"+\n\t\t\t\t\"<li>Safari ignores leading zeros in octal escapes (ex. \\\\00020)</li>\"+\n\t\t\t\t\"</ul></p>\"\n\t\t\t},\n\t\t\t{\n\t\t\tlabel:\"PCRE (PHP)\",\n\t\t\tdesc:\"PHP {{getPHPVersion()}} and PCRE {{getPCREVersion()}} are used to execute your pattern on our server.\"\n\t\t\t}\n\t\t]\n\t\t},\n\t\t{\n\t\tlabel:\"Query string support\",\n\t\tdesc:\"In addition to the built in <b>Save</b> mechanism which creates a shareable link, RegExr also supports the ability to pre-populate a pattern via the query string.\"+\n\t\t\t\"<p>The following query string params are recognized:<ul>\"+\n\t\t\t\"<li><code>engine</code> - the RegEx engine to use (<code>js</code> or <code>pcre</code>)</li>\"+\n\t\t\t\"<li><code>expression</code> - populates the Expression area. It is recommended to pass a full expression with flags (<code>/.*/ig</code>) not just the pattern (<code>.*</code>)</li>\"+\n\t\t\t\"<li><code>text</code> - populates the Text area</li>\"+\n\t\t\t\"<li><code>tool</code> - sets the tool (replace, list, details, or explain)</li>\"+\n\t\t\t\"<li><code>input</code> - populates the tool input field</li>\"+\n\t\t\t\"</ul></p>\"+\n\t\t\t\"Ex. <a href='http://regexr.com/?expression=/./g&text=test'>regexr.com/?expression=/./g&text=test</a>\"\n\t\t}\n\t]\n\t}\n];\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport Utils from \"../utils/Utils\";\nimport app from \"../app\";\n\nexport default class LinkRow {\n\tconstructor(el) {\n\t\tthis.el = el;\n\t\tthis._initUI();\n\t\tthis.url = null;\n\t}\n\t\n\tset pattern(val) {\n\t\tlet url = Utils.getPatternURLStr(val)\n\t\tthis._pattern = val;\n\t\t$.query(\".url\", this.el).innerText = url || \"\";\n\t\t$.toggleClass(this.el, \"disabled\", !url);\n\t\t$.toggleClass(this.el, \"active\", !!url);\n\t}\n\n\tshowMessage(message) {\n\t\t// for some reason this displays one line too low if it's synchronous:\n\t\tsetTimeout(()=>app.tooltip.toggle.showOn(\"linkrow\", message, $.query(\".copy.icon\", this.el), true, 0), 1);\n\t}\n\n\t_initUI() {\n\t\tthis.el.onclick = (evt) => this._onClick(evt);\n\n\t\tlet fld=$.query(\".url\", this.el), copyBtn = $.query(\".copy\", this.el);\n\t\tlet clipboard = new Clipboard(copyBtn, { target: () => fld });\n\t\tclipboard.on(\"success\", () => app.tooltip.toggle.toggleOn(\"copy\", \"Copied to clipboard.\", copyBtn, true, 3));\n\t\tclipboard.on(\"error\", (e) => app.tooltip.toggle.toggleOn(\"copy\", Utils.getCtrlKey()+\"-C to copy.\", copyBtn, true, 3)); // TODO: cmd/ctrl\n\t}\n\n\t_onClick(evt) {\n\t\tif ($.query(\".copy\", this.el).contains(evt.target)) { return; }\n\t\tif (evt.which === 2 || evt.metaKey || evt.ctrlKey) {\n\t\t\twindow.open(Utils.getPatternURL(this._pattern));\n\t\t} else {\n\t\t\tapp.load(this._pattern);\n\t\t}\n\t}\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport Utils from \"../utils/Utils.js\";\n\nimport app from \"../app\";\n\nexport default class Example {\n\tconstructor (title, ex) {\n\t\tthis.el = $.create(\"div\", \"example\");\n\t\tthis.title = title;\n\t\tthis.example = ex;\n\t}\n\t\n\tset example(ex) {\n\t\tif (ex === this._example) { return; }\n\t\tthis._example = ex;\n\t\t\n\t\tlet str = \"\", txt, exp, regex;\n\t\tif (ex) {\n\t\t\texp = ex[0];\n\t\t\ttxt = ex[1];\n\t\t\tregex = Utils.getRegExp(exp, \"g\");\n\t\t\tif (this.title) { str += \"<h1>\" + this.title + \"</h1><hr>\"; }\n\t\t\tstr += \"<code class='expression'><svg class='icon load'><use xlink:href='#load'><title>Load expression</title></use></svg>\" + Utils.htmlSafe(exp) + \"</code>\";\n\t\t\tif (txt && regex) {\n\t\t\t\tlet over=Math.max(0, txt.length-160), s=txt;\n\t\t\t\tif (over) { s = Utils.htmlSafe(s.substr(0,159)); }\n\t\t\t\tif (regex) { s = s.replace(regex, \"<em>$&</em>\"); }\n\t\t\t\t// TODO: this won't match on html elements:\n\t\t\t\tstr += \"<hr><code class='text'><svg class='icon load'><use xlink:href='#load'><title>Load text</title></use></svg>\" + s + (over?\"<i>\\u2026</i>\" : \"\") + \"</code>\";\n\t\t\t}\n\t\t}\n\t\tthis.el.innerHTML = str;\n\t\tif (exp) {\n\t\t\t$.query(\"code.expression > .load\", this.el).addEventListener(\"click\", ()=> {\n\t\t\t\t// TODO: this will need to be updated when we support other delimiters:\n\t\t\t\tapp.expression.value = exp[0] === \"/\" ? exp : \"/\"+exp+\"/g\";\n\t\t\t});\n\t\t\t\n\t\t}\n\t\tif (txt) { $.query(\"code.text > .load\", this.el).addEventListener(\"click\", ()=> app.text.value = txt); }\n\t}\n\t\n\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport LinkRow from \"../controls/LinkRow\";\nimport $ from \"../utils/DOMUtils\";\nimport Utils from \"../utils/Utils\";\nimport Example from \"./Example\";\nimport Server from \"../net/Server\";\n\nimport app from \"../app\";\n\n// also used for My Patterns.\nexport default class CommunityContent {\n\tconstructor (el) {\n\t\tthis.el = el;\n\t\tthis.example = new Example();\n\t\tel.appendChild(this.example.el);\n\t\t$.query(\".icon.thumbup\", el).addEventListener(\"click\", ()=>this._rate(1));\n\t\t$.query(\".icon.thumbdown\", el).addEventListener(\"click\", ()=>this._rate(-1));\n\t\t$.query(\".icon.favorites\", el).addEventListener(\"click\", ()=>this._favorite());\n\t\tthis.linkRow = new LinkRow($.query(\".row.link\", el))\n\t\t$.query(\".icon.share\", el).addEventListener(\"click\", ()=>this._share());\n\t}\n\t\n\tset item(o) {\n\t\tlet el = this.el;\n\t\tthis._pattern = o;\n\t\t$.query(\".author\", el).innerText = o.author ? \"by \"+o.author  : \"\";\n\t\t$.query(\".name.label\", el).innerText = o.name;\n\t\t$.query(\".desc\", el).innerText = o.description || \"No description available.\";\n\t\tthis._updateRating();\n\t\tthis._updateFavorite();\n\t\tthis.example.example = [o.expression, o.text];\n\n\t\tthis.linkRow.pattern = o;\n\t}\n\t\n// private methods:\n\t_updateRating() {\n\t\tlet o = this._pattern, el = this.el;\n\t\t$.query(\".rating\", el).innerText = o.rating.toFixed(1);\n\t\t$.removeClass($.query(\".icon.rate.selected\", el), \"selected\");\n\t\tif (o.userRating === 1) { $.addClass($.query(\".icon.thumbup\", el), \"selected\"); }\n\t\telse if (o.userRating === -1) { $.addClass($.query(\".icon.thumbdown\", el), \"selected\"); }\n\t}\n\n\t_updateFavorite() {\n\t\tlet o = this._pattern, el = this.el;\n\t\t$.toggleClass($.query(\".icon.favorites\", el), \"selected\", !!o.favorite);\n\t}\n\n\t_rate(val) {\n\t\tlet o = this._pattern;\n\t\to.userRating =  (val === o.userRating) ? 0 : val;\n\t\tthis._updateRating();\n\t\t\n\t\tServer.rate(o.id, o.userRating).then((data) => this._handleRate(data));\n\t}\n\n\t_share() {\n\t\tapp.load(this._pattern);\n\t\tapp.share.show();\n\t}\n\n\t_handleRate(data) {\n\t\tif (data.id === this._pattern.id) {\n\t\t\tthis._pattern.rating = data.rating;\n\t\t\tthis._updateRating();\n\t\t}\n\t}\n\n\t_favorite() {\n\t\tlet o = this._pattern;\n\t\tServer.favorite(o.id, !o.favorite).then((data) => this._handleFavorite(data));\n\t}\n\n\t_handleFavorite(data) {\n\t\tif (data.id === this._pattern.id) {\n\t\t\tthis._pattern.favorite = data.favorite;\n\t\t\tthis._updateFavorite();\n\t\t}\n\t}\n\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport app from \"../app\";\n\nexport default class Status {\n\tconstructor(el) {\n\t\tif (!el) { el = document.createElement(\"div\"); }\n\t\tthis.el = el;\n\t\t$.addClass(el, \"status\");\n\n\t\tel.addEventListener(\"mouseover\", () => this._showTooltip());\n\t\tel.addEventListener(\"mouseout\", () => this._hideTooltip());\n\t}\n\n\tdistract() {\n\t\tthis.el.innerHTML = '<svg class=\"icon distractor anim-spin\"><use xlink:href=\"#distractor\"></use></svg>';\n\t\tthis._show();\n\t\treturn this;\n\t}\n\n\thide(t=0) {\n\t\tthis._clearTimeout();\n\t\tif (t) {\n\t\t\tthis._timeoutId = setTimeout(()=>this._hide(), t*1000);\n\t\t} else { this._hide(); }\n\t\treturn this;\n\t}\n\n\tsuccess() {\n\t\tthis.el.innerHTML = '<svg class=\"icon success\"><use xlink:href=\"#check\"></use></svg>';\n\t\tthis._show();\n\t\treturn this;\n\t}\n\n\terror(msg) {\n\t\tlet el = this.el;\n\t\tel.innerHTML = '<svg class=\"icon alert\"><use xlink:href=\"#alert\"></use></svg>';\n\t\tthis._show();\n\t\tthis._ttMsg = msg;\n\t\treturn this;\n\t}\n\n\t_showTooltip() {\n\t\tif (!this._ttMsg) { return; }\n\t\tapp.tooltip.hover.showOn(\"status\", this._ttMsg, this.el, true, 0);\n\t}\n\n\t_hideTooltip() {\n\t\tapp.tooltip.hover.hide(\"status\");\n\t}\n\n\t_show() {\n\t\tthis.el.style.display = null;\n\t\tthis._ttMsg = null;\n\t\tthis._hideTooltip();\n\t\tthis._clearTimeout();\n\t}\n\n\t_hide() {\n\t\tthis.el.style.display = \"none\";\n\t\tthis._hideTooltip();\n\t\tthis._clearTimeout();\n\t}\n\n\t_clearTimeout() {\n\t\tif (this._timeoutId == null) { return; }\n\t\tclearTimeout(this._timeoutId);\n\t\tthis._timeoutId = null;\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport EventDispatcher from \"../events/EventDispatcher\";\n\nimport $ from \"../utils/DOMUtils\"\nimport Track from \"../utils/Track\"\n\nimport List from \"../controls/List\";\nimport Server from \"../net/Server\";\n\nimport app from \"../app\";\n\nexport default class Account extends EventDispatcher {\n\tconstructor () {\n\t\tsuper();\n\t\tthis._value = {};\n\t\tthis._initUI();\n\t}\n\t\n\tget value() {\n\t\treturn this._value;\n\t}\n\n\tset value(val={}) {\n\t\tthis._value = val;\n\t\tthis._updateUI();\n\t\tthis.dispatchEvent(\"change\");\n\t}\n\n\tget userId() { return this._value.userId; }\n\tget author() { return this._value.author || this._value.username || \"\"; }\n\tget username() { return this._value.username || \"\"; }\n\tget authenticated() { return !!this._value.username; } // this._value.authenticated;\n\tget type() { return this._value.type; }\n\t\n\tshowTooltip() {\n\t\tapp.tooltip.toggle.toggleOn(\"signin\", this.tooltipEl, this.signinBtn, true, 20);\n\t}\n\t\n// private methods:\n\t_initUI() {\n\t\tlet template = (o) => '<svg class=\"icon inline\"><use xlink:href=\"#'+o.toLowerCase()+'\"></use></svg>'+o;\n\t\tthis.signinBtn = $.query(\".header .signin\");\n\t\tthis.tooltipEl = $.query(\"#library > #tooltip-signin\");\n\t\tthis.signinEl = $.query(\".signin\", this.tooltipEl);\n\t\tthis.signoutEl = $.query(\".signout\", this.tooltipEl);\n\t\t$.query(\".signoutbtn\", this.signoutEl).addEventListener(\"click\", (evt) => this._doSignout());\n\t\tthis.signinBtn.addEventListener(\"click\", (evt) => this.showTooltip());\n\t\t$.query(\".icon.help\", this.signinEl).addEventListener(\"click\", ()=> app.sidebar.goto(\"signin\"));\n\t\tthis.signinList = new List($.query(\"ul.list\", this.signinEl), {data:[\"GitHub\",\"Facebook\", \"Google\"], template});\n\t\tthis.signinList.on(\"change\", ()=>this._signinListChange());\n\t}\n\n\t_updateUI() {\n\t\tlet auth = this.authenticated;\n\t\t$.toggleClass(this.tooltipEl, \"authenticated\", auth);\n\t\t$.query(\".label\", this.signinBtn).innerText = auth ? \"Sign Out\" : \"Sign In\";\n\t\tif (auth) {\n\t\t\t$.query(\".username\", this.signoutEl).innerText = this.username;\n\t\t\t$.query(\".type\", this.signoutEl).innerText = this.type;\n\t\t}\n\t}\n\n\t_doSignout() {\n\t\t$.addClass(this.tooltipEl, \"wait\");\n\t\tServer.logout().then((data) => { this._handleSignout(data); }).finally(()=>this._cleanSignout());\n\t}\n\n\t_handleSignout(data) {\n\t\tthis.value = data;\n\t}\n\n\t_cleanSignout(err) {\n\t\t$.removeClass(this.tooltipEl, \"wait\");\n\t}\n\t\n\t_signinListChange() {\n\t\tlet service = this.signinList.selected.toLowerCase();\n\t\t$.addClass(this.tooltipEl, \"wait\");\n\t\tTrack.event(\"login\", \"access\", service);\n\t\tsetTimeout(() => Server.login(service), 100);\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport EventDispatcher from \"../events/EventDispatcher\";\n\nimport $ from \"../utils/DOMUtils\";\nimport Utils from \"../utils/Utils\";\nimport app from \"../app\";\n\nimport LinkRow from \"../controls/LinkRow\";\nimport Status from \"../controls/Status\";\nimport Account from \"./Account\";\nimport Server from \"../net/Server\";\n\nexport default class Share extends EventDispatcher {\n\tconstructor (el) {\n\t\tsuper();\n\t\tthis.el = el;\n\t\tthis._pattern = false;\n\t\tthis._initUI();\n\t\tapp.on(\"change\", () => this._handleAppChange());\n\t\tapp.on(\"load\", () => this._handleAppLoad());\n\t\tapp.account.on(\"change\", () => this._handleAccountChange());\n\t}\n\n// public methods:\n\tget value() {\n\t\treturn {\n\t\t\tid: this._pattern ? this._pattern.id : null,\n\t\t\tname: this.name,\n\t\t\tauthor: this.author,\n\t\t\tdescription: this.description,\n\t\t\tkeywords: this.keywords\n\t\t}\n\t}\n\n\tset pattern(o) {\n\t\tthis._pattern = o;\n\t\tthis.name = o.name;\n\t\tthis.description = o.description;\n\t\tthis.keywords = o.keywords;\n\n\t\tthis._updateUI();\n\t\tthis._pushHistory(o);\n\t}\n\n\tget name() { return this.nameFld.value; }\n\tset name(val) {\n\t\tthis.nameFld.value = val||\"\";\n\t\tthis.hNameFld.innerText = val||\"Untitled Pattern\";\n\t}\n\n\tget author() { return this.authorFld.value; }\n\tset author(val) { this.authorFld.value = val||\"\"; }\n\n\tget description() { return this.descriptionFld.value; }\n\tset description(val) { this.descriptionFld.value = val||\"\"; }\n\n\tget keywords() { return this.keywordsFld.value; }\n\tset keywords(val) { this.keywordsFld.value = val||\"\"; }\n\n\tshow() {\n\t\tapp.sidebar.goto(\"share\");\n\t}\n\n// private methods:\n\t_initUI() {\n\t\tlet el = this.el;\n\t\tlet mainEl = this.mainEl = $.query(\"> #share_main\", el);\n\t\tlet comEl = this.communityEl = $.query(\"> #share_community\", el);\n\n\t\t// set up header:\n\t\tlet hEl = $.query(\".header\");\n\t\tthis.hNewBtn = $.query(\".new\", hEl);\n\t\tthis.hForkBtn = $.query(\".fork\", hEl);\n\t\tthis.hSaveBtn = $.query(\".save\", hEl);\n\t\tthis.hNameFld = $.query(\".name\", hEl);\n\t\t$.query(\".settings\", hEl).addEventListener(\"click\", () => this.show());\n\t\t$.query(\".savekey\", this.hSaveBtn).innerText = \"(\"+Utils.getCtrlKey()+\"-s)\";\n\t\tthis.hSaveBtn.addEventListener(\"click\", () => this._doSave());\n\t\tthis.hNewBtn.addEventListener(\"click\", () => this._doNew());\n\n\t\tthis._defaultName = this.hNameFld.innerText;\n\n\t\t// set up main:\n\t\tthis._privateRow = $.query(\".row.private\", this.mainEl);\n\t\tthis._privateRow.addEventListener(\"click\", ()=> this._doPrivate());\n\t\tthis._privateStatus = new Status($.query(\".status\", this._privateRow));\n\t\tthis._favoritesRow = $.query(\".row.favorites\", this.mainEl);\n\t\tthis._favoritesRow.addEventListener(\"click\", ()=> this._doFavorite());\n\t\tthis._favoritesStatus = new Status($.query(\".status\", this._favoritesRow));\n\t\tthis._communityRow = $.query(\".row.community\", this.mainEl);\n\t\tthis._communityRow.addEventListener(\"click\", ()=> this._showCommunity());\n\t\tthis._deleteRow = $.query(\".row.delete\", this.mainEl);\n\t\tthis._deleteRow.addEventListener(\"click\", ()=> this._doDelete());\n\t\tthis._deleteStatus = new Status($.query(\".status\", this._deleteRow));\n\t\t$.query(\".row.signin a\", this.mainEl).addEventListener(\"click\", ()=> this._doSignin());\n\n\t\t// set up link row:\n\t\tthis._linkRow = new LinkRow($.query(\".link.row\", mainEl));\n\n\t\t// set up save buttons:\n\t\tlet saveEl = this.saveEl = $.query(\"> .save\", mainEl);\n\t\tthis.saveBtn = $.query(\".button.save\", saveEl);\n\t\tthis.forkBtn = $.query(\".button.fork\", saveEl);\n\t\tthis.saveBtn.addEventListener(\"click\", ()=> this._doSave());\n\t\tthis.forkBtn.addEventListener(\"click\", ()=> this._doSave(true));\n\t\tthis.saveStatus = new Status($.query(\".status\", saveEl));\n\t\tthis.saveMessage = $.query(\".message\", saveEl);\n\n\t\t// set up input fields:\n\t\tlet infoEl = this.infoEl = $.query(\"> .info\", mainEl);\n\t\tthis.nameFld = $.query(\".name\", infoEl);\n\t\tthis.authorFld = $.query(\".author\", infoEl);\n\t\tthis.descriptionFld = $.query(\".description\", infoEl);\n\t\tthis.keywordsFld = $.query(\".keywords\", infoEl);\n\n\t\t// listen for changes:\n\t\tthis.nameFld.addEventListener(\"input\", () => this._handleChange());\n\t\tthis.authorFld.addEventListener(\"input\", () => this._handleChange());\n\t\tthis.descriptionFld.addEventListener(\"input\", () => this._handleChange());\n\t\tthis.keywordsFld.addEventListener(\"input\", () => this._handleChange());\n\t\t\n\t\t/// set up community:\n\t\tlet comInputsEl = $.query(\".inputs\", comEl)\n\t\t$.query(\".button.cancel\", comEl).addEventListener(\"click\", ()=> app.sidebar.goto(\"share\"));\n\t\t$.query(\".button.share\", comEl).addEventListener(\"click\", ()=> this._doComSave());\n\t\tthis.comSaveStatus = new Status($.query(\".status\", comEl));\n\t\tthis._comNameFld = $.query(\".name\", comInputsEl);\n\t\tthis._comAuthorFld = $.query(\".author\", comInputsEl);\n\t\tthis._comDescriptionFld = $.query(\".description\", comInputsEl);\n\t\tthis._comKeywordsFld = $.query(\".keywords\", comInputsEl);\n\n\t\t// set up cmd-s listener:\n\t\twindow.document.addEventListener(\"keydown\", (evt) => this._handleKey(evt) );\n\t}\n\n\t_updateUI() {\n\t\tlet o = this._pattern, text;\n\t\tlet isChanged = this._isChanged(), isNew = this._isNew(), isOwned = this._isOwned();\n\t\t\n\t\t$.toggleClass([this.forkBtn, this.hForkBtn], \"disabled\", !this._canFork());\n\t\t$.toggleClass(this.saveBtn, \"disabled\", !this._canSave());\n\n\t\t$.toggleClass(this.hSaveBtn, \"disabled\", !this._canSave() && isOwned);\n\t\t$.query(\".action\",this.hSaveBtn).innerText = isOwned ? \"Save\" : \"Fork\";\n\t\t\n\t\tif (!isOwned) { text = \"This pattern was created by '\"+(o.author||\"[anonymous]\")+\"'.\"; }\n\t\telse if (!isChanged) { text = \"No unsaved changes.\" }\n\t\telse if (isNew) { text = \"Save will create a shareable public link.\"; }\n\t\telse { text = \"Save will update the current link.\"; }\n\n\t\tif (!isOwned && !isChanged) { text += \" Fork to create your own copy.\"; }\n\t\telse if (!isNew) { text += \" Fork will create a new copy\" + (isChanged ? \" with your changes.\" : \".\"); }\n\t\t\n\t\tthis._setSaveText(text);\n\n\t\tthis._linkRow.pattern = this._pattern.id && this._pattern;\n\n\t\t$.toggleClass(this._privateRow, \"disabled\", isNew || !isOwned);\n\t\t$.toggleClass(this._favoritesRow, \"disabled\", isNew || !isOwned);\n\t\t$.toggleClass(this._communityRow, \"disabled\", isNew || !isOwned);\n\t\t$.toggleClass(this._deleteRow, \"disabled\", isNew || !isOwned);\n\n\t\t$.toggleClass(this._privateRow, \"active\", o.access === \"private\");\n\t\t$.toggleClass(this._favoritesRow, \"active\", !!o.favorite);\n\t}\n\t\n\t_isNew() {\n\t\treturn !this._pattern.id;\n\t}\n\n\t_isOwned() {\n\t\tlet o = this._pattern;\n\t\treturn this._isNew() || (o.userId === app.account.userId);\n\t}\n\n\t_isChanged() {\n\t\treturn app.unsaved;\n\t}\n\n\t_canSave() {\n\t\treturn this._isChanged() && this._isOwned();\n\t}\n\n\t_canFork() {\n\t\treturn !this._isNew();\n\t}\n\n\t_pushHistory(pattern) {\n\t\tlet history = window.history, url = Utils.getPatternURL(pattern);\n\t\tlet title = \"RegExr: \"+ (pattern.name || \"Learn, Build, & Test RegEx\");\n\t\t\n\t\tif (history.state && (pattern.id === history.state.id)) {\n\t\t\thistory.replaceState(pattern, title, url);\n\t\t} else {\n\t\t\thistory.pushState(pattern, title, url);\n\t\t}\n\t\twindow.document.title = title;\n\t}\n\n\t_handleKey(evt) {\n\t\tlet mac = Utils.isMac();\n\t\tif (evt.key === \"s\" && ((mac && evt.metaKey) || (!mac && evt.ctrlKey))) {\n\t\t\tthis._doSave(false);\n\t\t\tevt.preventDefault();\n\t\t}\n\t}\n\n\t_doSave(fork) {\n\t\t// if we can't save for some reason, then show the panel.\n\t\tif (!fork && !this._canSave()) {\n\t\t\tapp.sidebar.goto(\"share\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (fork && !this._canFork()) { return; }\n\n\t\tlet o = app.state;\n\t\t$.addClass($.query(\".buttons\", this.saveEl), \"wait\");\n\t\tthis.saveStatus.distract();\n\t\tServer.save(o, fork)\n\t\t\t.then((data) => this._handleSave(data))\n\t\t\t.catch((err) => this._handleSaveErr(err));\n\t}\n\n\t_handleSave(data) {\n\t\tlet isNew = (this._pattern.id == null), isFork = !isNew && (data.id !== this._pattern.id);\n\t\t$.removeClass($.query(\".buttons\", this.saveEl), \"wait\");\n\t\tthis.saveStatus.hide();\n\n\t\tapp.state = data;\n\n\t\tif (isFork || isNew) {\n\t\t\tthis.show();\n\t\t\tif (isFork || !this.name) {\n\t\t\t\tthis.nameFld.focus();\n\t\t\t\tthis.nameFld.select();\n\t\t\t}\n\t\t\tthis._linkRow.showMessage(\"<b>Saved.</b> New share link created. Click to copy to clipboard.\");\n\t\t}\n\t}\n\t\n\t_handleSaveErr(err) {\n\t\t$.removeClass($.query(\".buttons\", this.saveEl), \"wait\");\n\t\tthis.saveStatus.error(this._getErrMsg(err));\n\t}\n\t\n\t_doNew() {\n\t\tapp.newDoc();\n\t}\n\n\t_doPrivate() {\n\t\tlet o = this._pattern;\n\t\tthis._privateStatus.distract();\n\t\tServer.private(o.id, o.access !== \"private\")\n\t\t\t.then((data) => this._handlePrivate(data))\n\t\t\t.catch((err) => this._handleErr(err, this._privateStatus));\n\t}\n\n\t_handlePrivate(data) {\n\t\tif (data.id === this._pattern.id) {\n\t\t\tthis._pattern.access = data.access;\n\t\t\tthis._privateStatus.hide();\n\t\t\tthis._updateUI();\n\t\t}\n\t}\n\t\n\t_doFavorite() {\n\t\tlet o = this._pattern;\n\t\tthis._favoritesStatus.distract();\n\t\tServer.favorite(o.id, !o.favorite)\n\t\t\t.then((data) => this._handleFavorite(data))\n\t\t\t.catch((err) => this._handleErr(err, this._favoritesStatus));\n\t}\n\t\n\t_handleFavorite(data) {\n\t\tif (data.id === this._pattern.id) {\n\t\t\tthis._pattern.favorite = data.favorite;\n\t\t\tthis._favoritesStatus.hide();\n\t\t\tthis._updateUI();\n\t\t}\n\t}\n\n\t_doDelete() {\n\t\tlet o = this._pattern;\n\t\tif (!confirm(\"Are you sure you want to permanently delete this pattern?\")) { return; }\n\t\tthis._deleteStatus.distract();\n\t\tServer.delete(o.id)\n\t\t\t.then((data) => this._handleDelete(data))\n\t\t\t.catch((err) => this._handleErr(err, this._deleteStatus));\n\t}\n\n\t_handleDelete(data) {\n\t\tthis._deleteStatus.hide();\n\t\tapp.state = {\n\t\t\tflavor: app.flavor.value\n\t\t}\n\t\tsetTimeout(()=>app.tooltip.toggle.showOn(\"delete\", \"Pattern was permanently deleted.\", this._deleteRow, true, 0), 1);\n\t}\n\n\t_handleErr(err, status) {\n\t\tstatus.error(this._getErrMsg(err)).hide(6);\n\t}\n\n\t_showCommunity() {\n\t\tapp.sidebar.goto(\"share_community\");\n\t\tthis._comNameFld.value = this.name;\n\t\tthis._comAuthorFld.value = this.author;\n\t\tthis._comDescriptionFld.value = this.description;\n\t\tthis._comKeywordsFld.value = this.keywords;\n\t}\n\n\t_doComSave() {\n\t\tif (!this._comNameFld.value) {\n\t\t\tthis._comNameFld.focus();\n\t\t\treturn;\n\t\t}\n\t\tlet o = app.state;\n\t\tthis.name = o.name = this._comNameFld.value;\n\t\tthis.author = o.author = this._comAuthorFld.value;\n\t\tthis.description = o.description = this._comDescriptionFld.value;\n\t\tthis.keywords = o.keywords = this._comKeywordsFld.value;\n\t\to.access = \"public\";\n\t\t$.addClass($.query(\".buttons\", this.communityEl), \"wait\");\n\t\tthis.comSaveStatus.distract();\n\t\tServer.save(o, true, true)\n\t\t\t.then((data) => this._handleComSave(data))\n\t\t\t.catch((err) => this._handleComSaveErr(err));\n\t}\n\n\t_handleComSave(data) {\n\t\t$.removeClass($.query(\".buttons\", this.communityEl), \"wait\");\n\t\tthis.comSaveStatus.hide();\n\t\tthis.show();\n\t}\n\n\t_handleComSaveErr(err) {\n\t\t$.removeClass($.query(\".buttons\", this.communityEl), \"wait\");\n\t\tthis.comSaveStatus.error(this._getErrMsg(err));\n\t}\n\n\t_handleChange() {\n\t\tthis.dispatchEvent(\"change\");\n\t}\n\n\t_handleAppChange() {\n\t\tthis._updateUI();\n\t}\n\n\t_handleAccountChange() {\n\t\tlet acc = app.account, rowEl = $.query(\".signin.row\", this.mainEl);\n\t\tif (!this.authorFld.value) { this.authorFld.value = acc.author || acc.username; }\n\t\t$.toggleClass(rowEl, \"authenticated\", acc.authenticated);\n\t\t$.query(\".username\", rowEl).innerText = acc.username;\n\t}\n\n\t_handleAppLoad() {\n\t\t$.toggleClass($.query(\".save .actions\", this.mainEl), \"disabled\");\n\t}\n\n\t_doSignin() {\n\t\tapp.account.showTooltip();\n\t}\n\n\t_setSaveText(str) {\n\t\tthis.saveMessage.innerText = str;\n\t}\n\n\t_getErrMsg(err) {\n\t\treturn \"<span class='error'>ERROR:</span> \"+app.reference.getError(\"servercomm\");\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport $ from \"../utils/DOMUtils\";\nimport Utils from \"../utils/Utils\";\n\nimport List from \"../controls/List\";\nimport content from \"../docs/sidebar_content\";\nimport Track from \"../utils/Track\";\nimport Server from \"../net/Server\";\nimport Community from \"./Community\";\nimport Example from \"./Example\";\nimport Share from \"./Share\";\n\nimport app from \"../app\";\n\nexport default class Sidebar {\n\tconstructor (el) {\n\t\tthis.el = el;\n\t\tthis.itemEl = null;\n\t\tthis.openReq = null;\n\t\tthis._initUI(el);\n\t\tthis._content = this._prepContent(content);\n\t\tthis.minList.data = [{id: \"menu\", label:\"Menu\"}].concat(content.kids);\n\t\tapp.flavor.on(\"change\", ()=>this._onFlavorChange());\n\t\tlet id = app.prefs.read(\"side\");\n\t\tif (!id || !this._idMap[id] || id === \"share\") { id = \"home\"; }\n\t\tthis.goto(id);\n\t\tif (app.isNarrow) { setTimeout(() => this.minimize(true, false), 1500); }\n\t}\n\n\tminimize(val=true, track=true) {\n\t\tif (val === this._minimized) { return; }\n\t\tif (val && track) { Track.event(\"minimize_menu\", \"engagement\"); }\n\t\t$.togglePanel(this.el, '.full', '.min', !val);\n\t\tthis._minimized = val;\n\t\tthis._updateUI();\n\t}\n\t\n\tgoto(id) {\n\t\tthis.show(this._idMap[id]);\n\t}\n\t\n\tshowToken(token) {\n\t\tthis.goto(app.reference.idForToken(token));\n\t}\n\t\n\tshow(item) {\n\t\tif (!item) { return; }\n\t\tif (item.hide) { return this.show(item.parent); }\n\t\tif (!item || item.id === \"menu\") { return; } // expand button on the min menu\n\t\tthis.minimize(false);\n\t\tif (item.id) {\n\t\t\tif (item.id === \"home\" || (item.parent && item.parent.id === \"home\") || this._isInReference(item)) {\n\t\t\t\tapp.prefs.write(\"side\", item.id);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!item.el && !item.kids) {\n\t\t\tif (this.searchMode || !item.parent || item.parent === this.curItem) {\n\t\t\t\t// in a search, community / favorites, of selecting a leaf child from a list.\n\t\t\t\tthis.selItem = item;\n\t\t\t\tthis.menuList.selected = item.id;\n\t\t\t\treturn this._showContent(item);\n\t\t\t} else if (item.parent !== this.curItem) {\n\t\t\t\t// trying to jump to a leaf child without previously showing parent.\n\t\t\t\tthis.show(item.parent);\n\t\t\t\treturn this.show(item);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._resetFull();\n\t\t\n\t\tthis.curItem = item;\n\t\t$.query(\"h1\", this.titleEl).innerText = item.label;\n\t\t$.query(\"svg.back.icon use\", this.titleEl).setAttribute(\"xlink:href\", \"#\"+(item.parent ? \"arrowleft\" : \"menu\"));\n\t\tif (item.el) {\n\t\t\tthis._showEl($.query(\"#library \"+item.el));\n\t\t} else {\n\t\t\tthis._showContent(item);\n\t\t}\n\t\t\n\t\tif (item.kids && item.list !== false) {\n\t\t\t$.removeClass(this.fullEl, \"no-list\");\n\t\t\tthis.menuList.data = item.kids || item.parent.kids;\n\t\t}\n\t\tif (item.search) { $.removeClass(this.fullEl, \"no-search\"); }\n\t\t\n\t\t// special handling:\n\t\tif (item.id === \"community\") {\n\t\t\tthis.menuList.template = this.communityListTemplate;\n\t\t\tthis._onSearchSubmit();\n\t\t} else if (item.id === \"favorites\") {\n\t\t\tthis.menuList.template = this.communityListTemplate;\n\t\t\tthis._loadFavorites();\n\t\t}\n\t}\n\t\n\tback() {\n\t\tif (this.curItem.parent) { this.show(this.curItem.parent); }\n\t\telse { this.minimize(true); }\n\t}\n\t\n\tmenuListTemplate(o) {\n\t\treturn (o.parent && o.parent.id === \"home\" ? '<svg class=\"icon\"><use xlink:href=\"#'+ o.id +'\"></use></svg>' : \"\") + \n\t\t\t   '<span class=\"label\">'+ (o.label||o.id) +\"</span>\" + \n\t\t\t   (o.token ? '<span class=\"token\">'+ o.token.replace(\"<\", \"&lt;\") + '</span>' : \"\") +\n\t\t\t   (o.kids || o.el ? '<svg class=\"small icon\"><use xlink:href=\"#arrowright\"></use></svg>' : \"\");\n\t}\n\t\n\tcommunityListTemplate(o) {\n\t\treturn '<span class=\"label\">'+ Utils.htmlSafe(o.name) +\"</span>\" +\n\t\t\t   '<span class=\"rating\">' +\n\t\t\t   (o.favorite ? '<svg class=\"small icon favorites\"><use xlink:href=\"#favorites\"></use></svg>' : '') +\n\t\t\t   '<svg class=\"small icon thumb\"><use xlink:href=\"#thumb\"></use></svg>'+o.rating.toFixed(1)+'</span>';\n\t}\n\t\n// private methods:\n\t_initUI(el) {\n\t\t// set up full width content:\n\t\tthis.fullEl = $.query(\"> .full\", el);\n\t\t\n\t\t// title bar:\n\t\tthis.titleEl = $.query(\"> header\", this.fullEl);\n\t\t$.query(\"> .close.icon\", this.titleEl).addEventListener(\"click\", () => this.minimize(true));\n\t\t$.query(\"> .backrow\", this.titleEl).addEventListener(\"click\", () => this.back());\n\t\t\n\t\t// search:\n\t\tthis.searchEl = $.query(\"> .search\", this.fullEl);\n\t\tthis.searchFld = $.query(\"> .search > input\", this.fullEl);\n\t\tthis.searchFld.addEventListener(\"input\", ()=>this._onSearchChange());\n\t\tthis.searchFld.addEventListener(\"keyup\", (evt)=>(evt.keyCode === 13)&&this._onSearchSubmit());\n\t\tlet searchBtn = $.query(\"> svg.icon.search\", this.searchEl);\n\t\tsearchBtn.addEventListener(\"click\", ()=>this._onSearchSubmit());\n\t\t\n\t\t// list & content:\n\t\tthis.listEl = $.query(\"> .list\", this.fullEl);\n\t\tthis.menuList = new List(this.listEl, {data:content.kids, template:this.menuListTemplate});\n\t\tthis.menuList.on(\"change\", () => {\n\t\t\tconst lastId = this.curItem.id;\n\t\t\tthis.show(this.menuList.selectedItem);\n\t\t\tif (lastId !== this.curItem.id) {\n\t\t\t\tTrack.page(\"sidebar/\"+this.curItem.id);\n\t\t\t}\n\t\t});\n\t\tthis.menuList.on(\"dblclick\", ()=> this._onDblClick(this.menuList.selectedItem));\n\t\tthis.contentEl = $.query(\"> .content\", this.fullEl);\n\t\t\n\t\t// set up minimized sidebar:\n\t\tthis.minEl = $.query(\"> .min\", el);\n\t\tthis.minEl.addEventListener(\"click\", () => this.minimize(false));\n\t\t\n\t\tlet template = $.template`<svg class=\"icon\"><use xlink:href=\"#${\"id\"}\"></use></svg>`;\n\t\tthis.minList = new List($.query(\"> .list\", this.minEl), {template});\n\t\tthis.minList.on(\"change\", (evt)=> { this.show(this.minList.selectedItem); evt.preventDefault(); Track.page(\"sidebar/\"+this.curItem.id); });\n\n\t\t// set up special content:\n\t\tthis.community = new Community($.query(\"#library > #community\"));\n\t\tthis.share = new Share($.query(\"#library > #share\"));\n\t\tthis._prepCheatsheet(); // TODO: switch to a Cheatsheet class.\n\n\t\t$.query(\".doc > .blocker\").addEventListener(\"mousedown\", (evt) => {\n\t\t\tthis.minimize(true);\n\t\t})\n\t}\n\n\t_updateUI() {\n\t\t// TODO: this is cheating a bit:\n\t\tlet doc = $.query(\".doc\");\n\t\t$.toggleClass(doc, \"fadeback\", !this._minimized);\n\t}\n\n\t_resetFull() {\n\t\tif (this.itemEl) {\n\t\t\t$.query(\"#library\").appendChild(this.itemEl);\n\t\t\tthis.itemEl = null;\n\t\t}\n\t\tthis._abortReq();\n\t\t$.addClass(this.fullEl, \"no-search no-list\");\n\t\tthis.searchFld.value = \"\";\n\t\tthis.searchMode = false;\n\t\tthis.menuList.template = this.menuListTemplate;\n\t\t$.removeClass(this.searchEl, \"wait\");\n\t}\n\t\n\t_showContent(o) {\n\t\tif ((this.curItem.id === \"community\" || this.curItem.id === \"favorites\") && o !== this.curItem) {\n\t\t\tthis._showEl(this.community.el);\n\t\t\tthis.community.item = o;\n\t\t} else {\n\t\t\tlet ref = app.reference;\n\t\t\tthis.contentEl.innerHTML = this._isInReference(o) ? ref.getContent(o.id) : ref.fillTags((o.desc || \"\") + (o.ext || \"\"), o, ref);\n\t\t\tif (o.example) { this.contentEl.appendChild(new Example(\"Example\", o.example).el); }\n\t\t}\n\t}\n\n\t_isInReference(o) {\n\t\treturn this._isIn(o, \"reference\");\n\t}\n\t\n\t_isIn(o, id) {\n\t\tdo { if (o.id === id) { return true; } } while (o = o.parent);\n\t\treturn false;\n\t}\n\t\n\t_onDblClick(o) {\n\t\tif (o.token) {\n\t\t\tlet expr = app.expression;\n\t\t\tif (o.parent.id === \"flags\") { expr.toggleFlag(o.token); }\n\t\t\telse { expr.insert(o.token); }\n\t\t} else if (this.curItem.id === \"community\" || this.curItem.id === \"favorites\") {\n\t\t\tapp.load(o);\n\t\t}\n\t}\n\t\n\t_showEl(el) {\n\t\tif (this.itemEl === el) { return; }\n\t\tthis.itemEl = el;\n\t\t$.empty(this.contentEl).appendChild(el);\n\t}\n\n\t_prepContent(content) {\n\t\t// inject reference:\n\t\tlet i = Utils.findIndex(content.kids, (o)=>o.id===\"reference\");\n\t\tcontent.kids.splice(i, 1, app.reference.content);\n\t\t// grab home content from HTML:\n\t\tcontent.desc = this.contentEl.innerHTML;\n\t\t// build idMap:\n\t\tthis._idMap = {home:content};\n\t\treturn Utils.prepMenuContent(content, this._idMap);\n\t}\n\t\n\t_prepCheatsheet() {\n\t\tlet els = $.queryAll(\"#cheatsheet *[data-id]\");\n\t\tlet f = (evt)=>this.goto(evt.target.dataset.id);\n\t\tfor (let i=0, l=els.length; i<l; i++) {\n\t\t\tels[i].addEventListener(\"click\", f);\n\t\t}\n\t\tels = $.queryAll(\"#cheatsheet tr td:first-child\");\n\t\tf = (evt)=>app.expression.insert(evt.target.innerText);\n\t\tfor (let i=0, l=els.length; i<l; i++) {\n\t\t\tlet el = els[i], tokens = el.innerText.split(\" \");\n\t\t\t$.empty(el);\n\t\t\tfor (let j=0; j<tokens.length; j++) {\n\t\t\t\tlet span = $.create(\"a\", null, tokens[j], el);\n\t\t\t\tspan.addEventListener(\"click\", f);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_onSearchChange() {\n\t\tlet id = this.curItem.id, search = this.searchFld.value;\n\t\tif (id === \"reference\") { this._searchReference(search); }\n\t\telse if (id === \"favorites\") { this._searchFavorites(search); }\n\t\telse { return; }\n\t\t// TODO: this is a hacky way to reset the content:\n\t\tthis.contentEl.innerHTML = this.curItem.desc;\n\t\tthis.itemEl = null;\n\t}\n\n\t_searchReference(search) {\n\t\tlet result = app.reference.search(search);\n\t\tthis.searchMode = !!search;\n\t\tthis.menuList.data = search ? result : this.curItem.kids;\n\t\t// TODO: would be nice to show a \"no match\" message, but difficult to do with `hide=true` entries\n\t}\n\n\t_searchFavorites(search) {\n\t\tlet data = this.menuList.data, rank = Utils.searchRank;\n\t\tdata.forEach((o) => o.hide = !rank(o, search));\n\t\tthis.menuList.data = data;\n\t}\n\t\n\t_onFlavorChange() {\n\t\tlet item = this.selItem || this.curItem;\n\t\tif (!this._isInReference(item)) { return; }\n\t\tthis.selItem = this.curItem = null;\n\t\tthis.show(item);\n\t}\n\t\n\t_onSearchSubmit() {\n\t\tthis._abortReq();\n\t\tlet val = this.searchFld.value;\n\t\tif (this.curItem.id === \"community\") {\n\t\t\tif (val) { Track.event(\"search\", \"engagement\", {search_term:val, target:\"community\"}); }\n\t\t\t$.addClass(this.searchEl, \"wait\");\n\t\t\tthis._showListMsg();\n\t\t\tthis.openReq = Server.communitySearch(val)\n\t\t\t\t.then((data)=>this._showServerResults(data))\n\t\t\t\t.catch((msg)=>this._showListMsg(msg))\n\t\t\t\t.finally(()=>this._reqCleanup());\n\t\t}\n\t\tthis.searchFld.select();\n\t}\n\t\n\t_loadFavorites() {\n\t\tthis._abortReq();\n\t\tlet val = this.searchFld.value;\n\t\tthis.openReq = Server.patterns()\n\t\t\t.then((data)=>this._showServerResults(data))\n\t\t\t.catch((msg)=>this._showListMsg(msg))\n\t\t\t.finally(()=>this._reqCleanup());\n\t\tthis._showListMsg();\n\t}\n\n\t_showListMsg(msg=\"Loading...\") {\n\t\tthis.listEl.innerHTML = \"<li class='loading'>\"+msg+\"</li>\";\n\t}\n\t\n\t_abortReq() {\n\t\tif (this.openReq) { this.openReq.abort(); }\n\t\tthis.openReq = null;\n\t}\n\t\n\t_showServerResults(data) {\n\t\tthis.menuList.data = data.results;\n\t\tif (data.results.length === 0) {\n\t\t\tthis._showListMsg(this.curItem.id === \"community\" ? \"No matches.\" : \"No patterns created or favorited.\");\n\t\t}\n\t}\n\t\n\t_reqCleanup(msg) {\n\t\t$.removeClass(this.searchEl, \"wait\");\n\t}\n\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport EventDispatcher from \"../events/EventDispatcher\";\n\nimport $ from \"../utils/DOMUtils\"\nimport app from \"../app\";\n\nexport default class Theme extends EventDispatcher {\n\tconstructor (el) {\n\t\tsuper();\n\t\tthis.el = el;\n\t\tthis.urlTemplate = \"./assets/themes/%name%.css\";\n\t\tthis.targetNode = this._node = null;\n\t\tthis._dark = false;\n\t\tthis._initUI();\n\t\tthis.dark = !!app.prefs.read(\"dark\");\n\t}\n\n\tset dark(val) {\n\t\tval = !!val;\n\t\tif (this._dark === val) { return; }\n\t\tthis._dark = val;\n\t\tthis._load(val ? \"dark\" : null);\n\t\t$.toggleClass(this.themeBtn, \"selected\", val);\n\t\tapp.prefs.write(\"dark\", val);\n\t}\n\t\n\tget dark() {\n\t\treturn this._dark;\n\t}\n\n\t_initUI() {\n\t\tthis.themeBtn = $.query(\".header .button.theme\", this.el);\n\t\tthis.themeBtn.addEventListener(\"click\", (evt) => this._toggleTheme());\n\t}\n\n\t_load(id) {\n\t\tif (id === this._id) { return; }\n\t\tthis._id = id;\n\t\tif (this._node) { this._node.remove(); }\n\t\tif (!id) { this._change(); return; }\n\t\tlet tmpl = this.urlTemplate, n = $.create(\"link\");\n\t\tn.addEventListener(\"load\", () => this._change());\n\t\tn.rel = \"stylesheet\";\n\t\tn.type = \"text/css\";\n\t\tn.href = tmpl ? tmpl.replace(/%name%/g, id) : id;\n\t\tthis._node = (this.targetNode || document.head).appendChild(n);\n\t}\n\n\t_change() {\n\t\tthis.dispatchEvent(\"change\");\n\t}\n\n\t_toggleTheme() {\n\t\tthis.dark = !this.dark;\n\t}\n\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Utils from \"../utils/Utils.js\";\n\nexport default class Reference {\n\t\n\tconstructor(content, flavor, config) {\n\t\tthis._config = config;\n\t\tthis._flavor = flavor;\n\t\tthis._flavor.on(\"change\", ()=> this._flavorChange());\n\t\t\n\t\tthis._injectEscChars(content);\n\t\t\n\t\tthis._idMap = {reference:content};\n\t\tthis._content = Utils.prepMenuContent(content, this._idMap);\n\t\tthis._misc = Utils.prepMenuContent(content.misc, this._idMap);\n\t\tthis._flavorChange();\n\t}\n\t\n\tget content() {\n\t\treturn this._content;\n\t}\n\t\n\tsearch(searchStr) {\n\t\tfunction srch(kids, results) {\n\t\t\tfor (let i=0, l=kids.length; i<l; i++) {\n\t\t\t\tlet kid = kids[i], points=0;\n\t\t\t\tif (kid.kids) { srch(kid.kids, results); continue; }\n\t\t\t\tif (points = Utils.searchRank(kid, searchStr)) {\n\t\t\t\t\tkid.__searchPoints = points;\n\t\t\t\t\tresults.push(kid);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn results;\n\t\t}\n\t\treturn srch(this.content.kids, []).sort((a,b)=>b.__searchPoints - a.__searchPoints);\n\t}\n\t\n\tidForToken(token) {\n\t\tlet errId = token.error && token.error.id;\n\t\tif (this._idMap[errId]) { return errId; }\n\t\tif (this._idMap[token.type]) { return token.type; }\n\t\tif (this._idMap[token.clss]) { return token.clss; }\n\t\treturn errId || token.type || token.clss;\n\t}\n\t\n// methods used in fillTags:\n\tgetChar(token) {\n\t\tlet chr = Reference.NONPRINTING_CHARS[token.code];\n\t\treturn chr ? chr : \"\\\"\" + String.fromCharCode(token.code) + \"\\\"\";\n\t}\n\t\n\tgetQuant(token) {\n\t\tlet min = token.min, max = token.max;\n\t\treturn min === max ? min : max === -1 ? min + \" or more\" : \"between \" + min + \" and \" + max;\n\t}\n\t\n\tgetUniCat(token) {\n\t\treturn Reference.UNICODE_CATEGORIES[token.value] || \"[Unrecognized]\";\n\t}\n\n\tgetModes(token) {\n\t\tlet str = (token.on ? \" Enable \\\"<code>\"+token.on+\"</code>\\\".\" : \"\")\n\t\tif (token.off) { str += \" Disable \\\"<code>\"+token.off+\"</code>\\\".\"; }\n\t\treturn str;\n\t}\n\n\tgetInsensitive(token) {\n\t\tif (token.code) {\n\t\t\tlet chr = String.fromCharCode(token.code);\n\t\t\tif (chr.toLowerCase() === chr.toUpperCase()) { return \"\"; }\n\t\t}\n\t\treturn token.modes ? `Case ${token.modes.i ? \"in\" : \"\"}sensitive.` : \"\";\n\t}\n\n\tgetDotAll(token) {\n\t\treturn (token.modes.s ? \"including\" : \"except\") + \" line breaks\";\n\t}\n\n\tgetLabel(token) {\n\t\tlet node = this.getNodeForToken(token);\n\t\treturn node ? node.label || node.id || \"\" : token.type;\n\t}\n\n\tgetDesc(token) {\n\t\treturn this.getVal(this.getNodeForToken(token), \"desc\");\n\t}\n\n\tgetLazy(token) {\n\t\treturn token.modes.U ? \"greedy\" : \"lazy\";\n\t}\n\n\tgetLazyFew(token) {\n\t\treturn token.modes.U ? \"many\" : \"few\";\n\t}\n\n\tgetPHPVersion() {\n\t\treturn this._config.PHPVersion;\n\t}\n\n\tgetPCREVersion() {\n\t\treturn this._config.PCREVersion;\n\t}\n\n\tgetCtrlKey() {\n\t\treturn Utils.getCtrlKey();\n\t}\n\n\tgetEscChars() {\n\t\tlet o = this._flavor.profile.escChars, str=\"\";\n\t\tfor (let n in o) { str += n; }\n\t\treturn str;\n\t}\n\n\t/*\n\tSearches for tags in the string in the format:\n\t`{{prop.prop}}` or `{{method(prop.prop)}}`\n\t\n\tThe first format will inject the specified property of the data object.\n\tFor example, `{{a.b}}` would inject the value of `data.a.b`.\n\t\n\tThe second will inject the results of calling the specified function on the functs object with a property of the data object as it's parameter (or the data object itself if empty).\n\tFor example, `{{myMethod(a.b)}}` would inject the return value of `functs.myMethod(data.a.b)`.\n\t\n\tCurrently only supports a single param.\n\t */\n\tfillTags(str, data, functs, maxLength=20, htmlSafe=true) {\n\t\tlet match;\n\t\twhile (match = str.match(/{{~?[\\w.()]+}}/)) {\n\t\t\tlet val, f, safe=false;\n\t\t\tval = match[0].substring(2, match[0].length - 2);\n\t\t\tif (val[0] === \"~\") {\n\t\t\t\tval = val.substr(1);\n\t\t\t\tsafe = true;\n\t\t\t}\n\t\t\tlet match2 = val.match(/\\([\\w.]*\\)/);\n\t\t\tif (match2) {\n\t\t\t\tf = val.substr(0, match2.index);\n\t\t\t\tval = match2[0].substring(1, match2[0].length - 1);\n\t\t\t} else {\n\t\t\t\tf = null;\n\t\t\t}\n\t\t\tlet o = data, arr = val.split(\".\");\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tlet prop = arr[i];\n\t\t\t\tif (prop && o) { o = o[prop]; }\n\t\t\t}\n\t\t\tval = o;\n\t\t\tif (f) {\n\t\t\t\tif (functs[f]) { val = functs[f](val); }\n\t\t\t\telse { val = \" <b class='exp-error'>[\"+f+\"]</b> \"; }\n\t\t\t}\n\t\t\tif (!safe && (maxLength || htmlSafe)) { val = Utils.shorten(val, maxLength, htmlSafe, \"i\"); }\n\t\t\tstr = str.replace(match[0], val);\n\t\t}\n\t\treturn str;\n\t}\n\t\n\t// returns doc props from the profile or reference as appropriate (ex. tip, desc, ext)\n\tgetVal(node, prop) {\n\t\tif (!node) { return \"\"; }\n\t\tlet pDocs = this._flavor.getDocs(node.id), pRef = (pDocs && pDocs[prop]);\n\t\tif (pRef != null && pRef[0] !== \"+\") { return pRef; }\n\t\tlet ref=(node&&node[prop])||\"\";\n\t\treturn pRef != null ? ref+pRef.substr(1) : ref;\n\t}\n\t\n\tgetNodeForToken(token) {\n\t\tlet id=this.idForToken(token), clss = token.clss;\n\t\t\n\t\t// Special cases:\n\t\tif (clss === \"quant\") { id = clss; }\n\t\tif (clss === \"esc\" && token.type !== \"escsequence\") { id = \"escchar\"; }\n\n\t\treturn this.getNode(id);\n\t}\n\n\tgetNode(id) {\n\t\tlet map=this._idMap, node = map[id]\n\t\twhile (node&&node.proxy) { node = map[node.proxy]; }\n\t\treturn node;\n\t}\n\t\n\tgetError(error, token) {\n\t\tlet errId = error && error.id;\n\t\tlet str = this._content.errors[errId] || \"no docs for error='\" + errId + \"'\";\n\t\tif (token) { str = this.fillTags(str, token, this, 20); }\n\t\treturn str;\n\t}\n\t\n\ttipForToken(token) {\n\t\tif (!token) { return null; }\n\n\t\tlet node = this.getNodeForToken(token), label, tip;\n\n\t\tif (token.error && !token.error.warning) {\n\t\t\tlabel = \"<span class='error'>ERROR: </span>\";\n\t\t\ttip = this.getError(token.error, token);\n\t\t} else {\n\t\t\tlabel = node ? node.label || node.id || \"\" : token.type;\n\t\t\ttip = this.getVal(node, \"tip\") || this.getVal(node, \"desc\");\n\t\t\ttip = this.fillTags(tip, token, this, 20);\n\t\t\tif (token.type === \"group\") { label += \" #\" + token.num; }\n\t\t\tlabel = \"<b>\" + label[0].toUpperCase() + label.substr(1) + \".</b> \";\n\n\t\t\tif (token.error) {\n\t\t\t\ttip += \"<span class='warningtext'><span class='error warning'>WARNING: </span>\" + this.getError(token.error, token) + \"</span>\";\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn tip ? label + tip :  \"no docs for id='\" + this.idForToken(token) + \"'\";\n\t}\n\t\n\tgetContent(id) {\n\t\tlet node = this.getNode(id);\n\t\treturn this.fillTags(this.getVal(node, \"desc\") + this.getVal(node, \"ext\"), node, this);\n\t}\n\t\n\t// TODO: this isn't necessarily the most ideal place for this method (has nothing to do with Reference). Maybe move into Text?\n\ttipForMatch(match, text) {\n\t\tif (!match) { return null; }\n\t\tlet more = match.l > 150;\n\t\tlet str = \"<b>match: </b>\" + Utils.shorten(text.substr(match.i, match.l), 150, true, \"i\") +\n\t\t\t\t  \"<br/><b>range: </b><code>\" + match.i + \"-\" + (match.i+match.l-1)+ \"</code>\";\n\t\t\n\t\tlet groups = match.groups, l = groups && groups.length;\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\tif (i > 3 && l > 5) {\n\t\t\t\tmore = false;\n\t\t\t\tstr += \"<br><span class='more'>see Details for \"+(l-i)+\" more</span>\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet group = groups[i], s;\n\t\t\ts = (group.i !== undefined) ? text.substr(group.i, group.l) : group.s;\n\t\t\tmore = more || (s && s.length > 50);\n\t\t\tstr += (i > 0) ? \"<br>\" : \"<hr>\";\n\t\t\tstr += \"<b>group #\" + (i+1) + \": </b>\" + Utils.shorten(s, 50, true, \"i\");\n\t\t}\n\t\tif (more) { str += \"<br><span class='more'>see Details for full matches</span>\" }\n\t\treturn str;\n\t};\n\t\n// private methods:\n\t_flavorChange() {\n\t\tthis._updateHide(this.content);\n\t}\n\t\n\t_updateHide(o, list) {\n\t\t// the list param is for debugging, it is populated with the ids of all nodes that were hidden.\n\t\t// parent nodes aren't hidden unless all their children are.\n\t\tlet kids = o.kids, hide=true;\n\t\tif (kids) {\n\t\t\tfor (let i = 0, l = kids.length; i < l; i++) {\n\t\t\t\thide = this._updateHide(kids[i], list) && hide;\n\t\t\t}\n\t\t} else {\n\t\t\thide = (o.show === false) || (o.show !== true && o.id && !this._flavor.isTokenSupported(o.id));\n\t\t}\n\t\tif (list && hide) { list.push(o.id); }\n\t\treturn (o.hide = hide);\n\t}\n\n\t_injectEscChars(content) {\n\t\tlet kids=Utils.find(content.kids, (o)=>o.id===\"escchars\").kids;\n\t\tlet template = Utils.find(content.misc.kids, (o)=>o.id===\"escchar\").tip;\n\t\t// \\x07 - bell, \\x1b - esc\n\t\tlet chars = \"\\t\\n\\v\\f\\r\\0\\x07\\x1b\", tokens = \"tnvfr0ae\"; // .\\\\+*?^$[]{}()|/\n\t\tfor (let i=0, l=chars.length; i<l; i++) {\n\t\t\tkids.push(this._getEscCharDocs(chars[i], tokens[i], template));\n\t\t}\n\t}\n\t\n\t_getEscCharDocs(c, t, template) {\n\t\tlet code = c.charCodeAt(0), chr = Reference.NONPRINTING_CHARS[code] || c;\n\t\treturn {\n\t\t\tid: \"esc_\"+code,\n\t\t\ttoken: \"\\\\\" + (t || c),\n\t\t\tlabel: chr.toLowerCase(),\n\t\t\tdesc: this.fillTags(template, {code: code}, this)\n\t\t};\n\t};\n}\n\nReference.NONPRINTING_CHARS = {\n\t\"0\": \"NULL\",\n\t\"1\": \"SOH\",\n\t\"2\": \"STX\",\n\t\"3\": \"ETX\",\n\t\"4\": \"EOT\",\n\t\"5\": \"ENQ\",\n\t\"6\": \"ACK\",\n\t\"7\": \"BELL\",\n\t\"8\": \"BS\",\n\t\"9\": \"TAB\", //\n\t\"10\": \"LINE FEED\", //\n\t\"11\": \"VERTICAL TAB\",\n\t\"12\": \"FORM FEED\",\n\t\"13\": \"CARRIAGE RETURN\", //\n\t\"14\": \"SO\",\n\t\"15\": \"SI\",\n\t\"16\": \"DLE\",\n\t\"17\": \"DC1\",\n\t\"18\": \"DC2\",\n\t\"19\": \"DC3\",\n\t\"20\": \"DC4\",\n\t\"21\": \"NAK\",\n\t\"22\": \"SYN\",\n\t\"23\": \"ETB\",\n\t\"24\": \"CAN\",\n\t\"25\": \"EM\",\n\t\"26\": \"SUB\",\n\t\"27\": \"ESC\",\n\t\"28\": \"FS\",\n\t\"29\": \"GS\",\n\t\"30\": \"RS\",\n\t\"31\": \"US\",\n\t\"32\": \"SPACE\", //\n\t\"127\": \"DEL\"\n};\n\nReference.UNICODE_CATEGORIES = {\n\t// from: http://www.pcre.org/original/doc/html/pcrepattern.html\n\t\"C\": \"Other\",\n\t\"Cc\": \"Control\",\n\t\"Cf\": \"Format\",\n\t\"Cn\": \"Unassigned\",\n\t\"Co\": \"Private use\",\n\t\"Cs\": \"Surrogate\",\n\t\"L\": \"Letter\",\n\t\"L&\": \"Any letter \",\n\t\"Ll\": \"Lower case letter\",\n\t\"Lm\": \"Modifier letter\",\n\t\"Lo\": \"Other letter\",\n\t\"Lt\": \"Title case letter\",\n\t\"Lu\": \"Upper case letter\",\n\t\"M\": \"Mark\",\n\t\"Mc\": \"Spacing mark\",\n\t\"Me\": \"Enclosing mark\",\n\t\"Mn\": \"Non-spacing mark\",\n\t\"N\": \"Number\",\n\t\"Nd\": \"Decimal number\",\n\t\"Nl\": \"Letter number\",\n\t\"No\": \"Other number\",\n\t\"P\": \"Punctuation\",\n\t\"Pc\": \"Connector punctuation\",\n\t\"Pd\": \"Dash punctuation\",\n\t\"Pe\": \"Close punctuation\",\n\t\"Pf\": \"Final punctuation\",\n\t\"Pi\": \"Initial punctuation\",\n\t\"Po\": \"Other punctuation\",\n\t\"Ps\": \"Open punctuation\",\n\t\"S\": \"Symbol\",\n\t\"Sc\": \"Currency symbol\",\n\t\"Sk\": \"Modifier symbol\",\n\t\"Sm\": \"Mathematical symbol\",\n\t\"So\": \"Other symbol\",\n\t\"Z\": \"Separator\",\n\t\"Zl\": \"Line separator\",\n\t\"Zp\": \"Paragraph separator\",\n\t\"Zs\": \"Space separator\"\n};\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// this is just raw content for the Reference.\n// right now all examples are executed in-browser, so they need to be compatible. Maybe swap to XRegExp at some point.\n// TODO: rewrite to use multiline template literals?\n\nlet reference_content = {}, o = reference_content;\nexport default reference_content; \n\no.label = \"RegEx Reference\";\no.id = \"reference\";\no.search = true,\no.desc = `Information on all of the tokens available to create regular expressions.\n\t<p>Double-click an item in the list to insert it into your Expression.</p>\n\t<p>Click the arrow beside an example to load it.</p>`;\n\no.kids = [\n\t{\n\tlabel: \"Character classes\",\n\tid: \"charclasses\",\n\tdesc: \"Character classes match a character from a specific set. There are a number of predefined character classes and you can also define your own sets.\",\n\tkids: [\n\t\t\n\t\t{\n\t\tid:\"set\",\n\t\tlabel: \"character set\",\n\t\tdesc:\"Match any character in the set.\",\n\t\texample:[\"[aeiou]\",\"glib jocks vex dwarves!\"],\n\t\ttoken:\"[ABC]\"\n\t\t},\n\t\t{\n\t\tid:\"setnot\",\n\t\tlabel: \"negated set\",\n\t\tdesc:\"Match any character that is not in the set.\",\n\t\texample:[\"[^aeiou]\",\"glib jocks vex dwarves!\"],\n\t\ttoken:\"[^ABC]\"\n\t\t},\n\t\t{\n\t\tid:\"range\",\n\t\ttip:\"Matches a character in the range {{getChar(prev)}} to {{getChar(next)}} (char code {{prev.code}} to {{next.code}}). {{getInsensitive()}}\",\n\t\texample:[\"[g-s]\",\"abcdefghijklmnopqrstuvwxyz\"],\n\t\tdesc: \"Matches a character having a character code between the two specified characters inclusive.\",\n\t\ttoken:\"[A-Z]\"\n\t\t},\n\t\t{\n\t\tid:\"posixcharclass\",\n\t\ttip:\"Matches any character in the '{{value}}' POSIX class.\",\n\t\tlabel:\"POSIX class\",\n\t\tdesc:\"Matches any character in the specified POSIX class. Must be in a character set. For example, <code>[[:alnum:]$]</code> will match alphanumeric characters and <code>$</code>.\",\n\t\text:\"<p>For a list of classes, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p>\",\n\t\ttoken:\"[:alnum:]\"\n\t\t},\n\t\t{\n\t\tid:\"dot\",\n\t\ttip:\"Matches any character {{getDotAll()}}.\",\n\t\tdesc:\"Matches any character except linebreaks.\",\n\t\text:\" Equivalent to <code>[^\\\\n\\\\r]</code>.\",\n\t\texample:[\".\", \"glib jocks vex dwarves!\"],\n\t\ttoken:\".\"\n\t\t},\n\t\t{\n\t\tid:\"matchanyset\",\n\t\tlabel:\"match any\",\n\t\tdesc:\"A character set that can be used to match any character, including line breaks, without the dotall flag (<code>s</code>).\"+\n\t\t\t\"<p>An alternative is <code>[^]</code>, but it is not supported in all browsers.</p>\",\n\t\texample:[\"[\\\\s\\\\S]\", \"glib jocks vex dwarves!\"],\n\t\ttoken:\"[\\\\s\\\\S]\"\n\t\t},\n\t\t{\n\t\tid:\"unicodegrapheme\",\n\t\tlabel:\"unicode grapheme\",\n\t\tdesc:\"Matches any single unicode grapheme (ie. character).\",\n\t\text:\" This includes line breaks (regardless of the dotall mode) and graphemes encoded as multiple code points.\",\n\t\ttoken:\"\\\\X\"\n\t\t},\n\t\t{\n\t\tid:\"word\",\n\t\tdesc:\"Matches any word character (alphanumeric & underscore).\",\n\t\text:\" Only matches low-ascii characters (no accented or non-roman characters). Equivalent to <code>[A-Za-z0-9_]</code>\",\n\t\texample:[\"\\\\w\",\"bonjour, mon fr\\u00E8re\"],\n\t\ttoken:\"\\\\w\"\n\t\t},\n\t\t{\n\t\tid:\"notword\",\n\t\tlabel: \"not word\",\n\t\tdesc:\"Matches any character that is not a word character (alphanumeric & underscore).\",\n\t\text:\" Equivalent to <code>[^A-Za-z0-9_]</code>\",\n\t\texample:[\"\\\\W\",\"bonjour, mon fr\\u00E8re\"],\n\t\ttoken:\"\\\\W\"\n\t\t},\n\t\t{\n\t\tid:\"digit\",\n\t\tdesc:\"Matches any digit character (0-9).\",\n\t\text:\" Equivalent to <code>[0-9]</code>.\",\n\t\texample:[\"\\\\d\",\"+1-(444)-555-1234\"],\n\t\ttoken:\"\\\\d\"\n\t\t},\n\t\t{\n\t\tid:\"notdigit\",\n\t\tlabel: \"not digit\",\n\t\tdesc:\"Matches any character that is not a digit character (0-9).\",\n\t\text:\" Equivalent to <code>[^0-9]</code>.\",\n\t\texample:[\"\\\\D\",\"+1-(444)-555-1234\"],\n\t\ttoken:\"\\\\D\"\n\t\t},\n\t\t{\n\t\tid:\"whitespace\",\n\t\tdesc:\"Matches any whitespace character (spaces, tabs, line breaks).\",\n\t\texample:[\"\\\\s\", \"glib jocks vex dwarves!\"],\n\t\ttoken:\"\\\\s\"\n\t\t},\n\t\t{\n\t\tid:\"notwhitespace\",\n\t\tlabel: \"not whitespace\",\n\t\tdesc:\"Matches any character that is not a whitespace character (spaces, tabs, line breaks).\",\n\t\texample:[\"\\\\S\", \"glib jocks vex dwarves!\"],\n\t\ttoken:\"\\\\S\"\n\t\t},\n\t\t{\n\t\tid:\"hwhitespace\",\n\t\tlabel:\"horizontal whitespace\",\n\t\tdesc:\"Matches any horizontal whitespace character (spaces, tabs).\",\n\t\ttoken:\"\\\\h\"\n\t\t},\n\t\t{\n\t\tid:\"nothwhitespace\",\n\t\tlabel: \"not horizontal whitespace\",\n\t\tdesc:\"Matches any character that is not a horizontal whitespace character (spaces, tabs).\",\n\t\ttoken:\"\\\\H\"\n\t\t},\n\t\t{\n\t\tid:\"vwhitespace\",\n\t\tlabel:\"vertical whitespace\",\n\t\tdesc:\"Matches any vertical whitespace character (line breaks).\",\n\t\ttoken:\"\\\\v\"\n\t\t},\n\t\t{\n\t\tid:\"notvwhitespace\",\n\t\tlabel: \"not vertical whitespace\",\n\t\tdesc:\"Matches any character that is not a vertical whitespace character (line breaks).\",\n\t\ttoken:\"\\\\V\"\n\t\t},\n\t\t{\n\t\tid:\"linebreak\",\n\t\tlabel:\"line break\",\n\t\tdesc:\"Matches any line break character, including the CRLF pair, and CR / LF individually.\",\n\t\ttoken:\"\\\\R\"\n\t\t},\n\t\t{\n\t\tid:\"notlinebreak\",\n\t\tlabel:\"not line break\",\n\t\tdesc:\"Matches any character that is not a line break.\",\n\t\text:\" Similar to dot (<code>.</code>) but is unaffected by the dotall flag (<code>s</code>).\",\n\t\ttoken:\"\\\\N\"\n\t\t},\n\t\t{\n\t\tid:\"unicodecat\",\n\t\ttip:\"Matches any character in the '{{getUniCat()}}' unicode category.\",\n\t\tlabel:\"unicode category\",\n\t\tdesc:\"Matches a character in the specified unicode category. For example, <code>\\\\p{Ll}</code> will match any lowercase letter.\",\n\t\text:\"<p>For a list of categories, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p>\"+\n\t\t\t\"<p>There are multiple syntaxes for this feature:</p><p><code>\\\\p{L}</code> <code>\\\\pL</code></p>\",\n\t\ttoken:\"\\\\p{L}\"\n\t\t},\n\t\t{\n\t\tid:\"notunicodecat\",\n\t\ttip:\"Matches any character that is not in the '{{getUniCat()}}' unicode category.\",\n\t\tlabel:\"not unicode category\",\n\t\tdesc:\"Matches any character that is not in the specified unicode category.\",\n\t\text:\"<p>For a list of categories, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p>\"+\n\t\t\t\"<p>There are multiple syntaxes for this feature:</p><p><code>\\\\P{L}</code> <code>\\\\p{^L}</code> <code>\\\\PL</code></p>\",\n\t\ttoken:\"\\\\P{L}\"\n\t\t},\n\t\t{\n\t\tid:\"unicodescript\",\n\t\ttip:\"Matches any character in the '{{value}}' unicode script.\",\n\t\tlabel:\"unicode script\",\n\t\tdesc:\"Matches any character in the specified unicode script. For example, <code>\\\\p{Arabic}</code> will match characters in the Arabic script.\",\n\t\text:\"<p>For a list of scripts, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p>\",\n\t\ttoken:\"\\\\p{Han}\"\n\t\t},\n\t\t{\n\t\tid:\"notunicodescript\",\n\t\ttip:\"Matches any character that is not in the '{{value}}' unicode script.\",\n\t\tlabel:\"not unicode script\",\n\t\tdesc:\"Matches any character that is not in the specified unicode script.\",\n\t\text:\"<p>For a list of scripts, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p>\"+\n\t\t\t\"<p>There are multiple syntaxes for this feature:</p><p><code>\\\\P{Han}</code> <code>\\\\p{^Han}</code>\",\n\t\ttoken:\"\\\\P{Han}\"\n\t\t}\n\t]\n\t},\n\n\t{\n\tlabel:\"Anchors\",\n\tid:\"anchors\",\n\tdesc:\"Anchors are unique in that they match a position within a string, not a character.\",\n\tkids:[\n\t\t{\n\t\tid:\"bos\",\n\t\tlabel:\"beginning of string\",\n\t\tdesc:\"Matches the beginning of the string.\",\n\t\text:\" Unlike <code>^</code>, this is unaffected by the multiline flag (<code>m</code>). This matches a position, not a character.\",\n\t\ttoken:\"\\\\A\"\n\t\t},\n\t\t{\n\t\tid:\"eos\",\n\t\tlabel:\"end of string\",\n\t\tdesc:\"Matches the end of the string.\",\n\t\text:\" Unlike <code>$</code>, this is unaffected by the multiline flag (<code>m</code>). This matches a position, not a character.\",\n\t\ttoken:\"\\\\Z\"\n\t\t},\n\t\t{\n\t\tid:\"abseos\",\n\t\tlabel:\"strict end of string\",\n\t\tdesc:\"Matches the end of the string. Unlike <code>$</code> or <code>\\\\Z</code>, it does not allow for a trailing newline.\",\n\t\text:\" This is unaffected by the multiline flag (<code>m</code>). This matches a position, not a character.\",\n\t\ttoken:\"\\\\z\"\n\t\t},\n\t\t{\n\t\tid:\"bof\",\n\t\tlabel:\"beginning\",\n\t\tdesc:\"Matches the beginning of the string, or the beginning of a line if the multiline flag (<code>m</code>) is enabled.\",\n\t\text:\" This matches a position, not a character.\",\n\t\texample:[\"^\\\\w+\",\"she sells seashells\"],\n\t\ttoken:\"^\"\n\t\t},\n\t\t{\n\t\tid:\"eof\",\n\t\tlabel:\"end\",\n\t\tdesc:\"Matches the end of the string, or the end of a line if the multiline flag (<code>m</code>) is enabled.\",\n\t\text:\" This matches a position, not a character.\",\n\t\texample:[\"\\\\w+$\",\"she sells seashells\"],\n\t\ttoken:\"$\"\n\t\t},\n\t\t{\n\t\tid:\"wordboundary\",\n\t\tlabel:\"word boundary\",\n\t\tdesc:\"Matches a word boundary position between a word character and non-word character or position (start / end of string).\",\n\t\text:\" See the word character class (<code>\\w</code>) for more info.\",\n\t\texample:[\"s\\\\b\",\"she sells seashells\"],\n\t\ttoken:\"\\\\b\"\n\t\t},\n\t\t{\n\t\tid:\"notwordboundary\",\n\t\tlabel: \"not word boundary\",\n\t\tdesc:\"Matches any position that is not a word boundary.\",\n\t\text:\" This matches a position, not a character.\",\n\t\texample:[\"s\\\\B\",\"she sells seashells\"],\n\t\ttoken:\"\\\\B\"\n\t\t},\n\t\t{\n\t\tid:\"prevmatchend\",\n\t\tlabel: \"previous match end\",\n\t\tdesc:\"Matches the end position of the previous match.\",\n\t\text:\" This matches a position, not a character.\",\n\t\ttoken:\"\\\\G\"\n\t\t}\n\t]\n\t},\n\t\n\t{\n\tlabel: \"Escaped characters\",\n\tid:\"escchars\",\n\tdesc: \"Escape sequences can be used to insert reserved, special, and unicode characters. All escaped characters begin with the <code>\\\\</code> character.\",\n\tkids: [\n\t\t{\n\t\tid:\"reservedchar\",\n\t\tlabel:\"reserved characters\",\n\t\tdesc:\"The following character have special meaning, and should be preceded by a <code>\\\\</code> (backslash) to represent a literal character:\"+\n\t\t\t\"<p><code>{{getEscChars()}}</code></p>\"+\n\t\t\t\"<p>Within a character set, only <code>\\\\</code>, <code>-</code>, and <code>]</code> need to be escaped.</p>\",\n\t\texample:[\"\\\\+\",\"1 + 1 = 2\"],\n\t\ttoken:\"\\\\+\",\n\t\tshow:true\n\t\t},\n\t\t{\n\t\tid:\"escoctal\",\n\t\tlabel:\"octal escape\",\n\t\tdesc:\"Octal escaped character in the form <code>\\\\000</code>.\",\n\t\text:\" Value must be less than 255 (<code>\\\\377</code>).\", // PCRE profile adds to ext.\n\t\texample:[\"\\\\251\",\"RegExr is \\u00A92014\"],\n\t\ttoken:\"\\\\000\"\n\t\t},\n\t\t{\n\t\tid:\"eschexadecimal\",\n\t\tlabel:\"hexadecimal escape\",\n\t\tdesc:\"Hexadecimal escaped character in the form <code>\\\\xFF</code>.\",\n\t\texample:[\"\\\\xA9\",\"RegExr is \\u00A92014\"],\n\t\ttoken:\"\\\\xFF\"\n\t\t},\n\t\t{\n\t\tid:\"escunicodeu\",\n\t\tlabel:\"unicode escape\",\n\t\tdesc:\"Unicode escaped character in the form <code>\\\\uFFFF</code>\",\n\t\texample:[\"\\\\u00A9\",\"RegExr is \\u00A92014\"],\n\t\ttoken:\"\\\\uFFFF\"\n\t\t},\n\t\t{\n\t\tid:\"escunicodeub\",\n\t\tlabel:\"extended unicode escape\",\n\t\tdesc:\"Unicode escaped character in the form <code>\\\\u{FFFF}</code>.\",\n\t\text:\" Supports a full range of unicode point escapes with any number of hex digits. <p>Requires the unicode flag (<code>u</code>).</p>\",\n\t\ttoken:\"\\\\u{FFFF}\"\n\t\t},\n\t\t{\n\t\tid:\"escunicodexb\",\n\t\tlabel:\"unicode escape\",\n\t\tdesc:\"Unicode escaped character in the form <code>\\\\x{FF}</code>.\",\n\t\ttoken:\"\\\\x{FF}\"\n\t\t},\n\t\t{\n\t\tid:\"esccontrolchar\",\n\t\tlabel:\"control character escape\",\n\t\tdesc:\"Escaped control character in the form <code>\\\\cZ</code>.\",\n\t\text:\" This can range from <code>\\\\cA</code> (SOH, char code 1) to <code>\\\\cZ</code> (SUB, char code 26). <h1>Example:</h1><code>\\\\cI</code> matches TAB (char code 9).\",\n\t\ttoken:\"\\\\cI\"\n\t\t},\n\t\t{\n\t\tid:\"escsequence\",\n\t\tlabel:\"escape sequence\",\n\t\ttip: \"Matches the literal string '{{value}}'.\",\n\t\tdesc:\"All characters between the <code>\\\\Q</code> and the <code>\\\\E</code> are interpreted as a literal string. If <code>\\\\E</code> is omitted, it continues to the end of the expression.\",\n\t\text:\" For example, the expression <code>/\\\\Q(?.)\\\\E/</code> will match the string <code>(?.)</code>.\",\n\t\ttoken:\"\\\\Q...\\\\E\"\n\t\t}\n\t]\n\t},\n\t\n\t{\n\tlabel: \"Groups & References\",\n\tid:\"groups\",\n\tdesc: \"Groups allow you to combine a sequence of tokens to operate on them together. Capture groups can be referenced by a backreference and accessed separately in the results.\",\n\tkids: [\n\t\t{\n\t\tid:\"group\",\n\t\tlabel: \"capturing group\",\n\t\tdesc: \"Groups multiple tokens together and creates a capture group for extracting a substring or using a backreference.\",\n\t\texample:[\"(ha)+\",\"hahaha haa hah!\"],\n\t\ttoken:\"(ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"namedgroup\",\n\t\tlabel: \"named capturing group\",\n\t\ttip:\"Creates a capturing group named '{{name}}'.\",\n\t\tdesc:\"Creates a capturing group that can be referenced via the specified name.\",\n\t\text:\"<p>There are multiple syntaxes for this feature:</p><p><code>(?'name'ABC)</code> <code>(?P&lt;name>ABC)</code> <code>(?&lt;name>ABC)</code></p>\",\n\t\ttoken:\"(?<name>ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"namedref\",\n\t\tlabel:\"named reference\",\n\t\ttip:\"Matches the results of the capture group named '{{group.name}}'.\",\n\t\tdesc:\"Matches the results of a named capture group.\",\n\t\text:\"<p>There are multiple syntaxes for this feature:</p><p><code>\\\\k'name'</code> <code>\\\\k&lt;name></code> <code>\\\\k{name}</code> <code>\\\\g{name}</code> <code>(?P=name)</code></p>\",\n\t\ttoken:\"\\\\k'name'\"\n\t\t},\n\t\t{\n\t\tid:\"numref\",\n\t\tlabel:\"numeric reference\",\n\t\ttip:\"Matches the results of capture group #{{group.num}}.\",\n\t\tdesc:\"Matches the results of a capture group. For example <code>\\\\1</code> matches the results of the first capture group & <code>\\\\3</code> matches the third.\",\n\t\t// PCRE adds relative and alternate syntaxes in ext\n\t\texample:[\"(\\\\w)a\\\\1\",\"hah dad bad dab gag gab\"],\n\t\ttoken:\"\\\\1\"\n\t\t},\n\t\t{\n\t\tid:\"branchreset\",\n\t\tlabel: \"branch reset group\",\n\t\tdesc:\"Define alternative groups that share the same group numbers.\",\n\t\text: \"<p>For example, in <code>(?|(a)|(b))</code> both groups (a and b) would be counted as group #1.\",\n\t\ttoken:\"(?|(a)|(b))\"\n\t\t},\n\t\t{\n\t\tid:\"noncapgroup\",\n\t\tlabel: \"non-capturing group\",\n\t\tdesc:\"Groups multiple tokens together without creating a capture group.\",\n\t\texample:[\"(?:ha)+\",\"hahaha haa hah!\"],\n\t\ttoken:\"(?:ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"atomic\",\n\t\tlabel:\"atomic group\",\n\t\tdesc:\"Non-capturing group that discards backtracking positions once matched.\",\n\t\text:\"<p>For example, <code>/(?>ab|a)b/</code> will match <code>abb</code> but not <code>ab</code> because once the <code>ab</code> option has matched, the atomic group prevents backtracking to retry with the <code>a</code> option.</p>\",\n\t\ttoken:\"(?>ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"define\",\n\t\tdesc:\"Used to define named groups for use as subroutines without including them in the match.\",\n\t\text:\"<p>For example, <code>/A(?(DEFINE)(?'foo'Z))B\\\\g'foo'/</code> will match <code>ABZ</code>, because the define group is ignored in the match except to define the <code>foo</code> subroutine that is referenced later with <code>\\\\g'foo'</code>.</p>\",\n\t\ttoken:\"(?(DEFINE)(?'foo'ABC))\"\n\t\t},\n\t\t{\n\t\tid:\"numsubroutine\",\n\t\tlabel:\"numeric subroutine\",\n\t\ttip:\"Matches the expression in capture group #{{group.num}}.\",\n\t\tdesc:\"Matches the expression in a capture group. Compare this to a reference, that matches the result.\"+\n\t\t\t\" For example <code>/(a|b)\\\\g'1'/</code> can match <code>ab</code>, because the expression <code>a|b</code> is evaluated again.\",\n\t\text:\"<p>There are multiple syntaxes for this feature: <code>\\\\g&lt;1></code> <code>\\\\g'1'</code> <code>(?1)</code>.</p>\"+\n\t\t\t\"<p>Relative values preceded by <code>+</code> or <code>-</code> are also supported. For example <code>\\\\g<-1></code> would match the group preceding the reference.</p>\",\n\t\ttoken:\"\\\\g'1'\"\n\t\t},\n\t\t{\n\t\tid:\"namedsubroutine\",\n\t\tlabel:\"named subroutine\",\n\t\ttip:\"Matches the expression in the capture group named '{{group.name}}'.\",\n\t\tdesc:\"Matches the expression in a capture group. Compare this to a reference, that matches the result.\",\n\t\text:\"<p>There are multiple syntaxes for this feature: <code>\\\\g&lt;name></code> <code>\\\\g'name'</code> <code>(?&name)</code> <code>(?P>name)</code>.</p>\",\n\t\ttoken:\"\\\\g'name'\"\n\t\t}\n\t]\n\t},\n\t\n\t{\n\tlabel: \"Lookaround\",\n\tid:\"lookaround\",\n\tdesc: \"Lookaround lets you match a group before (lookbehind) or after (lookahead) your main pattern without including it in the result.\"+\n\t\t\"<p>Negative lookarounds specify a group that can NOT match before or after the pattern.</p>\",\n\tkids: [\n\t\t{\n\t\tid:\"poslookahead\",\n\t\tlabel: \"positive lookahead\",\n\t\tdesc:\"Matches a group after the main expression without including it in the result.\",\n\t\texample:[\"\\\\d(?=px)\",\"1pt 2px 3em 4px\"],\n\t\ttoken:\"(?=ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"neglookahead\",\n\t\tlabel: \"negative lookahead\",\n\t\tdesc:\"Specifies a group that can not match after the main expression (if it matches, the result is discarded).\",\n\t\texample:[\"\\\\d(?!px)\",\"1pt 2px 3em 4px\"],\n\t\ttoken:\"(?!ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"poslookbehind\",\n\t\tlabel: \"positive lookbehind\",\n\t\tdesc:\"Matches a group before the main expression without including it in the result.\",\n\t\ttoken:\"(?<=ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"neglookbehind\",\n\t\tlabel: \"negative lookbehind\",\n\t\tdesc:\"Specifies a group that can not match before the main expression (if it matches, the result is discarded).\",\n\t\ttoken:\"(?<!ABC)\"\n\t\t},\n\t\t{\n\t\tid:\"keepout\",\n\t\tlabel:\"keep out\",\n\t\tdesc:\"Keep text matched so far out of the returned match, essentially discarding the match up to this point.\",\n\t\text:\"For example <code>/o\\\\Kbar/</code> will match <code>bar</code> within the string <code>foobar</code>\",\n\t\ttoken:\"\\\\K\"\n\t\t}\n\t]\n\t},\n\t\n\t{\n\tlabel: \"Quantifiers & Alternation\",\n\tid:\"quants\",\n\tdesc: \"Quantifiers indicate that the preceding token must be matched a certain number of times. By default, quantifiers are greedy, and will match as many characters as possible.\"+\n\t\t\"<hr/>Alternation acts like a boolean OR, matching one sequence or another.\",\n\tkids: [\n\t\t{\n\t\tid:\"plus\",\n\t\tdesc:\"Matches 1 or more of the preceding token.\",\n\t\texample:[\"b\\\\w+\",\"b be bee beer beers\"],\n\t\ttoken:\"+\"\n\t\t},\n\t\t{\n\t\tid:\"star\",\n\t\tdesc:\"Matches 0 or more of the preceding token.\",\n\t\texample:[\"b\\\\w*\",\"b be bee beer beers\"],\n\t\ttoken:\"*\"\n\t\t},\n\t\t{\n\t\tid:\"quant\",\n\t\tlabel:\"quantifier\",\n\t\ttip:\"Match {{getQuant()}} of the preceding token.\",\n\t\tdesc:\"Matches the specified quantity of the previous token. \"+\n\t\t\t\"<code>{1,3}</code> will match 1 to 3. \"+\n\t\t\t\"<code>{3}</code> will match exactly 3. \"+\n\t\t\t\"<code>{3,}</code> will match 3 or more. \",\n\t\texample:[\"b\\\\w{2,3}\",\"b be bee beer beers\"],\n\t\ttoken:\"{1,3}\"\n\t\t},\n\t\t{\n\t\tid:\"opt\",\n\t\tlabel:\"optional\",\n\t\tdesc:\"Matches 0 or 1 of the preceding token, effectively making it optional.\",\n\t\texample: [\"colou?r\", \"color colour\"],\n\t\ttoken:\"?\"\n\t\t},\n\t\t{\n\t\tid:\"lazy\",\n\t\ttip:\"Makes the preceding quantifier {{getLazy()}}, causing it to match as {{getLazyFew()}} characters as possible.\",\n\t\tdesc:\"Makes the preceding quantifier lazy, causing it to match as few characters as possible.\",\n\t\text:\" By default, quantifiers are greedy, and will match as many characters as possible.\",\n\t\texample:[\"b\\\\w+?\",\"b be bee beer beers\"],\n\t\ttoken:\"?\"\n\t\t},\n\t\t{\n\t\tid:\"possessive\",\n\t\tdesc:\"Makes the preceding quantifier possessive. It will match as many characters as possible, and will not release them to match subsequent tokens.\",\n\t\text:\"<p>For example <code>/.*a/</code> would match <code>aaa</code>, but <code>/.*+a/</code> would not, because the repeating dot would match and not release the last character to match <code>a</code>.</p>\",\n\t\ttoken:\"+\"\n\t\t},\n\t\t{\n\t\tid:\"alt\",\n\t\tlabel:\"alternation\",\n\t\tdesc:\"Acts like a boolean OR. Matches the expression before or after the <code>|</code>.\",\n\t\text:\"<p>It can operate within a group, or on a whole expression. The patterns will be tested in order.</p>\",\n\t\texample:[\"b(a|e|i)d\",\"bad bud bod bed bid\"],\n\t\ttoken:\"|\"\n\t\t}\n\t]\n\t},\n\t\n\t{\n\tlabel: \"Special\",\n\tid:\"other\",\n\tdesc: \"Tokens that don't quite fit anywhere else.\",\n\tkids: [\n\t\t{\n\t\tid:\"comment\",\n\t\tdesc:\"Allows you to insert a comment into your expression that is ignored when finding a match.\",\n\t\ttoken:\"(?#foo)\"\n\t\t},\n\t\t{\n\t\tid:\"conditional\",\n\t\tdesc:\"Conditionally matches one of two options based on whether a lookaround is matched.\",\n\t\text:\"<p>For example, <code>/(?(?=a)ab|..)/</code> will match <code>ab</code> and <code>zx</code> but not <code>ax</code>, because if the first character matches the condition <code>a</code> then it evaluates the pattern <code>ab</code>.</p>\"+\n\t\t\t\"<p>Any lookaround can be used as the condition. A lookahead will start the subsequent match at the start of the condition, a lookbehind will start it after.</p>\",\n\t\ttoken:\"(?(?=A)B|C)\"\n\t\t},\n\t\t{\n\t\tid:\"conditionalgroup\",\n\t\tlabel:\"group conditional\",\n\t\tdesc:\"Conditionally matches one of two options based on whether group '{{name}}' matched.\",\n\t\text:\"<p>For example, <code>/(z)?(?(1)a|b)/</code> will match <code>za</code> because the first capture group matches <code>z</code> successfully, which causes the conditional to match the first option <code>a</code>.</p>\"+\n\t\t\t\"<p>The same pattern will also match <code>b</code> on its own, because group 1 doesn't match, so it instead tries to match the second option <code>b</code>.</p>\"+\n\t\t\t\"<p>You can reference a group by name, number, or relative position (ex. <code>-1</code>).</p>\",\n\t\ttoken:\"(?(1)B|C)\"\n\t\t},\n\t\t{\n\t\tid:\"recursion\",\n\t\tdesc:\"Attempts to match the full expression again at the current position.\",\n\t\text:\"<p>For example, <code>/a(?R)?b/</code> will match any number of <code>a</code> followed by the same number of <code>z</code>: the full text of <code>az</code> or <code>aaaazzzz</code>, but not <code>azzz</code>.</p>\"+\n\t\t\t\"<p>There are multiple syntaxes for this feature:</p><p><code>(?R)</code> <code>(?0)</code> <code>\\\\g<0></code> <code>\\\\g'0'</code></p>\",\n\t\ttoken:\"(?R)\"\n\t\t},\n\t\t{\n\t\tid:\"mode\",\n\t\tlabel:\"mode modifier\",\n\t\ttip:\"{{~getDesc()}}{{~getModes()}}\",\n\t\tdesc:\"Enables or disables modes for the remainder of the expression.\",\n\t\text:\"Matching modes generally map to expression flags. For example <code>(?i)</code> would enable case insensitivity for the remainder of the expression.\"+\n\t\t\t\"<p>Multiple modifiers can be specified, and any modifiers that follow <code>-</code> are disabled. For example <code>(?im-s)</code> would enable case insensitivity &amp; multiline modes, and disable dotall.</p>\"+\n\t\t\t\"<p>Supported modifiers are: <code>i</code> - case insensitive, <code>s</code> - dotall, <code>m</code> - multiline, <code>x</code> - free spacing, <code>J</code> - allow duplicate names, <code>U</code> - ungreedy.</p>\",\n\t\ttoken:\"(?i)\"\n\t\t}\n\t]\n\t},\n\n\t{\n\tlabel: \"Substitution\",\n\tdesc: \"These tokens are used in a substitution string to insert different parts of the match.\",\n\ttarget: \"subst\",\n\tid:\"subst\",\n\tkids: [\n\t\t{\n\t\tid:\"subst_$&match\",\n\t\tlabel: \"match\",\n\t\tdesc:\"Inserts the matched text.\",\n\t\ttoken:\"$&\"\n\t\t},\n\t\t{\n\t\tid:\"subst_0match\",\n\t\tlabel: \"match\",\n\t\tdesc:\"Inserts the matched text.\",\n\t\text:\"<p>There are multiple syntaxes for this feature:</p><p><code>$0</code> <code>\\\\0</code> <code>\\\\{0}</code></p>\",\n\t\ttoken:\"$0\"\n\t\t},\n\t\t{\n\t\tid:\"subst_group\",\n\t\tlabel: \"capture group\",\n\t\ttip:\"Inserts the results of capture group #{{group.num}}.\",\n\t\tdesc:\"Inserts the results of the specified capture group. For example, <code>$3</code> would insert the third capture group.\",\n\t\t// NOTE: javascript profile overrides this:\n\t\text:\"<p>There are multiple syntaxes for this feature:</p><p><code>$1</code> <code>\\\\1</code> <code>\\\\{1}</code></p>\",\n\t\ttoken:\"$1\"\n\t\t},\n\t\t{\n\t\tid:\"subst_$before\",\n\t\tlabel: \"before match\",\n\t\tdesc:\"Inserts the portion of the source string that precedes the match.\",\n\t\ttoken:\"$`\"\n\t\t},\n\t\t{\n\t\tid:\"subst_$after\",\n\t\tlabel: \"after match\",\n\t\tdesc:\"Inserts the portion of the source string that follows the match.\",\n\t\ttoken:\"$'\"\n\t\t},\n\t\t{\n\t\tid:\"subst_$esc\",\n\t\tlabel: \"escaped $\",\n\t\tdesc:\"Inserts a dollar sign character ($).\",\n\t\ttoken:\"$$\"\n\t\t},\n\t\t{\n\t\tid: \"subst_esc\",\n\t\tlabel: \"escaped characters\",\n\t\ttoken: \"\\\\n\",\n\t\tdesc: \"For convenience, these escaped characters are supported in the Replace string in RegExr: <code>\\\\n</code>, <code>\\\\r</code>, <code>\\\\t</code>, <code>\\\\\\\\</code>, and unicode escapes <code>\\\\uFFFF</code>. This may vary in your deploy environment.\"\n\t\t}\n\t]\n\t},\n\t\n\t{\n\tid:\"flags\",\n\tlabel:\"Flags\",\n\ttooltip:\"Expression flags change how the expression is interpreted. Click to edit.\",\n\tdesc:\"Expression flags change how the expression is interpreted. Flags follow the closing forward slash of the expression (ex. <code>/.+/igm</code> ).\",\n\ttarget:\"flags\",\n\tkids: [\n\t\t{\n\t\tid:\"caseinsensitive\",\n\t\tlabel: \"ignore case\",\n\t\tdesc:\"Makes the whole expression case-insensitive.\",\n\t\text:\" For example, <code>/aBc/i</code> would match <code>AbC</code>.\",\n\t\ttoken:\"i\"\n\t\t},\n\t\t{\n\t\tid:\"global\",\n\t\tlabel: \"global search\",\n\t\ttip: \"Retain the index of the last match, allowing iterative searches.\",\n\t\tdesc:\"Retain the index of the last match, allowing subsequent searches to start from the end of the previous match.\"+\n\t\t\t\"<p>Without the global flag, subsequent searches will return the same match.</p><hr/>\"+\n\t\t\t\"RegExr only searches for a single match when the global flag is disabled to avoid infinite match errors.\",\n\t\ttoken:\"g\"\n\t\t},\n\t\t{\n\t\tid:\"multiline\",\n\t\ttip:\"Beginning/end anchors (<b>^</b>/<b>$</b>) will match the start/end of a line.\",\n\t\tdesc:\"When the multiline flag is enabled, beginning and end anchors (<code>^</code> and <code>$</code>) will match the start and end of a line, instead of the start and end of the whole string.\"+\n\t\t\t\"<p>Note that patterns such as <code>/^[\\\\s\\\\S]+$/m</code> may return matches that span multiple lines because the anchors will match the start/end of <b>any</b> line.</p>\",\n\t\ttoken:\"m\"\n\t\t},\n\t\t{\n\t\tid:\"unicode\",\n\t\ttip:\"Enables <code>\\\\x{FFFFF}</code> unicode escapes.\",\n\t\tdesc:\"When the unicode flag is enabled, you can use extended unicode escapes in the form <code>\\\\x{FFFFF}</code>.\"+\n\t\t\t\"<p>It also makes other escapes stricter, causing unrecognized escapes (ex. <code>\\\\j</code>) to throw an error.</p>\",\n\t\ttoken:\"u\"\n\t\t},\n\t\t{\n\t\tid:\"sticky\",\n\t\tdesc:\"The expression will only match from its lastIndex position and ignores the global (<code>g</code>) flag if set.\",\n\t\text:\" Because each search in RegExr is discrete, this flag has no further impact on the displayed results.\",\n\t\ttoken:\"y\"\n\t\t},\n\t\t{\n\t\tid:\"dotall\",\n\t\tdesc:\"Dot (<code>.</code>) will match any character, including newline.\",\n\t\ttoken:\"s\"\n\t\t},\n\t\t{\n\t\tid:\"extended\",\n\t\tdesc:\"Literal whitespace characters are ignored, except in character sets.\",\n\t\ttoken:\"x\"\n\t\t},\n\t\t{\n\t\tid:\"ungreedy\",\n\t\ttip:\"Makes quantifiers ungreedy (lazy) by default.\",\n\t\tdesc:\"Makes quantifiers ungreedy (lazy) by default. Quantifiers followed by <code>?</code> will become greedy.\",\n\t\ttoken:\"U\"\n\t\t}\n\t]\n\t}\n];\n\n// content that isn't included in the Reference menu item:\no.misc = {\n\tkids:[\n\t\t{\n\t\tid:\"ignorews\",\n\t\tlabel:\"ignored whitespace\",\n\t\ttip:\"Whitespace character ignored due to the e<b>x</b>tended flag or mode.\"\n\t\t},\n\t\t{\n\t\tid:\"extnumref\", // alternative syntaxes.\n\t\tproxy:\"numref\"\n\t\t},\n\t\t{\n\t\tid:\"char\",\n\t\tlabel:\"character\",\n\t\ttip:\"Matches a {{getChar()}} character (char code {{code}}). {{getInsensitive()}}\"\n\t\t},\n\t\t{\n\t\tid:\"escchar\",\n\t\tlabel:\"escaped character\",\n\t\ttip:\"Matches a {{getChar()}} character (char code {{code}}).\"\n\t\t},\n\t\t{\n\t\tid:\"open\",\n\t\ttip:\"Indicates the start of a regular expression.\"\n\t\t},\n\t\t{\n\t\tid:\"close\",\n\t\ttip:\"Indicates the end of a regular expression and the start of expression flags.\"\n\t\t},\n\t\t{\n\t\tid:\"condition\",\n\t\ttip:\"The lookaround to match in resolving the enclosing conditional statement. See 'conditional' in the Reference for info.\"\n\t\t},\n\t\t{\n\t\tid:\"conditionalelse\",\n\t\tlabel:\"conditional else\",\n\t\ttip:\"Delimits the 'else' portion of the conditional.\"\n\t\t},\n\t\t{\n\t\tid:\"ERROR\",\n\t\ttip:\"Errors in the expression are underlined in red. Roll over errors for more info.\"\n\t\t},\n\t\t{\n\t\tid:\"PREG_INTERNAL_ERROR\",\n\t\ttip:\"Internal PCRE error\"\n\t\t},\n\t\t{\n\t\tid:\"PREG_BACKTRACK_LIMIT_ERROR\",\n\t\ttip:\"Backtrack limit was exhausted.\"\n\t\t},\n\t\t{\n\t\tid:\"PREG_RECURSION_LIMIT_ERROR\",\n\t\ttip:\"Recursion limit was exhausted\"\n\t\t},\n\t\t{\n\t\tid:\"PREG_BAD_UTF8_ERROR\",\n\t\ttip:\"Malformed UTF-8 data\"\n\t\t},\n\t\t{\n\t\tid:\"PREG_BAD_UTF8_OFFSET_ERROR\",\n\t\ttip:\"Malformed UTF-8 data\"\n\t\t}\n\t]\n};\n\no.errors = {\n\tgroupopen:\"Unmatched opening parenthesis.\",\n\tgroupclose:\"Unmatched closing parenthesis.\",\n\tsetopen:\"Unmatched opening square bracket.\",\n\trangerev:\"Range values reversed. Start char code is greater than end char code.\",\n\tquanttarg:\"Invalid target for quantifier.\",\n\tquantrev:\"Quantifier minimum is greater than maximum.\",\n\tesccharopen:\"Dangling backslash.\",\n\tesccharbad:\"Unrecognized or malformed escape character.\",\n\tunicodebad:\"Unrecognized unicode category or script.\",\n\tposixcharclassbad:\"Unrecognized POSIX character class.\",\n\tposixcharclassnoset:\"POSIX character class must be in a character set.\",\n\tnotsupported:\"The \\\"{{~getLabel()}}\\\" feature is not supported in this flavor of RegEx.\",\n\tfwdslash:\"Unescaped forward slash. This may cause issues if copying/pasting this expression into code.\",\n\tesccharbad:\"Invalid escape sequence.\",\n\tservercomm:\"An error occurred while communicating with the server.\",\n\textraelse:\"Extra else in conditional group.\",\n\tunmatchedref:\"Reference to non-existent group \\\"{{name}}\\\".\",\n\tmodebad:\"Unrecognized mode flag \\\"<code>{{errmode}}</code>\\\".\",\n\tbadname:\"Group name can not start with a digit.\",\n\tdupname:\"Duplicate group name.\",\n\tbranchreseterr:\"<b>Branch Reset.</b> Results will be ok, but RegExr's parser does not number branch reset groups correctly. Coming soon!\",\n\ttimeout:\"The expression took longer than 250ms to execute.\", // TODO: can we couple this to the help content somehow?\n\n\t// warnings:\n\tjsfuture:\"The \\\"{{~getLabel()}}\\\" feature may not be supported in all browsers.\",\n\tinfinite:\"The expression can return empty matches, and may match infinitely in some use cases.\", // TODO: can we couple this to the help content somehow?\n};\n\n/*\nclasses:\nquant\nset\nspecial\nref\nesc\nanchor\ncharclass\ngroup\ncomment\n */\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Utils from \"../utils/Utils\";\n\nexport default class BrowserSolver {\n\n\tconstructor() {\n\t\tconst workerBlob = new Blob([\n\t\t\tdocument.querySelector('#regexWorker').textContent\n\t\t], { type: \"text/javascript\" });\n\t\tthis._workerObjectURL = URL.createObjectURL(workerBlob);\n\t}\n\n\tsolve(o, callback) {\n\t\tthis._callback = callback;\n\t\tthis._req = o;\n\n\t\tlet regex, text=o.text, tests=o.tests, mode = o.mode;\n\t\ttry {\n\t\t\tthis._regex = regex = new RegExp(o.pattern, o.flags);\n\t\t} catch(e) {\n\t\t\treturn this._onRegExComplete({id:\"regexparse\", name: e.name, message: e.message}, null, mode);\n\t\t}\n\n\t\tif (window.Worker) {\n\t\t\tconst worker = new Worker(this._workerObjectURL);\n\n\t\t\tworker.onmessage = (evt) => {\n\t\t\t\tif (evt.data === \"onload\") {\n\t\t\t\t\tthis._startTime = Utils.now();\n\t\t\t\t\tthis._timeoutId = setTimeout(() => {\n\t\t\t\t\t\tworker.terminate();\n\t\t\t\t\t\tthis._onRegExComplete({id: \"timeout\"}, null, mode); // TODO: make this a warning, and return all results so far.\n\t\t\t\t\t}, 250);\n\t\t\t\t} else {\n\t\t\t\t\tclearTimeout(this._timeoutId);\n\t\t\t\t\tworker.terminate();\n\t\t\t\t\tthis._onRegExComplete(evt.data.error, evt.data.matches, evt.data.mode);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// we need to pass the pattern and flags as text, because Safari strips the unicode flag when passing a RegExp to a Worker\n\t\t\tworker.postMessage({pattern:o.pattern, flags:o.flags, text, tests, mode});\n\t\t} else {\n\t\t\tthis._startTime = Utils.now();\n\n\t\t\t// shared between BrowserSolver & RegExWorker\n\t\t\tvar matches = [], match, index, error;\n\t\t\tif (mode === \"tests\") {\n\t\t\t\tfor (var i=0, l=tests.length; i<l; i++) {\n\t\t\t\t\tlet test = tests[i];\n\t\t\t\t\ttext = test.text;\n\t\t\t\t\tregex.lastIndex = 0;\n\t\t\t\t\tmatch = regex.exec(text);\n\t\t\t\t\tmatches[i] = match ? {i:match.index, l:match[0].length, id:test.id} : {id:test.id};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (match = regex.exec(text)) {\n\t\t\t\t\tif (index === regex.lastIndex) { error = {id:\"infinite\", warning:true}; ++regex.lastIndex; }\n\t\t\t\t\tindex = regex.lastIndex;\n\t\t\t\t\tvar groups = match.reduce(function (arr, s, i) { return (i===0 || arr.push({s:s})) && arr },[]);\n\t\t\t\t\tmatches.push({i:match.index, l:match[0].length, groups:groups});\n\t\t\t\t\tif (!regex.global) { break; } // or it will become infinite.\n\t\t\t\t}\n\t\t\t}\n\t\t\t// end share\n\n\t\t\tthis._onRegExComplete(error, matches, mode);\n\t\t}\n\t}\n\n\t_onRegExComplete(error, matches, mode) {\n\t\tlet result = {\n\t\t\ttime: error ? null : Utils.now()-this._startTime,\n\t\t\terror,\n\t\t\tmode,\n\t\t\tmatches\n\t\t};\n\n\t\tlet tool = this._req.tool;\n\t\tif (tool) {\n\t\t\tresult.tool = { id: tool.id };\n\t\t\tif (!error || error.warning && tool.input != null) {\n\t\t\t\tlet str = Utils.unescSubstStr(tool.input);\n\t\t\t\tresult.tool.result = (tool.id === \"replace\") ? this._getReplace(str) : this._getList(str);\n\t\t\t}\n\t\t}\n\t\tthis._callback(result);\n\t}\n\n\t_getReplace(str) {\n\t\treturn this._req.text.replace(this._regex, str);\n\t}\n\n\t_getList(str) {\n\t\t// TODO: should we move this into a worker?\n\t\tlet source = this._req.text, result = \"\", repl, ref, trimR = 0, regex;\n\n\t\t// build a RegExp without the global flag:\n\t\ttry {\n\t\t\tregex = new RegExp(this._req.pattern, this._req.flags.replace(\"g\", \"\"));\n\t\t} catch(e) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (str.search(/\\$[&1-9`']/) === -1) {\n\t\t\ttrimR = str.length;\n\t\t\tstr = \"$&\"+str;\n\t\t}\n\t\tdo {\n\t\t\tref = source.replace(regex, \"\\b\"); // bell char - just a placeholder to find\n\t\t\tlet index = ref.indexOf(\"\\b\"), empty = (ref.length > source.length);\n\t\t\tif (index === -1) { break; }\n\t\t\trepl = source.replace(regex, str);\n\t\t\tresult += repl.substr(index, repl.length-ref.length+1);\n\t\t\tsource = ref.substr(index+(empty?2:1));\n\t\t} while (source.length);\n\t\tif (trimR) { result = result.substr(0,result.length-trimR); }\n\t\treturn result;\n\t}\n}\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Utils from \"../utils/Utils\";\nimport Server from \"../net/Server\";\n\nexport default class ServerSolver {\n\t\n\tsolve(o, callback) {\n\t\t// unescape tool input:\n\t\tif (o.tool && o.tool.input != null) { o.tool.input = Utils.unescSubstStr(o.tool.input); }\n\t\tif (this._serverPromise) { this._serverPromise.abort(); }\n\t\tUtils.defer(()=>this._solve(o, callback), \"ServerSolver._solve\", 250);\n\t}\n\t\n\t_solve(o, callback) {\n\t\tthis._callback = callback;\n\t\tthis._serverPromise = Server.solve(o).then((o) => this._onLoad(o)).catch((o) => this._onError(o));\n\t}\n\t\n\t_onLoad(data) {\n\t\tthis._callback(data);\n\t}\n\t\n\t_onError(msg) {\n\t\tthis._callback({error:{id:msg}});\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport Track from \"./utils/Track\";\n\nimport EventDispatcher from \"./events/EventDispatcher.js\";\nimport BrowserSolver from \"./helpers/BrowserSolver.js\";\nimport ServerSolver from \"./helpers/ServerSolver.js\";\nimport profiles from \"./profiles/profiles.js\";\n\nimport app from \"./app\";\n\nexport default class Flavor extends EventDispatcher {\n\t\n\tconstructor(flavor) {\n\t\tsuper();\n\t\tthis.value = app.prefs.read(\"flavor\");\n\t\tthis._browserSolver = new BrowserSolver();\n\t\tthis._serverSolver = new ServerSolver();\n\t}\n\t\n\tset value(id) {\n\t\tlet profile = profiles[(id && id.toLowerCase()) || \"js\"];\n\t\tif (!profile || profile === this._profile) { return; }\n\n\t\tthis._profile = profile;\n\t\tthis._buildSupportMap(profile);\n\t\tapp.prefs.write(\"flavor\", id);\n\t\tthis.dispatchEvent(\"change\");\n\t}\n\t\n\tget value() {\n\t\treturn this._profile.id;\n\t}\n\t\n\tget profile() {\n\t\treturn this._profile;\n\t}\n\t\n\tget profiles() {\n\t\treturn [profiles.js, profiles.pcre];\n\t}\n\t\n\tget solver() {\n\t\treturn this._profile.browser ? this._browserSolver : this._serverSolver;\n\t}\n\t\n\tisTokenSupported(id) {\n\t\treturn !!this._profile._supportMap[id];\n\t}\n\t\n\tgetDocs(id) {\n\t\treturn this._profile.docs[id];\n\t}\n\t\n\tvalidateFlags(list) {\n\t\tlet flags = this._profile.flags, dupes = {};\n\t\treturn list.filter((id)=>(!!flags[id] && !dupes[id] && (dupes[id] = true)));\n\t}\n\t\n\tvalidateFlagsStr(str) {\n\t\treturn this.validateFlags(str.split(\"\")).join(\"\");\n\t}\n\t\n\tisFlagSupported(id) {\n\t\treturn !!this._profile.flags[id];\n\t}\n\t\n\t_buildSupportMap(profile) {\n\t\tif (profile._supportMap) { return; }\n\t\tlet map = profile._supportMap = {}, props = Flavor.SUPPORT_MAP_PROPS, n;\n\t\tfor (n in props) { this._addToSupportMap(map, profile[n], !!props[n]); }\n\t\tlet o = profile.escCharCodes, esc = profile.escChars;\n\t\tfor (n in o) { map[\"esc_\"+o[n]] = true; }\n\t\tfor (n in esc) { map[\"esc_\"+esc[n]] = true; }\n\t}\n\t\n\t_addToSupportMap(map, o, rev) {\n\t\tif (rev) { for (let n in o) { map[o[n]] = true; } }\n\t\telse { for (let n in o) { map[n] = o[n]; } }\n\t}\n}\n\nFlavor.SUPPORT_MAP_PROPS = {\n\t// 1 = reverse, 0 - normal\n\tflags: 1,\n\t// escape is handled separately\n\t// escCharCodes is handled separately\n\tescCharTypes: 1,\n\tcharTypes: 1,\n\t// unquantifiables not included\n\t// unicodeScripts not included\n\t// unicodeCategories not included\n\t// posixCharClasses not included\n\t// modes not included\n\ttokens: 0,\n\tsubstTokens: 0\n\t// config not included\n\t// docs not included\n};","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport core from \"./profiles/core.js\";\nimport app from \"./app\";\n\nexport default class RefCoverage {\n\tconstructor() {\n\t\tapp.flavor._buildSupportMap(core);\n\t\tlet ref = app.reference._idMap, undoc=[], unused=[], all=core._supportMap;\n\t\tlet ignore = {\n\t\t\t\"escchar\": true, // literal char\n\t\t\t\"groupclose\": true,\n\t\t\t\"setclose\": true,\n\t\t\t\"condition\": true, // proxies to conditional\n\t\t\t\"conditionalelse\": true, // proxies to conditional\n\t\t\tsubst_$group: true, // resolved to subst_group\n\t\t\tsubst_$bgroup: true, // resolved to subst_group\n\t\t\tsubst_bsgroup: true, // resolved to subst_group\n\t\t\tescoctalo: true // resolved to escoctal\n\t\t}\n\t\t\n\t\tfor (let n in all) { if (!ref[n] && !ignore[n]) { undoc.push(n); } }\n\t\tfor (let n in ref) { if (!all[n] && !ref[n].kids) { unused.push(n); } }\n\t\t\n\t\tconsole.log(\"--- UNDOCUMENTED IDS ---\\n\"+undoc.join(\"\\n\")+\"\\n\\n--- UNUSED DOCS? ---\\n\"+unused.join(\"\\n\"));\n\t}\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nexport default class Prefs {\n\tconstructor (el) {\n\t\tthis._load();\n\t}\n\n\tread(key) {\n\t\treturn this._data[key];\n\t}\n\n\twrite(key, value) {\n\t\tif (this._data[key] === value) { return; }\n\t\tthis._data[key] = value;\n\t\tthis._save();\n\t}\n\t\n\tclear(key) {\n\t\tdelete(this._data[key]);\n\t\tthis._save();\n\t}\n\t\n\t_load() {\n\t\tlet match = /(?:^|;\\s*)prefs=\\s*([^;]*)/.exec(document.cookie);\n\t\tif (match && match[1]) {\n\t\t\ttry {\n\t\t\t\tthis._data = JSON.parse(unescape(match[1]));\n\t\t\t\treturn;\n\t\t\t} catch (e) {}\n\t\t}\n\t\tthis._data = {};\n\t}\n\n\t_save() {\n\t\tlet str = escape(JSON.stringify(this._data));\n\t\tdocument.cookie = \"prefs=\"+str+\"; expires=Fri, 31 Dec 9999 23:59:59 GMT;\";\n\t}\n\n}","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport EventDispatcher from \"./events/EventDispatcher\";\n\nimport $ from \"./utils/DOMUtils\";\nimport Utils from \"./utils/Utils\";\n\nimport Tooltip from \"./controls/Tooltip\";\n\nimport Server from \"./net/Server\";\n\nimport Expression from \"./views/Expression\";\nimport Text from \"./views/Text\";\nimport Tools from \"./views/Tools\";\nimport Sidebar from \"./views/Sidebar\";\nimport Account from \"./views/Account\";\nimport Theme from \"./views/Theme\";\n\nimport Reference from \"./docs/Reference\";\nimport reference_content from \"./docs/reference_content\";\nimport Flavor from \"./Flavor\";\n\nimport RefCoverage from \"./RefCoverage\";\nimport Prefs from \"./helpers/Prefs\";\n\nexport default class RegExr extends EventDispatcher {\n\tconstructor () { super(); }\n\n\tinit(state, account, config={}) {\n\t\tthis.prefs = new Prefs();\n\t\tthis.flavor = new Flavor();\n\t\tthis.reference = new Reference(reference_content, this.flavor, config);\n\t\tthis._migrateFavorites();\n\t\tthis._initUI();\n\n\t\tthis.account.value = account;\n\t\tif (state === false) {\n\t\t\tthis._localInit();\n\t\t} else if (this.account.authenticated && !state) {\n\t\t\tthis.newDoc(false);\n\t\t} else {\n\t\t\tthis.state = state;\n\t\t}\n\t\tthis._savedHash = null;\n\n\t\tlet params = Utils.getUrlParams();\n\t\tif (Utils.isLocal && params.id) {\n\t\t\tServer.load(params.id).then((o) => this.state = o);\n\t\t\tparams = {};\n\t\t}\n\t\tif (params.engine) { this.flavor.value = params.engine; }\n\t\tif (params.expression) { this.expression.value = params.expression; }\n\t\tif (params.text) { this.text.value = params.text; }\n\t\tif (params.tool) { this.tools.value = {id:params.tool, input:params.input}; }\n\n\t\twindow.onbeforeunload = (e) => this.unsaved ? \"You have unsaved changes.\" : null;\n\t\tthis.resetUnsaved();\n\n\t\tsetTimeout(() => this._initAds(), 100);\n\t}\n\n\t_initAds() {\n\t\t_native && _native.init(\"CK7D65QM\", { // \"CK7D65QM\" use \"CK7D4KQE\" to test Carbon ads\n\t\t\tcarbonZoneKey: 'CK7DPKQU',\n\t\t\ttargetClass: 'native-js'\n\t\t});\n\t}\n\n\t_localInit() {\n\t\tconsole.log(\"local init\");\n\t\t//Server.verify().then((data) => this.account.value = data);\n\t\tnew RefCoverage();\n\t}\n\n// getter / setters:\n\tget state() {\n\t\tconsole.log(this.text.mode);\n\t\tlet o = {\n\t\t\texpression: this.expression.value,\n\t\t\ttext: this.text.value,\n\t\t\ttests: this.text.tests,\n\t\t\tflavor: this.flavor.value,\n\t\t\ttool: this.tools.value,\n\t\t\tmode: this.text.mode,\n\t\t};\n\t\t// copy share values onto the pattern object:\n\t\treturn Utils.copy(this.share.value, o);\n\t}\n\n\tset state(o) {\n\t\tif (!o) { return; }\n\t\tthis.flavor.value = o.flavor;\n\t\tthis.expression.value = o.expression;\n\t\tthis.text.value = o.text;\n\t\tthis.text.tests = o.tests;\n\t\tthis.text.mode = o.mode;\n\t\tthis.tools.value = o.tool;\n\t\tthis.share.pattern = o;\n\t\tthis.resetUnsaved();\n\t}\n\n\tget hash() {\n\t\tlet share = this.share;\n\t\treturn Utils.getHashCode(\n\t\t\tthis.expression.value+\"\\t\"\n\t\t\t+ this.text.value+\"\\t\"\n\t\t\t+ this.flavor.value+\"\\t\"\n\t\t\t+ share.author+\"\\t\" + share.name+\"\\t\" + share.description+\"\\t\" + share.keywords+\"\\t\"\n\t\t\t+ JSON.stringify(this.text.tests)+\"\\t\"\n\t\t\t//+ this.tools.value.input+\"\\t\"\n\t\t\t//+ this.tools.value.id+\"\\t\"\n\t\t)\n\t}\n\n\tget unsaved() {\n\t\treturn this.hash !== this._savedHash;\n\t}\n\n\tget isNarrow() {\n\t\treturn this._matchList.matches;\n\t}\n\n// public methods:\n\tresetUnsaved() {\n\t\tthis._savedHash = this.hash;\n\t}\n\n\tnewDoc(warn=true) {\n\t\tthis.load({flavor: this.flavor.value, expression: \".\", text:\"Text\"}, warn);\n\t\tthis.expression.selectAll();\n\t}\n\n\tload(state, warn=true) {\n\t\tif (warn === true) { warn = \"You have unsaved changes. Continue without saving?\"; }\n\t\tif (warn && this.unsaved && !confirm(warn)) { return; }\n\t\tthis.state = Utils.clone(state);\n\t}\n\n// private methods:\n\t_initUI() {\n\t\t// TODO: break into own Device class? Rename mobile.scss too?\n\t\t// mobile setup\n\t\t// keep synced with \"mobile.scss\":\n\t\tif (screen.width < 500) {\n\t\t\tdocument.getElementById(\"viewport\").setAttribute(\"content\", \"width=500, user-scalable=0\");\n\t\t}\n\t\tthis._matchList = window.matchMedia(\"(max-width: 900px)\");\n\t\tthis._matchList.addListener((q)=>this.dispatchEvent(\"narrow\")); // currently unused.\n\n\t\t// UI:\n\t\tthis.el = $.query(\".container\");\n\n\t\tthis.tooltip = {\n\t\t\thover: new Tooltip($.query(\"#library #tooltip\").cloneNode(true)),\n\t\t\ttoggle: new Tooltip($.query(\"#library #tooltip\"), true)\n\t\t};\n\n\t\tthis.theme = new Theme(this.el);\n\n\t\tlet el = this.docEl = $.query(\".app > .doc\", this.el);\n\t\tthis.expression = new Expression($.query(\"> section.expression\", el));\n\t\tthis.text = new Text($.query(\"> section.text\", el));\n\t\tthis.tools = new Tools($.query(\"> section.tools\", el));\n\n\t\tthis.account = new Account();\n\t\tthis.sidebar = new Sidebar($.query(\".app > .sidebar\", this.el));\n\t\tthis.share = this.sidebar.share;\n\n\t\tthis.expression.on(\"change\", ()=> this._change());\n\t\tthis.text.on(\"change\", ()=> this._change());\n\t\tthis.text.on(\"modechange\", ()=> this._modeChange());\n\t\tthis.flavor.on(\"change\", ()=> this._change());\n\t\tthis.tools.on(\"change\", ()=> this._change());\n\t\tthis.share.on(\"change\", ()=> this._change());\n\t}\n\n\t_migrateFavorites() {\n\t\tlet ls = window.localStorage, l=ls.length;\n\t\tif (!l || ls.getItem(\"f_v3\") >= \"1\") { return }\n\t\tlet ids = [];\n\t\tfor (let i=0; i<l; i++) {\n\t\t\tlet key = ls.key(i), val=ls.getItem(key);\n\t\t\tif (key[0] === \"f\" && val === \"1\") {\n\t\t\t\tids.push(key.substr(1));\n\t\t\t}\n\t\t}\n\t\tif (!ids.length) { ls.setItem(\"f_v3\", \"1\"); return; }\n\t\tServer.multiFavorite(ids).then(() => ls.setItem(\"f_v3\", \"1\"));\n\t}\n\n\t_change() {\n\t\tthis.dispatchEvent(\"change\");\n\t\tlet solver = this.flavor.solver, exp = this.expression;\n\t\tlet o = {pattern:exp.pattern, flags:exp.flags, mode:this.text.mode};\n\t\tif (o.mode === \"tests\") {\n\t\t\to.tests = this.text.tests;\n\t\t} else {\n\t\t\to.text = this.text.value;\n\t\t\to.tool = this.tools.value;\n\t\t}\n\t\tsolver.solve(o, (result) => this._handleResult(result));\n\t}\n\n\t_modeChange() {\n\t\t$.toggleClass(this.docEl, \"tests-mode\", this.text.mode === \"tests\");\n\t\tthis._change();\n\t}\n\t\n\t_handleResult(result) {\n\t\tthis.result = this._processResult(result);\n\t\tthis.dispatchEvent(\"result\");\n\t}\n\n\t_processResult(result) {\n\t\tif (result.mode === \"text\") {\n\t\t\tresult.matches && result.matches.forEach((o, i)=>o.num=i);\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\nRegExr: Learn, Build, & Test RegEx\nCopyright (C) 2017  gskinner.com, inc.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport \"../lib/codemirror.js\";\nimport \"../lib/clipboard.js\";\nimport \"../lib/native.js\";\nimport RegExr from \"./RegExr\";\n\nlet app = new RegExr();\nexport default app;"],"names":["global","factory","exports","module","define","amd","CodeMirror","this","userAgent","navigator","platform","gecko","test","ie_upto10","ie_11up","exec","edge","ie","ie_version","document","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","match","Number","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","rmClass","node","current","className","after","slice","index","length","removeChildren","e","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","elt","tag","content","style","createElement","cssText","createTextNode","i","eltP","setAttribute","range","createRange","start","end","endNode","r","setEnd","setStart","body","createTextRange","moveToElementText","parentNode","collapse","moveEnd","moveStart","contains","child","nodeType","host","activeElt","activeElement","shadowRoot","addClass","joinClasses","a","b","as","split","selectInput","select","selectionStart","selectionEnd","value","_e","bind","f","args","Array","prototype","call","arguments","apply","copyObj","obj","target","overwrite","prop","hasOwnProperty","countColumn","string","tabSize","startIndex","startValue","search","n","nextTab","indexOf","Delayed","id","set","ms","clearTimeout","setTimeout","array","scrollerGap","Pass","toString","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","Math","min","spaceStrs","spaceStr","push","lst","arr","map","out","insertSorted","score","priority","splice","nothing","createObj","base","props","inst","Object","create","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","toLowerCase","isWordChar","helper","source","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","str","dir","charAt","findFirst","pred","from","to","abs","mid","floor","Display","place","doc","input","d","scrollbarFiller","gutterFiller","lineDiv","selectionDiv","cursorDiv","measure","lineMeasure","lineSpace","lines","mover","sizer","sizerWidth","heightForcer","gutters","lineGutter","scroller","wrapper","zIndex","paddingRight","draggable","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","shift","selForContextMenu","activeTouch","init","getLine","size","Error","chunk","children","sz","chunkSize","getBetween","line","iter","text","getLines","updateLineHeight","height","diff","lineNo","cur","no","lineAtHeight","h","outer","i$1","lh","isLine","l","lineNumberFor","options","String","lineNumberFormatter","firstLineNumber","Pos","sticky","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","max","clipPos","last","clipToLen","linelen","clipPosArray","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","markedSpans","concat","attachLine","markedSpansBefore","old","startCh","isInsert","nw","startsBefore","inclusiveLeft","type","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","found","span$1","found$1","clearEmptySpans","newMarkers","gap","gapMarkers","i$2","i$3","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","m","find","j","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","len","findMaxLine","cm","display","iterateBidiSections","order","part","level","bidiOther","getBidiPartAt","bidiOrdering","lowTypes","arabicTypes","charType","code","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","direction","outerType","types","prev","type$1","prev$1","type$2","i$4","type$3","replace","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","i$7","at","j$2","nstart","unshift","reverse","getOrder","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","prepareMeasureForLine","targetTop","measureCharPrepared","top","moveVisually","bidi","partPos","mv","getWrappedLineExtent","lineWrapping","begin","wrappedLineExtentChar","wrappedLineExtent","searchInVisualLine","getRes","res","nextCh","noHandlers","on","emitter","addEventListener","attachEvent","_handlers","getHandlers","off","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","dragAndDrop","div","zwspSupported","zeroWidthElement","offsetHeight","offsetWidth","badBidiRects","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","result","nl","rt","hasSelection","window","getSelection","te","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","normal","fromRange","modes","mimeModes","defineMode","name","mode","dependencies","defineMIME","mime","spec","resolveMode","getMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","val","innerMode","info","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","eol","sol","peek","undefined","next","eat","ok","eatWhile","eatSpace","this$1","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","SavedContext","Context","maxLookAhead","nextLine","fromSaved","saved","save","copy","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","findStartLine","processLine","startAt","stream","callBlankLine","readToken","blankLine","token","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","allowFrontierUpdate","insertLineContent","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","displayText","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","nextChange","spanStyle","spanEndStyle","spanStartStyle","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","operationGroup","pushOperation","op","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","list","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","background","wrap","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterWidth","alignable","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","clientWidth","eventInWidget","getAttribute","paddingTop","offsetTop","paddingVert","paddingH","getComputedStyle","currentStyle","data","parseInt","isNaN","scrollGap","displayWidth","displayHeight","clientHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","updateExternalMeasurement","measureChar","bias","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","key","measureCharInner","bogus","rtop","rbottom","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","coverStart","coverEnd","getUsefulRect","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","intoCoordSystem","includeWidgets","yOff","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","get","getBidi","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","mergedPos","assign","beginLeft","prevDiff","prevPos","steps","ceil","prevPos$1","diff_change_per_step","box","measureText","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","round","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","head","drawSelectionRange","cursor","cursorHeight","otherCursor","fragment","padding","leftSide","rightSide","add","drawForLine","fromArg","toArg","lineLen","leftPos","rightPos","tmp","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","reset","receivedFocus","updateHeightsInViewport","prevBottom","updateWidgetHeight","visibleLines","viewport","ensure","ensureFrom","ensureTo","alignHorizontally","comp","gutterW","align","maybeUpdateLineNumberWidth","innerW","updateGutterSpace","maybeScrollWindow","doScroll","innerHeight","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","measureForScrollbars","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","w","pointerEvents","bar","delay","maybeDisable","elementFromPoint","clear","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","borderBottom","coverGutterNextToScrollbar","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","viewChanged","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","hasFocus","setDocumentHeight","postUpdateDisplay","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","regChange","lendiff","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","time","highlight","highlightWorker","Date","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","marginBottom","borderRightWidth","selectionSnapshot","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","removeAllRanges","addRange","viewportMargin","different","toUpdate","selSnapshot","patchDisplay","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","updateGutters","specs","gElt","setGuttersForLineNumbers","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","firstLine","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","antiChanges","filter","returned","v","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","replaceRange","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","copied","changeLine","handle","changeType","LeafChunk","removeInner","insertInner","iterN","BranchChunk","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","oldH","addLineWidget","insertAt","aboveVisible","nextMarkerId","TextMarker","withOp","visual","side","dHeight","markText","markTextShared","replacedWith","addToHistory","curLine","clearOnEnter","clearHistory","SharedTextMarker","cloneNode","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","getValue","join","lineSeparator","setValue","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","loadFile","file","allowDropFileTypes","reader","onload","readAsText","draggingText","text$1","getData","selected","onDragStart","setData","effectAllowed","setDragImage","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","setSize","keyNames","fromCharCode","keyMap","basic","pcDefault","fallthrough","emacsy","macDefault","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","stopSeq","dispatchKey","seq","keySeq","handleKeyBinding","motion","handleCharBinding","lastStoppedKey","onKeyDown","handled","showCrossHair","up","onKeyUp","onKeyPress","charCode","DOUBLECLICK_DELAY","PastClick","compare","lastClick","lastDoubleClick","clickRepeat","now","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","onContextMenu","configureMouse","option","unit","addNew","moveOnDrag","behavior","contained","dragDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","e2","rangeForUnit","findWordAt","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","oldRange","ranges$1","editorSize","counter","curCount","move","gutterEvent","prevent","mX","mY","lineBox","g","contextMenuInGutter","themeChanged","theme","Init","defaults","optionHandlers","defineOptions","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","spellcheck","guttersChanged","detach","attach","wrappingChanged","integer","blur","readOnlyChanged","dragDropChanged","resetPosition","getField","tabIndex","wasOn","funcs","dragFunctions","toggle","enter","over","leave","drop","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","registerEventHandlers","finishInit","initHooks","textRendering","word","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","pageX","pageY","inp","defineInitHook","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","border","addEditorMethods","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelper","getHelpers","help","_global","getStateAfter","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","hitSide","rtlMoveVisually","findPosV","goalColumn","goals","headPos","startChar","check","scrollTo","getScrollInfo","interpret","swapDoc","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","origDir","findNextLine","moveOnce","boundToLine","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","updateFromDOM","readFromDOMSoon","forceCompositionEnd","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","showMultipleSelections","curAnchor","domToPos","curFocus","bad","posToDOM","rangeCount","getRangeAt","rng","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","poll","pollInterval","isInGutter","pollContent","fromIndex","fromNode","toIndex","toNode","previousSibling","newText","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","scan","badPos","closing","recognizeMarker","close","addText","walk","cmText","textContent","markerID","isBlock","nodeName","nodeValue","lineNode","locateNodeInLineView","textNode","topNode","curNode","dist","dist$1","TextareaInput","prevInput","pollingFast","textarea","fastPoll","prepareCopyCut","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldCSS","oldWrapperCSS","wrapperBox","oldScrollY","scrollY","detectingSelectAll","prepareSelectAllHack","extval","rehide","mouseup","disabled","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","addLegacyProps","cmpPos","dontDelegate","method","defineExtension","func","defineDocExtension","version","self","Clipboard","t","s","u","require","DOCUMENT_NODE_TYPE","Element","matches","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","closest","element","selector","delegate","callback","useCapture","listenerFn","listener","destroy","delegateTarget","HTMLElement","SVGElement","nodeList","fn","is","listen","TypeError","listenNode","listenNodeList","listenSelector","forEach","selectedText","hasAttribute","setSelectionRange","removeAttribute","selectNodeContents","E","ctx","once","_","emit","evtArr","evts","liveEvents","clipboardAction","_select","_select2","_interopRequireDefault","__esModule","default","_typeof","Symbol","iterator","_classCallCheck","instance","Constructor","_createClass","defineProperties","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","ClipboardAction","resolveOptions","initSelection","action","trigger","selectFake","selectTarget","_this","isRTL","removeFake","fakeHandlerCallback","fakeHandler","fakeElem","fontSize","yPosition","copyText","succeeded","err","handleResult","clearSelection","_action","_target","tinyEmitter","goodListener","clipboard","_clipboardAction","_tinyEmitter","_goodListener","_clipboardAction2","_tinyEmitter2","_goodListener2","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","__proto__","_Emitter","getPrototypeOf","listenClick","defaultAction","defaultTarget","defaultText","_this2","onClick","currentTarget","getAttributeValue","isSupported","actions","support","queryCommandSupported","suffix","attribute","_native","_options","_construct","defaultOptions","carbonZoneKey","fallback","ignore","placement","prefix","targetClass","zone","jsonUrl","srv","getElementsByTagName","carbon","sanitize","ads","ad","pixel","timestamp","c","_native_go","json","selectedClass","querySelectorAll","selectedTarget","innerHTML","adElement","adInnerHtml","Event","bubbles","cancelable","eventPhase","timeStamp","getTime","propagationStopped","immediatePropagationStopped","stopImmediatePropagation","clone","EventDispatcher","_listeners","_captureListeners","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","listeners","scope","handleEvent","evt","eventObj","captureListeners","DOMUtils","$","query","_childQuery","queryAll","removeClass","_runOnNodeList","re","classList","names","toggleClass","curValue","hasClass","swapClass","oldClass","newClass","getEl","togglePanel","openEl","closedEl","open","el1","el2","isOpen","transition","then","template","strings","getCSSValue","el","getPropertyValue","nodelist","Utils","prepMenuContent","idMap","__next_id","kids","findIndex","JSON","parse","stringify","searchRank","searchTest","access","keywords","description","author","label","desc","weight","htmlSafe","shorten","unescSubstStr","SUBST_ESC_RE","SUBST_ESC_CHARS","getRegExp","regex","decomposeRegEx","delim","flags","isMac","getCtrlKey","performance","getUrlParams","params","url","location","decodeURIComponent","deferIds","defer","getHashCode","hash","getPatternURL","isLocal","hostname","getPatternURLStr","getForkName","num","Tooltip","contentEl","tipEl","hideF","_showT","handleBodyClick","curId","autohide","hide","show","toggleOn","showOn","toggleEl","elStyle","opacity","pad","wh","ww","innerWidth","marginRight","Server","solve","req","_getRequest","flavor","communitySearch","_processPatternList","load","patternId","_processPattern","fork","community","_prepPattern","rate","rating","userRating","delete","favorite","private","setAccess","multiFavorite","ids","patternIds","login","service","logout","verify","patterns","results","dateAdded","tool","parentId","userId","tests","postprocess","XMLHttpRequest","ServerPromise","setRequestHeader","timeout","useBeta","encodeURIComponent","console","log","send","_req","_postprocess","_load","_error","cf","ff","_loadF","catch","_data","finally","_errorF","_err","_finallyF","_complete","abort","response","responseText","success","error","message","CMUtils","opts","enforceMaxLength","enforceSingleLine","getCharIndexAt","winX","winY","getCharRect","maxLength","calcRangePos","startPos","endPos","Track","GA_ID","page","path","gtag","category","event_category","event_label","List","multi","addItem","els","dataset","selectedIndex","selectedEl","selectedItem","item","handleClick","removeItem","scrollEl","ExpressionLexer","profile","_profile","errors","captureGroups","namedGroups","_modes","capgroups","namedgroups","brgroups","branchResetGroups","groups","refs","charset","prv","unquantifiable","charTypes","closeIndex","lastIndexOf","parseFlag","parseParen","depth","capture","addCaptureGroup","parseSquareBracket","clss","possessive","related","parseQuant","parseBackSlash","parseChar","curGroup","curGroupNum","inGroupNum","validateRange","addJSWarnings","addError","matchRefs","warning","brgroup","getRef","relIndex","indexes","sign","refToOctal","config","reftooctalalways","char","mergeNext","parseEscChar","ANCHOR_TYPES","posixcharclass","posixCharClasses","isCond","behind","negative","condition","namedgroupalt","parseMode","namedref","parseRef","unicodecat","parseUnicode","escsequence","escunicodeub","escunicodeu","escunicodexb","ctrlcodeerr","escoctalo","escCharTypes","escCharCodes","badEscChars","escchar","escChars","isRef","not","unicodeScripts","unicodeCategories","unicodenegated","supModes","errmode","substring","proxy","ExpressionHighlighter","_activeMarks","_hoverMarks","_hoverToken","marks","draw","CSS_PREFIX","groupClasses","GROUP_CLASS_BY_TYPE","endToken","_calcTokenPos","hoverToken","_drawSelect","setnot","lookaround","ExpressionHover","editor","highlighter","isMouseDown","_handleMouseMove","_handleMouseOut","_handleMouseDown","app","tooltip","hover","reference","tipForToken","core","reduce","substTokens","docs","pcre","browser","expr","flag","testFlag","unicodeFlag","stickyFlag","dotallFlag","lookbehind","namedgroup","javascript","notunicodecat","unicodescript","notunicodescript","profiles","merge","js","p1","p2","Expression","lexer","_initUI","_onFlavorChange","expression","DEFAULT_EXPRESSION","_deferUpdate","validateFlagsStr","showFlags","flagsList","flagsEl","flagsBtn","toggleFlag","showFlavors","flavorEl","flavorBtn","editorEl","singleLine","_onEditorMouseDown","_onEditorChange","_onEditorKeyDown","errorEl","_onMouseError","_setInitialExpression","_initTooltips","_update","flavorData","flavorList","_onFlavorListChange","sidebar","goto","_onFlagListChange","innerText","supported","FLAGS","labels","FLAG_LABELS","tt","errs","getError","UID","_next","TextHighlighter","canvas","fill","stroke","lineSpacing","capWidth","lastBottom","lastRight","_matches","hoverMatch","_hoverMatch","selectedMatch","_selectedMatch","redraw","getContext","fillStyle","strokeStyle","lineWidth","emphasis","startRect","endRect","drawHighlight","lw","startCap","endCap","capW","globalAlpha","fillRect","strokeRect","TextHover","_x","_y","getMatchAt","tip","tipForMatch","Text","_initTestUI","_setResult","_handleThemeChange","testsEl","_tests","testList","_testMatches","_reselectTest","modeList","_handleModeChange","getMatchValue","inclusive","_result","getEmptyTest","resultEl","_mouseResult","modeListEl","textEl","_change","_updateSelected","detector","win","contentWindow","onresize","_startResize","_handleResize","_updateTests","_updateEmptyCount","_updateResult","_emptyCount","_showResult","parseFloat","toFixed","_errorText","_testFails","i0","i1","typeLabels","testItemEl","testListEl","_testItemTemplate","_handleTestChange","_addTest","typesEl","typesList","_handleTypesChange","fails","pass","_updateSelTest","_testMark","testEditor","typeBtn","_showTypes","delBtn","_deleteTest","nameFld","_handleTestNameChange","_updateTestHeader","edit","typeLbl","_selTest","_getTestEditor","fld","_handleTestTextChange","Explain","_bound_handleEvent","_handleEvent","cleanup","_divs","set0","set2","_handleMouseEvent","_insertApplied","divs","insertAdjacentElement","_handleHoverChange","_findDiv","showToken","Details","_addMatch","textVal","matchVal","_getMatchVal","extStr","groupTokens","tableEl","matchEl","_getRangeStr","inGroups","inGroup","ge","tr","Replace","SubstLexer","capGroups","subst","parseDollar","subst_bsgroup","_getRef","$_TYPES","numStr","substdecomposeref","Tools","_toolValues","DEFAULT_VALUES","_toolId","hasInput","toolList","_tool","_updateHighlights","headerEl","_handleHeaderClick","toolListEl","_handleListChange","_handleEditorChange","home","LinkRow","_pattern","showMessage","onclick","_onClick","copyBtn","Example","ex","example","_example","exp","CommunityContent","_rate","_favorite","linkRow","_share","_updateRating","_updateFavorite","_handleRate","share","_handleFavorite","Status","_showTooltip","_hideTooltip","distract","_show","_clearTimeout","_timeoutId","_hide","msg","_ttMsg","Account","_value","_updateUI","username","authenticated","showTooltip","tooltipEl","signinBtn","signinEl","signoutEl","_doSignout","signinList","_signinListChange","auth","_handleSignout","_cleanSignout","Share","_handleAppChange","_handleAppLoad","account","_handleAccountChange","_pushHistory","hNameFld","authorFld","descriptionFld","keywordsFld","mainEl","comEl","communityEl","hEl","hNewBtn","hForkBtn","hSaveBtn","_doSave","_doNew","_defaultName","_privateRow","_doPrivate","_privateStatus","_favoritesRow","_doFavorite","_favoritesStatus","_communityRow","_showCommunity","_deleteRow","_doDelete","_deleteStatus","_doSignin","_linkRow","saveEl","saveBtn","forkBtn","saveStatus","saveMessage","infoEl","_handleChange","comInputsEl","_doComSave","comSaveStatus","_comNameFld","_comAuthorFld","_comDescriptionFld","_comKeywordsFld","_handleKey","isChanged","_isChanged","isNew","_isNew","isOwned","_isOwned","_canFork","_canSave","_setSaveText","unsaved","replaceState","pushState","_handleSave","_handleSaveErr","isFork","_getErrMsg","newDoc","_handlePrivate","_handleErr","confirm","_handleDelete","status","_handleComSave","_handleComSaveErr","acc","rowEl","Sidebar","itemEl","openReq","_content","_prepContent","minList","prefs","_idMap","isNarrow","minimize","track","_minimized","idForToken","_isInReference","write","searchMode","curItem","selItem","menuList","_showContent","_resetFull","titleEl","_showEl","fullEl","communityListTemplate","_onSearchSubmit","_loadFavorites","back","menuListTemplate","searchEl","searchFld","_onSearchChange","searchBtn","listEl","lastId","_onDblClick","minEl","Community","_prepCheatsheet","_abortReq","ref","getContent","fillTags","_isIn","_searchReference","_searchFavorites","rank","search_term","_showListMsg","_showServerResults","_reqCleanup","Theme","urlTemplate","targetNode","_node","_dark","dark","themeBtn","_toggleTheme","_id","tmpl","href","Reference","_config","_flavor","_flavorChange","_injectEscChars","_misc","misc","searchStr","srch","kid","points","__searchPoints","errId","getChar","chr","NONPRINTING_CHARS","getQuant","getUniCat","UNICODE_CATEGORIES","getModes","getInsensitive","getDotAll","getLabel","getNodeForToken","getDesc","getVal","getLazy","U","getLazyFew","getPHPVersion","PHPVersion","getPCREVersion","PCREVersion","getEscChars","functs","safe","match2","pDocs","getDocs","pRef","getNode","more","_updateHide","isTokenSupported","chars","_getEscCharDocs","reference_content","groupopen","groupclose","setopen","rangerev","quanttarg","quantrev","esccharopen","esccharbad","unicodebad","posixcharclassbad","posixcharclassnoset","notsupported","fwdslash","servercomm","extraelse","unmatchedref","modebad","badname","dupname","branchreseterr","jsfuture","infinite","BrowserSolver","workerBlob","Blob","_workerObjectURL","URL","createObjectURL","_callback","_regex","_onRegExComplete","Worker","worker","onmessage","_startTime","terminate","postMessage","_getReplace","_getList","repl","trimR","ServerSolver","_serverPromise","_solve","_onLoad","_onError","Flavor","_browserSolver","_serverSolver","_buildSupportMap","solver","_supportMap","validateFlags","dupes","isFlagSupported","SUPPORT_MAP_PROPS","_addToSupportMap","esc","rev","RefCoverage","undoc","unused","all","subst_$group","subst_$bgroup","Prefs","_save","cookie","unescape","escape","RegExr","_migrateFavorites","_localInit","_savedHash","engine","tools","onbeforeunload","resetUnsaved","_initAds","_matchList","warn","getElementById","matchMedia","addListener","q","docEl","_modeChange","ls","localStorage","getItem","setItem","_handleResult","_processResult"],"mappings":"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"}